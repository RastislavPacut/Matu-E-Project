"use strict";(self.webpackChunkangular_school_project=self.webpackChunkangular_school_project||[]).push([[179],{217:(oo,Gn,$e)=>{$e.d(Gn,{$:()=>Jg,A:()=>pe,C:()=>dE,G:()=>kt,K:()=>rE,L:()=>wa,N:()=>ur,P:()=>ku,R:()=>I_,U:()=>Ae,V:()=>rf,W:()=>mu,X:()=>Tr,Y:()=>po,Z:()=>dr,_:()=>Ta,a:()=>vo,a0:()=>lf,a1:()=>bu,a2:()=>pf,a3:()=>i_,a4:()=>cE,a5:()=>ui,a6:()=>Aa,a7:()=>r_,a8:()=>zl,a9:()=>uE,aA:()=>dt,aB:()=>jt,aC:()=>he,aD:()=>bo,aE:()=>ee,aF:()=>We,aG:()=>Jl,aH:()=>A_,aI:()=>La,aJ:()=>vn,aN:()=>Fn,aQ:()=>No,aa:()=>Ce,ab:()=>ln,ac:()=>Hr,ad:()=>Ii,ae:()=>Sa,af:()=>nt,ag:()=>o_,ah:()=>Nn,ak:()=>$l,al:()=>is,am:()=>Fo,ap:()=>e_,aq:()=>ql,as:()=>WS,at:()=>YS,au:()=>rn,av:()=>De,aw:()=>z,ax:()=>mt,ay:()=>Ba,az:()=>P_,b:()=>fE,c:()=>os,d:()=>D_,e:()=>TE,f:()=>AE,g:()=>fi,h:()=>Mt,i:()=>Ru,j:()=>yo,k:()=>z_,l:()=>IE,m:()=>UE,o:()=>lR,p:()=>Jt,r:()=>xE,s:()=>x_,u:()=>en});var C=$e(861),J=$e(58),L=$e(534),Ne=$e(879),yt=$e(582),fn=$e(537);const Jt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},pe={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const kt=function Oe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Zn=function ot(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},bt=new J.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Je=new Ne.Yd("@firebase/auth");function pn(f,...u){Je.logLevel<=Ne.in.ERROR&&Je.error(`Auth (${L.SDK_VERSION}): ${f}`,...u)}function mt(f,...u){throw lt(f,...u)}function jt(f,...u){return lt(f,...u)}function nr(f,u,d){const m=Object.assign(Object.assign({},Zn()),{[u]:d});return new J.LL("auth","Firebase",m).create(u,{appName:f.name})}function Vn(f,u,d){if(!(u instanceof d))throw d.name!==u.constructor.name&&mt(f,"argument-error"),nr(f,"argument-error",`Type of ${u.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function lt(f,...u){if("string"!=typeof f){const d=u[0],m=[...u.slice(1)];return m[0]&&(m[0].appName=f.name),f._errorFactory.create(d,...m)}return bt.create(f,...u)}function he(f,u,...d){if(!f)throw lt(u,...d)}function xt(f){const u="INTERNAL ASSERTION FAILED: "+f;throw pn(u),new Error(u)}function rn(f,u){f||xt(u)}function Tn(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function Pn(){return"http:"===Vr()||"https:"===Vr()}function Vr(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class ir{constructor(u,d){this.shortDelay=u,this.longDelay=d,rn(d>u,"Short delay should be less than long delay!"),this.isMobile=(0,J.uI)()||(0,J.b$)()}get(){return function Br(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Pn()||(0,J.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function so(f,u){rn(f.emulator,"Emulator should always be set here");const{url:d}=f.emulator;return u?`${d}${u.startsWith("/")?u.slice(1):u}`:d}class Q{static initialize(u,d,m){this.fetchImpl=u,d&&(this.headersImpl=d),m&&(this.responseImpl=m)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void xt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void xt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void xt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const X={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},H=new ir(3e4,6e4);function G(f,u){return f.tenantId&&!u.tenantId?Object.assign(Object.assign({},u),{tenantId:f.tenantId}):u}function ae(f,u,d,m){return se.apply(this,arguments)}function se(){return(se=(0,C.Z)(function*(f,u,d,m,v={}){return ye(f,v,(0,C.Z)(function*(){let w={},N={};m&&("GET"===u?N=m:w={body:JSON.stringify(m)});const K=(0,J.xO)(Object.assign({key:f.config.apiKey},N)).slice(1),ue=yield f._getAdditionalHeaders();return ue["Content-Type"]="application/json",f.languageCode&&(ue["X-Firebase-Locale"]=f.languageCode),Q.fetch()(Ct(f,f.config.apiHost,d,K),Object.assign({method:u,headers:ue,referrerPolicy:"no-referrer"},w))}))})).apply(this,arguments)}function ye(f,u,d){return pt.apply(this,arguments)}function pt(){return(pt=(0,C.Z)(function*(f,u,d){f._canInitEmulator=!1;const m=Object.assign(Object.assign({},X),u);try{const v=new Zt(f),w=yield Promise.race([d(),v.promise]);v.clearNetworkTimeout();const N=yield w.json();if("needConfirmation"in N)throw mn(f,"account-exists-with-different-credential",N);if(w.ok&&!("errorMessage"in N))return N;{const K=w.ok?N.errorMessage:N.error.message,[ue,Se]=K.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ue)throw mn(f,"credential-already-in-use",N);if("EMAIL_EXISTS"===ue)throw mn(f,"email-already-in-use",N);if("USER_DISABLED"===ue)throw mn(f,"user-disabled",N);const ze=m[ue]||ue.toLowerCase().replace(/[_\s]+/g,"-");if(Se)throw nr(f,ze,Se);mt(f,ze)}}catch(v){if(v instanceof J.ZR)throw v;mt(f,"network-request-failed",{message:String(v)})}})).apply(this,arguments)}function be(f,u,d,m){return je.apply(this,arguments)}function je(){return(je=(0,C.Z)(function*(f,u,d,m,v={}){const w=yield ae(f,u,d,m,v);return"mfaPendingCredential"in w&&mt(f,"multi-factor-auth-required",{_serverResponse:w}),w})).apply(this,arguments)}function Ct(f,u,d,m){const v=`${u}${d}?${m}`;return f.config.emulator?so(f.config,v):`${f.config.apiScheme}://${v}`}function sn(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Zt{constructor(u){this.auth=u,this.timer=null,this.promise=new Promise((d,m)=>{this.timer=setTimeout(()=>m(jt(this.auth,"network-request-failed")),H.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function mn(f,u,d){const m={appName:f.name};d.email&&(m.email=d.email),d.phoneNumber&&(m.phoneNumber=d.phoneNumber);const v=jt(f,u,m);return v.customData._tokenResponse=d,v}function Qn(f){return void 0!==f&&void 0!==f.getResponse}function Yn(f){return void 0!==f&&void 0!==f.enterprise}class li{constructor(u){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===u.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=u.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=u.recaptchaEnforcementState}getProviderEnforcementState(u){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===u)return sn(d.enforcementState);return null}isProviderEnabled(u){return"ENFORCE"===this.getProviderEnforcementState(u)||"AUDIT"===this.getProviderEnforcementState(u)}}function Ur(){return(Ur=(0,C.Z)(function*(f){return(yield ae(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ao(f,u){return Et.apply(this,arguments)}function Et(){return(Et=(0,C.Z)(function*(f,u){return ae(f,"GET","/v2/recaptchaConfig",G(f,u))})).apply(this,arguments)}function co(){return(co=(0,C.Z)(function*(f,u){return ae(f,"POST","/v1/accounts:delete",u)})).apply(this,arguments)}function zr(){return(zr=(0,C.Z)(function*(f,u){return ae(f,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function rr(){return(rr=(0,C.Z)(function*(f,u){return ae(f,"POST","/v1/accounts:lookup",u)})).apply(this,arguments)}function or(f){if(f)try{const u=new Date(Number(f));if(!isNaN(u.getTime()))return u.toUTCString()}catch{}}function Ut(){return(Ut=(0,C.Z)(function*(f,u=!1){const d=(0,J.m9)(f),m=yield d.getIdToken(u),v=kn(m);he(v&&v.exp&&v.auth_time&&v.iat,d.auth,"internal-error");const w="object"==typeof v.firebase?v.firebase:void 0,N=w?.sign_in_provider;return{claims:v,token:m,authTime:or(ar(v.auth_time)),issuedAtTime:or(ar(v.iat)),expirationTime:or(ar(v.exp)),signInProvider:N||null,signInSecondFactor:w?.sign_in_second_factor||null}})).apply(this,arguments)}function ar(f){return 1e3*Number(f)}function kn(f){const[u,d,m]=f.split(".");if(void 0===u||void 0===d||void 0===m)return pn("JWT malformed, contained fewer than 3 sections"),null;try{const v=(0,J.tV)(d);return v?JSON.parse(v):(pn("Failed to decode base64 JWT payload"),null)}catch(v){return pn("Caught error parsing JWT payload as JSON",v?.toString()),null}}function gn(f,u){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,C.Z)(function*(f,u,d=!1){if(d)return u;try{return yield u}catch(m){throw m instanceof J.ZR&&function uo({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(m)&&f.auth.currentUser===f&&(yield f.auth.signOut()),m}})).apply(this,arguments)}class ho{constructor(u){this.user=u,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(u){var d;if(u){const m=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),m}{this.errorBackoff=3e4;const v=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,v)}}schedule(u=!1){var d=this;if(!this.isRunning)return;const m=this.getInterval(u);this.timerId=setTimeout((0,C.Z)(function*(){yield d.iteration()}),m)}iteration(){var u=this;return(0,C.Z)(function*(){try{yield u.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&u.schedule(!0))}u.schedule()})()}}class $r{constructor(u,d){this.createdAt=u,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=or(this.lastLoginAt),this.creationTime=or(this.createdAt)}_copy(u){this.createdAt=u.createdAt,this.lastLoginAt=u.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Xn(f){return Bn.apply(this,arguments)}function Bn(){return Bn=(0,C.Z)(function*(f){var u;const d=f.auth,m=yield f.getIdToken(),v=yield gn(f,function yi(f,u){return rr.apply(this,arguments)}(d,{idToken:m}));he(v?.users.length,d,"internal-error");const w=v.users[0];f._notifyReloadListener(w);const N=null!==(u=w.providerUserInfo)&&void 0!==u&&u.length?function Qo(f){return f.map(u=>{var{providerId:d}=u,m=(0,yt._T)(u,["providerId"]);return{providerId:d,uid:m.rawId||"",displayName:m.displayName||null,email:m.email||null,phoneNumber:m.phoneNumber||null,photoURL:m.photoUrl||null}})}(w.providerUserInfo):[],K=function Ea(f,u){return[...f.filter(m=>!u.some(v=>v.providerId===m.providerId)),...u]}(f.providerData,N),ze=!!f.isAnonymous&&!(f.email&&w.passwordHash||K?.length),It={uid:w.localId,displayName:w.displayName||null,photoURL:w.photoUrl||null,email:w.email||null,emailVerified:w.emailVerified||!1,phoneNumber:w.phoneNumber||null,tenantId:w.tenantId||null,providerData:K,metadata:new $r(w.createdAt,w.lastLoginAt),isAnonymous:ze};Object.assign(f,It)}),Bn.apply(this,arguments)}function lr(){return(lr=(0,C.Z)(function*(f){const u=(0,J.m9)(f);yield Xn(u),yield u.auth._persistUserIfCurrent(u),u.auth._notifyListenersIfCurrent(u)})).apply(this,arguments)}function fo(){return(fo=(0,C.Z)(function*(f,u){const d=yield ye(f,{},(0,C.Z)(function*(){const m=(0,J.xO)({grant_type:"refresh_token",refresh_token:u}).slice(1),{tokenApiHost:v,apiKey:w}=f.config,N=Ct(f,v,"/v1/token",`key=${w}`),K=yield f._getAdditionalHeaders();return K["Content-Type"]="application/x-www-form-urlencoded",Q.fetch()(N,{method:"POST",headers:K,body:m})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function D(){return(D=(0,C.Z)(function*(f,u){return ae(f,"POST","/v2/accounts:revokeToken",G(f,u))})).apply(this,arguments)}class b{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(u){he(u.idToken,"internal-error"),he(typeof u.idToken<"u","internal-error"),he(typeof u.refreshToken<"u","internal-error");const d="expiresIn"in u&&typeof u.expiresIn<"u"?Number(u.expiresIn):function Ll(f){const u=kn(f);return he(u,"internal-error"),he(typeof u.exp<"u","internal-error"),he(typeof u.iat<"u","internal-error"),Number(u.exp)-Number(u.iat)}(u.idToken);this.updateTokensAndExpiration(u.idToken,u.refreshToken,d)}getToken(u,d=!1){var m=this;return(0,C.Z)(function*(){return he(!m.accessToken||m.refreshToken,u,"user-token-expired"),d||!m.accessToken||m.isExpired?m.refreshToken?(yield m.refresh(u,m.refreshToken),m.accessToken):null:m.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(u,d){var m=this;return(0,C.Z)(function*(){const{accessToken:v,refreshToken:w,expiresIn:N}=yield function ks(f,u){return fo.apply(this,arguments)}(u,d);m.updateTokensAndExpiration(v,w,Number(N))})()}updateTokensAndExpiration(u,d,m){this.refreshToken=d||null,this.accessToken=u||null,this.expirationTime=Date.now()+1e3*m}static fromJSON(u,d){const{refreshToken:m,accessToken:v,expirationTime:w}=d,N=new b;return m&&(he("string"==typeof m,"internal-error",{appName:u}),N.refreshToken=m),v&&(he("string"==typeof v,"internal-error",{appName:u}),N.accessToken=v),w&&(he("number"==typeof w,"internal-error",{appName:u}),N.expirationTime=w),N}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(u){this.accessToken=u.accessToken,this.refreshToken=u.refreshToken,this.expirationTime=u.expirationTime}_clone(){return Object.assign(new b,this.toJSON())}_performRefresh(){return xt("not implemented")}}function I(f,u){he("string"==typeof f||typeof f>"u","internal-error",{appName:u})}class y{constructor(u){var{uid:d,auth:m,stsTokenManager:v}=u,w=(0,yt._T)(u,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ho(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=m,this.stsTokenManager=v,this.accessToken=v.accessToken,this.displayName=w.displayName||null,this.email=w.email||null,this.emailVerified=w.emailVerified||!1,this.phoneNumber=w.phoneNumber||null,this.photoURL=w.photoURL||null,this.isAnonymous=w.isAnonymous||!1,this.tenantId=w.tenantId||null,this.providerData=w.providerData?[...w.providerData]:[],this.metadata=new $r(w.createdAt||void 0,w.lastLoginAt||void 0)}getIdToken(u){var d=this;return(0,C.Z)(function*(){const m=yield gn(d,d.stsTokenManager.getToken(d.auth,u));return he(m,d.auth,"internal-error"),d.accessToken!==m&&(d.accessToken=m,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),m})()}getIdTokenResult(u){return function ci(f){return Ut.apply(this,arguments)}(this,u)}reload(){return function bi(f){return lr.apply(this,arguments)}(this)}_assign(u){this!==u&&(he(this.uid===u.uid,this.auth,"internal-error"),this.displayName=u.displayName,this.photoURL=u.photoURL,this.email=u.email,this.emailVerified=u.emailVerified,this.phoneNumber=u.phoneNumber,this.isAnonymous=u.isAnonymous,this.tenantId=u.tenantId,this.providerData=u.providerData.map(d=>Object.assign({},d)),this.metadata._copy(u.metadata),this.stsTokenManager._assign(u.stsTokenManager))}_clone(u){const d=new y(Object.assign(Object.assign({},this),{auth:u,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(u){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=u,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(u){this.reloadListener?this.reloadListener(u):this.reloadUserInfo=u}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(u,d=!1){var m=this;return(0,C.Z)(function*(){let v=!1;u.idToken&&u.idToken!==m.stsTokenManager.accessToken&&(m.stsTokenManager.updateFromServerResponse(u),v=!0),d&&(yield Xn(m)),yield m.auth._persistUserIfCurrent(m),v&&m.auth._notifyListenersIfCurrent(m)})()}delete(){var u=this;return(0,C.Z)(function*(){const d=yield u.getIdToken();return yield gn(u,function lo(f,u){return co.apply(this,arguments)}(u.auth,{idToken:d})),u.stsTokenManager.clearRefreshToken(),u.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(u=>Object.assign({},u)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(u,d){var m,v,w,N,K,ue,Se,ze;const It=null!==(m=d.displayName)&&void 0!==m?m:void 0,Li=null!==(v=d.email)&&void 0!==v?v:void 0,Bo=null!==(w=d.phoneNumber)&&void 0!==w?w:void 0,rc=null!==(N=d.photoURL)&&void 0!==N?N:void 0,H_=null!==(K=d.tenantId)&&void 0!==K?K:void 0,za=null!==(ue=d._redirectEventId)&&void 0!==ue?ue:void 0,as=null!==(Se=d.createdAt)&&void 0!==Se?Se:void 0,q_=null!==(ze=d.lastLoginAt)&&void 0!==ze?ze:void 0,{uid:Wu,emailVerified:qf,isAnonymous:$a,providerData:Wf,stsTokenManager:Ci}=d;he(Wu&&Ci,u,"internal-error");const HE=b.fromJSON(this.name,Ci);he("string"==typeof Wu,u,"internal-error"),I(It,u.name),I(Li,u.name),he("boolean"==typeof qf,u,"internal-error"),he("boolean"==typeof $a,u,"internal-error"),I(Bo,u.name),I(rc,u.name),I(H_,u.name),I(za,u.name),I(as,u.name),I(q_,u.name);const Jn=new y({uid:Wu,auth:u,email:Li,emailVerified:qf,displayName:It,isAnonymous:$a,photoURL:rc,phoneNumber:Bo,tenantId:H_,stsTokenManager:HE,createdAt:as,lastLoginAt:q_});return Wf&&Array.isArray(Wf)&&(Jn.providerData=Wf.map(Gf=>Object.assign({},Gf))),za&&(Jn._redirectEventId=za),Jn}static _fromIdTokenResponse(u,d,m=!1){return(0,C.Z)(function*(){const v=new b;v.updateFromServerResponse(d);const w=new y({uid:d.localId,auth:u,stsTokenManager:v,isAnonymous:m});return yield Xn(w),w})()}}const S=new Map;function ee(f){rn(f instanceof Function,"Expected a class definition");let u=S.get(f);return u?(rn(u instanceof f,"Instance stored in cache mismatched with class"),u):(u=new f,S.set(f,u),u)}const Ae=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,C.Z)(function*(){return!0})()}_set(d,m){var v=this;return(0,C.Z)(function*(){v.storage[d]=m})()}_get(d){var m=this;return(0,C.Z)(function*(){const v=m.storage[d];return void 0===v?null:v})()}_remove(d){var m=this;return(0,C.Z)(function*(){delete m.storage[d]})()}_addListener(d,m){}_removeListener(d,m){}}return f.type="NONE",f})();function We(f,u,d){return`firebase:${f}:${u}:${d}`}class Rt{constructor(u,d,m){this.persistence=u,this.auth=d,this.userKey=m;const{config:v,name:w}=this.auth;this.fullUserKey=We(this.userKey,v.apiKey,w),this.fullPersistenceKey=We("persistence",v.apiKey,w),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(u){return this.persistence._set(this.fullUserKey,u.toJSON())}getCurrentUser(){var u=this;return(0,C.Z)(function*(){const d=yield u.persistence._get(u.fullUserKey);return d?y._fromJSON(u.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(u){var d=this;return(0,C.Z)(function*(){if(d.persistence===u)return;const m=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=u,m?d.setCurrentUser(m):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(u,d,m="authUser"){return(0,C.Z)(function*(){if(!d.length)return new Rt(ee(Ae),u,m);const v=(yield Promise.all(d.map(function(){var Se=(0,C.Z)(function*(ze){if(yield ze._isAvailable())return ze});return function(ze){return Se.apply(this,arguments)}}()))).filter(Se=>Se);let w=v[0]||ee(Ae);const N=We(m,u.config.apiKey,u.name);let K=null;for(const Se of d)try{const ze=yield Se._get(N);if(ze){const It=y._fromJSON(u,ze);Se!==w&&(K=It),w=Se;break}}catch{}const ue=v.filter(Se=>Se._shouldAllowMigration);return w._shouldAllowMigration&&ue.length?(w=ue[0],K&&(yield w._set(N,K.toJSON())),yield Promise.all(d.map(function(){var Se=(0,C.Z)(function*(ze){if(ze!==w)try{yield ze._remove(N)}catch{}});return function(ze){return Se.apply(this,arguments)}}())),new Rt(w,u,m)):new Rt(w,u,m)})()}}function Ie(f){const u=f.toLowerCase();if(u.includes("opera/")||u.includes("opr/")||u.includes("opios/"))return"Opera";if(Os(u))return"IEMobile";if(u.includes("msie")||u.includes("trident/"))return"IE";if(u.includes("edge/"))return"Edge";if(qt(u))return"Firefox";if(u.includes("silk/"))return"Silk";if(O(u))return"Blackberry";if(de(u))return"Webos";if(Le(u))return"Safari";if((u.includes("chrome/")||ri(u))&&!u.includes("edge/"))return"Chrome";if(z(u))return"Android";{const m=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===m?.length)return m[1]}return"Other"}function qt(f=(0,J.z$)()){return/firefox\//i.test(f)}function Le(f=(0,J.z$)()){const u=f.toLowerCase();return u.includes("safari/")&&!u.includes("chrome/")&&!u.includes("crios/")&&!u.includes("android")}function ri(f=(0,J.z$)()){return/crios\//i.test(f)}function Os(f=(0,J.z$)()){return/iemobile/i.test(f)}function z(f=(0,J.z$)()){return/android/i.test(f)}function O(f=(0,J.z$)()){return/blackberry/i.test(f)}function de(f=(0,J.z$)()){return/webos/i.test(f)}function De(f=(0,J.z$)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function dt(f=(0,J.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}function _n(f=(0,J.z$)()){return De(f)||z(f)||de(f)||O(f)||/windows phone/i.test(f)||Os(f)}function ht(f,u=[]){let d;switch(f){case"Browser":d=Ie((0,J.z$)());break;case"Worker":d=`${Ie((0,J.z$)())}-${f}`;break;default:d=f}const m=u.length?u.join(","):"FirebaseCore-web";return`${d}/JsCore/${L.SDK_VERSION}/${m}`}class Vl{constructor(u){this.auth=u,this.queue=[]}pushCallback(u,d){const m=w=>new Promise((N,K)=>{try{N(u(w))}catch(ue){K(ue)}});m.onAbort=d,this.queue.push(m);const v=this.queue.length-1;return()=>{this.queue[v]=()=>Promise.resolve()}}runMiddleware(u){var d=this;return(0,C.Z)(function*(){if(d.auth.currentUser===u)return;const m=[];try{for(const v of d.queue)yield v(u),v.onAbort&&m.push(v.onAbort)}catch(v){m.reverse();for(const w of m)try{w()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:v?.message})}})()}}function qh(){return(qh=(0,C.Z)(function*(f,u={}){return ae(f,"GET","/v2/passwordPolicy",G(f,u))})).apply(this,arguments)}class cr{constructor(u){var d,m,v,w;const N=u.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=N.minPasswordLength)&&void 0!==d?d:6,N.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=N.maxPasswordLength),void 0!==N.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=N.containsLowercaseCharacter),void 0!==N.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=N.containsUppercaseCharacter),void 0!==N.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=N.containsNumericCharacter),void 0!==N.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=N.containsNonAlphanumericCharacter),this.enforcementState=u.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(v=null===(m=u.allowedNonAlphanumericCharacters)||void 0===m?void 0:m.join(""))&&void 0!==v?v:"",this.forceUpgradeOnSignin=null!==(w=u.forceUpgradeOnSignin)&&void 0!==w&&w,this.schemaVersion=u.schemaVersion}validatePassword(u){var d,m,v,w,N,K;const ue={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(u,ue),this.validatePasswordCharacterOptions(u,ue),ue.isValid&&(ue.isValid=null===(d=ue.meetsMinPasswordLength)||void 0===d||d),ue.isValid&&(ue.isValid=null===(m=ue.meetsMaxPasswordLength)||void 0===m||m),ue.isValid&&(ue.isValid=null===(v=ue.containsLowercaseLetter)||void 0===v||v),ue.isValid&&(ue.isValid=null===(w=ue.containsUppercaseLetter)||void 0===w||w),ue.isValid&&(ue.isValid=null===(N=ue.containsNumericCharacter)||void 0===N||N),ue.isValid&&(ue.isValid=null===(K=ue.containsNonAlphanumericCharacter)||void 0===K||K),ue}validatePasswordLengthOptions(u,d){const m=this.customStrengthOptions.minPasswordLength,v=this.customStrengthOptions.maxPasswordLength;m&&(d.meetsMinPasswordLength=u.length>=m),v&&(d.meetsMaxPasswordLength=u.length<=v)}validatePasswordCharacterOptions(u,d){let m;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let v=0;v<u.length;v++)m=u.charAt(v),this.updatePasswordCharacterOptionsStatuses(d,m>="a"&&m<="z",m>="A"&&m<="Z",m>="0"&&m<="9",this.allowedNonAlphanumericCharacters.includes(m))}updatePasswordCharacterOptionsStatuses(u,d,m,v,w){this.customStrengthOptions.containsLowercaseLetter&&(u.containsLowercaseLetter||(u.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(u.containsUppercaseLetter||(u.containsUppercaseLetter=m)),this.customStrengthOptions.containsNumericCharacter&&(u.containsNumericCharacter||(u.containsNumericCharacter=v)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(u.containsNonAlphanumericCharacter||(u.containsNonAlphanumericCharacter=w))}}class VS{constructor(u,d,m,v){this.app=u,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=m,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eE(this),this.idTokenSubscription=new eE(this),this.beforeStateQueue=new Vl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=u.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(u,d){var m=this;return d&&(this._popupRedirectResolver=ee(d)),this._initializationPromise=this.queue((0,C.Z)(function*(){var v,w;if(!m._deleted&&(m.persistenceManager=yield Rt.create(m,u),!m._deleted)){if(null!==(v=m._popupRedirectResolver)&&void 0!==v&&v._shouldInitProactively)try{yield m._popupRedirectResolver._initialize(m)}catch{}yield m.initializeCurrentUser(d),m.lastNotifiedUid=(null===(w=m.currentUser)||void 0===w?void 0:w.uid)||null,!m._deleted&&(m._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var u=this;return(0,C.Z)(function*(){if(u._deleted)return;const d=yield u.assertedPersistence.getCurrentUser();if(u.currentUser||d){if(u.currentUser&&d&&u.currentUser.uid===d.uid)return u._currentUser._assign(d),void(yield u.currentUser.getIdToken());yield u._updateCurrentUser(d,!0)}})()}initializeCurrentUser(u){var d=this;return(0,C.Z)(function*(){var m;const v=yield d.assertedPersistence.getCurrentUser();let w=v,N=!1;if(u&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const K=null===(m=d.redirectUser)||void 0===m?void 0:m._redirectEventId,ue=w?._redirectEventId,Se=yield d.tryRedirectSignIn(u);(!K||K===ue)&&Se?.user&&(w=Se.user,N=!0)}if(!w)return d.directlySetCurrentUser(null);if(!w._redirectEventId){if(N)try{yield d.beforeStateQueue.runMiddleware(w)}catch(K){w=v,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(K))}return w?d.reloadAndSetCurrentUserOrClear(w):d.directlySetCurrentUser(null)}return he(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===w._redirectEventId?d.directlySetCurrentUser(w):d.reloadAndSetCurrentUserOrClear(w)})()}tryRedirectSignIn(u){var d=this;return(0,C.Z)(function*(){let m=null;try{m=yield d._popupRedirectResolver._completeRedirectFn(d,u,!0)}catch{yield d._setRedirectUser(null)}return m})()}reloadAndSetCurrentUserOrClear(u){var d=this;return(0,C.Z)(function*(){try{yield Xn(u)}catch(m){if("auth/network-request-failed"!==m?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(u)})()}useDeviceLanguage(){this.languageCode=function Ke(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var u=this;return(0,C.Z)(function*(){u._deleted=!0})()}updateCurrentUser(u){var d=this;return(0,C.Z)(function*(){const m=u?(0,J.m9)(u):null;return m&&he(m.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(m&&m._clone(d))})()}_updateCurrentUser(u,d=!1){var m=this;return(0,C.Z)(function*(){if(!m._deleted)return u&&he(m.tenantId===u.tenantId,m,"tenant-id-mismatch"),d||(yield m.beforeStateQueue.runMiddleware(u)),m.queue((0,C.Z)(function*(){yield m.directlySetCurrentUser(u),m.notifyAuthListeners()}))})()}signOut(){var u=this;return(0,C.Z)(function*(){return yield u.beforeStateQueue.runMiddleware(null),(u.redirectPersistenceManager||u._popupRedirectResolver)&&(yield u._setRedirectUser(null)),u._updateCurrentUser(null,!0)})()}setPersistence(u){var d=this;return this.queue((0,C.Z)(function*(){yield d.assertedPersistence.setPersistence(ee(u))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(u){var d=this;return(0,C.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const m=d._getPasswordPolicyInternal();return m.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):m.validatePassword(u)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var u=this;return(0,C.Z)(function*(){const d=yield function LS(f){return qh.apply(this,arguments)}(u),m=new cr(d);null===u.tenantId?u._projectPasswordPolicy=m:u._tenantPasswordPolicies[u.tenantId]=m})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(u){this._errorFactory=new J.LL("auth","Firebase",u())}onAuthStateChanged(u,d,m){return this.registerStateListener(this.authStateSubscription,u,d,m)}beforeAuthStateChanged(u,d){return this.beforeStateQueue.pushCallback(u,d)}onIdTokenChanged(u,d,m){return this.registerStateListener(this.idTokenSubscription,u,d,m)}authStateReady(){return new Promise((u,d)=>{if(this.currentUser)u();else{const m=this.onAuthStateChanged(()=>{m(),u()},d)}})}revokeAccessToken(u){var d=this;return(0,C.Z)(function*(){if(d.currentUser){const m=yield d.currentUser.getIdToken(),v={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:u,idToken:m};null!=d.tenantId&&(v.tenantId=d.tenantId),yield function R(f,u){return D.apply(this,arguments)}(d,v)}})()}toJSON(){var u;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(u=this._currentUser)||void 0===u?void 0:u.toJSON()}}_setRedirectUser(u,d){var m=this;return(0,C.Z)(function*(){const v=yield m.getOrInitRedirectPersistenceManager(d);return null===u?v.removeCurrentUser():v.setCurrentUser(u)})()}getOrInitRedirectPersistenceManager(u){var d=this;return(0,C.Z)(function*(){if(!d.redirectPersistenceManager){const m=u&&ee(u)||d._popupRedirectResolver;he(m,d,"argument-error"),d.redirectPersistenceManager=yield Rt.create(d,[ee(m._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(u){var d=this;return(0,C.Z)(function*(){var m,v;return d._isInitialized&&(yield d.queue((0,C.Z)(function*(){}))),(null===(m=d._currentUser)||void 0===m?void 0:m._redirectEventId)===u?d._currentUser:(null===(v=d.redirectUser)||void 0===v?void 0:v._redirectEventId)===u?d.redirectUser:null})()}_persistUserIfCurrent(u){var d=this;return(0,C.Z)(function*(){if(u===d.currentUser)return d.queue((0,C.Z)(function*(){return d.directlySetCurrentUser(u)}))})()}_notifyListenersIfCurrent(u){u===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var u,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const m=null!==(d=null===(u=this.currentUser)||void 0===u?void 0:u.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==m&&(this.lastNotifiedUid=m,this.authStateSubscription.next(this.currentUser))}registerStateListener(u,d,m,v){if(this._deleted)return()=>{};const w="function"==typeof d?d:d.next.bind(d);let N=!1;const K=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(K,this,"internal-error"),K.then(()=>{N||w(this.currentUser)}),"function"==typeof d){const ue=u.addObserver(d,m,v);return()=>{N=!0,ue()}}{const ue=u.addObserver(d);return()=>{N=!0,ue()}}}directlySetCurrentUser(u){var d=this;return(0,C.Z)(function*(){d.currentUser&&d.currentUser!==u&&d._currentUser._stopProactiveRefresh(),u&&d.isProactiveRefreshEnabled&&u._startProactiveRefresh(),d.currentUser=u,u?yield d.assertedPersistence.setCurrentUser(u):yield d.assertedPersistence.removeCurrentUser()})()}queue(u){return this.operations=this.operations.then(u,u),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(u){!u||this.frameworks.includes(u)||(this.frameworks.push(u),this.frameworks.sort(),this.clientVersion=ht(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var u=this;return(0,C.Z)(function*(){var d;const m={"X-Client-Version":u.clientVersion};u.app.options.appId&&(m["X-Firebase-gmpid"]=u.app.options.appId);const v=yield null===(d=u.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();v&&(m["X-Firebase-Client"]=v);const w=yield u._getAppCheckToken();return w&&(m["X-Firebase-AppCheck"]=w),m})()}_getAppCheckToken(){var u=this;return(0,C.Z)(function*(){var d;const m=yield null===(d=u.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return m?.error&&function Kn(f,...u){Je.logLevel<=Ne.in.WARN&&Je.warn(`Auth (${L.SDK_VERSION}): ${f}`,...u)}(`Error while retrieving App Check token: ${m.error}`),m?.token})()}}function vn(f){return(0,J.m9)(f)}class eE{constructor(u){this.auth=u,this.observer=null,this.addObserver=(0,J.ne)(d=>this.observer=d)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Hg(f){return new Promise((u,d)=>{const m=document.createElement("script");m.setAttribute("src",f),m.onload=u,m.onerror=v=>{const w=jt("internal-error");w.customData=v,d(w)},m.type="text/javascript",m.charset="UTF-8",function Ns(){var f,u;return null!==(u=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==u?u:document}().appendChild(m)})}function tE(f){return`__${f}${Math.floor(1e6*Math.random())}`}class iE{constructor(u){this.type="recaptcha-enterprise",this.auth=vn(u)}verify(u="verify",d=!1){var m=this;return(0,C.Z)(function*(){function w(){return w=(0,C.Z)(function*(K){if(!d){if(null==K.tenantId&&null!=K._agentRecaptchaConfig)return K._agentRecaptchaConfig.siteKey;if(null!=K.tenantId&&void 0!==K._tenantRecaptchaConfigs[K.tenantId])return K._tenantRecaptchaConfigs[K.tenantId].siteKey}return new Promise(function(){var ue=(0,C.Z)(function*(Se,ze){ao(K,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(It=>{if(void 0!==It.recaptchaKey){const Li=new li(It);return null==K.tenantId?K._agentRecaptchaConfig=Li:K._tenantRecaptchaConfigs[K.tenantId]=Li,Se(Li.siteKey)}ze(new Error("recaptcha Enterprise site key undefined"))}).catch(It=>{ze(It)})});return function(Se,ze){return ue.apply(this,arguments)}}())}),w.apply(this,arguments)}function N(K,ue,Se){const ze=window.grecaptcha;Yn(ze)?ze.enterprise.ready(()=>{ze.enterprise.execute(K,{action:u}).then(It=>{ue(It)}).catch(()=>{ue("NO_RECAPTCHA")})}):Se(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((K,ue)=>{(function v(K){return w.apply(this,arguments)})(m.auth).then(Se=>{if(!d&&Yn(window.grecaptcha))N(Se,K,ue);else{if(typeof window>"u")return void ue(new Error("RecaptchaVerifier is only supported in browser"));Hg("https://www.google.com/recaptcha/enterprise.js?render="+Se).then(()=>{N(Se,K,ue)}).catch(ze=>{ue(ze)})}}).catch(Se=>{ue(Se)})})})()}}function qg(f,u,d){return Wg.apply(this,arguments)}function Wg(){return(Wg=(0,C.Z)(function*(f,u,d,m=!1){const v=new iE(f);let w;try{w=yield v.verify(d)}catch{w=yield v.verify(d,!0)}const N=Object.assign({},u);return Object.assign(N,m?{captchaResp:w}:{captchaResponse:w}),Object.assign(N,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(N,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),N})).apply(this,arguments)}function Ei(f,u,d,m){return Ge.apply(this,arguments)}function Ge(){return Ge=(0,C.Z)(function*(f,u,d,m){var v;if(null!==(v=f._getRecaptchaConfig())&&void 0!==v&&v.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const w=yield qg(f,u,d,"getOobCode"===d);return m(f,w)}return m(f,u).catch(function(){var w=(0,C.Z)(function*(N){if("auth/missing-recaptcha-token"===N.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const K=yield qg(f,u,d,"getOobCode"===d);return m(f,K)}return Promise.reject(N)});return function(N){return w.apply(this,arguments)}}())}),Ge.apply(this,arguments)}function rE(f,u,d){const m=vn(f);he(m._canInitEmulator,m,"emulator-config-failed"),he(/^https?:\/\//.test(u),m,"invalid-emulator-scheme");const v=!!d?.disableWarnings,w=Tt(u),{host:N,port:K}=function su(f){const u=Tt(f),d=/(\/\/)?([^?#/]+)/.exec(f.substr(u.length));if(!d)return{host:"",port:null};const m=d[2].split("@").pop()||"",v=/^(\[[^\]]+\])(:|$)/.exec(m);if(v){const w=v[1];return{host:w,port:Zg(m.substr(w.length+1))}}{const[w,N]=m.split(":");return{host:w,port:Zg(N)}}}(u);m.config.emulator={url:`${w}//${N}${null===K?"":`:${K}`}/`},m.settings.appVerificationDisabledForTesting=!0,m.emulatorConfig=Object.freeze({host:N,port:K,protocol:w.replace(":",""),options:Object.freeze({disableWarnings:v})}),v||function Kg(){function f(){const u=document.createElement("p"),d=u.style;u.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",u.classList.add("firebase-emulator-warning"),document.body.appendChild(u)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}function Tt(f){const u=f.indexOf(":");return u<0?"":f.substr(0,u+1)}function Zg(f){if(!f)return null;const u=Number(f);return isNaN(u)?null:u}class wa{constructor(u,d){this.providerId=u,this.signInMethod=d}toJSON(){return xt("not implemented")}_getIdTokenResponse(u){return xt("not implemented")}_linkToIdToken(u,d){return xt("not implemented")}_getReauthenticationResolver(u){return xt("not implemented")}}function Bl(f,u){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,C.Z)(function*(f,u){return ae(f,"POST","/v1/accounts:resetPassword",G(f,u))})).apply(this,arguments)}function au(){return(au=(0,C.Z)(function*(f,u){return ae(f,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function oE(f,u){return ft.apply(this,arguments)}function ft(){return(ft=(0,C.Z)(function*(f,u){return ae(f,"POST","/v1/accounts:signUp",u)})).apply(this,arguments)}function lu(){return(lu=(0,C.Z)(function*(f,u){return ae(f,"POST","/v1/accounts:update",G(f,u))})).apply(this,arguments)}function Wi(f,u){return cu.apply(this,arguments)}function cu(){return(cu=(0,C.Z)(function*(f,u){return be(f,"POST","/v1/accounts:signInWithPassword",G(f,u))})).apply(this,arguments)}function Kh(f,u){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,C.Z)(function*(f,u){return ae(f,"POST","/v1/accounts:sendOobCode",G(f,u))})).apply(this,arguments)}function Qg(){return(Qg=(0,C.Z)(function*(f,u){return Kh(f,u)})).apply(this,arguments)}function re(f,u){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,C.Z)(function*(f,u){return Kh(f,u)})).apply(this,arguments)}function Qh(f,u){return uu.apply(this,arguments)}function uu(){return(uu=(0,C.Z)(function*(f,u){return Kh(f,u)})).apply(this,arguments)}function Xh(){return(Xh=(0,C.Z)(function*(f,u){return Kh(f,u)})).apply(this,arguments)}function Yg(){return(Yg=(0,C.Z)(function*(f,u){return be(f,"POST","/v1/accounts:signInWithEmailLink",G(f,u))})).apply(this,arguments)}function Xg(){return(Xg=(0,C.Z)(function*(f,u){return be(f,"POST","/v1/accounts:signInWithEmailLink",G(f,u))})).apply(this,arguments)}class du extends wa{constructor(u,d,m,v=null){super("password",m),this._email=u,this._password=d,this._tenantId=v}static _fromEmailAndPassword(u,d){return new du(u,d,"password")}static _fromEmailAndCode(u,d,m=null){return new du(u,d,"emailLink",m)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(u){var d=this;return(0,C.Z)(function*(){switch(d.signInMethod){case"password":return Ei(u,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Wi);case"emailLink":return function Jh(f,u){return Yg.apply(this,arguments)}(u,{email:d._email,oobCode:d._password});default:mt(u,"internal-error")}})()}_linkToIdToken(u,d){var m=this;return(0,C.Z)(function*(){switch(m.signInMethod){case"password":return Ei(u,{idToken:d,returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",oE);case"emailLink":return function HS(f,u){return Xg.apply(this,arguments)}(u,{idToken:d,email:m._email,oobCode:m._password});default:mt(u,"internal-error")}})()}_getReauthenticationResolver(u){return this._getIdTokenResponse(u)}}function Yo(f,u){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,C.Z)(function*(f,u){return be(f,"POST","/v1/accounts:signInWithIdp",G(f,u))})).apply(this,arguments)}class ur extends wa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(u){const d=new ur(u.providerId,u.signInMethod);return u.idToken||u.accessToken?(u.idToken&&(d.idToken=u.idToken),u.accessToken&&(d.accessToken=u.accessToken),u.nonce&&!u.pendingToken&&(d.nonce=u.nonce),u.pendingToken&&(d.pendingToken=u.pendingToken)):u.oauthToken&&u.oauthTokenSecret?(d.accessToken=u.oauthToken,d.secret=u.oauthTokenSecret):mt("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:m,signInMethod:v}=d,w=(0,yt._T)(d,["providerId","signInMethod"]);if(!m||!v)return null;const N=new ur(m,v);return N.idToken=w.idToken||void 0,N.accessToken=w.accessToken||void 0,N.secret=w.secret,N.nonce=w.nonce,N.pendingToken=w.pendingToken||null,N}_getIdTokenResponse(u){return Yo(u,this.buildRequest())}_linkToIdToken(u,d){const m=this.buildRequest();return m.idToken=d,Yo(u,m)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,Yo(u,d)}buildRequest(){const u={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)u.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),u.postBody=(0,J.xO)(d)}return u}}function tf(){return(tf=(0,C.Z)(function*(f,u){return ae(f,"POST","/v1/accounts:sendVerificationCode",G(f,u))})).apply(this,arguments)}function hu(){return(hu=(0,C.Z)(function*(f,u){return be(f,"POST","/v1/accounts:signInWithPhoneNumber",G(f,u))})).apply(this,arguments)}function nf(){return(nf=(0,C.Z)(function*(f,u){const d=yield be(f,"POST","/v1/accounts:signInWithPhoneNumber",G(f,u));if(d.temporaryProof)throw mn(f,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const Xo={USER_NOT_FOUND:"user-not-found"};function F(){return(F=(0,C.Z)(function*(f,u){return be(f,"POST","/v1/accounts:signInWithPhoneNumber",G(f,Object.assign(Object.assign({},u),{operation:"REAUTH"})),Xo)})).apply(this,arguments)}class Jo extends wa{constructor(u){super("phone","phone"),this.params=u}static _fromVerification(u,d){return new Jo({verificationId:u,verificationCode:d})}static _fromTokenResponse(u,d){return new Jo({phoneNumber:u,temporaryProof:d})}_getIdTokenResponse(u){return function aE(f,u){return hu.apply(this,arguments)}(u,this._makeVerificationRequest())}_linkToIdToken(u,d){return function xa(f,u){return nf.apply(this,arguments)}(u,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(u){return function lE(f,u){return F.apply(this,arguments)}(u,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:u,phoneNumber:d,verificationId:m,verificationCode:v}=this.params;return u&&d?{temporaryProof:u,phoneNumber:d}:{sessionInfo:m,code:v}}toJSON(){const u={providerId:this.providerId};return this.params.phoneNumber&&(u.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(u.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(u.verificationCode=this.params.verificationCode),this.params.verificationId&&(u.verificationId=this.params.verificationId),u}static fromJSON(u){"string"==typeof u&&(u=JSON.parse(u));const{verificationId:d,verificationCode:m,phoneNumber:v,temporaryProof:w}=u;return m||d||v||w?new Jo({verificationId:d,verificationCode:m,phoneNumber:v,temporaryProof:w}):null}}class Ls{constructor(u){var d,m,v,w,N,K;const ue=(0,J.zd)((0,J.pd)(u)),Se=null!==(d=ue.apiKey)&&void 0!==d?d:null,ze=null!==(m=ue.oobCode)&&void 0!==m?m:null,It=function xe(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(v=ue.mode)&&void 0!==v?v:null);he(Se&&ze&&It,"argument-error"),this.apiKey=Se,this.operation=It,this.code=ze,this.continueUrl=null!==(w=ue.continueUrl)&&void 0!==w?w:null,this.languageCode=null!==(N=ue.languageCode)&&void 0!==N?N:null,this.tenantId=null!==(K=ue.tenantId)&&void 0!==K?K:null}static parseLink(u){const d=function fu(f){const u=(0,J.zd)((0,J.pd)(f)).link,d=u?(0,J.zd)((0,J.pd)(u)).deep_link_id:null,m=(0,J.zd)((0,J.pd)(f)).deep_link_id;return(m?(0,J.zd)((0,J.pd)(m)).link:null)||m||d||u||f}(u);try{return new Ls(d)}catch{return null}}}let rf=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(d,m){return du._fromEmailAndPassword(d,m)}static credentialWithLink(d,m){const v=Ls.parseLink(m);return he(v,"argument-error"),du._fromEmailAndCode(d,v.code,v.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class Oo{constructor(u){this.providerId=u,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(u){this.defaultLanguageCode=u}setCustomParameters(u){return this.customParameters=u,this}getCustomParameters(){return this.customParameters}}class Ca extends Oo{constructor(){super(...arguments),this.scopes=[]}addScope(u){return this.scopes.includes(u)||this.scopes.push(u),this}getScopes(){return[...this.scopes]}}class dr extends Ca{static credentialFromJSON(u){const d="string"==typeof u?JSON.parse(u):u;return he("providerId"in d&&"signInMethod"in d,"argument-error"),ur._fromParams(d)}credential(u){return this._credential(Object.assign(Object.assign({},u),{nonce:u.rawNonce}))}_credential(u){return he(u.idToken||u.accessToken,"argument-error"),ur._fromParams(Object.assign(Object.assign({},u),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(u){return dr.oauthCredentialFromTaggedObject(u)}static credentialFromError(u){return dr.oauthCredentialFromTaggedObject(u.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{oauthIdToken:d,oauthAccessToken:m,oauthTokenSecret:v,pendingToken:w,nonce:N,providerId:K}=u;if(!m&&!v&&!d&&!w||!K)return null;try{return new dr(K)._credential({idToken:d,accessToken:m,nonce:N,pendingToken:w})}catch{return null}}}let mu=(()=>{class f extends Ca{constructor(){super("facebook.com")}static credential(d){return ur._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),Tr=(()=>{class f extends Ca{constructor(){super("google.com"),this.addScope("profile")}static credential(d,m){return ur._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:m})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:m,oauthAccessToken:v}=d;if(!m&&!v)return null;try{return f.credential(m,v)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),po=(()=>{class f extends Ca{constructor(){super("github.com")}static credential(d){return ur._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class No extends wa{constructor(u,d){super(u,u),this.pendingToken=d}_getIdTokenResponse(u){return Yo(u,this.buildRequest())}_linkToIdToken(u,d){const m=this.buildRequest();return m.idToken=d,Yo(u,m)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,Yo(u,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:m,signInMethod:v,pendingToken:w}=d;return m&&v&&w&&m===v?new No(m,w):null}static _create(u,d){return new No(u,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ta extends Oo{constructor(u){he(u.startsWith("saml."),"argument-error"),super(u)}static credentialFromResult(u){return Ta.samlCredentialFromTaggedObject(u)}static credentialFromError(u){return Ta.samlCredentialFromTaggedObject(u.customData||{})}static credentialFromJSON(u){const d=No.fromJSON(u);return he(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{pendingToken:d,providerId:m}=u;if(!d||!m)return null;try{return No._create(m,d)}catch{return null}}}let Jg=(()=>{class f extends Ca{constructor(){super("twitter.com")}static credential(d,m){return ur._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:m})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:m,oauthTokenSecret:v}=d;if(!m||!v)return null;try{return f.credential(m,v)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function mo(f,u){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,C.Z)(function*(f,u){return be(f,"POST","/v1/accounts:signUp",G(f,u))})).apply(this,arguments)}class hr{constructor(u){this.user=u.user,this.providerId=u.providerId,this._tokenResponse=u._tokenResponse,this.operationType=u.operationType}static _fromIdTokenResponse(u,d,m,v=!1){return(0,C.Z)(function*(){const w=yield y._fromIdTokenResponse(u,m,v),N=af(m);return new hr({user:w,providerId:N,_tokenResponse:m,operationType:d})})()}static _forOperation(u,d,m){return(0,C.Z)(function*(){yield u._updateTokensIfNecessary(m,!0);const v=af(m);return new hr({user:u,providerId:v,_tokenResponse:m,operationType:d})})()}}function af(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function lf(f){return gu.apply(this,arguments)}function gu(){return(gu=(0,C.Z)(function*(f){var u;const d=vn(f);if(yield d._initializationPromise,null!==(u=d.currentUser)&&void 0!==u&&u.isAnonymous)return new hr({user:d.currentUser,providerId:null,operationType:"signIn"});const m=yield mo(d,{returnSecureToken:!0}),v=yield hr._fromIdTokenResponse(d,"signIn",m,!0);return yield d._updateCurrentUser(v.user),v})).apply(this,arguments)}class jl extends J.ZR{constructor(u,d,m,v){var w;super(d.code,d.message),this.operationType=m,this.user=v,Object.setPrototypeOf(this,jl.prototype),this.customData={appName:u.name,tenantId:null!==(w=u.tenantId)&&void 0!==w?w:void 0,_serverResponse:d.customData._serverResponse,operationType:m}}static _fromErrorAndOperation(u,d,m,v){return new jl(u,d,m,v)}}function Da(f,u,d,m){return("reauthenticate"===u?d._getReauthenticationResolver(f):d._getIdTokenResponse(f)).catch(w=>{throw"auth/multi-factor-auth-required"===w.code?jl._fromErrorAndOperation(f,w,u,m):w})}function cf(f){return new Set(f.map(({providerId:u})=>u).filter(u=>!!u))}function e_(f,u){return uf.apply(this,arguments)}function uf(){return uf=(0,C.Z)(function*(f,u){const d=(0,J.m9)(f);yield vu(!0,d,u);const{providerUserInfo:m}=yield function jr(f,u){return zr.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[u]}),v=cf(m||[]);return d.providerData=d.providerData.filter(w=>v.has(w.providerId)),v.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),uf.apply(this,arguments)}function _u(f,u){return df.apply(this,arguments)}function df(){return(df=(0,C.Z)(function*(f,u,d=!1){const m=yield gn(f,u._linkToIdToken(f.auth,yield f.getIdToken()),d);return hr._forOperation(f,"link",m)})).apply(this,arguments)}function vu(f,u,d){return fr.apply(this,arguments)}function fr(){return(fr=(0,C.Z)(function*(f,u,d){yield Xn(u);const v=!1===f?"provider-already-linked":"no-such-provider";he(cf(u.providerData).has(d)===f,u.auth,v)})).apply(this,arguments)}function t_(f,u){return yu.apply(this,arguments)}function yu(){return(yu=(0,C.Z)(function*(f,u,d=!1){const{auth:m}=f,v="reauthenticate";try{const w=yield gn(f,Da(m,v,u,f),d);he(w.idToken,m,"internal-error");const N=kn(w.idToken);he(N,m,"internal-error");const{sub:K}=N;return he(f.uid===K,m,"user-mismatch"),hr._forOperation(f,v,w)}catch(w){throw"auth/user-not-found"===w?.code&&mt(m,"user-mismatch"),w}})).apply(this,arguments)}function n_(f,u){return hf.apply(this,arguments)}function hf(){return(hf=(0,C.Z)(function*(f,u,d=!1){const m="signIn",v=yield Da(f,m,u),w=yield hr._fromIdTokenResponse(f,m,v);return d||(yield f._updateCurrentUser(w.user)),w})).apply(this,arguments)}function bu(f,u){return ff.apply(this,arguments)}function ff(){return(ff=(0,C.Z)(function*(f,u){return n_(vn(f),u)})).apply(this,arguments)}function pf(f,u){return mf.apply(this,arguments)}function mf(){return(mf=(0,C.Z)(function*(f,u){const d=(0,J.m9)(f);return yield vu(!1,d,u.providerId),_u(d,u)})).apply(this,arguments)}function i_(f,u){return gf.apply(this,arguments)}function gf(){return(gf=(0,C.Z)(function*(f,u){return t_((0,J.m9)(f),u)})).apply(this,arguments)}function _f(){return(_f=(0,C.Z)(function*(f,u){return be(f,"POST","/v1/accounts:signInWithCustomToken",G(f,u))})).apply(this,arguments)}function cE(f,u){return vf.apply(this,arguments)}function vf(){return vf=(0,C.Z)(function*(f,u){const d=vn(f),m=yield function On(f,u){return _f.apply(this,arguments)}(d,{token:u,returnSecureToken:!0}),v=yield hr._fromIdTokenResponse(d,"signIn",m);return yield d._updateCurrentUser(v.user),v}),vf.apply(this,arguments)}class _t{constructor(u,d){this.factorId=u,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(u,d){return"phoneInfo"in d?yf._fromServerResponse(u,d):"totpInfo"in d?Eu._fromServerResponse(u,d):mt(u,"internal-error")}}class yf extends _t{constructor(u){super("phone",u),this.phoneNumber=u.phoneInfo}static _fromServerResponse(u,d){return new yf(d)}}class Eu extends _t{constructor(u){super("totp",u)}static _fromServerResponse(u,d){return new Eu(d)}}function He(f,u,d){var m;he((null===(m=d.url)||void 0===m?void 0:m.length)>0,f,"invalid-continue-uri"),he(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),u.continueUrl=d.url,u.dynamicLinkDomain=d.dynamicLinkDomain,u.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(he(d.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),u.iOSBundleId=d.iOS.bundleId),d.android&&(he(d.android.packageName.length>0,f,"missing-android-pkg-name"),u.androidInstallApp=d.android.installApp,u.androidMinimumVersionCode=d.android.minimumVersion,u.androidPackageName=d.android.packageName)}function wi(f){return wt.apply(this,arguments)}function wt(){return(wt=(0,C.Z)(function*(f){const u=vn(f);u._getPasswordPolicyInternal()&&(yield u._updatePasswordPolicy())})).apply(this,arguments)}function ui(f,u,d){return di.apply(this,arguments)}function di(){return(di=(0,C.Z)(function*(f,u,d){const m=vn(f),v={requestType:"PASSWORD_RESET",email:u,clientType:"CLIENT_TYPE_WEB"};d&&He(m,v,d),yield Ei(m,v,"getOobCode",re)})).apply(this,arguments)}function Aa(f,u,d){return Oi.apply(this,arguments)}function Oi(){return Oi=(0,C.Z)(function*(f,u,d){yield Bl((0,J.m9)(f),{oobCode:u,newPassword:d}).catch(function(){var m=(0,C.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&wi(f),v});return function(v){return m.apply(this,arguments)}}())}),Oi.apply(this,arguments)}function r_(f,u){return wu.apply(this,arguments)}function wu(){return wu=(0,C.Z)(function*(f,u){yield function Zh(f,u){return lu.apply(this,arguments)}((0,J.m9)(f),{oobCode:u})}),wu.apply(this,arguments)}function zl(f,u){return bf.apply(this,arguments)}function bf(){return(bf=(0,C.Z)(function*(f,u){const d=(0,J.m9)(f),m=yield Bl(d,{oobCode:u}),v=m.requestType;switch(he(v,d,"internal-error"),v){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":he(m.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":he(m.mfaInfo,d,"internal-error");default:he(m.email,d,"internal-error")}let w=null;return m.mfaInfo&&(w=_t._fromServerResponse(vn(d),m.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===m.requestType?m.newEmail:m.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===m.requestType?m.email:m.newEmail)||null,multiFactorInfo:w},operation:v}})).apply(this,arguments)}function uE(f,u){return an.apply(this,arguments)}function an(){return(an=(0,C.Z)(function*(f,u){const{data:d}=yield zl((0,J.m9)(f),u);return d.email})).apply(this,arguments)}function Ce(f,u,d){return tt.apply(this,arguments)}function tt(){return(tt=(0,C.Z)(function*(f,u,d){const m=vn(f),N=yield Ei(m,{returnSecureToken:!0,email:u,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mo).catch(ue=>{throw"auth/password-does-not-meet-requirements"===ue.code&&wi(f),ue}),K=yield hr._fromIdTokenResponse(m,"signIn",N);return yield m._updateCurrentUser(K.user),K})).apply(this,arguments)}function ln(f,u,d){return bu((0,J.m9)(f),rf.credential(u,d)).catch(function(){var m=(0,C.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&wi(f),v});return function(v){return m.apply(this,arguments)}}())}function Hr(f,u,d){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,C.Z)(function*(f,u,d){const m=vn(f),v={requestType:"EMAIL_SIGNIN",email:u,clientType:"CLIENT_TYPE_WEB"};(function w(N,K){he(K.handleCodeInApp,m,"argument-error"),K&&He(m,N,K)})(v,d),yield Ei(m,v,"getOobCode",Qh)})).apply(this,arguments)}function Ii(f,u){const d=Ls.parseLink(u);return"EMAIL_SIGNIN"===d?.operation}function Sa(f,u,d){return yn.apply(this,arguments)}function yn(){return(yn=(0,C.Z)(function*(f,u,d){const m=(0,J.m9)(f),v=rf.credentialWithLink(u,d||Tn());return he(v._tenantId===(m.tenantId||null),m,"tenant-id-mismatch"),bu(m,v)})).apply(this,arguments)}function ts(){return(ts=(0,C.Z)(function*(f,u){return ae(f,"POST","/v1/accounts:createAuthUri",G(f,u))})).apply(this,arguments)}function nt(f,u){return Us.apply(this,arguments)}function Us(){return Us=(0,C.Z)(function*(f,u){const m={identifier:u,continueUri:Pn()?Tn():"http://localhost"},{signinMethods:v}=yield function es(f,u){return ts.apply(this,arguments)}((0,J.m9)(f),m);return v||[]}),Us.apply(this,arguments)}function o_(f,u){return ns.apply(this,arguments)}function ns(){return ns=(0,C.Z)(function*(f,u){const d=(0,J.m9)(f),v={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};u&&He(d.auth,v,u);const{email:w}=yield function $S(f,u){return Qg.apply(this,arguments)}(d.auth,v);w!==f.email&&(yield f.reload())}),ns.apply(this,arguments)}function Nn(f,u,d){return js.apply(this,arguments)}function js(){return js=(0,C.Z)(function*(f,u,d){const m=(0,J.m9)(f),w={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:u};d&&He(m.auth,w,d);const{email:N}=yield function Yh(f,u){return Xh.apply(this,arguments)}(m.auth,w);N!==f.email&&(yield f.reload())}),js.apply(this,arguments)}function Dr(){return(Dr=(0,C.Z)(function*(f,u){return ae(f,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function $l(f,u){return Iu.apply(this,arguments)}function Iu(){return Iu=(0,C.Z)(function*(f,{displayName:u,photoURL:d}){if(void 0===u&&void 0===d)return;const m=(0,J.m9)(f),w={idToken:yield m.getIdToken(),displayName:u,photoUrl:d,returnSecureToken:!0},N=yield gn(m,function Ra(f,u){return Dr.apply(this,arguments)}(m.auth,w));m.displayName=N.displayName||null,m.photoURL=N.photoUrl||null;const K=m.providerData.find(({providerId:ue})=>"password"===ue);K&&(K.displayName=m.displayName,K.photoURL=m.photoURL),yield m._updateTokensIfNecessary(N)}),Iu.apply(this,arguments)}function is(f,u){return Ma((0,J.m9)(f),u,null)}function Fo(f,u){return Ma((0,J.m9)(f),null,u)}function Ma(f,u,d){return zs.apply(this,arguments)}function zs(){return zs=(0,C.Z)(function*(f,u,d){const{auth:m}=f,w={idToken:yield f.getIdToken(),returnSecureToken:!0};u&&(w.email=u),d&&(w.password=d);const N=yield gn(f,function Gh(f,u){return au.apply(this,arguments)}(m,w));yield f._updateTokensIfNecessary(N,!0)}),zs.apply(this,arguments)}class Hl{constructor(u,d,m={}){this.isNewUser=u,this.providerId=d,this.profile=m}}class xu extends Hl{constructor(u,d,m,v){super(u,d,m),this.username=v}}class s_ extends Hl{constructor(u,d){super(u,"facebook.com",d)}}class go extends xu{constructor(u,d){super(u,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class Cu extends Hl{constructor(u,d){super(u,"google.com",d)}}class Pa extends xu{constructor(u,d,m){super(u,"twitter.com",d,m)}}function ql(f){const{user:u,_tokenResponse:d}=f;return u.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function vt(f){var u,d;if(!f)return null;const{providerId:m}=f,v=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},w=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!m&&f?.idToken){const N=null===(d=null===(u=kn(f.idToken))||void 0===u?void 0:u.firebase)||void 0===d?void 0:d.sign_in_provider;if(N)return new Hl(w,"anonymous"!==N&&"custom"!==N?N:null)}if(!m)return null;switch(m){case"facebook.com":return new s_(w,v);case"github.com":return new go(w,v);case"google.com":return new Cu(w,v);case"twitter.com":return new Pa(w,v,f.screenName||null);case"custom":case"anonymous":return new Hl(w,null);default:return new Hl(w,m,v)}}(d)}function dE(f){return(0,J.m9)(f).signOut()}class Hs{constructor(u,d,m){this.type=u,this.credential=d,this.user=m}static _fromIdtoken(u,d){return new Hs("enroll",u,d)}static _fromMfaPendingCredential(u){return new Hs("signin",u)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(u){var d,m;if(u?.multiFactorSession){if(null!==(d=u.multiFactorSession)&&void 0!==d&&d.pendingCredential)return Hs._fromMfaPendingCredential(u.multiFactorSession.pendingCredential);if(null!==(m=u.multiFactorSession)&&void 0!==m&&m.idToken)return Hs._fromIdtoken(u.multiFactorSession.idToken)}return null}}class l_{constructor(u,d,m){this.session=u,this.hints=d,this.signInResolver=m}static _fromError(u,d){const m=vn(u),v=d.customData._serverResponse,w=(v.mfaInfo||[]).map(K=>_t._fromServerResponse(m,K));he(v.mfaPendingCredential,m,"internal-error");const N=Hs._fromMfaPendingCredential(v.mfaPendingCredential);return new l_(N,w,function(){var K=(0,C.Z)(function*(ue){const Se=yield ue._process(m,N);delete v.mfaInfo,delete v.mfaPendingCredential;const ze=Object.assign(Object.assign({},v),{idToken:Se.idToken,refreshToken:Se.refreshToken});switch(d.operationType){case"signIn":const It=yield hr._fromIdTokenResponse(m,d.operationType,ze);return yield m._updateCurrentUser(It.user),It;case"reauthenticate":return he(d.user,m,"internal-error"),hr._forOperation(d.user,d.operationType,ze);default:mt(m,"internal-error")}});return function(ue){return K.apply(this,arguments)}}())}resolveSignIn(u){var d=this;return(0,C.Z)(function*(){return d.signInResolver(u)})()}}function WS(f,u){var d;const m=(0,J.m9)(f),v=u;return he(u.customData.operationType,m,"argument-error"),he(null===(d=v.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,m,"argument-error"),l_._fromError(m,v)}class c_{constructor(u){this.user=u,this.enrolledFactors=[],u._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(m=>_t._fromServerResponse(u.auth,m)))})}static _fromUser(u){return new c_(u)}getSession(){var u=this;return(0,C.Z)(function*(){return Hs._fromIdtoken(yield u.user.getIdToken(),u.user)})()}enroll(u,d){var m=this;return(0,C.Z)(function*(){const v=u,w=yield m.getSession(),N=yield gn(m.user,v._process(m.user.auth,w,d));return yield m.user._updateTokensIfNecessary(N),m.user.reload()})()}unenroll(u){var d=this;return(0,C.Z)(function*(){const m="string"==typeof u?u:u.uid,v=yield d.user.getIdToken();try{const w=yield gn(d.user,function QS(f,u){return ae(f,"POST","/v2/accounts/mfaEnrollment:withdraw",G(f,u))}(d.user.auth,{idToken:v,mfaEnrollmentId:m}));d.enrolledFactors=d.enrolledFactors.filter(({uid:N})=>N!==m),yield d.user._updateTokensIfNecessary(w),yield d.user.reload()}catch(w){throw w}})()}}const u_=new WeakMap;function YS(f){const u=(0,J.m9)(f);return u_.has(u)||u_.set(u,c_._fromUser(u)),u_.get(u)}const xf="__sak";class hE{constructor(u,d){this.storageRetriever=u,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(xf,"1"),this.storage.removeItem(xf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(u,d){return this.storage.setItem(u,JSON.stringify(d)),Promise.resolve()}_get(u){const d=this.storage.getItem(u);return Promise.resolve(d?JSON.parse(d):null)}_remove(u){return this.storage.removeItem(u),Promise.resolve()}get storage(){return this.storageRetriever()}}const fE=(()=>{class f extends hE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,m)=>this.onStorageEvent(d,m),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function d_(){const f=(0,J.z$)();return Le(f)||De(f)}()&&function Pe(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=_n(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const m of Object.keys(this.listeners)){const v=this.storage.getItem(m),w=this.localCache[m];v!==w&&d(m,w,v)}}onStorageEvent(d,m=!1){if(!d.key)return void this.forAllChangedKeys((K,ue,Se)=>{this.notifyListeners(K,Se)});const v=d.key;if(m?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const K=this.storage.getItem(v);if(d.newValue!==K)null!==d.newValue?this.storage.setItem(v,d.newValue):this.storage.removeItem(v);else if(this.localCache[v]===d.newValue&&!m)return}const w=()=>{const K=this.storage.getItem(v);!m&&this.localCache[v]===K||this.notifyListeners(v,K)},N=this.storage.getItem(v);!function B(){return(0,J.w1)()&&10===document.documentMode}()||N===d.newValue||d.newValue===d.oldValue?w():setTimeout(w,10)}notifyListeners(d,m){this.localCache[d]=m;const v=this.listeners[d];if(v)for(const w of Array.from(v))w(m&&JSON.parse(m))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,m,v)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:m,newValue:v}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,m){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(m)}_removeListener(d,m){this.listeners[d]&&(this.listeners[d].delete(m),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,m){var v=()=>super._set,w=this;return(0,C.Z)(function*(){yield v().call(w,d,m),w.localCache[d]=JSON.stringify(m)})()}_get(d){var m=()=>super._get,v=this;return(0,C.Z)(function*(){const w=yield m().call(v,d);return v.localCache[d]=JSON.stringify(w),w})()}_remove(d){var m=()=>super._remove,v=this;return(0,C.Z)(function*(){yield m().call(v,d),delete v.localCache[d]})()}}return f.type="LOCAL",f})(),vo=(()=>{class f extends hE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,m){}_removeListener(d,m){}}return f.type="SESSION",f})();let eR=(()=>{class f{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const m=this.receivers.find(w=>w.isListeningto(d));if(m)return m;const v=new f(d);return this.receivers.push(v),v}isListeningto(d){return this.eventTarget===d}handleEvent(d){var m=this;return(0,C.Z)(function*(){const v=d,{eventId:w,eventType:N,data:K}=v.data,ue=m.handlersMap[N];if(!ue?.size)return;v.ports[0].postMessage({status:"ack",eventId:w,eventType:N});const Se=Array.from(ue).map(function(){var It=(0,C.Z)(function*(Li){return Li(v.origin,K)});return function(Li){return It.apply(this,arguments)}}()),ze=yield function JS(f){return Promise.all(f.map(function(){var u=(0,C.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(m){return{fulfilled:!1,reason:m}}});return function(d){return u.apply(this,arguments)}}()))}(Se);v.ports[0].postMessage({status:"done",eventId:w,eventType:N,response:ze})})()}_subscribe(d,m){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(m)}_unsubscribe(d,m){this.handlersMap[d]&&m&&this.handlersMap[d].delete(m),(!m||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function Fn(f="",u=10){let d="";for(let m=0;m<u;m++)d+=Math.floor(10*Math.random());return f+d}class Tu{constructor(u){this.target=u,this.handlers=new Set}removeMessageHandler(u){u.messageChannel&&(u.messageChannel.port1.removeEventListener("message",u.onMessage),u.messageChannel.port1.close()),this.handlers.delete(u)}_send(u,d,m=50){var v=this;return(0,C.Z)(function*(){const w=typeof MessageChannel<"u"?new MessageChannel:null;if(!w)throw new Error("connection_unavailable");let N,K;return new Promise((ue,Se)=>{const ze=Fn("",20);w.port1.start();const It=setTimeout(()=>{Se(new Error("unsupported_event"))},m);K={messageChannel:w,onMessage(Li){const Bo=Li;if(Bo.data.eventId===ze)switch(Bo.data.status){case"ack":clearTimeout(It),N=setTimeout(()=>{Se(new Error("timeout"))},3e3);break;case"done":clearTimeout(N),ue(Bo.data.response);break;default:clearTimeout(It),clearTimeout(N),Se(new Error("invalid_response"))}}},v.handlers.add(K),w.port1.addEventListener("message",K.onMessage),v.target.postMessage({eventType:u,eventId:ze,data:d},[w.port2])}).finally(()=>{K&&v.removeMessageHandler(K)})})()}}function Lt(){return window}function Du(){return typeof Lt().WorkerGlobalScope<"u"&&"function"==typeof Lt().importScripts}function Au(){return(Au=(0,C.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Su="firebaseLocalStorageDb",Wl="firebaseLocalStorage",Df="fbase_key";class Oa{constructor(u){this.request=u}toPromise(){return new Promise((u,d)=>{this.request.addEventListener("success",()=>{u(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function qs(f,u){return f.transaction([Wl],u?"readwrite":"readonly").objectStore(Wl)}function rs(){const f=indexedDB.open(Su,1);return new Promise((u,d)=>{f.addEventListener("error",()=>{d(f.error)}),f.addEventListener("upgradeneeded",()=>{const m=f.result;try{m.createObjectStore(Wl,{keyPath:Df})}catch(v){d(v)}}),f.addEventListener("success",(0,C.Z)(function*(){const m=f.result;m.objectStoreNames.contains(Wl)?u(m):(m.close(),yield function Gl(){const f=indexedDB.deleteDatabase(Su);return new Oa(f).toPromise()}(),u(yield rs()))}))})}function Af(f,u,d){return g_.apply(this,arguments)}function g_(){return(g_=(0,C.Z)(function*(f,u,d){const m=qs(f,!0).put({[Df]:u,value:d});return new Oa(m).toPromise()})).apply(this,arguments)}function __(){return(__=(0,C.Z)(function*(f,u){const d=qs(f,!1).get(u),m=yield new Oa(d).toPromise();return void 0===m?null:m.value})).apply(this,arguments)}function v_(f,u){const d=qs(f,!0).delete(u);return new Oa(d).toPromise()}const Ru=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,C.Z)(function*(){return d.db||(d.db=yield rs()),d.db})()}_withRetries(d){var m=this;return(0,C.Z)(function*(){let v=0;for(;;)try{const w=yield m._openDb();return yield d(w)}catch(w){if(v++>3)throw w;m.db&&(m.db.close(),m.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,C.Z)(function*(){return Du()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,C.Z)(function*(){d.receiver=eR._getInstance(function m_(){return Du()?self:null}()),d.receiver._subscribe("keyChanged",function(){var m=(0,C.Z)(function*(v,w){return{keyProcessed:(yield d._poll()).includes(w.key)}});return function(v,w){return m.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var m=(0,C.Z)(function*(v,w){return["keyChanged"]});return function(v,w){return m.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,C.Z)(function*(){var m,v;if(d.activeServiceWorker=yield function p_(){return Au.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new Tu(d.activeServiceWorker);const w=yield d.sender._send("ping",{},800);w&&null!==(m=w[0])&&void 0!==m&&m.fulfilled&&null!==(v=w[0])&&void 0!==v&&v.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var m=this;return(0,C.Z)(function*(){if(m.sender&&m.activeServiceWorker&&function Cf(){var f;return(null===(f=navigator?.serviceWorker)||void 0===f?void 0:f.controller)||null}()===m.activeServiceWorker)try{yield m.sender._send("keyChanged",{key:d},m.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,C.Z)(function*(){try{if(!indexedDB)return!1;const d=yield rs();return yield Af(d,xf,"1"),yield v_(d,xf),!0}catch{}return!1})()}_withPendingWrite(d){var m=this;return(0,C.Z)(function*(){m.pendingWrites++;try{yield d()}finally{m.pendingWrites--}})()}_set(d,m){var v=this;return(0,C.Z)(function*(){return v._withPendingWrite((0,C.Z)(function*(){return yield v._withRetries(w=>Af(w,d,m)),v.localCache[d]=m,v.notifyServiceWorker(d)}))})()}_get(d){var m=this;return(0,C.Z)(function*(){const v=yield m._withRetries(w=>function tR(f,u){return __.apply(this,arguments)}(w,d));return m.localCache[d]=v,v})()}_remove(d){var m=this;return(0,C.Z)(function*(){return m._withPendingWrite((0,C.Z)(function*(){return yield m._withRetries(v=>v_(v,d)),delete m.localCache[d],m.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,C.Z)(function*(){const m=yield d._withRetries(N=>{const K=qs(N,!1).getAll();return new Oa(K).toPromise()});if(!m)return[];if(0!==d.pendingWrites)return[];const v=[],w=new Set;if(0!==m.length)for(const{fbase_key:N,value:K}of m)w.add(N),JSON.stringify(d.localCache[N])!==JSON.stringify(K)&&(d.notifyListeners(N,K),v.push(N));for(const N of Object.keys(d.localCache))d.localCache[N]&&!w.has(N)&&(d.notifyListeners(N,null),v.push(N));return v})()}notifyListeners(d,m){this.localCache[d]=m;const v=this.listeners[d];if(v)for(const w of Array.from(v))w(m)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,C.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,m){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(m)}_removeListener(d,m){this.listeners[d]&&(this.listeners[d].delete(m),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),Zl=1e12;class y_{constructor(u){this.auth=u,this.counter=Zl,this._widgets=new Map}render(u,d){const m=this.counter;return this._widgets.set(m,new vE(u,this.auth.name,d||{})),this.counter++,m}reset(u){var d;const m=u||Zl;null===(d=this._widgets.get(m))||void 0===d||d.delete(),this._widgets.delete(m)}getResponse(u){var d;return(null===(d=this._widgets.get(u||Zl))||void 0===d?void 0:d.getResponse())||""}execute(u){var d=this;return(0,C.Z)(function*(){var m;return null===(m=d._widgets.get(u||Zl))||void 0===m||m.execute(),""})()}}class vE{constructor(u,d,m){this.params=m,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const v="string"==typeof u?document.getElementById(u):u;he(v,"argument-error",{appName:d}),this.container=v,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function yE(f){const u=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<f;m++)u.push(d.charAt(Math.floor(62*Math.random())));return u.join("")}(50);const{callback:u,"expired-callback":d}=this.params;if(u)try{u(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Rf=tE("rcb"),b_=new ir(3e4,6e4);class E_{constructor(){var u;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(u=Lt().grecaptcha)||void 0===u||!u.render)}load(u,d=""){return he(function EE(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(d),u,"argument-error"),this.shouldResolveImmediately(d)&&Qn(Lt().grecaptcha)?Promise.resolve(Lt().grecaptcha):new Promise((m,v)=>{const w=Lt().setTimeout(()=>{v(jt(u,"network-request-failed"))},b_.get());Lt()[Rf]=()=>{Lt().clearTimeout(w),delete Lt()[Rf];const K=Lt().grecaptcha;if(!K||!Qn(K))return void v(jt(u,"internal-error"));const ue=K.render;K.render=(Se,ze)=>{const It=ue(Se,ze);return this.counter++,It},this.hostLanguage=d,m(K)},Hg(`https://www.google.com/recaptcha/api.js??${(0,J.xO)({onload:Rf,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(w),v(jt(u,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(u){var d;return!(null===(d=Lt().grecaptcha)||void 0===d||!d.render)&&(u===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class oR{load(u){return(0,C.Z)(function*(){return new y_(u)})()}clearedOneInstance(){}}const w_="recaptcha",Ar={theme:"light",type:"image"};class I_{constructor(u,d,m=Object.assign({},Ar)){this.parameters=m,this.type=w_,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vn(u),this.isInvisible="invisible"===this.parameters.size,he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const v="string"==typeof d?document.getElementById(d):d;he(v,this.auth,"argument-error"),this.container=v,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new oR:new E_,this.validateStartingState()}verify(){var u=this;return(0,C.Z)(function*(){u.assertNotDestroyed();const d=yield u.render(),m=u.getAssertedRecaptcha();return m.getResponse(d)||new Promise(w=>{const N=K=>{K&&(u.tokenChangeListeners.delete(N),w(K))};u.tokenChangeListeners.add(N),u.isInvisible&&m.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(u){return Promise.reject(u)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(u=>{throw this.renderPromise=null,u})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(u=>{this.container.removeChild(u)})}validateStartingState(){he(!this.parameters.sitekey,this.auth,"argument-error"),he(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(u){return d=>{if(this.tokenChangeListeners.forEach(m=>m(d)),"function"==typeof u)u(d);else if("string"==typeof u){const m=Lt()[u];"function"==typeof m&&m(d)}}}assertNotDestroyed(){he(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var u=this;return(0,C.Z)(function*(){if(yield u.init(),!u.widgetId){let d=u.container;if(!u.isInvisible){const m=document.createElement("div");d.appendChild(m),d=m}u.widgetId=u.getAssertedRecaptcha().render(d,u.parameters)}return u.widgetId})()}init(){var u=this;return(0,C.Z)(function*(){he(Pn()&&!Du(),u.auth,"internal-error"),yield function wE(){let f=null;return new Promise(u=>{"complete"!==document.readyState?(f=()=>u(),window.addEventListener("load",f)):u()}).catch(u=>{throw f&&window.removeEventListener("load",f),u})}(),u.recaptcha=yield u._recaptchaLoader.load(u.auth,u.auth.languageCode||void 0);const d=yield function qi(f){return Ur.apply(this,arguments)}(u.auth);he(d,u.auth,"internal-error"),u.parameters.sitekey=d})()}getAssertedRecaptcha(){return he(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Mf{constructor(u,d){this.verificationId=u,this.onConfirmation=d}confirm(u){const d=Jo._fromVerification(this.verificationId,u);return this.onConfirmation(d)}}function x_(f,u,d){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,C.Z)(function*(f,u,d){const m=vn(f),v=yield Ql(m,u,(0,J.m9)(d));return new Mf(v,w=>bu(m,w))})).apply(this,arguments)}function IE(f,u,d){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,C.Z)(function*(f,u,d){const m=(0,J.m9)(f);yield vu(!1,m,"phone");const v=yield Ql(m.auth,u,(0,J.m9)(d));return new Mf(v,w=>pf(m,w))})).apply(this,arguments)}function xE(f,u,d){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,C.Z)(function*(f,u,d){const m=(0,J.m9)(f),v=yield Ql(m.auth,u,(0,J.m9)(d));return new Mf(v,w=>i_(m,w))})).apply(this,arguments)}function Ql(f,u,d){return Pu.apply(this,arguments)}function Pu(){return Pu=(0,C.Z)(function*(f,u,d){var m;const v=yield d.verify();try{let w;if(he("string"==typeof v,f,"argument-error"),he(d.type===w_,f,"argument-error"),w="string"==typeof u?{phoneNumber:u}:u,"session"in w){const N=w.session;if("phoneNumber"in w)return he("enroll"===N.type,f,"internal-error"),(yield function GS(f,u){return ae(f,"POST","/v2/accounts/mfaEnrollment:start",G(f,u))}(f,{idToken:N.credential,phoneEnrollmentInfo:{phoneNumber:w.phoneNumber,recaptchaToken:v}})).phoneSessionInfo.sessionInfo;{he("signin"===N.type,f,"internal-error");const K=(null===(m=w.multiFactorHint)||void 0===m?void 0:m.uid)||w.multiFactorUid;return he(K,f,"missing-multi-factor-info"),(yield function gE(f,u){return ae(f,"POST","/v2/accounts/mfaSignIn:start",G(f,u))}(f,{mfaPendingCredential:N.credential,mfaEnrollmentId:K,phoneSignInInfo:{recaptchaToken:v}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:N}=yield function sE(f,u){return tf.apply(this,arguments)}(f,{phoneNumber:w.phoneNumber,recaptchaToken:v});return N}}finally{d._reset()}}),Pu.apply(this,arguments)}function en(f,u){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,C.Z)(function*(f,u){yield _u((0,J.m9)(f),u)})).apply(this,arguments)}let ku=(()=>{class f{constructor(d){this.providerId=f.PROVIDER_ID,this.auth=vn(d)}verifyPhoneNumber(d,m){return Ql(this.auth,d,(0,J.m9)(m))}static credential(d,m){return Jo._fromVerification(d,m)}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:m,temporaryProof:v}=d;return m&&v?Jo._fromTokenResponse(m,v):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function Un(f,u){return u?ee(u):(he(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class Pf extends wa{constructor(u){super("custom","custom"),this.params=u}_getIdTokenResponse(u){return Yo(u,this._buildIdpRequest())}_linkToIdToken(u,d){return Yo(u,this._buildIdpRequest(d))}_getReauthenticationResolver(u){return Yo(u,this._buildIdpRequest())}_buildIdpRequest(u){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return u&&(d.idToken=u),d}}function C_(f){return n_(f.auth,new Pf(f),f.bypassAuthState)}function Na(f){const{auth:u,user:d}=f;return he(d,u,"internal-error"),t_(d,new Pf(f),f.bypassAuthState)}function mr(f){return kf.apply(this,arguments)}function kf(){return(kf=(0,C.Z)(function*(f){const{auth:u,user:d}=f;return he(d,u,"internal-error"),_u(d,new Pf(f),f.bypassAuthState)})).apply(this,arguments)}class T_{constructor(u,d,m,v,w=!1){this.auth=u,this.resolver=m,this.user=v,this.bypassAuthState=w,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var u=this;return new Promise(function(){var d=(0,C.Z)(function*(m,v){u.pendingPromise={resolve:m,reject:v};try{u.eventManager=yield u.resolver._initialize(u.auth),yield u.onExecution(),u.eventManager.registerConsumer(u)}catch(w){u.reject(w)}});return function(m,v){return d.apply(this,arguments)}}())}onAuthEvent(u){var d=this;return(0,C.Z)(function*(){const{urlResponse:m,sessionId:v,postBody:w,tenantId:N,error:K,type:ue}=u;if(K)return void d.reject(K);const Se={auth:d.auth,requestUri:m,sessionId:v,tenantId:N||void 0,postBody:w||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(ue)(Se))}catch(ze){d.reject(ze)}})()}onError(u){this.reject(u)}getIdpTask(u){switch(u){case"signInViaPopup":case"signInViaRedirect":return C_;case"linkViaPopup":case"linkViaRedirect":return mr;case"reauthViaPopup":case"reauthViaRedirect":return Na;default:mt(this.auth,"internal-error")}}resolve(u){rn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(u),this.unregisterAndCleanUp()}reject(u){rn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(u),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const CE=new ir(2e3,1e4);function os(f,u,d){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,C.Z)(function*(f,u,d){const m=vn(f);Vn(f,u,Oo);const v=Un(m,d);return new Of(m,"signInViaPopup",u,v).executeNotNull()})).apply(this,arguments)}function TE(f,u,d){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,C.Z)(function*(f,u,d){const m=(0,J.m9)(f);Vn(m.auth,u,Oo);const v=Un(m.auth,d);return new Of(m.auth,"reauthViaPopup",u,v,m).executeNotNull()})).apply(this,arguments)}function D_(f,u,d){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,C.Z)(function*(f,u,d){const m=(0,J.m9)(f);Vn(m.auth,u,Oo);const v=Un(m.auth,d);return new Of(m.auth,"linkViaPopup",u,v,m).executeNotNull()})).apply(this,arguments)}let Of=(()=>{class f extends T_{constructor(d,m,v,w,N){super(d,m,w,N),this.provider=v,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var d=this;return(0,C.Z)(function*(){const m=yield d.execute();return he(m,d.auth,"internal-error"),m})()}onExecution(){var d=this;return(0,C.Z)(function*(){rn(1===d.filter.length,"Popup operations only handle one event");const m=Fn();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],m),d.authWindow.associatedEvent=m,d.resolver._originValidation(d.auth).catch(v=>{d.reject(v)}),d.resolver._isIframeWebStorageSupported(d.auth,v=>{v||d.reject(jt(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(jt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const d=()=>{var m,v;this.pollId=null!==(v=null===(m=this.authWindow)||void 0===m?void 0:m.window)&&void 0!==v&&v.closed?window.setTimeout(()=>{this.pollId=null,this.reject(jt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,CE.get())};d()}}return f.currentPopupAction=null,f})();const Qe="pendingRedirect",Fa=new Map;class sR extends T_{constructor(u,d,m=!1){super(u,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,m),this.eventId=null}execute(){var u=()=>super.execute,d=this;return(0,C.Z)(function*(){let m=Fa.get(d.auth._key());if(!m){try{const w=(yield function DE(f,u){return Nf.apply(this,arguments)}(d.resolver,d.auth))?yield u().call(d):null;m=()=>Promise.resolve(w)}catch(v){m=()=>Promise.reject(v)}Fa.set(d.auth._key(),m)}return d.bypassAuthState||Fa.set(d.auth._key(),()=>Promise.resolve(null)),m()})()}onAuthEvent(u){var d=()=>super.onAuthEvent,m=this;return(0,C.Z)(function*(){if("signInViaRedirect"===u.type)return d().call(m,u);if("unknown"!==u.type){if(u.eventId){const v=yield m.auth._redirectUserForId(u.eventId);if(v)return m.user=v,d().call(m,u);m.resolve(null)}}else m.resolve(null)})()}onExecution(){return(0,C.Z)(function*(){})()}cleanUp(){}}function Nf(){return(Nf=(0,C.Z)(function*(f,u){const d=R_(u),m=S_(f);if(!(yield m._isAvailable()))return!1;const v="true"===(yield m._get(d));return yield m._remove(d),v})).apply(this,arguments)}function Ff(f,u){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,C.Z)(function*(f,u){return S_(f)._set(R_(u),"true")})).apply(this,arguments)}function La(){Fa.clear()}function A_(f,u){Fa.set(f._key(),u)}function S_(f){return ee(f._redirectPersistence)}function R_(f){return We(Qe,f.config.apiKey,f.name)}function AE(f,u,d){return function SE(f,u,d){return le.apply(this,arguments)}(f,u,d)}function le(){return(le=(0,C.Z)(function*(f,u,d){const m=vn(f);Vn(f,u,Oo),yield m._initializationPromise;const v=Un(m,d);return yield Ff(v,m),v._openRedirect(m,u,"signInViaRedirect")})).apply(this,arguments)}function Mt(f,u,d){return function Kt(f,u,d){return zt.apply(this,arguments)}(f,u,d)}function zt(){return(zt=(0,C.Z)(function*(f,u,d){const m=(0,J.m9)(f);Vn(m.auth,u,Oo),yield m.auth._initializationPromise;const v=Un(m.auth,d);yield Ff(v,m.auth);const w=yield RE(m);return v._openRedirect(m.auth,u,"reauthViaRedirect",w)})).apply(this,arguments)}function fi(f,u,d){return function M_(f,u,d){return Ws.apply(this,arguments)}(f,u,d)}function Ws(){return(Ws=(0,C.Z)(function*(f,u,d){const m=(0,J.m9)(f);Vn(m.auth,u,Oo),yield m.auth._initializationPromise;const v=Un(m.auth,d);yield vu(!1,m,u.providerId),yield Ff(v,m.auth);const w=yield RE(m);return v._openRedirect(m.auth,u,"linkViaRedirect",w)})).apply(this,arguments)}function yo(f,u){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,C.Z)(function*(f,u){return yield vn(f)._initializationPromise,Jl(f,u,!1)})).apply(this,arguments)}function Jl(f,u){return Lf.apply(this,arguments)}function Lf(){return(Lf=(0,C.Z)(function*(f,u,d=!1){const m=vn(f),v=Un(m,u),N=yield new sR(m,v,d).execute();return N&&!d&&(delete N.user._redirectEventId,yield m._persistUserIfCurrent(N.user),yield m._setRedirectUser(null,u)),N})).apply(this,arguments)}function RE(f){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,C.Z)(function*(f){const u=Fn(`${f.uid}:::`);return f._redirectEventId=u,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),u})).apply(this,arguments)}class bo{constructor(u){this.auth=u,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(u){this.consumers.add(u),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,u)&&(this.sendToConsumer(this.queuedRedirectEvent,u),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(u){this.consumers.delete(u)}onEvent(u){if(this.hasEventBeenHandled(u))return!1;let d=!1;return this.consumers.forEach(m=>{this.isEventForConsumer(u,m)&&(d=!0,this.sendToConsumer(u,m),this.saveEventToCache(u))}),this.hasHandledPotentialRedirect||!function Lo(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gs(f);default:return!1}}(u)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=u,d=!0)),d}sendToConsumer(u,d){var m;if(u.error&&!Gs(u)){const v=(null===(m=u.error.code)||void 0===m?void 0:m.split("auth/")[1])||"internal-error";d.onError(jt(this.auth,v))}else d.onAuthEvent(u)}isEventForConsumer(u,d){const m=null===d.eventId||!!u.eventId&&u.eventId===d.eventId;return d.filter.includes(u.type)&&m}hasEventBeenHandled(u){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vf(u))}saveEventToCache(u){this.cachedEventUids.add(Vf(u)),this.lastProcessedEventTime=Date.now()}}function Vf(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(u=>u).join("-")}function Gs({type:f,error:u}){return"unknown"===f&&"auth/no-auth-event"===u?.code}function P_(f){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,C.Z)(function*(f,u={}){return ae(f,"GET","/v1/projects",u)})).apply(this,arguments)}const ME=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PE=/^https?/;function ec(){return(ec=(0,C.Z)(function*(f){if(f.config.emulator)return;const{authorizedDomains:u}=yield P_(f);for(const d of u)try{if(k_(d))return}catch{}mt(f,"unauthorized-domain")})).apply(this,arguments)}function k_(f){const u=Tn(),{protocol:d,hostname:m}=new URL(u);if(f.startsWith("chrome-extension://")){const N=new URL(f);return""===N.hostname&&""===m?"chrome-extension:"===d&&f.replace("chrome-extension://","")===u.replace("chrome-extension://",""):"chrome-extension:"===d&&N.hostname===m}if(!PE.test(d))return!1;if(ME.test(f))return m===f;const v=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+v+"|"+v+")$","i").test(m)}const Uf=new ir(3e4,6e4);function O_(){const f=Lt().___jsl;if(f?.H)for(const u of Object.keys(f.H))if(f.H[u].r=f.H[u].r||[],f.H[u].L=f.H[u].L||[],f.H[u].r=[...f.H[u].L],f.CP)for(let d=0;d<f.CP.length;d++)f.CP[d]=null}let Va=null;const L_=new ir(5e3,15e3),V_="__/auth/iframe",B_="emulator/auth/iframe",jf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function OE(f){const u=f.config;he(u.authDomain,f,"auth-domain-config-required");const d=u.emulator?so(u,B_):`https://${f.config.authDomain}/${V_}`,m={apiKey:u.apiKey,appName:f.name,v:L.SDK_VERSION},v=kE.get(f.config.apiHost);v&&(m.eid=v);const w=f._getFrameworks();return w.length&&(m.fw=w.join(",")),`${d}?${(0,J.xO)(m).slice(1)}`}function Vo(){return Vo=(0,C.Z)(function*(f){const u=yield function F_(f){return Va=Va||function N_(f){return new Promise((u,d)=>{var m,v,w;function N(){O_(),gapi.load("gapi.iframes",{callback:()=>{u(gapi.iframes.getContext())},ontimeout:()=>{O_(),d(jt(f,"network-request-failed"))},timeout:Uf.get()})}if(null!==(v=null===(m=Lt().gapi)||void 0===m?void 0:m.iframes)&&void 0!==v&&v.Iframe)u(gapi.iframes.getContext());else{if(null===(w=Lt().gapi)||void 0===w||!w.load){const K=tE("iframefcb");return Lt()[K]=()=>{gapi.load?N():d(jt(f,"network-request-failed"))},Hg(`https://apis.google.com/js/api.js?onload=${K}`).catch(ue=>d(ue))}N()}}).catch(u=>{throw Va=null,u})}(f),Va}(f),d=Lt().gapi;return he(d,f,"internal-error"),u.open({where:document.body,url:OE(f),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jf,dontclear:!0},m=>new Promise(function(){var v=(0,C.Z)(function*(w,N){yield m.restyle({setHideOnLeave:!1});const K=jt(f,"network-request-failed"),ue=Lt().setTimeout(()=>{N(K)},L_.get());function Se(){Lt().clearTimeout(ue),w(m)}m.ping(Se).then(Se,()=>{N(K)})});return function(w,N){return v.apply(this,arguments)}}()))}),Vo.apply(this,arguments)}const bn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class zf{constructor(u){this.window=u,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const ss="__/auth/handler",BE="emulator/auth/handler",ju=encodeURIComponent("fac");function Ba(f,u,d,m,v,w){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,C.Z)(function*(f,u,d,m,v,w){he(f.config.authDomain,f,"auth-domain-config-required"),he(f.config.apiKey,f,"invalid-api-key");const N={apiKey:f.config.apiKey,appName:f.name,authType:d,redirectUrl:m,v:L.SDK_VERSION,eventId:v};if(u instanceof Oo){u.setDefaultLanguage(f.languageCode),N.providerId=u.providerId||"",(0,J.xb)(u.getCustomParameters())||(N.customParameters=JSON.stringify(u.getCustomParameters()));for(const[ze,It]of Object.entries(w||{}))N[ze]=It}if(u instanceof Ca){const ze=u.getScopes().filter(It=>""!==It);ze.length>0&&(N.scopes=ze.join(","))}f.tenantId&&(N.tid=f.tenantId);const K=N;for(const ze of Object.keys(K))void 0===K[ze]&&delete K[ze];const ue=yield f._getAppCheckToken(),Se=ue?`#${ju}=${encodeURIComponent(ue)}`:"";return`${function $f({config:f}){return f.emulator?so(f,BE):`https://${f.authDomain}/${ss}`}(f)}?${(0,J.xO)(K).slice(1)}${Se}`})).apply(this,arguments)}const zu="webStorageSupport",z_=class j_{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vo,this._completeRedirectFn=Jl,this._overrideRedirectResult=A_}_openPopup(u,d,m,v){var w=this;return(0,C.Z)(function*(){var N;rn(null===(N=w.eventManagers[u._key()])||void 0===N?void 0:N.manager,"_initialize() not called before _openPopup()");const K=yield Ba(u,d,m,Tn(),v);return function U_(f,u,d,m=500,v=600){const w=Math.max((window.screen.availHeight-v)/2,0).toString(),N=Math.max((window.screen.availWidth-m)/2,0).toString();let K="";const ue=Object.assign(Object.assign({},bn),{width:m.toString(),height:v.toString(),top:w,left:N}),Se=(0,J.z$)().toLowerCase();d&&(K=ri(Se)?"_blank":d),qt(Se)&&(u=u||"http://localhost",ue.scrollbars="yes");const ze=Object.entries(ue).reduce((Li,[Bo,rc])=>`${Li}${Bo}=${rc},`,"");if(function gt(f=(0,J.z$)()){var u;return De(f)&&!(null===(u=window.navigator)||void 0===u||!u.standalone)}(Se)&&"_self"!==K)return function Uu(f,u){const d=document.createElement("a");d.href=f,d.target=u;const m=document.createEvent("MouseEvent");m.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(m)}(u||"",K),new zf(null);const It=window.open(u||"",K,ze);he(It,f,"popup-blocked");try{It.focus()}catch{}return new zf(It)}(u,K,Fn())})()}_openRedirect(u,d,m,v){var w=this;return(0,C.Z)(function*(){return yield w._originValidation(u),function f_(f){Lt().location.href=f}(yield Ba(u,d,m,Tn(),v)),new Promise(()=>{})})()}_initialize(u){const d=u._key();if(this.eventManagers[d]){const{manager:v,promise:w}=this.eventManagers[d];return v?Promise.resolve(v):(rn(w,"If manager is not set, promise should be"),w)}const m=this.initAndGetManager(u);return this.eventManagers[d]={promise:m},m.catch(()=>{delete this.eventManagers[d]}),m}initAndGetManager(u){var d=this;return(0,C.Z)(function*(){const m=yield function Fi(f){return Vo.apply(this,arguments)}(u),v=new bo(u);return m.register("authEvent",w=>(he(w?.authEvent,u,"invalid-auth-event"),{status:v.onEvent(w.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[u._key()]={manager:v},d.iframes[u._key()]=m,v})()}_isIframeWebStorageSupported(u,d){this.iframes[u._key()].send(zu,{type:zu},v=>{var w;const N=null===(w=v?.[0])||void 0===w?void 0:w[zu];void 0!==N&&d(!!N),mt(u,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(u){const d=u._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function Bf(f){return ec.apply(this,arguments)}(u)),this.originValidationPromises[d]}get _shouldInitProactively(){return _n()||Le()||De()}};class ja{constructor(u){this.factorId=u}_process(u,d,m){switch(d.type){case"enroll":return this._finalizeEnroll(u,d.credential,m);case"signin":return this._finalizeSignIn(u,d.credential);default:return xt("unexpected MultiFactorSessionType")}}}class Zs extends ja{constructor(u){super("phone"),this.credential=u}static _fromCredential(u){return new Zs(u)}_finalizeEnroll(u,d,m){return function ZS(f,u){return ae(f,"POST","/v2/accounts/mfaEnrollment:finalize",G(f,u))}(u,{idToken:d,displayName:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(u,d){return function Sf(f,u){return ae(f,"POST","/v2/accounts/mfaSignIn:finalize",G(f,u))}(u,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let UE=(()=>{class f{constructor(){}static assertion(d){return Zs._fromCredential(d)}}return f.FACTOR_ID="phone",f})();var $_="@firebase/auth";class aR{constructor(u){this.auth=u,this.internalListeners=new Map}getUid(){var u;return this.assertAuthConfigured(),(null===(u=this.auth.currentUser)||void 0===u?void 0:u.uid)||null}getToken(u){var d=this;return(0,C.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(u)}:null})()}addAuthTokenListener(u){if(this.assertAuthConfigured(),this.internalListeners.has(u))return;const d=this.auth.onIdTokenChanged(m=>{u(m?.stsTokenManager.accessToken||null)});this.internalListeners.set(u,d),this.updateProactiveRefresh()}removeAuthTokenListener(u){this.assertAuthConfigured();const d=this.internalListeners.get(u);d&&(this.internalListeners.delete(u),d(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ic=(0,J.Pz)("authIdTokenMaxAge")||300;let Hu=null;const qu=f=>function(){var u=(0,C.Z)(function*(d){const m=d&&(yield d.getIdTokenResult()),v=m&&((new Date).getTime()-Date.parse(m.issuedAtTime))/1e3;if(v&&v>ic)return;const w=m?.token;Hu!==w&&(Hu=w,yield fetch(f,{method:w?"POST":"DELETE",headers:w?{Authorization:`Bearer ${w}`}:{}}))});return function(d){return u.apply(this,arguments)}}();function lR(f=(0,L.getApp)()){const u=(0,L._getProvider)(f,"auth");if(u.isInitialized())return u.getImmediate();const d=function zS(f,u){const d=(0,L._getProvider)(f,"auth");if(d.isInitialized()){const v=d.getImmediate(),w=d.getOptions();if((0,J.vZ)(w,u??{}))return v;mt(v,"already-initialized")}return d.initialize({options:u})}(f,{popupRedirectResolver:z_,persistence:[Ru,fE,vo]}),m=(0,J.Pz)("authTokenSyncURL");if(m){const w=qu(m);(function $s(f,u,d){(0,J.m9)(f).beforeAuthStateChanged(u,d)})(d,w,()=>w(d.currentUser)),function Ef(f,u,d,m){(0,J.m9)(f).onIdTokenChanged(u,d,m)}(d,N=>w(N))}const v=(0,J.q4)("auth");return v&&rE(d,`http://${v}`),d}!function nc(f){(0,L._registerComponent)(new fn.wA("auth",(u,{options:d})=>{const m=u.getProvider("app").getImmediate(),v=u.getProvider("heartbeat"),w=u.getProvider("app-check-internal"),{apiKey:N,authDomain:K}=m.options;he(N&&!N.includes(":"),"invalid-api-key",{appName:m.name});const ue={apiKey:N,authDomain:K,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ht(f)},Se=new VS(m,v,w,ue);return function ge(f,u){const d=u?.persistence||[],m=(Array.isArray(d)?d:[d]).map(ee);u?.errorMap&&f._updateErrorMap(u.errorMap),f._initializeWithPersistence(m,u?.popupRedirectResolver)}(Se,d),Se},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((u,d,m)=>{u.getProvider("auth-internal").initialize()})),(0,L._registerComponent)(new fn.wA("auth-internal",u=>{const d=vn(u.getProvider("auth").getImmediate());return new aR(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,L.registerVersion)($_,"1.5.1",function Hf(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(f)),(0,L.registerVersion)($_,"1.5.1","esm2017")}("Browser")},58:(oo,Gn,$e)=>{$e.d(Gn,{BH:()=>nr,G6:()=>so,L:()=>St,LL:()=>se,P0:()=>pn,Pz:()=>jt,Sg:()=>Vn,UG:()=>xt,ZB:()=>Oe,ZR:()=>ae,aH:()=>mt,b$:()=>Pn,eu:()=>X,hl:()=>Q,jU:()=>rn,m9:()=>fo,ne:()=>rr,pd:()=>zr,q4:()=>Kn,r3:()=>Yn,ru:()=>Tn,tV:()=>oe,uI:()=>he,vZ:()=>ao,w1:()=>Br,xO:()=>co,xb:()=>qi,z$:()=>lt,zd:()=>jr});const Ne=function(R){const D=[];let b=0;for(let I=0;I<R.length;I++){let y=R.charCodeAt(I);y<128?D[b++]=y:y<2048?(D[b++]=y>>6|192,D[b++]=63&y|128):55296==(64512&y)&&I+1<R.length&&56320==(64512&R.charCodeAt(I+1))?(y=65536+((1023&y)<<10)+(1023&R.charCodeAt(++I)),D[b++]=y>>18|240,D[b++]=y>>12&63|128,D[b++]=y>>6&63|128,D[b++]=63&y|128):(D[b++]=y>>12|224,D[b++]=y>>6&63|128,D[b++]=63&y|128)}return D},fn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(R,D){if(!Array.isArray(R))throw Error("encodeByteArray takes an array as a parameter");this.init_();const b=D?this.byteToCharMapWebSafe_:this.byteToCharMap_,I=[];for(let y=0;y<R.length;y+=3){const S=R[y],ee=y+1<R.length,Re=ee?R[y+1]:0,Ae=y+2<R.length,We=Ae?R[y+2]:0;let qt=(15&Re)<<2|We>>6,Le=63&We;Ae||(Le=64,ee||(qt=64)),I.push(b[S>>2],b[(3&S)<<4|Re>>4],b[qt],b[Le])}return I.join("")},encodeString(R,D){return this.HAS_NATIVE_SUPPORT&&!D?btoa(R):this.encodeByteArray(Ne(R),D)},decodeString(R,D){return this.HAS_NATIVE_SUPPORT&&!D?atob(R):function(R){const D=[];let b=0,I=0;for(;b<R.length;){const y=R[b++];if(y<128)D[I++]=String.fromCharCode(y);else if(y>191&&y<224){const S=R[b++];D[I++]=String.fromCharCode((31&y)<<6|63&S)}else if(y>239&&y<365){const Ae=((7&y)<<18|(63&R[b++])<<12|(63&R[b++])<<6|63&R[b++])-65536;D[I++]=String.fromCharCode(55296+(Ae>>10)),D[I++]=String.fromCharCode(56320+(1023&Ae))}else{const S=R[b++],ee=R[b++];D[I++]=String.fromCharCode((15&y)<<12|(63&S)<<6|63&ee)}}return D.join("")}(this.decodeStringToByteArray(R,D))},decodeStringToByteArray(R,D){this.init_();const b=D?this.charToByteMapWebSafe_:this.charToByteMap_,I=[];for(let y=0;y<R.length;){const S=b[R.charAt(y++)],Re=y<R.length?b[R.charAt(y)]:0;++y;const We=y<R.length?b[R.charAt(y)]:64;++y;const Ie=y<R.length?b[R.charAt(y)]:64;if(++y,null==S||null==Re||null==We||null==Ie)throw new Mn;I.push(S<<2|Re>>4),64!==We&&(I.push(Re<<4&240|We>>2),64!==Ie&&I.push(We<<6&192|Ie))}return I},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let R=0;R<this.ENCODED_VALS.length;R++)this.byteToCharMap_[R]=this.ENCODED_VALS.charAt(R),this.charToByteMap_[this.byteToCharMap_[R]]=R,this.byteToCharMapWebSafe_[R]=this.ENCODED_VALS_WEBSAFE.charAt(R),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[R]]=R,R>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(R)]=R,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(R)]=R)}}};class Mn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const St=function(R){return function(R){const D=Ne(R);return fn.encodeByteArray(D,!0)}(R).replace(/\./g,"")},oe=function(R){try{return fn.decodeString(R,!0)}catch(D){console.error("base64Decode failed: ",D)}return null};function Oe(R,D){if(!(D instanceof Object))return D;switch(D.constructor){case Date:return new Date(D.getTime());case Object:void 0===R&&(R={});break;case Array:R=[];break;default:return D}for(const b in D)!D.hasOwnProperty(b)||!ot(b)||(R[b]=Oe(R[b],D[b]));return R}function ot(R){return"__proto__"!==R}const Je=()=>{try{return function kt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const R=process.env.__FIREBASE_DEFAULTS__;return R?JSON.parse(R):void 0})()||(()=>{if(typeof document>"u")return;let R;try{R=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const D=R&&oe(R[1]);return D&&JSON.parse(D)})()}catch(R){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${R}`)}},Kn=R=>{var D,b;return null===(b=null===(D=Je())||void 0===D?void 0:D.emulatorHosts)||void 0===b?void 0:b[R]},pn=R=>{const D=Kn(R);if(!D)return;const b=D.lastIndexOf(":");if(b<=0||b+1===D.length)throw new Error(`Invalid host ${D} with no separate hostname and port!`);const I=parseInt(D.substring(b+1),10);return"["===D[0]?[D.substring(1,b-1),I]:[D.substring(0,b),I]},mt=()=>{var R;return null===(R=Je())||void 0===R?void 0:R.config},jt=R=>{var D;return null===(D=Je())||void 0===D?void 0:D[`_${R}`]};class nr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((D,b)=>{this.resolve=D,this.reject=b})}wrapCallback(D){return(b,I)=>{b?this.reject(b):this.resolve(I),"function"==typeof D&&(this.promise.catch(()=>{}),1===D.length?D(b):D(b,I))}}}function Vn(R,D){if(R.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const I=D||"demo-project",y=R.iat||0,S=R.sub||R.user_id;if(!S)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ee=Object.assign({iss:`https://securetoken.google.com/${I}`,aud:I,iat:y,exp:y+3600,auth_time:y,sub:S,user_id:S,firebase:{sign_in_provider:"custom",identities:{}}},R);return[St(JSON.stringify({alg:"none",type:"JWT"})),St(JSON.stringify(ee)),""].join(".")}function lt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function he(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lt())}function xt(){var R;const D=null===(R=Je())||void 0===R?void 0:R.forceEnvironment;if("node"===D)return!0;if("browser"===D)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function rn(){return"object"==typeof self&&self.self===self}function Tn(){const R="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof R&&void 0!==R.id}function Pn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Br(){const R=lt();return R.indexOf("MSIE ")>=0||R.indexOf("Trident/")>=0}function so(){return!xt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Q(){try{return"object"==typeof indexedDB}catch{return!1}}function X(){return new Promise((R,D)=>{try{let b=!0;const I="validate-browser-context-for-indexeddb-analytics-module",y=self.indexedDB.open(I);y.onsuccess=()=>{y.result.close(),b||self.indexedDB.deleteDatabase(I),R(!0)},y.onupgradeneeded=()=>{b=!1},y.onerror=()=>{var S;D((null===(S=y.error)||void 0===S?void 0:S.message)||"")}}catch(b){D(b)}})}class ae extends Error{constructor(D,b,I){super(b),this.code=D,this.customData=I,this.name="FirebaseError",Object.setPrototypeOf(this,ae.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,se.prototype.create)}}class se{constructor(D,b,I){this.service=D,this.serviceName=b,this.errors=I}create(D,...b){const I=b[0]||{},y=`${this.service}/${D}`,S=this.errors[D],ee=S?function ye(R,D){return R.replace(pt,(b,I)=>{const y=D[I];return null!=y?String(y):`<${I}?>`})}(S,I):"Error";return new ae(y,`${this.serviceName}: ${ee} (${y}).`,I)}}const pt=/\{\$([^}]+)}/g;function Yn(R,D){return Object.prototype.hasOwnProperty.call(R,D)}function qi(R){for(const D in R)if(Object.prototype.hasOwnProperty.call(R,D))return!1;return!0}function ao(R,D){if(R===D)return!0;const b=Object.keys(R),I=Object.keys(D);for(const y of b){if(!I.includes(y))return!1;const S=R[y],ee=D[y];if(Et(S)&&Et(ee)){if(!ao(S,ee))return!1}else if(S!==ee)return!1}for(const y of I)if(!b.includes(y))return!1;return!0}function Et(R){return null!==R&&"object"==typeof R}function co(R){const D=[];for(const[b,I]of Object.entries(R))Array.isArray(I)?I.forEach(y=>{D.push(encodeURIComponent(b)+"="+encodeURIComponent(y))}):D.push(encodeURIComponent(b)+"="+encodeURIComponent(I));return D.length?"&"+D.join("&"):""}function jr(R){const D={};return R.replace(/^\?/,"").split("&").forEach(I=>{if(I){const[y,S]=I.split("=");D[decodeURIComponent(y)]=decodeURIComponent(S)}}),D}function zr(R){const D=R.indexOf("?");if(!D)return"";const b=R.indexOf("#",D);return R.substring(D,b>0?b:void 0)}function rr(R,D){const b=new or(R,D);return b.subscribe.bind(b)}class or{constructor(D,b){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=b,this.task.then(()=>{D(this)}).catch(I=>{this.error(I)})}next(D){this.forEachObserver(b=>{b.next(D)})}error(D){this.forEachObserver(b=>{b.error(D)}),this.close(D)}complete(){this.forEachObserver(D=>{D.complete()}),this.close()}subscribe(D,b,I){let y;if(void 0===D&&void 0===b&&void 0===I)throw new Error("Missing Observer.");y=function ci(R,D){if("object"!=typeof R||null===R)return!1;for(const b of D)if(b in R&&"function"==typeof R[b])return!0;return!1}(D,["next","error","complete"])?D:{next:D,error:b,complete:I},void 0===y.next&&(y.next=Ut),void 0===y.error&&(y.error=Ut),void 0===y.complete&&(y.complete=Ut);const S=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?y.error(this.finalError):y.complete()}catch{}}),this.observers.push(y),S}unsubscribeOne(D){void 0===this.observers||void 0===this.observers[D]||(delete this.observers[D],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(D){if(!this.finalized)for(let b=0;b<this.observers.length;b++)this.sendOne(b,D)}sendOne(D,b){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[D])try{b(this.observers[D])}catch(I){typeof console<"u"&&console.error&&console.error(I)}})}close(D){this.finalized||(this.finalized=!0,void 0!==D&&(this.finalError=D),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ut(){}function fo(R){return R&&R._delegate?R._delegate:R}},420:(oo,Gn,$e)=>{function C(n){return"function"==typeof n}function J(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const L=J(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Ne(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class yt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(C(i))try{i()}catch(o){e=o instanceof L?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{Jt(o)}catch(s){e=e??[],s instanceof L?e=[...e,...s.errors]:e.push(s)}}if(e)throw new L(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Jt(e);else{if(e instanceof yt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ne(t,e)}remove(e){const{_finalizers:t}=this;t&&Ne(t,e),e instanceof yt&&e._removeParent(this)}}yt.EMPTY=(()=>{const n=new yt;return n.closed=!0,n})();const fn=yt.EMPTY;function Mn(n){return n instanceof yt||n&&"closed"in n&&C(n.remove)&&C(n.add)&&C(n.unsubscribe)}function Jt(n){C(n)?n():n.unsubscribe()}const St={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},oe={setTimeout(n,e,...t){const{delegate:i}=oe;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=oe;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function pe(n){oe.setTimeout(()=>{const{onUnhandledError:e}=St;if(!e)throw n;e(n)})}function Oe(){}const ot=bt("C",void 0,void 0);function bt(n,e,t){return{kind:n,value:e,error:t}}let Xe=null;function Je(n){if(St.useDeprecatedSynchronousErrorHandling){const e=!Xe;if(e&&(Xe={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=Xe;if(Xe=null,t)throw i}}else n()}class pn extends yt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Mn(e)&&e.add(this)):this.destination=rn}static create(e,t,i){return new Vn(e,t,i)}next(e){this.isStopped?xt(function Zn(n){return bt("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?xt(function kt(n){return bt("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?xt(ot,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const mt=Function.prototype.bind;function jt(n,e){return mt.call(n,e)}class nr{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){lt(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){lt(i)}else lt(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){lt(t)}}}class Vn extends pn{constructor(e,t,i){let r;if(super(),C(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&St.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&jt(e.next,o),error:e.error&&jt(e.error,o),complete:e.complete&&jt(e.complete,o)}):r=e}this.destination=new nr(r)}}function lt(n){St.useDeprecatedSynchronousErrorHandling?function Kn(n){St.useDeprecatedSynchronousErrorHandling&&Xe&&(Xe.errorThrown=!0,Xe.error=n)}(n):pe(n)}function xt(n,e){const{onStoppedNotification:t}=St;t&&oe.setTimeout(()=>t(n,e))}const rn={closed:!0,next:Oe,error:function he(n){throw n},complete:Oe},Tn="function"==typeof Symbol&&Symbol.observable||"@@observable";function Pn(n){return n}function Br(n){return 0===n.length?Pn:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let Ke=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const o=function Q(n){return n&&n instanceof pn||function so(n){return n&&C(n.next)&&C(n.error)&&C(n.complete)}(n)&&Mn(n)}(t)?t:new Vn(t,i,r);return Je(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=ir(i))((r,o)=>{const s=new Vn({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[Tn](){return this}pipe(...t){return Br(t)(this)}toPromise(t){return new(t=ir(t))((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function ir(n){var e;return null!==(e=n??St.Promise)&&void 0!==e?e:Promise}const X=J(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let H=(()=>{class n extends Ke{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new G(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new X}next(t){Je(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){Je(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Je(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:o}=this;return i||r?fn:(this.currentObservers=null,o.push(t),new yt(()=>{this.currentObservers=null,Ne(o,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){const t=new Ke;return t.source=this,t}}return n.create=(e,t)=>new G(e,t),n})();class G extends H{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:fn}}function ae(n){return C(n?.lift)}function se(n){return e=>{if(ae(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ye(n,e,t,i,r){return new pt(n,e,t,i,r)}class pt extends pn{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function be(n,e){return se((t,i)=>{let r=0;t.subscribe(ye(i,o=>{i.next(n.call(e,o,r++))}))})}var je=$e(582);const Ct=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function sn(n){return C(n?.then)}function Zt(n){return C(n[Tn])}function mn(n){return Symbol.asyncIterator&&C(n?.[Symbol.asyncIterator])}function Qn(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const li=function Yn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function qi(n){return C(n?.[li])}function Ur(n){return(0,je.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield(0,je.qq)(t.read());if(r)return yield(0,je.qq)(void 0);yield yield(0,je.qq)(i)}}finally{t.releaseLock()}})}function ao(n){return C(n?.getReader)}function Et(n){if(n instanceof Ke)return n;if(null!=n){if(Zt(n))return function lo(n){return new Ke(e=>{const t=n[Tn]();if(C(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Ct(n))return function co(n){return new Ke(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(sn(n))return function jr(n){return new Ke(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,pe)})}(n);if(mn(n))return yi(n);if(qi(n))return function zr(n){return new Ke(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(ao(n))return function rr(n){return yi(Ur(n))}(n)}throw Qn(n)}function yi(n){return new Ke(e=>{(function or(n,e){var t,i,r,o;return(0,je.mG)(this,void 0,void 0,function*(){try{for(t=(0,je.KL)(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function sr(n,e,t,i=0,r=!1){const o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function Ut(n,e,t=1/0){return C(e)?Ut((i,r)=>be((o,s)=>e(i,o,r,s))(Et(n(i,r))),t):("number"==typeof e&&(t=e),se((i,r)=>function ci(n,e,t,i,r,o,s,a){const l=[];let c=0,h=0,p=!1;const g=()=>{p&&!l.length&&!c&&e.complete()},_=x=>c<i?E(x):l.push(x),E=x=>{o&&e.next(x),c++;let T=!1;Et(t(x,h++)).subscribe(ye(e,V=>{r?.(V),o?_(V):e.next(V)},()=>{T=!0},void 0,()=>{if(T)try{for(c--;l.length&&c<i;){const V=l.shift();s?sr(e,s,()=>E(V)):E(V)}g()}catch(V){e.error(V)}}))};return n.subscribe(ye(e,_,()=>{p=!0,g()})),()=>{a?.()}}(i,r,n,t)))}function ar(n=1/0){return Ut(Pn,n)}const kn=new Ke(n=>n.complete());function Dn(n){return n&&C(n.schedule)}function uo(n){return n[n.length-1]}function ho(n){return C(uo(n))?n.pop():void 0}function $r(n){return Dn(uo(n))?n.pop():void 0}function Bn(n,e=0){return se((t,i)=>{t.subscribe(ye(i,r=>sr(i,n,()=>i.next(r),e),()=>sr(i,n,()=>i.complete(),e),r=>sr(i,n,()=>i.error(r),e)))})}function bi(n,e=0){return se((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function fo(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ke(t=>{sr(t,e,()=>{const i=n[Symbol.asyncIterator]();sr(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function b(n,e){return e?function D(n,e){if(null!=n){if(Zt(n))return function lr(n,e){return Et(n).pipe(bi(e),Bn(e))}(n,e);if(Ct(n))return function Qo(n,e){return new Ke(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(sn(n))return function Ea(n,e){return Et(n).pipe(bi(e),Bn(e))}(n,e);if(mn(n))return fo(n,e);if(qi(n))return function ks(n,e){return new Ke(t=>{let i;return sr(t,e,()=>{i=n[li](),sr(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){return void t.error(s)}o?t.complete():t.next(r)},0,!0)}),()=>C(i?.return)&&i.return()})}(n,e);if(ao(n))return function R(n,e){return fo(Ur(n),e)}(n,e)}throw Qn(n)}(n,e):Et(n)}function I(...n){const e=$r(n),t=function Xn(n,e){return"number"==typeof uo(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?Et(i[0]):ar(t)(b(i,e)):kn}class y extends H{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function S(...n){return b(n,$r(n))}function ee(n={}){const{connector:e=(()=>new H),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,l,c=0,h=!1,p=!1;const g=()=>{a?.unsubscribe(),a=void 0},_=()=>{g(),s=l=void 0,h=p=!1},E=()=>{const x=s;_(),x?.unsubscribe()};return se((x,T)=>{c++,!p&&!h&&g();const V=l=l??e();T.add(()=>{c--,0===c&&!p&&!h&&(a=Re(E,r))}),V.subscribe(T),!s&&c>0&&(s=new Vn({next:M=>V.next(M),error:M=>{p=!0,g(),a=Re(_,t,M),V.error(M)},complete:()=>{h=!0,g(),a=Re(_,i),V.complete()}}),Et(x).subscribe(s))})(o)}}function Re(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new Vn({next:()=>{i.unsubscribe(),n()}});return Et(e(...t)).subscribe(i)}function Ae(n,e){return se((t,i)=>{let r=null,o=0,s=!1;const a=()=>s&&!r&&i.complete();t.subscribe(ye(i,l=>{r?.unsubscribe();let c=0;const h=o++;Et(n(l,h)).subscribe(r=ye(i,p=>i.next(e?e(l,p,h,c++):p),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function We(n,e=Pn){return n=n??Rt,se((t,i)=>{let r,o=!0;t.subscribe(ye(i,s=>{const a=e(s);(o||!n(r,a))&&(o=!1,r=a,i.next(s))}))})}function Rt(n,e){return n===e}function Ie(n){for(let e in n)if(n[e]===Ie)return e;throw Error("Could not find renamed property on target object.")}function qt(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Le(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Le).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function ri(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Os=Ie({__forward_ref__:Ie});function z(n){return n.__forward_ref__=z,n.toString=function(){return Le(this())},n}function O(n){return de(n)?n():n}function de(n){return"function"==typeof n&&n.hasOwnProperty(Os)&&n.__forward_ref__===z}function De(n){return n&&!!n.\u0275providers}const gt="https://g.co/ng/security#xss";class B extends Error{constructor(e,t){super(function _n(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Pe(n){return"string"==typeof n?n:null==n?"":String(n)}function Wh(n,e){throw new B(-201,!1)}function Ei(n,e){null==n&&function Ge(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function ge(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Tt(n){return{providers:n.providers||[],imports:n.imports||[]}}function su(n){return Kg(n,Ia)||Kg(n,au)}function Kg(n,e){return n.hasOwnProperty(e)?n[e]:null}function Bl(n){return n&&(n.hasOwnProperty(Gh)||n.hasOwnProperty(oE))?n[Gh]:null}const Ia=Ie({\u0275prov:Ie}),Gh=Ie({\u0275inj:Ie}),au=Ie({ngInjectableDef:Ie}),oE=Ie({ngInjectorDef:Ie});var ft=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ft||{});let Zh;function Wi(n){const e=Zh;return Zh=n,e}function cu(n,e,t){const i=su(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&ft.Optional?null:void 0!==e?e:void Wh(Le(n))}const Wt=globalThis;class re{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ge({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Fs={},ef="__NG_DI_FLAG__",ur="ngTempTokenPath",tf=/\n/gm,hu="__source";let xa;function Xo(n){const e=xa;return xa=n,e}function lE(n,e=ft.Default){if(void 0===xa)throw new B(-203,!1);return null===xa?cu(n,void 0,e):xa.get(n,e&ft.Optional?null:void 0,e)}function F(n,e=ft.Default){return(function lu(){return Zh}()||lE)(O(n),e)}function xe(n,e=ft.Default){return F(n,fu(e))}function fu(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ls(n){const e=[];for(let t=0;t<n.length;t++){const i=O(n[t]);if(Array.isArray(i)){if(0===i.length)throw new B(900,!1);let r,o=ft.Default;for(let s=0;s<i.length;s++){const a=i[s],l=rf(a);"number"==typeof l?-1===l?r=a.token:o|=l:r=a}e.push(F(r,o))}else e.push(F(i))}return e}function pu(n,e){return n[ef]=e,n.prototype[ef]=e,n}function rf(n){return n[ef]}function dr(n){return{toString:n}.toString()}var mu=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(mu||{}),Tr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Tr||{});const po={},Ot=[],No=Ie({\u0275cmp:Ie}),sf=Ie({\u0275dir:Ie}),Ta=Ie({\u0275pipe:Ie}),Jg=Ie({\u0275mod:Ie}),mo=Ie({\u0275fac:Ie}),Vs=Ie({__NG_ELEMENT_ID__:Ie}),hr=Ie({__NG_ENV_ID__:Ie});function af(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}function lf(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const o=t[i++],s=t[i++],a=t[i++];n.setAttribute(e,s,a,o)}else{const o=r,s=t[++i];jl(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function gu(n){return 3===n||4===n||6===n}function jl(n){return 64===n.charCodeAt(0)}function Da(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||cf(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function cf(n,e,t,i,r){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[o+1]=r));if(i===n[o+1])return void(n[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==i&&n.splice(o++,0,i),null!==r&&n.splice(o++,0,r)}const e_="ng-template";function uf(n,e,t){let i=0,r=!0;for(;i<n.length;){let o=n[i++];if("string"==typeof o&&r){const s=n[i++];if(t&&"class"===o&&-1!==af(s.toLowerCase(),e,0))return!0}else{if(1===o){for(;i<n.length&&"string"==typeof(o=n[i++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(r=!1)}}return!1}function _u(n){return 4===n.type&&n.value!==e_}function df(n,e,t){return e===(4!==n.type||t?n.value:e_)}function vu(n,e,t){let i=4;const r=n.attrs||[],o=function hf(n){for(let e=0;e<n.length;e++)if(gu(n[e]))return e;return n.length}(r);let s=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!s)if(4&i){if(i=2|1&i,""!==l&&!df(n,l,t)||""===l&&1===e.length){if(fr(i))return!1;s=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!uf(n.attrs,c,t)){if(fr(i))return!1;s=!0}continue}const p=t_(8&i?"class":l,r,_u(n),t);if(-1===p){if(fr(i))return!1;s=!0;continue}if(""!==c){let g;g=p>o?"":r[p+1].toLowerCase();const _=8&i?g:null;if(_&&-1!==af(_,c,0)||2&i&&c!==g){if(fr(i))return!1;s=!0}}}}else{if(!s&&!fr(i)&&!fr(l))return!1;if(s&&fr(l))continue;s=!1,i=l|1&i}}return fr(i)||s}function fr(n){return 0==(1&n)}function t_(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){const s=e[r];if(s===n)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function bu(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function yu(n,e,t=!1){for(let i=0;i<e.length;i++)if(vu(n,e[i],t))return!0;return!1}function pf(n,e){return n?":not("+e.trim()+")":e}function mf(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&i){const a=n[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""!==r&&!fr(s)&&(e+=pf(o,r),r=""),i=s,o=o||!fr(i);t++}return""!==r&&(e+=pf(o,r)),e}function On(n){return dr(()=>{const e=r_(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===mu.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Tr.Emulated,styles:n.styles||Ot,_:null,schemas:n.schemas||null,tView:null,id:""};wu(t);const i=n.dependencies;return t.directiveDefs=zl(i,!1),t.pipeDefs=zl(i,!0),t.id=function uE(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function cE(n){return wt(n)||ui(n)}function vf(n){return null!==n}function _t(n){return dr(()=>({type:n.type,bootstrap:n.bootstrap||Ot,declarations:n.declarations||Ot,imports:n.imports||Ot,exports:n.exports||Ot,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Eu(n,e){if(null==n)return po;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),t[r]=i,e&&(e[r]=o)}return t}function He(n){return dr(()=>{const e=r_(n);return wu(e),e})}function wt(n){return n[No]||null}function ui(n){return n[sf]||null}function di(n){return n[Ta]||null}function Oi(n,e){const t=n[Jg]||null;if(!t&&!0===e)throw new Error(`Type ${Le(n)} does not have '\u0275mod' property.`);return t}function r_(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||po,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Ot,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Eu(n.inputs,e),outputs:Eu(n.outputs)}}function wu(n){n.features?.forEach(e=>e(n))}function zl(n,e){if(!n)return null;const t=e?di:cE;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(vf)}const an=0,Ce=1,tt=2,ln=3,Hr=4,Bs=5,Ii=6,Sa=7,yn=8,es=9,ts=10,nt=11,Us=12,o_=13,ns=14,Nn=15,js=16,Ra=17,Dr=18,$l=19,Iu=20,is=21,Fo=22,Ma=23,zs=24,vt=25,xu=1,s_=2,go=7,Pa=9,xi=11;function pr(n){return Array.isArray(n)&&"object"==typeof n[xu]}function hi(n){return Array.isArray(n)&&!0===n[xu]}function Ef(n){return 0!=(4&n.flags)}function $s(n){return n.componentOffset>-1}function wf(n){return 1==(1&n.flags)}function _o(n){return!!n.template}function a_(n){return 0!=(512&n[tt])}function ka(n,e){return n.hasOwnProperty(mo)?n[mo]:null}let Fn=null,Tu=!1;function Lt(n){const e=Fn;return Fn=n,e}const f_={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function p_(n){if(!Gl(n)||n.dirty){if(!n.producerMustRecompute(n)&&!Wl(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function m_(n){n.dirty=!0,function Au(n){if(void 0===n.liveConsumerNode)return;const e=Tu;Tu=!0;try{for(const t of n.liveConsumerNode)t.dirty||m_(t)}finally{Tu=e}}(n),n.consumerMarkedDirty?.(n)}function Su(n){return n&&(n.nextProducerIndex=0),Lt(n)}function Tf(n,e){if(Lt(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Gl(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)qs(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Wl(n){rs(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(p_(t),i!==t.version))return!0}return!1}function Df(n){if(rs(n),Gl(n))for(let e=0;e<n.producerNode.length;e++)qs(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function qs(n,e){if(function Af(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),rs(n),1===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)qs(n.producerNode[i],n.producerIndexOfThis[i]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];rs(r),r.producerIndexOfThis[i]=e}}function Gl(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function rs(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let mE=null;const E_=()=>{},EE=(()=>({...f_,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:E_}))();class w_{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Ar(){return I_}function I_(n){return n.type.prototype.ngOnChanges&&(n.setInput=Mf),wE}function wE(){const n=Mu(this),e=n?.current;if(e){const t=n.previous;if(t===po)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function Mf(n,e,t,i){const r=this.declaredInputs[t],o=Mu(n)||function IE(n,e){return n[x_]=e}(n,{previous:po,current:null}),s=o.current||(o.current={}),a=o.previous,l=a[r];s[r]=new w_(l&&l.currentValue,e,a===po),n[i]=e}Ar.ngInherit=!0;const x_="__ngSimpleChanges__";function Mu(n){return n[x_]||null}const Sr=function(n,e,t){};function en(n){for(;Array.isArray(n);)n=n[an];return n}function ku(n,e){return en(e[n])}function Un(n,e){return en(e[n.index])}function C_(n,e){return n.data[e]}function mr(n,e){const t=e[n];return pr(t)?t:t[an]}function os(n,e){return null==e?null:n[e]}function Ou(n){n[Ra]=0}function TE(n){1024&n[tt]||(n[tt]|=1024,D_(n,1))}function Nu(n){1024&n[tt]&&(n[tt]&=-1025,D_(n,-1))}function D_(n,e){let t=n[ln];if(null===t)return;t[Bs]+=e;let i=t;for(t=t[ln];null!==t&&(1===e&&1===i[Bs]||-1===e&&0===i[Bs]);)t[Bs]+=e,i=t,t=t[ln]}const Qe={lFrame:L_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Lu(){return Qe.bindingsEnabled}function le(){return Qe.lFrame.lView}function Mt(){return Qe.lFrame.tView}function Kt(n){return Qe.lFrame.contextLView=n,n[yn]}function zt(n){return Qe.lFrame.contextLView=null,n}function fi(){let n=M_();for(;null!==n&&64===n.type;)n=n.parent;return n}function M_(){return Qe.lFrame.currentTNode}function yo(n,e){const t=Qe.lFrame;t.currentTNode=n,t.isParent=e}function Xl(){return Qe.lFrame.isParent}function Jl(){Qe.lFrame.isParent=!1}function Ni(){const n=Qe.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Gs(){return Qe.lFrame.bindingIndex++}function Lo(n){const e=Qe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function ME(n,e){const t=Qe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Bf(e)}function Bf(n){Qe.lFrame.currentDirectiveIndex=n}function k_(){return Qe.lFrame.currentQueryIndex}function Uf(n){Qe.lFrame.currentQueryIndex=n}function O_(n){const e=n[Ce];return 2===e.type?e.declTNode:1===e.type?n[Ii]:null}function N_(n,e,t){if(t&ft.SkipSelf){let r=e,o=n;for(;!(r=r.parent,null!==r||t&ft.Host||(r=O_(o),null===r||(o=o[ns],10&r.type))););if(null===r)return!1;e=r,n=o}const i=Qe.lFrame=F_();return i.currentTNode=e,i.lView=n,!0}function Va(n){const e=F_(),t=n[Ce];Qe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function F_(){const n=Qe.lFrame,e=null===n?null:n.child;return null===e?L_(n):e}function L_(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function V_(){const n=Qe.lFrame;return Qe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const B_=V_;function jf(){const n=V_();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Fi(){return Qe.lFrame.selectedIndex}function Vo(n){Qe.lFrame.selectedIndex=n}function bn(){const n=Qe.lFrame;return C_(n.tView,n.selectedIndex)}let U_=!0;function Uu(){return U_}function ss(n){U_=n}function ju(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),null!=h&&(n.destroyHooks??=[]).push(t,h)}}function Ba(n,e,t){zu(n,e,3,t)}function Ua(n,e,t,i){(3&n[tt])===t&&zu(n,e,t,i)}function $f(n,e){let t=n[tt];(3&t)===e&&(t&=8191,t+=1,n[tt]=t)}function zu(n,e,t,i){const o=i??-1,s=e.length-1;let a=0;for(let l=void 0!==i?65535&n[Ra]:0;l<s;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[Ra]+=65536),(a<o||-1==o)&&(z_(n,t,e,l),n[Ra]=(4294901760&n[Ra])+l+2),l++}function j_(n,e){Sr(4,n,e);const t=Lt(null);try{e.call(n)}finally{Lt(t),Sr(5,n,e)}}function z_(n,e,t,i){const r=t[i]<0,o=t[i+1],a=n[r?-t[i]:t[i]];r?n[tt]>>13<n[Ra]>>16&&(3&n[tt])===e&&(n[tt]+=8192,j_(a,o)):j_(a,o)}const ja=-1;class Zs{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function Hf(n){return n!==ja}function nc(n){return 32767&n}function ic(n,e){let t=function $E(n){return n>>16}(n),i=e;for(;t>0;)i=i[ns],t--;return i}let Hu=!0;function qu(n){const e=Hu;return Hu=n,e}const f=255,u=5;let d=0;const m={};function w(n,e){const t=K(n,e);if(-1!==t)return t;const i=e[Ce];i.firstCreatePass&&(n.injectorIndex=e.length,N(i.data,n),N(e,null),N(i.blueprint,null));const r=ue(n,e),o=n.injectorIndex;if(Hf(r)){const s=nc(r),a=ic(r,e),l=a[Ce].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=r,o}function N(n,e){n.push(0,0,0,0,0,0,0,0,e)}function K(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function ue(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=cR(r),null===i)return ja;if(t++,r=r[ns],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return ja}function Se(n,e,t){!function v(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Vs)&&(i=t[Vs]),null==i&&(i=t[Vs]=d++);const r=i&f;e.data[n+(r>>u)]|=1<<r}(n,e,t)}function It(n,e,t){if(t&ft.Optional||void 0!==n)return n;Wh()}function Li(n,e,t,i){if(t&ft.Optional&&void 0===i&&(i=null),!(t&(ft.Self|ft.Host))){const r=n[es],o=Wi(void 0);try{return r?r.get(e,i,t&ft.Optional):cu(e,i,t&ft.Optional)}finally{Wi(o)}}return It(i,0,t)}function Bo(n,e,t,i=ft.Default,r){if(null!==n){if(2048&e[tt]&&!(i&ft.Self)){const s=function T4(n,e,t,i,r){let o=n,s=e;for(;null!==o&&null!==s&&2048&s[tt]&&!(512&s[tt]);){const a=rc(o,s,t,i|ft.Self,m);if(a!==m)return a;let l=o.parent;if(!l){const c=s[Iu];if(c){const h=c.get(t,m,i);if(h!==m)return h}l=cR(s),s=s[ns]}o=l}return r}(n,e,t,i,m);if(s!==m)return s}const o=rc(n,e,t,i,m);if(o!==m)return o}return Li(e,t,i,r)}function rc(n,e,t,i,r){const o=function q_(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Vs)?n[Vs]:void 0;return"number"==typeof e?e>=0?e&f:HE:e}(t);if("function"==typeof o){if(!N_(e,n,i))return i&ft.Host?It(r,0,i):Li(e,t,i,r);try{let s;if(s=o(i),null!=s||i&ft.Optional)return s;Wh()}finally{B_()}}else if("number"==typeof o){let s=null,a=K(n,e),l=ja,c=i&ft.Host?e[Nn][Ii]:null;for((-1===a||i&ft.SkipSelf)&&(l=-1===a?ue(n,e):e[a+8],l!==ja&&qf(i,!1)?(s=e[Ce],a=nc(l),e=ic(l,e)):a=-1);-1!==a;){const h=e[Ce];if(Wu(o,a,h.data)){const p=H_(a,e,t,s,i,c);if(p!==m)return p}l=e[a+8],l!==ja&&qf(i,e[Ce].data[a+8]===c)&&Wu(o,a,e)?(s=h,a=nc(l),e=ic(l,e)):a=-1}}return r}function H_(n,e,t,i,r,o){const s=e[Ce],a=s.data[n+8],h=za(a,s,t,null==i?$s(a)&&Hu:i!=s&&0!=(3&a.type),r&ft.Host&&o===a);return null!==h?as(e,s,h,a):m}function za(n,e,t,i,r){const o=n.providerIndexes,s=e.data,a=1048575&o,l=n.directiveStart,h=o>>20,g=r?a+h:n.directiveEnd;for(let _=i?a:a+h;_<g;_++){const E=s[_];if(_<l&&t===E||_>=l&&E.type===t)return _}if(r){const _=s[l];if(_&&_o(_)&&_.type===t)return l}return null}function as(n,e,t,i){let r=n[t];const o=e.data;if(function UE(n){return n instanceof Zs}(r)){const s=r;s.resolving&&function Vl(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new B(-200,`Circular dependency in DI detected for ${n}${t}`)}(function ht(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Pe(n)}(o[t]));const a=qu(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?Wi(s.injectImpl):null;N_(n,i,ft.Default);try{r=n[t]=s.factory(void 0,o,n,i),e.firstCreatePass&&t>=i.directiveStart&&function BE(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){const s=I_(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}(t,o[t],e)}finally{null!==c&&Wi(c),qu(a),s.resolving=!1,B_()}}return r}function Wu(n,e,t){return!!(t[e+(n>>u)]&1<<n)}function qf(n,e){return!(n&ft.Self||n&ft.Host&&e)}class Ci{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return Bo(this._tNode,this._lView,e,fu(i),t)}}function HE(){return new Ci(fi(),le())}function Jn(n){return dr(()=>{const e=n.prototype.constructor,t=e[mo]||Gf(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const o=r[mo]||Gf(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Gf(n){return de(n)?()=>{const e=Gf(O(n));return e&&e()}:ka(n)}function cR(n){const e=n[Ce],t=e.type;return 2===t?e.declTNode:1===t?n[Ii]:null}const Zu="__parameters__";function Qu(n,e,t){return dr(()=>{const i=function qE(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;const s=new r(...o);return a.annotation=s,a;function a(l,c,h){const p=l.hasOwnProperty(Zu)?l[Zu]:Object.defineProperty(l,Zu,{value:[]})[Zu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function Xu(n,e){n.forEach(t=>Array.isArray(t)?Xu(t,e):e(t))}function dR(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function G_(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function qr(n,e,t){let i=Ju(n,e);return i>=0?n[1|i]=t:(i=~i,function k4(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function WE(n,e){const t=Ju(n,e);if(t>=0)return n[1|t]}function Ju(n,e){return function hR(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}(n,e,1)}const Wr=pu(Qu("Optional"),8),K_=pu(Qu("SkipSelf"),4);function ev(n){return 128==(128&n.flags)}var Ha=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ha||{});const eH=/^>|^->|<!--|-->|--!>|<!-$/g,tH=/(<|>)/g,nH="\u200b$1\u200b";const YE=new Map;let iH=0;const JE="__ngContext__";function Gi(n,e){pr(e)?(n[JE]=e[$l],function oH(n){YE.set(n[$l],n)}(e)):n[JE]=e}let ew;function tw(n,e){return ew(n,e)}function Xf(n){const e=n[ln];return hi(e)?e[ln]:e}function PR(n){return OR(n[Us])}function kR(n){return OR(n[Hr])}function OR(n){for(;null!==n&&!hi(n);)n=n[Hr];return n}function nd(n,e,t,i,r){if(null!=i){let o,s=!1;hi(i)?o=i:pr(i)&&(s=!0,i=i[an]);const a=en(i);0===n&&null!==t?null==r?VR(e,t,a):oc(e,t,a,r||null,!0):1===n&&null!==t?oc(e,t,a,r||null,!0):2===n?function av(n,e,t){const i=ov(n,e);i&&function xH(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function DH(n,e,t,i,r){const o=t[go];o!==en(t)&&nd(e,n,i,o,r);for(let a=xi;a<t.length;a++){const l=t[a];ep(l[Ce],l,n,e,i,o)}}(e,n,o,t,r)}}function nw(n,e){return n.createComment(function xR(n){return n.replace(eH,e=>e.replace(tH,nH))}(e))}function iv(n,e,t){return n.createElement(e,t)}function FR(n,e){const t=n[Pa],i=t.indexOf(e);Nu(e),t.splice(i,1)}function rv(n,e){if(n.length<=xi)return;const t=xi+e,i=n[t];if(i){const r=i[js];null!==r&&r!==n&&FR(r,i),e>0&&(n[t-1][Hr]=i[Hr]);const o=G_(n,xi+e);!function gH(n,e){ep(n,e,e[nt],2,null,null),e[an]=null,e[Ii]=null}(i[Ce],i);const s=o[Dr];null!==s&&s.detachView(o[Ce]),i[ln]=null,i[Hr]=null,i[tt]&=-129}return i}function iw(n,e){if(!(256&e[tt])){const t=e[nt];e[Ma]&&Df(e[Ma]),e[zs]&&Df(e[zs]),t.destroyNode&&ep(n,e,t,3,null,null),function yH(n){let e=n[Us];if(!e)return rw(n[Ce],n);for(;e;){let t=null;if(pr(e))t=e[Us];else{const i=e[xi];i&&(t=i)}if(!t){for(;e&&!e[Hr]&&e!==n;)pr(e)&&rw(e[Ce],e),e=e[ln];null===e&&(e=n),pr(e)&&rw(e[Ce],e),t=e&&e[Hr]}e=t}}(e)}}function rw(n,e){if(!(256&e[tt])){e[tt]&=-129,e[tt]|=256,function IH(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof Zs)){const o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=r[o[s]],l=o[s+1];Sr(4,a,l);try{l.call(a)}finally{Sr(5,a,l)}}else{Sr(4,r,o);try{o.call(r)}finally{Sr(5,r,o)}}}}}(n,e),function wH(n,e){const t=n.cleanup,i=e[Sa];if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else t[o].call(i[t[o+1]]);null!==i&&(e[Sa]=null);const r=e[is];if(null!==r){e[is]=null;for(let o=0;o<r.length;o++)(0,r[o])()}}(n,e),1===e[Ce].type&&e[nt].destroy();const t=e[js];if(null!==t&&hi(e[ln])){t!==e[ln]&&FR(t,e);const i=e[Dr];null!==i&&i.detachView(n)}!function sH(n){YE.delete(n[$l])}(e)}}function ow(n,e,t){return function LR(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[an];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:o}=n.data[i.directiveStart+r];if(o===Tr.None||o===Tr.Emulated)return null}return Un(i,t)}}(n,e.parent,t)}function oc(n,e,t,i,r){n.insertBefore(e,t,i,r)}function VR(n,e,t){n.appendChild(e,t)}function BR(n,e,t,i,r){null!==i?oc(n,e,t,i,r):VR(n,e,t)}function ov(n,e){return n.parentNode(e)}let sw,lv,uw,cv,zR=function jR(n,e,t){return 40&n.type?Un(n,t):null};function sv(n,e,t,i){const r=ow(n,i,e),o=e[nt],a=function UR(n,e,t){return zR(n,e,t)}(i.parent||e[Ii],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)BR(o,r,t[l],a,!1);else BR(o,r,t,a,!1);void 0!==sw&&sw(o,i,e,t,r)}function Jf(n,e){if(null!==e){const t=e.type;if(3&t)return Un(e,n);if(4&t)return aw(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return Jf(n,i);{const r=n[e.index];return hi(r)?aw(-1,r):en(r)}}if(32&t)return tw(e,n)()||en(n[e.index]);{const i=HR(n,e);return null!==i?Array.isArray(i)?i[0]:Jf(Xf(n[Nn]),i):Jf(n,e.next)}}return null}function HR(n,e){return null!==e?n[Nn][Ii].projection[e.projection]:null}function aw(n,e){const t=xi+n+1;if(t<e.length){const i=e[t],r=i[Ce].firstChild;if(null!==r)return Jf(i,r)}return e[go]}function lw(n,e,t,i,r,o,s){for(;null!=t;){const a=i[t.index],l=t.type;if(s&&0===e&&(a&&Gi(en(a),i),t.flags|=2),32!=(32&t.flags))if(8&l)lw(n,e,t.child,i,r,o,!1),nd(e,n,r,a,o);else if(32&l){const c=tw(t,i);let h;for(;h=c();)nd(e,n,r,h,o);nd(e,n,r,a,o)}else 16&l?WR(n,e,i,t,r,o):nd(e,n,r,a,o);t=s?t.projectionNext:t.next}}function ep(n,e,t,i,r,o){lw(t,i,n.firstChild,e,r,o,!1)}function WR(n,e,t,i,r,o){const s=t[Nn],l=s[Ii].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)nd(e,n,r,l[c],o);else{let c=l;const h=s[ln];ev(i)&&(c.flags|=128),lw(n,e,c,h,r,o,!0)}}function GR(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function ZR(n,e,t){const{mergedAttrs:i,classes:r,styles:o}=t;null!==i&&lf(n,e,i),null!==r&&GR(n,e,r),null!==o&&function SH(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}function id(n){return function cw(){if(void 0===lv&&(lv=null,Wt.trustedTypes))try{lv=Wt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return lv}()?.createHTML(n)||n}function rd(){if(void 0!==uw)return uw;if(typeof document<"u")return document;throw new B(210,!1)}function dw(){if(void 0===cv&&(cv=null,Wt.trustedTypes))try{cv=Wt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return cv}function KR(n){return dw()?.createHTML(n)||n}function YR(n){return dw()?.createScriptURL(n)||n}class XR{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gt})`}}function qa(n){return n instanceof XR?n.changingThisBreaksApplicationSecurity:n}function tp(n,e){const t=function BH(n){return n instanceof XR&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${gt})`)}return t===e}class UH{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(id(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class jH{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=id(e),t}}const $H=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function hw(n){return(n=String(n)).match($H)?n:"unsafe:"+n}function Ks(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function np(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const e1=Ks("area,br,col,hr,img,wbr"),t1=Ks("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),n1=Ks("rp,rt"),fw=np(e1,np(t1,Ks("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),np(n1,Ks("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),np(n1,t1)),pw=Ks("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),r1=np(pw,Ks("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ks("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),HH=Ks("script,style,template");class qH{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!fw.hasOwnProperty(t))return this.sanitizedSomething=!0,!HH.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const o=i.item(r),s=o.name,a=s.toLowerCase();if(!r1.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;pw[a]&&(l=hw(l)),this.buf.push(" ",s,'="',o1(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();fw.hasOwnProperty(t)&&!e1.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(o1(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const WH=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,GH=/([^\#-~ |!])/g;function o1(n){return n.replace(/&/g,"&amp;").replace(WH,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(GH,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let uv;function mw(n){return"content"in n&&function KH(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var od=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(od||{});function wo(n){const e=ip();return e?KR(e.sanitize(od.HTML,n)||""):tp(n,"HTML")?KR(qa(n)):function ZH(n,e){let t=null;try{uv=uv||function JR(n){const e=new jH(n);return function zH(){try{return!!(new window.DOMParser).parseFromString(id(""),"text/html")}catch{return!1}}()?new UH(e):e}(n);let i=e?String(e):"";t=uv.getInertBodyElement(i);let r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=t.innerHTML,t=uv.getInertBodyElement(i)}while(i!==o);return id((new qH).sanitizeChildren(mw(t)||t))}finally{if(t){const i=mw(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}(rd(),Pe(n))}function gr(n){const e=ip();return e?e.sanitize(od.URL,n)||"":tp(n,"URL")?qa(n):hw(Pe(n))}function s1(n){const e=ip();if(e)return YR(e.sanitize(od.RESOURCE_URL,n)||"");if(tp(n,"ResourceURL"))return YR(qa(n));throw new B(904,!1)}function ip(){const n=le();return n&&n[ts].sanitizer}const rp=new re("ENVIRONMENT_INITIALIZER"),l1=new re("INJECTOR",-1),c1=new re("INJECTOR_DEF_TYPES");class gw{get(e,t=Fs){if(t===Fs){const i=new Error(`NullInjectorError: No provider for ${Le(e)}!`);throw i.name="NullInjectorError",i}return t}}function t3(...n){return{\u0275providers:u1(0,n),\u0275fromNgModule:!0}}function u1(n,...e){const t=[],i=new Set;let r;const o=s=>{t.push(s)};return Xu(e,s=>{const a=s;dv(a,o,[],i)&&(r||=[],r.push(a))}),void 0!==r&&d1(r,o),t}function d1(n,e){for(let t=0;t<n.length;t++){const{ngModule:i,providers:r}=n[t];vw(r,o=>{e(o,i)})}}function dv(n,e,t,i){if(!(n=O(n)))return!1;let r=null,o=Bl(n);const s=!o&&wt(n);if(o||s){if(s&&!s.standalone)return!1;r=n}else{const l=n.ngModule;if(o=Bl(l),!o)return!1;r=l}const a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of l)dv(c,e,t,i)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let c;i.add(r);try{Xu(o.imports,h=>{dv(h,e,t,i)&&(c||=[],c.push(h))})}finally{}void 0!==c&&d1(c,e)}if(!a){const c=ka(r)||(()=>new r);e({provide:r,useFactory:c,deps:Ot},r),e({provide:c1,useValue:r,multi:!0},r),e({provide:rp,useValue:()=>F(r),multi:!0},r)}const l=o.providers;if(null!=l&&!a){const c=n;vw(l,h=>{e(h,c)})}}}return r!==n&&void 0!==n.providers}function vw(n,e){for(let t of n)De(t)&&(t=t.\u0275providers),Array.isArray(t)?vw(t,e):e(t)}const n3=Ie({provide:String,useValue:Ie});function yw(n){return null!==n&&"object"==typeof n&&n3 in n}function sc(n){return"function"==typeof n}const bw=new re("Set Injector scope."),hv={},o3={};let Ew;function fv(){return void 0===Ew&&(Ew=new gw),Ew}class Gr{}class sd extends Gr{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Iw(e,s=>this.processProvider(s)),this.records.set(l1,ad(void 0,this)),r.has("environment")&&this.records.set(Gr,ad(void 0,this));const o=this.records.get(bw);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(c1.multi,Ot,ft.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Xo(this),i=Wi(void 0);try{return e()}finally{Xo(t),Wi(i)}}get(e,t=Fs,i=ft.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(hr))return e[hr](this);i=fu(i);const o=Xo(this),s=Wi(void 0);try{if(!(i&ft.SkipSelf)){let l=this.records.get(e);if(void 0===l){const c=function u3(n){return"function"==typeof n||"object"==typeof n&&n instanceof re}(e)&&su(e);l=c&&this.injectableDefInScope(c)?ad(ww(e),hv):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(i&ft.Self?fv():this.parent).get(e,t=i&ft.Optional&&t===Fs?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[ur]=a[ur]||[]).unshift(Le(e)),o)throw a;return function Oo(n,e,t,i){const r=n[ur];throw e[hu]&&r.unshift(e[hu]),n.message=function Ca(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=Le(e);if(Array.isArray(e))r=e.map(Le).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Le(a)))}r=`{${o.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(tf,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[ur]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Wi(s),Xo(o)}}resolveInjectorInitializers(){const e=Xo(this),t=Wi(void 0);try{const r=this.get(rp.multi,Ot,ft.Self);for(const o of r)o()}finally{Xo(e),Wi(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(Le(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new B(205,!1)}processProvider(e){let t=sc(e=O(e))?e:O(e&&e.provide);const i=function a3(n){return yw(n)?ad(void 0,n.useValue):ad(p1(n),hv)}(e);if(sc(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=ad(void 0,hv,!0),r.factory=()=>Ls(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===hv&&(t.value=o3,t.value=t.factory()),"object"==typeof t.value&&t.value&&function c3(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=O(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function ww(n){const e=su(n),t=null!==e?e.factory:ka(n);if(null!==t)return t;if(n instanceof re)throw new B(204,!1);if(n instanceof Function)return function s3(n){const e=n.length;if(e>0)throw function Kf(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}(e,"?"),new B(204,!1);const t=function wa(n){return n&&(n[Ia]||n[au])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new B(204,!1)}function p1(n,e,t){let i;if(sc(n)){const r=O(n);return ka(r)||ww(r)}if(yw(n))i=()=>O(n.useValue);else if(function f1(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Ls(n.deps||[]));else if(function h1(n){return!(!n||!n.useExisting)}(n))i=()=>F(O(n.useExisting));else{const r=O(n&&(n.useClass||n.provide));if(!function l3(n){return!!n.deps}(n))return ka(r)||ww(r);i=()=>new r(...Ls(n.deps))}return i}function ad(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Iw(n,e){for(const t of n)Array.isArray(t)?Iw(t,e):t&&De(t)?Iw(t.\u0275providers,e):e(t)}const pv=new re("AppId",{providedIn:"root",factory:()=>d3}),d3="ng",m1=new re("Platform Initializer"),Io=new re("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),op=new re("AnimationModuleType"),xw=new re("CSP nonce",{providedIn:"root",factory:()=>rd().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let g1=(n,e,t)=>null;function Pw(n,e,t=!1){return g1(n,e,t)}class E3{}class y1{}class I3{resolveComponentFactory(e){throw function w3(n){const e=Error(`No component factory found for ${Le(n)}.`);return e.ngComponent=n,e}(e)}}let ud=(()=>{class n{static#e=this.NULL=new I3}return n})();function x3(){return dd(fi(),le())}function dd(n,e){return new ei(Un(n,e))}let ei=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=x3}return n})();function C3(n){return n instanceof ei?n.nativeElement:n}class lp{}let Qs=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function T3(){const n=le(),t=mr(fi().index,n);return(pr(t)?t:n)[nt]}()}return n})(),D3=(()=>{class n{static#e=this.\u0275prov=ge({token:n,providedIn:"root",factory:()=>null})}return n})();class Wa{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Nw=new Wa("16.2.12"),Fw={};function x1(n,e=null,t=null,i){const r=C1(n,e,t,i);return r.resolveInjectorInitializers(),r}function C1(n,e=null,t=null,i,r=new Set){const o=[t||Ot,t3(n)];return i=i||("object"==typeof n?void 0:Le(n)),new sd(o,e||fv(),i||null,r)}let jn=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=Fs;static#t=this.NULL=new gw;static create(t,i){if(Array.isArray(t))return x1({name:""},i,t,"");{const r=t.name??"";return x1({name:r},t.parent,t.providers,r)}}static#n=this.\u0275prov=ge({token:n,providedIn:"any",factory:()=>F(l1)});static#i=this.__NG_ELEMENT_ID__=-1}return n})();function Vw(n){return n.ngOriginalError}class Ys{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Vw(e);for(;t&&Vw(t);)t=Vw(t);return t||null}}function Uw(n){return e=>{setTimeout(n,void 0,e)}}const En=class O3 extends H{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=Uw(o),r&&(r=Uw(r)),s&&(s=Uw(s)));const a=super.subscribe({next:r,error:o,complete:s});return e instanceof yt&&e.add(a),a}};function D1(...n){}class it{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new En(!1),this.onMicrotaskEmpty=new En(!1),this.onStable=new En(!1),this.onError=new En(!1),typeof Zone>"u")throw new B(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function N3(){const n="function"==typeof Wt.requestAnimationFrame;let e=Wt[n?"requestAnimationFrame":"setTimeout"],t=Wt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function V3(n){const e=()=>{!function L3(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Wt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,zw(n),n.isCheckStableRunning=!0,jw(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),zw(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,o,s,a)=>{if(function U3(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(r,o,s,a);try{return A1(n),t.invokeTask(r,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),S1(n)}},onInvoke:(t,i,r,o,s,a,l)=>{try{return A1(n),t.invoke(r,o,s,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),S1(n)}},onHasTask:(t,i,r,o)=>{t.hasTask(r,o),i===r&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,zw(n),jw(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,i,r,o)=>(t.handleError(r,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!it.isInAngularZone())throw new B(909,!1)}static assertNotInAngularZone(){if(it.isInAngularZone())throw new B(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,F3,D1,D1);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const F3={};function jw(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function zw(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function A1(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function S1(n){n._nesting--,jw(n)}class B3{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new En,this.onMicrotaskEmpty=new En,this.onStable=new En,this.onError=new En}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const R1=new re("",{providedIn:"root",factory:M1});function M1(){const n=xe(it);let e=!0;return I(new Ke(r=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{r.next(e),r.complete()})}),new Ke(r=>{let o;n.runOutsideAngular(()=>{o=n.onStable.subscribe(()=>{it.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});const s=n.onUnstable.subscribe(()=>{it.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{r.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(ee()))}function $w(n){return n.ownerDocument}function Xs(n){return n instanceof Function?n():n}let Hw=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=ge({token:n,providedIn:"root",factory:()=>new n})}return n})();function cp(n){for(;n;){n[tt]|=64;const e=Xf(n);if(a_(n)&&!e)return n;n=e}return null}const F1=new re("",{providedIn:"root",factory:()=>!1});let Ev=null;function U1(n,e){return n[e]??$1()}function j1(n,e){const t=$1();t.producerNode?.length&&(n[e]=Ev,t.lView=n,Ev=z1())}const K3={...f_,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{cp(n.lView)},lView:null};function z1(){return Object.create(K3)}function $1(){return Ev??=z1(),Ev}const at={};function $(n){H1(Mt(),le(),Fi()+n,!1)}function H1(n,e,t,i){if(!i)if(3==(3&e[tt])){const o=n.preOrderCheckHooks;null!==o&&Ba(e,o,t)}else{const o=n.preOrderHooks;null!==o&&Ua(e,o,0,t)}Vo(t)}function q(n,e=ft.Default){const t=le();return null===t?F(n,e):Bo(fi(),t,O(n),e)}function qw(){throw new Error("invalid")}function wv(n,e,t,i,r,o,s,a,l,c,h){const p=e.blueprint.slice();return p[an]=r,p[tt]=140|i,(null!==c||n&&2048&n[tt])&&(p[tt]|=2048),Ou(p),p[ln]=p[ns]=n,p[yn]=t,p[ts]=s||n&&n[ts],p[nt]=a||n&&n[nt],p[es]=l||n&&n[es]||null,p[Ii]=o,p[$l]=function rH(){return iH++}(),p[Fo]=h,p[Iu]=c,p[Nn]=2==e.type?n[Nn]:p,p}function pd(n,e,t,i,r){let o=n.data[e];if(null===o)o=function Ww(n,e,t,i,r){const o=M_(),s=Xl(),l=n.data[e]=function r5(n,e,t,i,r,o){let s=e?e.injectorIndex:-1,a=0;return function La(){return null!==Qe.skipHydrationRootTNode}()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==o&&(s?null==o.child&&null!==l.parent&&(o.child=l):null===o.next&&(o.next=l,l.prev=o)),l}(n,e,t,i,r),function P_(){return Qe.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=i,o.attrs=r;const s=function Ws(){const n=Qe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return yo(o,!0),o}function up(n,e,t,i){if(0===t)return-1;const r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function q1(n,e,t,i,r){const o=U1(e,Ma),s=Fi(),a=2&i;try{Vo(-1),a&&e.length>vt&&H1(n,e,vt,!1),Sr(a?2:0,r);const c=a?o:null,h=Su(c);try{null!==c&&(c.dirty=!1),t(i,r)}finally{Tf(c,h)}}finally{a&&null===e[Ma]&&j1(e,Ma),Vo(s),Sr(a?3:1,r)}}function Gw(n,e,t){if(Ef(e)){const i=Lt(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}finally{Lt(i)}}}function Zw(n,e,t){Lu()&&(function d5(n,e,t,i){const r=t.directiveStart,o=t.directiveEnd;$s(t)&&function v5(n,e,t){const i=Un(e,n),r=W1(t);let s=16;t.signals?s=4096:t.onPush&&(s=64);const a=Iv(n,wv(n,r,null,s,i,e,null,n[ts].rendererFactory.createRenderer(i,t),null,null,null));n[e.index]=a}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||w(t,e),Gi(i,e);const s=t.initialInputs;for(let a=r;a<o;a++){const l=n.data[a],c=as(e,n,a,t);Gi(c,e),null!==s&&y5(0,a-r,c,l,0,s),_o(l)&&(mr(t.index,e)[yn]=as(e,n,a,t))}}(n,e,t,Un(t,e)),64==(64&t.flags)&&Y1(n,e,t))}function Kw(n,e,t=Un){const i=e.localNames;if(null!==i){let r=e.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?t(e,n):n[s];n[r++]=a}}}function W1(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Qw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Qw(n,e,t,i,r,o,s,a,l,c,h){const p=vt+i,g=p+r,_=function Y3(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:at);return t}(p,g),E="function"==typeof c?c():c;return _[Ce]={type:n,blueprint:_,template:t,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:E,incompleteFirstPass:!1,ssrId:h}}let G1=n=>null;function Z1(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const o=n[r];null===i?K1(t,e,r,o):i.hasOwnProperty(r)&&K1(t,e,i[r],o)}return t}function K1(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function Zr(n,e,t,i,r,o,s,a){const l=Un(e,t);let h,c=e.inputs;!a&&null!=c&&(h=c[i])?(tI(n,t,h,i,r),$s(e)&&function a5(n,e){const t=mr(e,n);16&t[tt]||(t[tt]|=64)}(t,e.index)):3&e.type&&(i=function s5(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=s?s(r,e.value||"",i):r,o.setProperty(l,i,r))}function Yw(n,e,t,i){if(Lu()){const r=null===i?null:{"":-1},o=function f5(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(yu(e,s.selectors,!1))if(i||(i=[]),_o(s))if(null!==s.findHostDirectiveDefs){const a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s),Xw(n,e,a.length)}else i.unshift(s),Xw(n,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return null===i?null:[i,r]}(n,t);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&Q1(n,e,t,s,r,a),r&&function p5(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const o=t[e[r+1]];if(null==o)throw new B(-301,!1);i.push(e[r],o)}}}(t,i,r)}t.mergedAttrs=Da(t.mergedAttrs,t.attrs)}function Q1(n,e,t,i,r,o){for(let c=0;c<i.length;c++)Se(w(t,e),n,i[c].type);!function g5(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let c=0;c<i.length;c++){const h=i[c];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,l=up(n,e,i.length,null);for(let c=0;c<i.length;c++){const h=i[c];t.mergedAttrs=Da(t.mergedAttrs,h.hostAttrs),_5(n,t,e,l,h),m5(l,h,r),null!==h.contentQueries&&(t.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(t.flags|=64);const p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}!function o5(n,e,t){const r=e.directiveEnd,o=n.data,s=e.attrs,a=[];let l=null,c=null;for(let h=e.directiveStart;h<r;h++){const p=o[h],g=t?t.get(p):null,E=g?g.outputs:null;l=Z1(p.inputs,h,l,g?g.inputs:null),c=Z1(p.outputs,h,c,E);const x=null===l||null===s||_u(e)?null:b5(l,h,s);a.push(x)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t,o)}function Y1(n,e,t){const i=t.directiveStart,r=t.directiveEnd,o=t.index,s=function PE(){return Qe.lFrame.currentDirectiveIndex}();try{Vo(o);for(let a=i;a<r;a++){const l=n.data[a],c=e[a];Bf(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&h5(l,c)}}finally{Vo(-1),Bf(s)}}function h5(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Xw(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function m5(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;_o(e)&&(t[""]=n)}}function _5(n,e,t,i,r){n.data[i]=r;const o=r.factory||(r.factory=ka(r.type)),s=new Zs(o,_o(r),q);n.blueprint[i]=s,t[i]=s,function c5(n,e,t,i,r){const o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function u5(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,i,o)}}(n,e,i,up(n,t,r.hostVars,at),r)}function ls(n,e,t,i,r,o){const s=Un(n,e);!function Jw(n,e,t,i,r,o,s){if(null==o)n.removeAttribute(e,r,t);else{const a=null==s?Pe(o):s(o,i||"",r);n.setAttribute(e,r,a,t)}}(e[nt],s,o,n.value,t,i,r)}function y5(n,e,t,i,r,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)X1(i,t,s[a++],s[a++],s[a++])}function X1(n,e,t,i,r){const o=Lt(null);try{const s=n.inputTransforms;null!==s&&s.hasOwnProperty(i)&&(r=s[i].call(e,r)),null!==n.setInput?n.setInput(e,r,t,i):e[i]=r}finally{Lt(o)}}function b5(n,e,t){let i=null,r=0;for(;r<t.length;){const o=t[r];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===i&&(i=[]);const s=n[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){i.push(o,s[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function J1(n,e,t,i){return[n,!0,!1,e,null,0,i,t,null,null,null]}function eM(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const o=t[i+1];if(-1!==o){const s=n.data[o];Uf(t[i]),s.contentQueries(2,e[o],o)}}}function Iv(n,e){return n[Us]?n[o_][Hr]=e:n[Us]=e,n[o_]=e,e}function eI(n,e,t){Uf(0);const i=Lt(null);try{e(n,t)}finally{Lt(i)}}function tM(n){return n[Sa]||(n[Sa]=[])}function nM(n){return n.cleanup||(n.cleanup=[])}function rM(n,e){const t=n[es],i=t?t.get(Ys,null):null;i&&i.handleError(e)}function tI(n,e,t,i,r){for(let o=0;o<t.length;){const s=t[o++],a=t[o++];X1(n.data[s],e[s],i,a,r)}}function E5(n,e){const t=mr(e,n),i=t[Ce];!function w5(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const r=t[an];null!==r&&null===t[Fo]&&(t[Fo]=Pw(r,t[es])),nI(i,t,t[yn])}function nI(n,e,t){Va(e);try{const i=n.viewQuery;null!==i&&eI(1,i,t);const r=n.template;null!==r&&q1(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&eM(n,e),n.staticViewQueries&&eI(2,n.viewQuery,t);const o=n.components;null!==o&&function I5(n,e){for(let t=0;t<e.length;t++)E5(n,e[t])}(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[tt]&=-5,jf()}}let oM=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,i,r){const o=typeof Zone>"u"?null:Zone.current,s=function bE(n,e,t){const i=Object.create(EE);t&&(i.consumerAllowSignalWrites=!0),i.fn=n,i.schedule=e;const r=s=>{i.cleanupFn=s};return i.ref={notify:()=>m_(i),run:()=>{if(i.dirty=!1,i.hasRun&&!Wl(i))return;i.hasRun=!0;const s=Su(i);try{i.cleanupFn(),i.cleanupFn=E_,i.fn(r)}finally{Tf(i,s)}},cleanup:()=>i.cleanupFn()},i.ref}(t,c=>{this.all.has(c)&&this.queue.set(c,o)},r);let a;this.all.add(s),s.notify();const l=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=i?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[t,i]of this.queue)this.queue.delete(t),i?i.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=ge({token:n,providedIn:"root",factory:()=>new n})}return n})();function xv(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?r=ri(r,a):2==o&&(i=ri(i,a+": "+e[++s]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function dp(n,e,t,i,r=!1){for(;null!==t;){const o=e[t.index];null!==o&&i.push(en(o)),hi(o)&&sM(o,i);const s=t.type;if(8&s)dp(n,e,t.child,i);else if(32&s){const a=tw(t,e);let l;for(;l=a();)i.push(l)}else if(16&s){const a=HR(e,t);if(Array.isArray(a))i.push(...a);else{const l=Xf(e[Nn]);dp(l[Ce],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function sM(n,e){for(let t=xi;t<n.length;t++){const i=n[t],r=i[Ce].firstChild;null!==r&&dp(i[Ce],i,r,e)}n[go]!==n[an]&&e.push(n[go])}function Cv(n,e,t,i=!0){const r=e[ts],o=r.rendererFactory,s=r.afterRenderEventManager;o.begin?.(),s?.begin();try{aM(n,e,n.template,t)}catch(l){throw i&&rM(e,l),l}finally{o.end?.(),r.effectManager?.flush(),s?.end()}}function aM(n,e,t,i){const r=e[tt];if(256!=(256&r)){e[ts].effectManager?.flush(),Va(e);try{Ou(e),function Vf(n){return Qe.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&q1(n,e,t,2,i);const s=3==(3&r);if(s){const c=n.preOrderCheckHooks;null!==c&&Ba(e,c,null)}else{const c=n.preOrderHooks;null!==c&&Ua(e,c,0,null),$f(e,0)}if(function T5(n){for(let e=PR(n);null!==e;e=kR(e)){if(!e[s_])continue;const t=e[Pa];for(let i=0;i<t.length;i++){TE(t[i])}}}(e),lM(e,2),null!==n.contentQueries&&eM(n,e),s){const c=n.contentCheckHooks;null!==c&&Ba(e,c)}else{const c=n.contentHooks;null!==c&&Ua(e,c,1),$f(e,1)}!function Q3(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const i=U1(e,zs);try{for(let r=0;r<t.length;r++){const o=t[r];if(o<0)Vo(~o);else{const s=o,a=t[++r],l=t[++r];ME(a,s),i.dirty=!1;const c=Su(i);try{l(2,e[s])}finally{Tf(i,c)}}}}finally{null===e[zs]&&j1(e,zs),Vo(-1)}}(n,e);const a=n.components;null!==a&&uM(e,a,0);const l=n.viewQuery;if(null!==l&&eI(2,l,i),s){const c=n.viewCheckHooks;null!==c&&Ba(e,c)}else{const c=n.viewHooks;null!==c&&Ua(e,c,2),$f(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[tt]&=-73,Nu(e)}finally{jf()}}}function lM(n,e){for(let t=PR(n);null!==t;t=kR(t))for(let i=xi;i<t.length;i++)cM(t[i],e)}function D5(n,e,t){cM(mr(e,n),t)}function cM(n,e){if(!function T_(n){return 128==(128&n[tt])}(n))return;const t=n[Ce],i=n[tt];if(80&i&&0===e||1024&i||2===e)aM(t,n,t.template,n[yn]);else if(n[Bs]>0){lM(n,1);const r=t.components;null!==r&&uM(n,r,1)}}function uM(n,e,t){for(let i=0;i<e.length;i++)D5(n,e[i],t)}class hp{get rootNodes(){const e=this._lView,t=e[Ce];return dp(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[yn]}set context(e){this._lView[yn]=e}get destroyed(){return 256==(256&this._lView[tt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[ln];if(hi(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(rv(e,i),G_(t,i))}this._attachedToViewContainer=!1}iw(this._lView[Ce],this._lView)}onDestroy(e){!function Fu(n,e){if(256==(256&n[tt]))throw new B(911,!1);null===n[is]&&(n[is]=[]),n[is].push(e)}(this._lView,e)}markForCheck(){cp(this._cdRefInjectingView||this._lView)}detach(){this._lView[tt]&=-129}reattach(){this._lView[tt]|=128}detectChanges(){Cv(this._lView[Ce],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new B(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function vH(n,e){ep(n,e,e[nt],2,null,null)}(this._lView[Ce],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new B(902,!1);this._appRef=e}}class A5 extends hp{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Cv(e[Ce],e,e[yn],!1)}checkNoChanges(){}get context(){return null}}class dM extends ud{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=wt(e);return new fp(t,this.ngModule)}}function hM(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class R5{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=fu(i);const r=this.injector.get(e,Fw,i);return r!==Fw||t===Fw?r:this.parentInjector.get(e,t,i)}}class fp extends y1{get inputs(){const e=this.componentDef,t=e.inputTransforms,i=hM(e.inputs);if(null!==t)for(const r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return hM(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function i_(n){return n.map(mf).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let o=(r=r||this.ngModule)instanceof Gr?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new R5(e,o):e,a=s.get(lp,null);if(null===a)throw new B(407,!1);const p={rendererFactory:a,sanitizer:s.get(D3,null),effectManager:s.get(oM,null),afterRenderEventManager:s.get(Hw,null)},g=a.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",E=i?function X3(n,e,t,i){const o=i.get(F1,!1)||t===Tr.ShadowDom,s=n.selectRootElement(e,o);return function J3(n){G1(n)}(s),s}(g,i,this.componentDef.encapsulation,s):iv(g,_,function S5(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(_)),V=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let M=null;null!==E&&(M=Pw(E,s,!0));const j=Qw(0,null,null,1,0,null,null,null,null,null,null),ie=wv(null,j,null,V,null,null,p,g,s,null,M);let _e,Be;Va(ie);try{const et=this.componentDef;let Gt,Cr=null;et.findHostDirectiveDefs?(Gt=[],Cr=new Map,et.findHostDirectiveDefs(et,Gt,Cr),Gt.push(et)):Gt=[et];const Lr=function P5(n,e){const t=n[Ce],i=vt;return n[i]=e,pd(t,i,2,"#host",null)}(ie,E),X0=function k5(n,e,t,i,r,o,s){const a=r[Ce];!function O5(n,e,t,i){for(const r of n)e.mergedAttrs=Da(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(xv(e,e.mergedAttrs,!0),null!==t&&ZR(i,t,e))}(i,n,e,s);let l=null;null!==e&&(l=Pw(e,r[es]));const c=o.rendererFactory.createRenderer(e,t);let h=16;t.signals?h=4096:t.onPush&&(h=64);const p=wv(r,W1(t),null,h,r[n.index],n,o,c,null,null,l);return a.firstCreatePass&&Xw(a,n,i.length-1),Iv(r,p),r[n.index]=p}(Lr,E,et,Gt,ie,p,g);Be=C_(j,vt),E&&function F5(n,e,t,i){if(i)lf(n,t,["ng-version",Nw.full]);else{const{attrs:r,classes:o}=function gf(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let o=n[i];if("string"==typeof o)2===r?""!==o&&e.push(o,n[++i]):8===r&&t.push(o);else{if(!fr(r))break;r=o}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&lf(n,t,r),o&&o.length>0&&GR(n,t,o.join(" "))}}(g,et,E,i),void 0!==t&&function L5(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const o=t[r];i.push(null!=o?Array.from(o):null)}}(Be,this.ngContentSelectors,t),_e=function N5(n,e,t,i,r,o){const s=fi(),a=r[Ce],l=Un(s,r);Q1(a,r,s,t,null,i);for(let h=0;h<t.length;h++)Gi(as(r,a,s.directiveStart+h,s),r);Y1(a,r,s),l&&Gi(l,r);const c=as(r,a,s.directiveStart+s.componentOffset,s);if(n[yn]=r[yn]=c,null!==o)for(const h of o)h(c,e);return Gw(a,s,n),c}(X0,et,Gt,Cr,ie,[V5]),nI(j,ie,null)}finally{jf()}return new M5(this.componentType,_e,dd(Be,ie),ie,Be)}}class M5 extends E3{constructor(e,t,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new A5(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const o=this._rootLView;tI(o[Ce],o,r,e,t),this.previousInputValues.set(e,t),cp(mr(this._tNode.index,o))}}get injector(){return new Ci(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function V5(){const n=fi();ju(le()[Ce],n)}function Vt(n){let e=function fM(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(_o(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new B(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const s=n;s.inputs=Tv(n.inputs),s.inputTransforms=Tv(n.inputTransforms),s.declaredInputs=Tv(n.declaredInputs),s.outputs=Tv(n.outputs);const a=r.hostBindings;a&&z5(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&U5(n,l),c&&j5(n,c),qt(n.inputs,r.inputs),qt(n.declaredInputs,r.declaredInputs),qt(n.outputs,r.outputs),null!==r.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),qt(s.inputTransforms,r.inputTransforms)),_o(r)&&r.data.animation){const h=n.data;h.animation=(h.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===Vt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function B5(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Da(r.hostAttrs,t=Da(t,r.hostAttrs))}}(i)}function Tv(n){return n===po?{}:n===Ot?[]:n}function U5(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function j5(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,o)=>{e(i,r,o),t(i,r,o)}:e}function z5(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function _M(n){const e=n.inputConfig,t={};for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];Array.isArray(r)&&r[2]&&(t[i]=r[2])}n.inputTransforms=t}function Dv(n){return!!iI(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function iI(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function cs(n,e,t){return n[e]=t}function Zi(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Co(n,e,t,i){const r=le();return Zi(r,Gs(),e)&&(Mt(),ls(bn(),r,n,e,t,i)),Co}function gd(n,e,t,i){return Zi(n,Gs(),t)?e+Pe(t)+i:at}function me(n,e,t,i,r,o,s,a){const l=le(),c=Mt(),h=n+vt,p=c.firstCreatePass?function fq(n,e,t,i,r,o,s,a,l){const c=e.consts,h=pd(e,n,4,s||null,os(c,a));Yw(e,t,h,os(c,l)),ju(e,h);const p=h.tView=Qw(2,h,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}(h,c,l,e,t,i,r,o,s):c.data[h];yo(p,!1);const g=RM(c,l,p,n);Uu()&&sv(c,l,g,p),Gi(g,l),Iv(l,l[h]=J1(g,l,g,p)),wf(p)&&Zw(c,l,p),null!=s&&Kw(l,p,a)}let RM=function MM(n,e,t,i){return ss(!0),e[nt].createComment("")};function W(n,e,t){const i=le();return Zi(i,Gs(),e)&&Zr(Mt(),bn(),i,n,e,i[nt],t,!1),W}function cI(n,e,t,i,r){const s=r?"class":"style";tI(n,t,e.inputs[s],s,i)}function k(n,e,t,i){const r=le(),o=Mt(),s=vt+n,a=r[nt],l=o.firstCreatePass?function _q(n,e,t,i,r,o){const s=e.consts,l=pd(e,n,2,i,os(s,r));return Yw(e,t,l,os(s,o)),null!==l.attrs&&xv(l,l.attrs,!1),null!==l.mergedAttrs&&xv(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(s,o,r,e,t,i):o.data[s],c=kM(o,r,l,a,e,n);r[s]=c;const h=wf(l);return yo(l,!0),ZR(a,c,l),32!=(32&l.flags)&&Uu()&&sv(o,r,c,l),0===function DE(){return Qe.lFrame.elementDepthCount}()&&Gi(c,r),function Nf(){Qe.lFrame.elementDepthCount++}(),h&&(Zw(o,r,l),Gw(o,l,r)),null!==i&&Kw(r,l),k}function P(){let n=fi();Xl()?Jl():(n=n.parent,yo(n,!1));const e=n;(function A_(n){return Qe.skipHydrationRootTNode===n})(e)&&function SE(){Qe.skipHydrationRootTNode=null}(),function Ff(){Qe.lFrame.elementDepthCount--}();const t=Mt();return t.firstCreatePass&&(ju(t,n),Ef(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function $u(n){return 0!=(8&n.flags)}(e)&&cI(t,e,le(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function $_(n){return 0!=(16&n.flags)}(e)&&cI(t,e,le(),e.stylesWithoutHost,!1),P}function Ze(n,e,t,i){return k(n,e,t,i),P(),Ze}let kM=(n,e,t,i,r,o)=>(ss(!0),iv(i,r,function zf(){return Qe.lFrame.currentNamespace}()));function vp(n,e,t){const i=le(),r=Mt(),o=n+vt,s=r.firstCreatePass?function bq(n,e,t,i,r){const o=e.consts,s=os(o,i),a=pd(e,n,8,"ng-container",s);return null!==s&&xv(a,s,!0),Yw(e,t,a,os(o,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,r,i,e,t):r.data[o];yo(s,!0);const a=NM(r,i,s,n);return i[o]=a,Uu()&&sv(r,i,a,s),Gi(a,i),wf(s)&&(Zw(r,i,s),Gw(r,s,i)),null!=t&&Kw(i,s),vp}function yp(){let n=fi();const e=Mt();return Xl()?Jl():(n=n.parent,yo(n,!1)),e.firstCreatePass&&(ju(e,n),Ef(n)&&e.queries.elementEnd(n)),yp}let NM=(n,e,t,i)=>(ss(!0),nw(e[nt],""));function zn(){return le()}function bp(n){return!!n&&"function"==typeof n.then}function FM(n){return!!n&&"function"==typeof n.subscribe}function ke(n,e,t,i){const r=le(),o=Mt(),s=fi();return function VM(n,e,t,i,r,o,s){const a=wf(i),c=n.firstCreatePass&&nM(n),h=e[yn],p=tM(e);let g=!0;if(3&i.type||s){const x=Un(i,e),T=s?s(x):x,V=p.length,M=s?ie=>s(en(ie[i.index])):i.index;let j=null;if(!s&&a&&(j=function Iq(n,e,t,i){const r=n.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const s=r[o];if(s===t&&r[o+1]===i){const a=e[Sa],l=r[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(n,e,r,i.index)),null!==j)(j.__ngLastListenerFn__||j).__ngNextListenerFn__=o,j.__ngLastListenerFn__=o,g=!1;else{o=UM(i,e,h,o,!1);const ie=t.listen(T,r,o);p.push(o,ie),c&&c.push(r,M,V,V+1)}}else o=UM(i,e,h,o,!1);const _=i.outputs;let E;if(g&&null!==_&&(E=_[r])){const x=E.length;if(x)for(let T=0;T<x;T+=2){const _e=e[E[T]][E[T+1]].subscribe(o),Be=p.length;p.push(o,_e),c&&c.push(r,i.index,Be,-(Be+1))}}}(o,r,r[nt],s,n,e,i),ke}function BM(n,e,t,i){try{return Sr(6,e,t),!1!==t(i)}catch(r){return rM(n,r),!1}finally{Sr(7,e,t)}}function UM(n,e,t,i,r){return function o(s){if(s===Function)return i;cp(n.componentOffset>-1?mr(n.index,e):e);let l=BM(e,t,i,s),c=o.__ngNextListenerFn__;for(;c;)l=BM(e,t,c,s)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&s.preventDefault(),l}}function ve(n=1){return function kE(n){return(Qe.lFrame.contextLView=function OE(n,e){for(;n>0;)e=e[ns],n--;return e}(n,Qe.lFrame.contextLView))[yn]}(n)}function lc(n,e,t,i,r){const o=le(),s=gd(o,e,t,i);return s!==at&&Zr(Mt(),bn(),o,n,s,o[nt],r,!1),lc}function Pv(n,e){return n<<17|e<<2}function Ga(n){return n>>17&32767}function uI(n){return 2|n}function cc(n){return(131068&n)>>2}function dI(n,e){return-131069&n|e<<2}function hI(n){return 1|n}function QM(n,e,t,i,r){const o=n[t+1],s=null===e;let a=i?Ga(o):cc(o),l=!1;for(;0!==a&&(!1===l||s);){const h=n[a+1];Pq(n[a],e)&&(l=!0,n[a+1]=i?hI(h):uI(h)),a=i?Ga(h):cc(h)}l&&(n[t+1]=i?uI(o):hI(o))}function Pq(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Ju(n,e)>=0}const mi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function YM(n){return n.substring(mi.key,mi.keyEnd)}function XM(n,e){const t=mi.textEnd;return t===e?-1:(e=mi.keyEnd=function Fq(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,mi.key=e,t),xd(n,e,t))}function xd(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function uc(n,e){return function Uo(n,e,t,i){const r=le(),o=Mt(),s=Lo(2);o.firstUpdatePass&&oP(o,n,s,i),e!==at&&Zi(r,s,e)&&aP(o,o.data[Fi()],r,r[nt],n,r[s+1]=function Gq(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Le(qa(n)))),n}(e,t),i,s)}(n,e,null,!0),uc}function kv(n){!function jo(n,e,t,i){const r=Mt(),o=Lo(2);r.firstUpdatePass&&oP(r,null,o,i);const s=le();if(t!==at&&Zi(s,o,t)){const a=r.data[Fi()];if(cP(a,i)&&!rP(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=ri(l,t||"")),cI(r,a,s,t,i)}else!function Wq(n,e,t,i,r,o,s,a){r===at&&(r=Ot);let l=0,c=0,h=0<r.length?r[0]:null,p=0<o.length?o[0]:null;for(;null!==h||null!==p;){const g=l<r.length?r[l+1]:void 0,_=c<o.length?o[c+1]:void 0;let x,E=null;h===p?(l+=2,c+=2,g!==_&&(E=p,x=_)):null===p||null!==h&&h<p?(l+=2,E=h):(c+=2,E=p,x=_),null!==E&&aP(n,e,t,i,E,x,s,a),h=l<r.length?r[l]:null,p=c<o.length?o[c]:null}}(r,a,s,s[nt],s[o+1],s[o+1]=function Hq(n,e,t){if(null==t||""===t)return Ot;const i=[],r=qa(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,o)}}(qq,ds,n,!0)}function ds(n,e){for(let t=function Oq(n){return function eP(n){mi.key=0,mi.keyEnd=0,mi.value=0,mi.valueEnd=0,mi.textEnd=n.length}(n),XM(n,xd(n,0,mi.textEnd))}(e);t>=0;t=XM(e,t))qr(n,YM(e),!0)}function rP(n,e){return e>=n.expandoStartIndex}function oP(n,e,t,i){const r=n.data;if(null===r[t+1]){const o=r[Fi()],s=rP(n,t);cP(o,i)&&null===e&&!s&&(e=!1),e=function Uq(n,e,t,i){const r=function ec(n){const e=Qe.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Ep(t=fI(null,n,e,t,i),e.attrs,i),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==r)if(t=fI(r,n,e,t,i),null===o){let l=function jq(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==cc(i))return n[Ga(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=fI(null,n,e,l[1],i),l=Ep(l,e.attrs,i),function zq(n,e,t,i){n[Ga(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else o=function $q(n,e,t){let i;const r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++)i=Ep(i,n[o].hostAttrs,t);return Ep(i,e.attrs,t)}(n,e,i)}return void 0!==o&&(i?e.residualClasses=o:e.residualStyles=o),t}(r,o,e,i),function Rq(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,a=Ga(s),l=cc(s);n[i]=t;let h,c=!1;if(Array.isArray(t)?(h=t[1],(null===h||Ju(t,h)>0)&&(c=!0)):h=t,r)if(0!==l){const g=Ga(n[a+1]);n[i+1]=Pv(g,a),0!==g&&(n[g+1]=dI(n[g+1],i)),n[a+1]=function Aq(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=Pv(a,0),0!==a&&(n[a+1]=dI(n[a+1],i)),a=i;else n[i+1]=Pv(l,0),0===a?a=i:n[l+1]=dI(n[l+1],i),l=i;c&&(n[i+1]=uI(n[i+1])),QM(n,h,i,!0),QM(n,h,i,!1),function Mq(n,e,t,i,r){const o=r?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&Ju(o,e)>=0&&(t[i+1]=hI(t[i+1]))}(e,h,n,i,o),s=Pv(a,l),o?e.classBindings=s:e.styleBindings=s}(r,o,e,t,s,i)}}function fI(n,e,t,i,r){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],i=Ep(i,o.hostAttrs,r),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function Ep(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?r=s:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),qr(n,s,!!t||e[++o]))}return void 0===n?null:n}function qq(n,e,t){const i=String(e);""!==i&&!i.includes(" ")&&qr(n,i,t)}function aP(n,e,t,i,r,o,s,a){if(!(3&e.type))return;const l=n.data,c=l[a+1],h=function Sq(n){return 1==(1&n)}(c)?lP(l,e,t,r,cc(c),s):void 0;Ov(h)||(Ov(o)||function Dq(n){return 2==(2&n)}(c)&&(o=lP(l,null,t,r,a,s)),function AH(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=-1===i.indexOf("-")?void 0:Ha.DashCase;null==r?n.removeStyle(t,i,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Ha.Important),n.setStyle(t,i,r,o))}}(i,s,ku(Fi(),t),r,o))}function lP(n,e,t,i,r,o){const s=null===e;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),h=c?l[1]:l,p=null===h;let g=t[r+1];g===at&&(g=p?Ot:void 0);let _=p?WE(g,i):h===i?g:void 0;if(c&&!Ov(_)&&(_=WE(l,i)),Ov(_)&&(a=_,s))return a;const E=n[r+1];r=s?Ga(E):cc(E)}if(null!==e){let l=o?e.residualClasses:e.residualStyles;null!=l&&(a=WE(l,i))}return a}function Ov(n){return void 0!==n}function cP(n,e){return 0!=(n.flags&(e?8:16))}function te(n,e=""){const t=le(),i=Mt(),r=n+vt,o=i.firstCreatePass?pd(i,r,1,e,null):i.data[r],s=uP(i,t,o,e,n);t[r]=s,Uu()&&sv(i,t,s,o),yo(o,!1)}let uP=(n,e,t,i,r)=>(ss(!0),function nv(n,e){return n.createText(e)}(e[nt],i));function hs(n){return Kr("",n,""),hs}function Kr(n,e,t){const i=le(),r=gd(i,n,e,t);return r!==at&&function Js(n,e,t){const i=ku(e,n);!function NR(n,e,t){n.setValue(e,t)}(n[nt],i,t)}(i,Fi(),r),Kr}function pI(n,e,t){const i=le();return Zi(i,Gs(),e)&&Zr(Mt(),bn(),i,n,e,i[nt],t,!0),pI}const Td="en-US";let MP=Td;function _I(n,e,t,i,r){if(n=O(n),Array.isArray(n))for(let o=0;o<n.length;o++)_I(n[o],e,t,i,r);else{const o=Mt(),s=le(),a=fi();let l=sc(n)?n:O(n.provide);const c=p1(n),h=1048575&a.providerIndexes,p=a.directiveStart,g=a.providerIndexes>>20;if(sc(n)||!n.multi){const _=new Zs(c,r,q),E=yI(l,e,r?h:h+g,p);-1===E?(Se(w(a,s),o,l),vI(o,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(_),s.push(_)):(t[E]=_,s[E]=_)}else{const _=yI(l,e,h+g,p),E=yI(l,e,h,h+g),T=E>=0&&t[E];if(r&&!T||!r&&!(_>=0&&t[_])){Se(w(a,s),o,l);const V=function pW(n,e,t,i,r){const o=new Zs(n,t,q);return o.multi=[],o.index=e,o.componentProviders=0,nk(o,r,i&&!t),o}(r?fW:hW,t.length,r,i,c);!r&&T&&(t[E].providerFactory=V),vI(o,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(V),s.push(V)}else vI(o,n,_>-1?_:E,nk(t[r?E:_],c,!r&&i));!r&&i&&T&&t[E].componentProviders++}}}function vI(n,e,t,i){const r=sc(e),o=function r3(n){return!!n.useClass}(e);if(r||o){const l=(o?O(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const h=c.indexOf(t);-1===h?c.push(t,[i,l]):c[h+1].push(i,l)}else c.push(t,l)}}}function nk(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function yI(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function hW(n,e,t,i){return bI(this.multi,[])}function fW(n,e,t,i){const r=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=as(t,t[Ce],this.providerFactory.index,i);o=a.slice(0,s),bI(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],bI(r,o);return o}function bI(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function An(n,e=[]){return t=>{t.providersResolver=(i,r)=>function dW(n,e,t){const i=Mt();if(i.firstCreatePass){const r=_o(n);_I(t,i.data,i.blueprint,r,!0),_I(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class hc{}class ik{}class EI extends hc{constructor(e,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new dM(this);const r=Oi(e);this._bootstrapComponents=Xs(r.bootstrap),this._r3Injector=C1(e,t,[{provide:hc,useValue:this},{provide:ud,useValue:this.componentFactoryResolver},...i],Le(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class wI extends ik{constructor(e){super(),this.moduleType=e}create(e){return new EI(this.moduleType,e,[])}}class rk extends hc{constructor(e){super(),this.componentFactoryResolver=new dM(this),this.instance=null;const t=new sd([...e.providers,{provide:hc,useValue:this},{provide:ud,useValue:this.componentFactoryResolver}],e.parent||fv(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function II(n,e,t=null){return new rk({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let _W=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=u1(0,t.type),r=i.length>0?II([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=ge({token:n,providedIn:"environment",factory:()=>new n(F(Gr))})}return n})();function ok(n){n.getStandaloneInjector=e=>e.get(_W).getOrCreateStandaloneInjector(n)}function CI(n,e,t){const i=Ni()+n,r=le();return r[i]===at?cs(r,i,t?e.call(t):e()):function pp(n,e){return n[e]}(r,i)}function Za(n,e,t,i){return function hk(n,e,t,i,r,o){const s=e+t;return Zi(n,s,r)?cs(n,s+1,o?i.call(o,r):i(r)):Ap(n,s+1)}(le(),Ni(),n,e,t,i)}function Dp(n,e,t,i,r){return function fk(n,e,t,i,r,o,s){const a=e+t;return function ac(n,e,t,i){const r=Zi(n,e,t);return Zi(n,e+1,i)||r}(n,a,r,o)?cs(n,a+2,s?i.call(s,r,o):i(r,o)):Ap(n,a+2)}(le(),Ni(),n,e,t,i,r)}function Ap(n,e){const t=n[e];return t===at?void 0:t}function UW(){return this._results[Symbol.iterator]()}class TI{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new En)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=TI.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=UW)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=function Eo(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function M4(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function zW(n,e,t,i=!0){const r=e[Ce];if(function bH(n,e,t,i){const r=xi+i,o=t.length;i>0&&(t[r-1][Hr]=e),i<o-xi?(e[Hr]=t[r],dR(t,xi+i,e)):(t.push(e),e[Hr]=null),e[ln]=t;const s=e[js];null!==s&&t!==s&&function EH(n,e){const t=n[Pa];e[Nn]!==e[ln][ln][Nn]&&(n[s_]=!0),null===t?n[Pa]=[e]:t.push(e)}(s,e);const a=e[Dr];null!==a&&a.insertView(n),e[tt]|=128}(r,e,n,t),i){const o=aw(t,n),s=e[nt],a=ov(s,n[go]);null!==a&&function _H(n,e,t,i,r,o){i[an]=r,i[Ii]=e,ep(n,i,t,1,r,o)}(r,n[Ii],s,e,a,o)}}let fs=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=qW}return n})();const $W=fs,HW=class extends $W{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){const r=function jW(n,e,t,i){const r=e.tView,a=wv(n,r,t,4096&n[tt]?4096:16,null,e,null,null,null,i?.injector??null,i?.hydrationInfo??null);a[js]=n[e.index];const c=n[Dr];return null!==c&&(a[Dr]=c.createEmbeddedView(r)),nI(r,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:i});return new hp(r)}};function qW(){return Bv(fi(),le())}function Bv(n,e){return 4&n.type?new HW(e,n,dd(n,e)):null}let To=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=YW}return n})();function YW(){return Ik(fi(),le())}const XW=To,Ek=class extends XW{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return dd(this._hostTNode,this._hostLView)}get injector(){return new Ci(this._hostTNode,this._hostLView)}get parentInjector(){const e=ue(this._hostTNode,this._hostLView);if(Hf(e)){const t=ic(e,this._hostLView),i=nc(e);return new Ci(t[Ce].data[i+8],t)}return new Ci(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=wk(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-xi}createEmbeddedView(e,t,i){let r,o;"number"==typeof i?r=i:null!=i&&(r=i.index,o=i.injector);const a=e.createEmbeddedViewImpl(t||{},o,null);return this.insertImpl(a,r,false),a}createComponent(e,t,i,r,o){const s=e&&!function Zf(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const x=t||{};a=x.index,i=x.injector,r=x.projectableNodes,o=x.environmentInjector||x.ngModuleRef}const l=s?e:new fp(wt(e)),c=i||this.parentInjector;if(!o&&null==l.ngModule){const T=(s?c:this.parentInjector).get(Gr,null);T&&(o=T)}wt(l.componentType??{});const _=l.create(c,r,null,o);return this.insertImpl(_.hostView,a,false),_}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,i){const r=e._lView;if(function CE(n){return hi(n[ln])}(r)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const c=r[ln],h=new Ek(c,c[Ii],c[ln]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(t),a=this._lContainer;return zW(a,r,s,!i),e.attachToViewContainerRef(),dR(DI(a),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=wk(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=rv(this._lContainer,t);i&&(G_(DI(this._lContainer),t),iw(i[Ce],i))}detach(e){const t=this._adjustIndex(e,-1),i=rv(this._lContainer,t);return i&&null!=G_(DI(this._lContainer),t)?new hp(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function wk(n){return n[8]}function DI(n){return n[8]||(n[8]=[])}function Ik(n,e){let t;const i=e[n.index];return hi(i)?t=i:(t=J1(i,e,null,n),e[n.index]=t,Iv(e,t)),xk(t,e,n,i),new Ek(t,n,e)}let xk=function Ck(n,e,t,i){if(n[go])return;let r;r=8&t.type?en(i):function JW(n,e){const t=n[nt],i=t.createComment(""),r=Un(e,n);return oc(t,ov(t,r),i,function CH(n,e){return n.nextSibling(e)}(t,r),!1),i}(e,t),n[go]=r};class AI{constructor(e){this.queryList=e,this.matches=null}clone(){return new AI(this.queryList)}setDirty(){this.queryList.setDirty()}}class SI{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){const s=t.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new SI(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==Pk(e,t).matches&&this.queries[t].setDirty()}}class Tk{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class RI{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,null!==t?t.push(o):t=[o])}return null!==t?new RI(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class MI{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new MI(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(e,t,n9(t,o)),this.matchTNodeWithReadOption(e,t,za(t,e,o,!1,!1))}else i===fs?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,za(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===ei||r===To||r===fs&&4&t.type)this.addMatch(t.index,-2);else{const o=za(t,e,r,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function n9(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function r9(n,e,t,i){return-1===t?function i9(n,e){return 11&n.type?dd(n,e):4&n.type?Bv(n,e):null}(e,n):-2===t?function o9(n,e,t){return t===ei?dd(e,n):t===fs?Bv(e,n):t===To?Ik(e,n):void 0}(n,e,i):as(n,n[Ce],t,e)}function Dk(n,e,t,i){const r=e[Dr].queries[i];if(null===r.matches){const o=n.data,s=t.matches,a=[];for(let l=0;l<s.length;l+=2){const c=s[l];a.push(c<0?null:r9(e,o[c],s[l+1],t.metadata.read))}r.matches=a}return r.matches}function PI(n,e,t,i){const r=n.queries.getByIndex(t),o=r.matches;if(null!==o){const s=Dk(n,e,r,t);for(let a=0;a<o.length;a+=2){const l=o[a];if(l>0)i.push(s[a/2]);else{const c=o[a+1],h=e[-l];for(let p=xi;p<h.length;p++){const g=h[p];g[js]===g[ln]&&PI(g[Ce],g,c,i)}if(null!==h[Pa]){const p=h[Pa];for(let g=0;g<p.length;g++){const _=p[g];PI(_[Ce],_,c,i)}}}}}return i}function kI(n){const e=le(),t=Mt(),i=k_();Uf(i+1);const r=Pk(t,i);if(n.dirty&&function kf(n){return 4==(4&n[tt])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const o=r.crossesNgTemplate?PI(t,e,i,[]):Dk(t,e,r,i);n.reset(o,C3),n.notifyOnChanges()}return!0}return!1}function Ak(n,e,t){const i=Mt();i.firstCreatePass&&(function Mk(n,e,t){null===n.queries&&(n.queries=new RI),n.queries.track(new MI(e,t))}(i,new Tk(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),function Rk(n,e,t){const i=new TI(4==(4&t));(function n5(n,e,t,i){const r=tM(e);r.push(t),n.firstCreatePass&&nM(n).push(i,r.length-1)})(n,e,i,i.destroy),null===e[Dr]&&(e[Dr]=new SI),e[Dr].queries.push(new AI(i))}(i,le(),e)}function Pk(n,e){return n.queries.getByIndex(e)}function kk(n,e){return Bv(n,e)}const UI=new re("Application Initializer");let jI=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=xe(UI,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const o=r();if(bp(o))t.push(o);else if(FM(o)){const s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Qk=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const ps=new re("LocaleId",{providedIn:"root",factory:()=>xe(ps,ft.Optional|ft.SkipSelf)||function A9(){return typeof $localize<"u"&&$localize.locale||Td}()});let zv=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new y(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class M9{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let Yk=(()=>{class n{compileModuleSync(t){return new wI(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),o=Xs(Oi(t).declarations).reduce((s,a)=>{const l=wt(a);return l&&s.push(new fp(l)),s},[]);return new M9(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const tO=new re(""),Hv=new re("");let WI,HI=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,WI||(function J9(n){WI=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{it.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||n)(F(it),F(qI),F(Hv))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac})}return n})(),qI=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return WI?.findTestabilityInTree(this,t,i)??null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Ka=null;const nO=new re("AllowMultipleToken"),GI=new re("PlatformDestroyListeners"),ZI=new re("appBootstrapListener");class rO{constructor(e,t){this.name=e,this.token=t}}function sO(n,e,t=[]){const i=`Platform: ${e}`,r=new re(i);return(o=[])=>{let s=KI();if(!s||s.injector.get(nO,!1)){const a=[...t,...o,{provide:r,useValue:!0}];n?n(a):function n8(n){if(Ka&&!Ka.get(nO,!1))throw new B(400,!1);(function iO(){!function gE(n){mE=n}(()=>{throw new B(600,!1)})})(),Ka=n;const e=n.get(lO);(function oO(n){n.get(m1,null)?.forEach(t=>t())})(n)}(function aO(n=[],e){return jn.create({name:e,providers:[{provide:bw,useValue:"platform"},{provide:GI,useValue:new Set([()=>Ka=null])},...n]})}(a,i))}return function r8(n){const e=KI();if(!e)throw new B(401,!1);return e}()}}function KI(){return Ka?.get(lO)??null}let lO=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function o8(n="zone.js",e){return"noop"===n?new B3:"zone.js"===n?new it(e):n}(i?.ngZone,function cO(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const o=function gW(n,e,t){return new EI(n,e,t)}(t.moduleType,this.injector,function pO(n){return[{provide:it,useFactory:n},{provide:rp,multi:!0,useFactory:()=>{const e=xe(a8,{optional:!0});return()=>e.initialize()}},{provide:fO,useFactory:s8},{provide:R1,useFactory:M1}]}(()=>r)),s=o.injector.get(Ys,null);return r.runOutsideAngular(()=>{const a=r.onError.subscribe({next:l=>{s.handleError(l)}});o.onDestroy(()=>{qv(this._modules,o),a.unsubscribe()})}),function uO(n,e,t){try{const i=t();return bp(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(s,r,()=>{const a=o.injector.get(jI);return a.runInitializers(),a.donePromise.then(()=>(function PP(n){Ei(n,"Expected localeId to be defined"),"string"==typeof n&&(MP=n.toLowerCase().replace(/_/g,"-"))}(o.injector.get(ps,Td)||Td),this._moduleDoBootstrap(o),o))})})}bootstrapModule(t,i=[]){const r=dO({},i);return function e8(n,e,t){const i=new wI(t);return Promise.resolve(i)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,r))}_moduleDoBootstrap(t){const i=t.injector.get(Qa);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new B(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new B(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(GI,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||n)(F(jn))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function dO(n,e){return Array.isArray(e)?e.reduce(dO,n):{...n,...e}}let Qa=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=xe(fO),this.zoneIsStable=xe(R1),this.componentTypes=[],this.components=[],this.isStable=xe(zv).hasPendingTasks.pipe(Ae(t=>t?S(!1):this.zoneIsStable),We(),ee()),this._injector=xe(Gr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof y1;if(!this._injector.get(jI).done)throw!r&&function Aa(n){const e=wt(n)||ui(n)||di(n);return null!==e&&e.standalone}(t),new B(405,!1);let s;s=r?t:this._injector.get(ud).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function t8(n){return n.isBoundToModule}(s)?void 0:this._injector.get(hc),c=s.create(jn.NULL,[],i||s.selector,a),h=c.location.nativeElement,p=c.injector.get(tO,null);return p?.registerApplication(h),c.onDestroy(()=>{this.detachView(c.hostView),qv(this.components,c),p?.unregisterApplication(h)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new B(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;qv(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(ZI,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>qv(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new B(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qv(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const fO=new re("",{providedIn:"root",factory:()=>xe(Ys).handleError.bind(void 0)});function s8(){const n=xe(it),e=xe(Ys);return t=>n.runOutsideAngular(()=>e.handleError(t))}let a8=(()=>{class n{constructor(){this.zone=xe(it),this.applicationRef=xe(Qa)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let Wv=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=c8}return n})();function c8(n){return function u8(n,e,t){if($s(n)&&!t){const i=mr(n.index,e);return new hp(i,i)}return 47&n.type?new hp(e[Nn],e):null}(fi(),le(),16==(16&n))}class yO{constructor(){}supports(e){return Dv(e)}create(e){return new g8(e)}}const m8=(n,e)=>e;class g8{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||m8}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){const s=!i||t&&t.currentIndex<EO(i,r,o)?t:i,a=EO(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{o||(o=[]);const c=a-r,h=l-r;if(c!=h){for(let g=0;g<c;g++){const _=g<o.length?o[g]:o[g]=0,E=_+g;h<=E&&E<c&&(o[g]=_+1)}o[s.previousIndex]=h-c}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Dv(e))throw new B(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,o,s,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(i&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),i=!0),t=t._next}else r=0,function K5(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{s=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,s)?(i&&(t=this._verifyReinsertion(t,a,s,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new _8(t,i),o,r),e}_verifyReinsertion(e,t,i,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,o=e._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new bO),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bO),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class _8{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class v8{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class bO{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new v8,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function EO(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class wO{constructor(){}supports(e){return e instanceof Map||iI(e)}create(){return new y8}}class y8{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||iI(e)))throw new B(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const o=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}const i=new b8(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class b8{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function IO(){return new Kv([new yO])}let Kv=(()=>{class n{static#e=this.\u0275prov=ge({token:n,providedIn:"root",factory:IO});constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||IO()),deps:[[n,new K_,new Wr]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new B(901,!1)}}return n})();function xO(){return new Pp([new wO])}let Pp=(()=>{class n{static#e=this.\u0275prov=ge({token:n,providedIn:"root",factory:xO});constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||xO()),deps:[[n,new K_,new Wr]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new B(901,!1)}}return n})();const I8=sO(null,"core",[]);let x8=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(i){return new(i||n)(F(Qa))};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({})}return n})();function Sd(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let tx=null;function Ya(){return tx}class V8{}const Dt=new re("DocumentToken");let nx=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ge({token:n,factory:function(){return xe(U8)},providedIn:"platform"})}return n})();const B8=new re("Location Initialized");let U8=(()=>{class n extends nx{constructor(){super(),this._doc=xe(Dt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ya().getBaseHref(this._doc)}onPopState(t){const i=Ya().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Ya().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ge({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function ix(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function kO(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ea(n){return n&&"?"!==n[0]?"?"+n:n}let pc=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ge({token:n,factory:function(){return xe(OO)},providedIn:"root"})}return n})();const rx=new re("appBaseHref");let OO=(()=>{class n extends pc{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??xe(Dt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ix(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+ea(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){const s=this.prepareExternalUrl(r+ea(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){const s=this.prepareExternalUrl(r+ea(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(F(nx),F(rx,8))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),j8=(()=>{class n extends pc{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=ix(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+ea(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+ea(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(F(nx),F(rx,8))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac})}return n})(),kp=(()=>{class n{constructor(t){this._subject=new En,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function H8(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(kO(NO(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+ea(i))}normalize(t){return n.stripTrailingSlash(function $8(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,NO(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ea(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ea(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static#e=this.normalizeQueryParams=ea;static#t=this.joinWithSlash=ix;static#n=this.stripTrailingSlash=kO;static#i=this.\u0275fac=function(i){return new(i||n)(F(pc))};static#r=this.\u0275prov=ge({token:n,factory:function(){return function z8(){return new kp(F(pc))}()},providedIn:"root"})}return n})();function NO(n){return n.replace(/\/index.html$/,"")}function HO(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,o]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}const px=/\s+/,qO=[];let mx=(()=>{class n{constructor(t,i,r,o){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=o,this.initialClasses=qO,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(px):qO}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(px):t}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const i of t)this._updateState(i,!0);else if(null!=t)for(const i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){const r=this.stateMap.get(t);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){(t=t.trim()).length>0&&t.split(px).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static#e=this.\u0275fac=function(i){return new(i||n)(q(Kv),q(Pp),q(ei),q(Qs))};static#t=this.\u0275dir=He({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class SG{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Xa=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,o,s)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new SG(r.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)i.remove(null===o?void 0:o);else if(null!==o){const a=i.get(o);i.move(a,s),GO(a,r)}});for(let r=0,o=i.length;r<o;r++){const a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{GO(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(q(To),q(fs),q(Kv))};static#t=this.\u0275dir=He({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function GO(n,e){n.context.$implicit=e.item}let $o=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new RG,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ZO("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ZO("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(q(To),q(fs))};static#t=this.\u0275dir=He({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class RG{constructor(){this.$implicit=null,this.ngIf=null}}function ZO(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Le(e)}'.`)}let QO=(()=>{class n{constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[r,o]=t.split("."),s=-1===r.indexOf("-")?void 0:Ha.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,o?`${i}${o}`:i,s):this._renderer.removeStyle(this._ngEl.nativeElement,r,s)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static#e=this.\u0275fac=function(i){return new(i||n)(q(ei),q(Pp),q(Qs))};static#t=this.\u0275dir=He({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}return n})(),XO=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({})}return n})();const JO="browser";function ay(n){return"server"===n}let s7=(()=>{class n{static#e=this.\u0275prov=ge({token:n,providedIn:"root",factory:()=>new a7(F(Dt),window)})}return n})();class a7{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function l7(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const o=r.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class eN{}class M7 extends V8{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class wx extends M7{static makeCurrent(){!function L8(n){tx||(tx=n)}(new wx)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function P7(){return Lp=Lp||document.querySelector("base"),Lp?Lp.getAttribute("href"):null}();return null==t?null:function k7(n){uy=uy||document.createElement("a"),uy.setAttribute("href",n);const e=uy.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Lp=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return HO(document.cookie,e)}}let uy,Lp=null,N7=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac})}return n})();const Ix=new re("EventManagerPlugins");let oN=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new B(5101,!1);return this._eventNameToPlugin.set(t,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(F(Ix),F(it))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac})}return n})();class sN{constructor(e){this._doc=e}}const xx="ng-app-id";let aN=(()=>{class n{constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ay(o),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${xx}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const o=r.get(t);return o.usage+=i,o.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===t)return r.delete(i),o.removeAttribute(xx),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(xx,this.appId),s}}addStyleToHost(t,i){const r=this.getStyleElement(t,i);t.appendChild(r);const o=this.styleRef,s=o.get(i)?.elements;s?s.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(F(Dt),F(pv),F(xw,8),F(Io))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac})}return n})();const Cx={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Tx=/%COMP%/g,B7=new re("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function cN(n,e){return e.map(t=>t.replace(Tx,n))}let Dx=(()=>{class n{constructor(t,i,r,o,s,a,l,c=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=ay(a),this.defaultRenderer=new Ax(t,s,l,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Tr.ShadowDom&&(i={...i,encapsulation:Tr.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof dN?r.applyToHost(t):r instanceof Sx&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let o=r.get(i.id);if(!o){const s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(i.encapsulation){case Tr.Emulated:o=new dN(l,c,i,this.appId,h,s,a,p);break;case Tr.ShadowDom:return new $7(l,c,t,i,s,a,this.nonce,p);default:o=new Sx(l,c,i,h,s,a,p)}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(F(oN),F(aN),F(pv),F(B7),F(Dt),F(Io),F(it),F(xw))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac})}return n})();class Ax{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Cx[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(uN(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(uN(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new B(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const o=Cx[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=Cx[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Ha.DashCase|Ha.Important)?e.style.setProperty(t,i,r&Ha.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Ha.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=Ya().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function uN(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class $7 extends Ax{constructor(e,t,i,r,o,s,a,l){super(e,o,s,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=cN(r.id,r.styles);for(const h of c){const p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Sx extends Ax{constructor(e,t,i,r,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?cN(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class dN extends Sx{constructor(e,t,i,r,o,s,a,l){const c=r+"-"+i.id;super(e,t,i,o,s,a,l,c),this.contentAttr=function U7(n){return"_ngcontent-%COMP%".replace(Tx,n)}(c),this.hostAttr=function j7(n){return"_nghost-%COMP%".replace(Tx,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let H7=(()=>{class n extends sN{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(F(Dt))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac})}return n})();const hN=["alt","control","meta","shift"],q7={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},W7={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let G7=(()=>{class n extends sN{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const o=n.parseEventName(i),s=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ya().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=n._normalizeKey(i.pop());let s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),hN.forEach(c=>{const h=i.indexOf(c);h>-1&&(i.splice(h,1),s+=c+".")}),s+=o,0!=i.length||0===o.length)return null;const l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(t,i){let r=q7[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),hN.forEach(s=>{s!==r&&(0,W7[s])(t)&&(o+=s+".")}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(i){return new(i||n)(F(Dt))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac})}return n})();const pN=[{provide:Io,useValue:JO},{provide:m1,useValue:function Z7(){wx.makeCurrent()},multi:!0},{provide:Dt,useFactory:function Q7(){return function kH(n){uw=n}(document),document},deps:[]}],Y7=sO(I8,"browser",pN),X7=new re(""),mN=[{provide:Hv,useClass:class O7{addToWindow(e){Wt.getAngularTestability=(i,r=!0)=>{const o=e.findTestabilityInTree(i,r);if(null==o)throw new B(5103,!1);return o},Wt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Wt.getAllAngularRootElements=()=>e.getAllRootElements(),Wt.frameworkStabilizers||(Wt.frameworkStabilizers=[]),Wt.frameworkStabilizers.push(i=>{const r=Wt.getAllAngularTestabilities();let o=r.length,s=!1;const a=function(l){s=s||l,o--,0==o&&i(s)};r.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?Ya().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:tO,useClass:HI,deps:[it,qI,Hv]},{provide:HI,useClass:HI,deps:[it,qI,Hv]}],gN=[{provide:bw,useValue:"root"},{provide:Ys,useFactory:function K7(){return new Ys},deps:[]},{provide:Ix,useClass:H7,multi:!0,deps:[Dt,it,Io]},{provide:Ix,useClass:G7,multi:!0,deps:[Dt]},Dx,aN,oN,{provide:lp,useExisting:Dx},{provide:eN,useClass:N7,deps:[]},[]];let _N=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:pv,useValue:t.appId}]}}static#e=this.\u0275fac=function(i){return new(i||n)(F(X7,12))};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({providers:[...gN,...mN],imports:[XO,x8]})}return n})(),vN=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(i){return new(i||n)(F(Dt))};static#t=this.\u0275prov=ge({token:n,factory:function(i){let r=null;return r=i?new i:function eZ(){return new vN(F(Dt))}(),r},providedIn:"root"})}return n})();typeof window<"u"&&window;var ne=$e(861),mc=$e(217),tn=$e(58),kr=$e(534),ms=$e(879),wN=$e(537);$e(365),(0,kr.registerVersion)("firebase","10.7.1","app");class aZ extends yt{constructor(e,t){super()}schedule(e,t=0){return this}}const dy={setInterval(n,e,...t){const{delegate:i}=dy;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=dy;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class hy extends aZ{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return dy.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&dy.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ne(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const Mx={now:()=>(Mx.delegate||Date).now(),delegate:void 0};class Vp{constructor(e,t=Vp.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}Vp.now=Mx.now;class fy extends Vp{constructor(e,t=Vp.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const uZ=new class cZ extends fy{}(class lZ extends hy{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return null!=i&&i>0||null==i&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}}),Bp=new fy(hy),dZ=Bp;function Vi(n,e,t){const i=C(n)||e||t?{next:n,error:e,complete:t}:n;return i?se((r,o)=>{var s;null===(s=i.subscribe)||void 0===s||s.call(i);let a=!0;r.subscribe(ye(o,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),o.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),o.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),o.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):Pn}const Md=new Wa("ANGULARFIRE2_VERSION");const Px=(n,e)=>{const t=e?[e]:(0,kr.getApps)(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(s=>{i.includes(s)||i.push(s)})}),i};class kx{constructor(){return Px(hZ)}}const hZ="app-check";function Pd(){}class xN{zone;delegate;constructor(e,t=uZ){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){const r=this.zone;return this.delegate.schedule(function(s){r.runGuarded(()=>{e.apply(this,[s])})},t,i)}}class fZ{zone;task=null;constructor(e){this.zone=e}call(e,t){const i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Pd,{},Pd,Pd)),t.pipe(Vi({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let py=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new xN(Zone.current)),this.insideAngular=t.run(()=>new xN(Zone.current,Bp)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(F(it))};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kd(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function gc(n){return kd().ngZone.run(()=>n())}function Yr(n){return function mZ(n){return function(t){return(t=t.lift(new fZ(n.ngZone))).pipe(bi(n.outsideAngular),Bn(n.insideAngular))}}(kd())(n)}const gZ=(n,e)=>function(){const i=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),gc(()=>n.apply(void 0,i))},_c=(n,e)=>function(){let t;const i=arguments;for(let o=0;o<arguments.length;o++)"function"==typeof i[o]&&(e&&(t||=gc(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Pd,{},Pd,Pd))),i[o]=gZ(i[o],t));const r=function pZ(n){return kd().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,i));if(!e){if(r instanceof Ke){const o=kd();return r.pipe(bi(o.outsideAngular),Bn(o.insideAngular))}return gc(()=>r)}return r instanceof Ke?r.pipe(Yr):r instanceof Promise?gc(()=>new Promise((o,s)=>r.then(a=>gc(()=>o(a)),a=>gc(()=>s(a))))):"function"==typeof r&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),r.apply(this,arguments)}:gc(()=>r)};var ia=$e(106);ia.Z.registerVersion("firebase","10.7.1","app-compat");const yZ=["ngOnDestroy"];class CN{constructor(e){return e}}const my=new re("angularfire2.app.options"),gy=new re("angularfire2.app.name");function Ox(n,e,t){const r="object"==typeof t&&t||{};r.name=r.name||"string"==typeof t&&t||"[DEFAULT]";const s=ia.Z.apps.filter(a=>a&&a.name===r.name)[0]||e.runOutsideAngular(()=>ia.Z.initializeApp(n,r));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){const a=!!module.hot;wZ("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new CN(s)}const wZ=(n,...e)=>{},IZ={provide:CN,useFactory:Ox,deps:[my,it,[new Wr,gy]]};let xZ=(()=>{class n{static initializeApp(t,i){return{ngModule:n,providers:[{provide:my,useValue:t},{provide:gy,useValue:i}]}}constructor(t){ia.Z.registerVersion("angularfire",Md.full,"core"),ia.Z.registerVersion("angularfire",Md.full,"app-compat"),ia.Z.registerVersion("angular",Nw.full,t.toString())}static \u0275fac=function(i){return new(i||n)(F(Io))};static \u0275mod=_t({type:n});static \u0275inj=Tt({providers:[IZ]})}return n})();function TN(n,e,t,i,r){const[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return function CZ(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(r,s)||(DN("error",`${e} was already initialized on the ${t} Firebase App with different settings.${TZ?" You may need to reload as Firebase is not HMR aware.":""}`),DN("warn",{is:r,was:s})),o;{const a=i();return globalThis.\u0275AngularfireInstanceCache.push([n,a,r]),a}}const TZ=typeof module<"u"&&!!module.hot,DN=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[];class DZ extends H{constructor(e=1/0,t=1/0,i=Mx){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;t||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){const s=t.now();let a=0;for(let l=1;l<i.length&&i[l]<=s;l+=2)a=l;a&&i.splice(0,a+1)}}}function AN(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=n??1/0,ee({connector:()=>new DZ(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}const _y=J(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function gi(n,e){return se((t,i)=>{let r=0;t.subscribe(ye(i,o=>n.call(e,o,r++)&&i.next(o)))})}function So(n){return n<=0?()=>kn:se((e,t)=>{let i=0;e.subscribe(ye(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function vy(n){return se((e,t)=>{let i=!1;e.subscribe(ye(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function SN(n=AZ){return se((e,t)=>{let i=!1;e.subscribe(ye(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function AZ(){return new _y}function el(n,e){const t=arguments.length>=2;return i=>i.pipe(n?gi((r,o)=>n(r,o,i)):Pn,So(1),t?vy(e):SN(()=>new _y))}function RN(n,e){return C(e)?Ae(()=>n,e):Ae(()=>n)}const MN=new re("angularfire2.auth.use-emulator"),PN=new re("angularfire2.auth.settings"),kN=new re("angularfire2.auth.tenant-id"),ON=new re("angularfire2.auth.langugage-code"),NN=new re("angularfire2.auth.use-device-language"),FN=new re("angularfire.auth.persistence"),LN=(n,e,t,i,r,o,s,a)=>TN(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),i&&(l.tenantId=i),l.languageCode=r,o&&l.useDeviceLanguage(),s)for(const[c,h]of Object.entries(s))l.settings[c]=h;return a&&l.setPersistence(a),l},[t,i,r,o,s,a]);let yy=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,i,r,o,s,a,l,c,h,p,g,_){const E=new H,x=S(void 0).pipe(Bn(s.outsideAngular),Ae(()=>o.runOutsideAngular(()=>Promise.resolve().then($e.bind($e,365)))),be(()=>Ox(t,o,i)),be(T=>LN(T,o,a,c,h,p,l,g)),AN({bufferSize:1,refCount:!1}));if(ay(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=S(null);else{x.pipe(el()).subscribe();const T=x.pipe(Ae(j=>j.getRedirectResult().then(ie=>ie,()=>null)),Yr,AN({bufferSize:1,refCount:!1})),V=x.pipe(Ae(j=>new Ke(ie=>({unsubscribe:o.runOutsideAngular(()=>j.onAuthStateChanged(_e=>ie.next(_e),_e=>ie.error(_e),()=>ie.complete()))})))),M=x.pipe(Ae(j=>new Ke(ie=>({unsubscribe:o.runOutsideAngular(()=>j.onIdTokenChanged(_e=>ie.next(_e),_e=>ie.error(_e),()=>ie.complete()))}))));this.authState=T.pipe(RN(V),bi(s.outsideAngular),Bn(s.insideAngular)),this.user=T.pipe(RN(M),bi(s.outsideAngular),Bn(s.insideAngular)),this.idToken=this.user.pipe(Ae(j=>j?b(j.getIdToken()):S(null))),this.idTokenResult=this.user.pipe(Ae(j=>j?b(j.getIdTokenResult()):S(null))),this.credential=I(T,E,this.authState.pipe(gi(j=>!j))).pipe(be(j=>j?.user?j:null),bi(s.outsideAngular),Bn(s.insideAngular))}return((n,e,t,i={})=>new Proxy(n,{get:(r,o)=>t.runOutsideAngular(()=>{if(n[o])return i?.spy?.get&&i.spy.get(o,n[o]),n[o];if(yZ.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(a=>{const l=a?.[o];return"function"==typeof l?l.bind(a):l?.then?l.then(c=>t.run(()=>c)):t.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>s[l],apply:(a,l,c)=>s.then(h=>{const p=h?.(...c);return i?.spy?.apply&&i.spy.apply(o,c,p),p})})})}))(this,x,o,{spy:{apply:(T,V,M)=>{(T.startsWith("signIn")||T.startsWith("createUser"))&&M.then(j=>E.next(j))}}})}static \u0275fac=function(i){return new(i||n)(F(my),F(gy,8),F(Io),F(it),F(py),F(MN,8),F(PN,8),F(kN,8),F(ON,8),F(NN,8),F(FN,8),F(kx,8))};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),RZ=(()=>{class n{constructor(){ia.Z.registerVersion("angularfire",Md.full,"auth-compat")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=_t({type:n});static \u0275inj=Tt({providers:[yy]})}return n})();const VN=new re("COOKIE_OPTIONS"),Nx=new re("COOKIE_WRITER");function Up(n){return null==n}function tl(n){return!Up(n)}function UN(n,e){return e?{path:tl(e.path)?e.path:n.path,domain:tl(e.domain)?e.domain:n.domain,expires:tl(e.expires)?e.expires:n.expires,secure:tl(e.secure)?e.secure:n.secure,sameSite:tl(e.sameSite)?e.sameSite:n.sameSite,httpOnly:tl(e.httpOnly)?e.httpOnly:n.httpOnly,storeUnencoded:tl(e.storeUnencoded)?e.storeUnencoded:n.storeUnencoded}:n}function jN(n){try{return decodeURIComponent(n)}catch{return n}}let by=(()=>{class n{constructor(t={},i){this.injector=i,this.defaultOptions={path:this.injector.get(rx,"/"),domain:void 0,expires:void 0,secure:!1,httpOnly:!1},this.options=UN(this.defaultOptions,t)}}return n.\u0275fac=function(t){return new(t||n)(F(VN),F(jn))},n.\u0275prov=ge({token:n,factory:n.\u0275fac}),n})(),Od=(()=>{class n{constructor(t,i,r){this.document=t,this.optionsProvider=i,this.cookieWriterService=r,this.options=this.optionsProvider.options}hasKey(t){return tl(this.get(t))}get(t){return this.getAll()?.[t]}getObject(t){const i=this.get(t);if(!Up(i))return""===i?{}:JSON.parse(i)}getAll(){return function MZ(n){let i,r,o,s,a,e={},t="";if(n!==t)for(t=n,i=t.split(";"),e={},o=0;o<i.length;o++)r=i[o],s=r.indexOf("="),s>0&&(a=jN(r.substring(0,s).trim()),Up(e[a])&&(e[a]=jN(r.substring(s+1).trim())));return e}(this.cookieWriterService.readAllAsString())}put(t,i,r){const o=UN(this.options,r);this.cookieWriterService.write(t,i,o)}putObject(t,i,r){this.put(t,JSON.stringify(i),r)}remove(t,i){this.put(t,void 0,i)}removeAll(t){const i=this.getAll();Object.keys(i).forEach(r=>this.remove(r,t))}}return n.\u0275fac=function(t){return new(t||n)(F(Dt),F(by),F(Nx))},n.\u0275prov=ge({token:n,factory:n.\u0275fac}),n})(),kZ=(()=>{class n{constructor(t){this.document=t}readAllAsString(){return this.document.cookie||""}write(t,i,r){this.document.cookie=function PZ(n,e,t){let r,i=t?.expires;Up(e)?(i="Thu, 01 Jan 1970 00:00:00 GMT",r=""):r=e,function BN(n){return"string"==typeof n}(i)&&(i=new Date(i));const o=t?.storeUnencoded?e:encodeURIComponent(r);let s=encodeURIComponent(n)+"="+o;s+=t?.path?";path="+t.path:"",s+=t?.domain?";domain="+t.domain:"",s+=i?";expires="+i.toUTCString():"",s+=t?.sameSite?"; SameSite="+t.sameSite:"",s+=t?.secure?";secure":"",s+=t?.httpOnly?"; HttpOnly":"";const a=s.length+1;return a>4096&&console.log("Cookie '"+n+"' possibly not set or overflowed because it was too large ("+a+" > 4096 bytes)!"),s}(t,i,r)}}return n.\u0275fac=function(t){return new(t||n)(F(Dt))},n.\u0275prov=ge({token:n,factory:n.\u0275fac}),n})();function OZ(n,e,t){return new Od(n,e,t)}let NZ=(()=>{class n{static withOptions(t={}){return{ngModule:n,providers:[{provide:VN,useValue:t},{provide:Nx,useClass:kZ},{provide:Od,useFactory:OZ,deps:[Dt,by,Nx]}]}}static forRoot(t={}){return this.withOptions(t)}static forChild(t={}){return this.withOptions(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_t({type:n}),n.\u0275inj=Tt({providers:[by]}),n})();function Ey(...n){return function FZ(){return ar(1)}()(b(n,$r(n)))}function vc(...n){const e=$r(n);return se((t,i)=>{(e?Ey(n,t,e):Ey(n,t)).subscribe(i)})}function Fx(){return se((n,e)=>{let t,i=!1;n.subscribe(ye(e,r=>{const o=t;t=r,i&&e.next([o,r]),i=!0}))})}function wy(n,e){return se(function LZ(n,e,t,i,r){return(o,s)=>{let a=t,l=e,c=0;o.subscribe(ye(s,h=>{const p=c++;l=a?n(l,h,p):(a=!0,h),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}(n,e,arguments.length>=2,!0))}var Te,VZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qo={},Lx=Lx||{},st=VZ||self;function Iy(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function jp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Vx="closure_uid_"+(1e9*Math.random()>>>0),UZ=0;function jZ(n,e,t){return n.call.apply(n.bind,arguments)}function zZ(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function Ki(n,e,t){return(Ki=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?jZ:zZ).apply(null,arguments)}function xy(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Ti(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(i,r,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[r].apply(i,s)}}function nl(){this.s=this.s,this.o=this.o}nl.prototype.s=!1,nl.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function BZ(n){Object.prototype.hasOwnProperty.call(n,Vx)&&n[Vx]||(n[Vx]=++UZ)}(this)},nl.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const zN=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Bx(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function $N(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(Iy(i)){const r=n.length||0,o=i.length||0;n.length=r+o;for(let s=0;s<o;s++)n[r+s]=i[s]}else n.push(i)}}function Qi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Qi.prototype.h=function(){this.defaultPrevented=!0};var HZ=function(){if(!st.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{const t=()=>{};st.addEventListener("test",t,e),st.removeEventListener("test",t,e)}catch{}return n}();function zp(n){return/^[\s\xa0]*$/.test(n)}function Cy(){var n=st.navigator;return n&&(n=n.userAgent)?n:""}function gs(n){return-1!=Cy().indexOf(n)}function Ux(n){return Ux[" "](n),n}Ux[" "]=function(){};var zx,n,WZ=gs("Opera"),Nd=gs("Trident")||gs("MSIE"),HN=gs("Edge"),jx=HN||Nd,qN=gs("Gecko")&&!(-1!=Cy().toLowerCase().indexOf("webkit")&&!gs("Edge"))&&!(gs("Trident")||gs("MSIE"))&&!gs("Edge"),GZ=-1!=Cy().toLowerCase().indexOf("webkit")&&!gs("Edge");function WN(){var n=st.document;return n?n.documentMode:void 0}e:{var $x="",Hx=(n=Cy(),qN?/rv:([^\);]+)(\)|;)/.exec(n):HN?/Edge\/([\d\.]+)/.exec(n):Nd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):GZ?/WebKit\/(\S+)/.exec(n):WZ?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Hx&&($x=Hx?Hx[1]:""),Nd){var qx=WN();if(null!=qx&&qx>parseFloat($x)){zx=String(qx);break e}}zx=$x}var ZZ=st.document&&Nd&&(WN()||parseInt(zx,10))||void 0;function $p(n,e){if(Qi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(qN){e:{try{Ux(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:KZ[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&$p.$.h.call(this)}}Ti($p,Qi);var KZ={2:"touch",3:"pen",4:"mouse"};$p.prototype.h=function(){$p.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Hp="closure_listenable_"+(1e6*Math.random()|0),QZ=0;function YZ(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.la=r,this.key=++QZ,this.fa=this.ia=!1}function Ty(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Gx(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function ZN(n){const e={};for(const t in n)e[t]=n[t];return e}const KN="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function QN(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let o=0;o<KN.length;o++)t=KN[o],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function Dy(n){this.src=n,this.g={},this.h=0}function Zx(n,e){var t=e.type;if(t in n.g){var o,i=n.g[t],r=zN(i,e);(o=0<=r)&&Array.prototype.splice.call(i,r,1),o&&(Ty(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Kx(n,e,t,i){for(var r=0;r<n.length;++r){var o=n[r];if(!o.fa&&o.listener==e&&o.capture==!!t&&o.la==i)return r}return-1}Dy.prototype.add=function(n,e,t,i,r){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var s=Kx(n,e,i,r);return-1<s?(e=n[s],t||(e.ia=!1)):((e=new YZ(e,this.src,o,!!i,r)).ia=t,n.push(e)),e};var Qx="closure_lm_"+(1e6*Math.random()|0),Yx={};function YN(n,e,t,i,r){if(i&&i.once)return JN(n,e,t,i,r);if(Array.isArray(e)){for(var o=0;o<e.length;o++)YN(n,e[o],t,i,r);return null}return t=tC(t),n&&n[Hp]?n.O(e,t,jp(i)?!!i.capture:!!i,r):XN(n,e,t,!1,i,r)}function XN(n,e,t,i,r,o){if(!e)throw Error("Invalid event type");var s=jp(r)?!!r.capture:!!r,a=Jx(n);if(a||(n[Qx]=a=new Dy(n)),(t=a.add(e,t,i,s,o)).proxy)return t;if(i=function JZ(){const e=eK;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)HZ||(r=s),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(tF(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function JN(n,e,t,i,r){if(Array.isArray(e)){for(var o=0;o<e.length;o++)JN(n,e[o],t,i,r);return null}return t=tC(t),n&&n[Hp]?n.P(e,t,jp(i)?!!i.capture:!!i,r):XN(n,e,t,!0,i,r)}function eF(n,e,t,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)eF(n,e[o],t,i,r);else i=jp(i)?!!i.capture:!!i,t=tC(t),n&&n[Hp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Kx(o=n.g[e],t,i,r))&&(Ty(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=Jx(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Kx(e,t,i,r)),(t=-1<n?e[n]:null)&&Xx(t))}function Xx(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Hp])Zx(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(tF(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=Jx(e))?(Zx(t,n),0==t.h&&(t.src=null,e[Qx]=null)):Ty(n)}}}function tF(n){return n in Yx?Yx[n]:Yx[n]="on"+n}function eK(n,e){if(n.fa)n=!0;else{e=new $p(e,this);var t=n.listener,i=n.la||n.src;n.ia&&Xx(n),n=t.call(i,e)}return n}function Jx(n){return(n=n[Qx])instanceof Dy?n:null}var eC="__closure_events_fn_"+(1e9*Math.random()>>>0);function tC(n){return"function"==typeof n?n:(n[eC]||(n[eC]=function(e){return n.handleEvent(e)}),n[eC])}function Di(){nl.call(this),this.i=new Dy(this),this.S=this,this.J=null}function Bi(n,e){var t,i=n.J;if(i)for(t=[];i;i=i.J)t.push(i);if(n=n.S,i=e.type||e,"string"==typeof e)e=new Qi(e,n);else if(e instanceof Qi)e.target=e.target||n;else{var r=e;QN(e=new Qi(i,n),r)}if(r=!0,t)for(var o=t.length-1;0<=o;o--){var s=e.g=t[o];r=Ay(s,i,!0,e)&&r}if(r=Ay(s=e.g=n,i,!0,e)&&r,r=Ay(s,i,!1,e)&&r,t)for(o=0;o<t.length;o++)r=Ay(s=e.g=t[o],i,!1,e)&&r}function Ay(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==t){var a=s.listener,l=s.la||s.src;s.ia&&Zx(n.i,s),r=!1!==a.call(l,i)&&r}}return r&&!i.defaultPrevented}Ti(Di,nl),Di.prototype[Hp]=!0,Di.prototype.removeEventListener=function(n,e,t,i){eF(this,n,e,t,i)},Di.prototype.N=function(){if(Di.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)Ty(t[i]);delete n.g[e],n.h--}}this.J=null},Di.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},Di.prototype.P=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var nC=st.JSON.stringify;function nK(){var n=iC;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var nF=new class tK{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new rK,n=>n.reset());class rK{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function oK(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function sK(n){st.setTimeout(()=>{throw n},0)}let qp,Wp=!1,iC=new class iK{constructor(){this.h=this.g=null}add(e,t){const i=nF.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}},iF=()=>{const n=st.Promise.resolve(void 0);qp=()=>{n.then(aK)}};var aK=()=>{for(var n;n=nK();){try{n.h.call(n.g)}catch(t){sK(t)}var e=nF;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Wp=!1};function Sy(n,e){Di.call(this),this.h=n||1,this.g=e||st,this.j=Ki(this.qb,this),this.l=Date.now()}function rC(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function oC(n,e,t){if("function"==typeof n)t&&(n=Ki(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ki(n.handleEvent,n)}return 2147483647<Number(e)?-1:st.setTimeout(n,e||0)}function rF(n){n.g=oC(()=>{n.g=null,n.i&&(n.i=!1,rF(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ti(Sy,Di),(Te=Sy.prototype).ga=!1,Te.T=null,Te.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Bi(this,"tick"),this.ga&&(rC(this),this.start()))}},Te.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Te.N=function(){Sy.$.N.call(this),rC(this),delete this.g};class lK extends nl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:rF(this)}N(){super.N(),this.g&&(st.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gp(n){nl.call(this),this.h=n,this.g={}}Ti(Gp,nl);var oF=[];function sF(n,e,t,i){Array.isArray(t)||(t&&(oF[0]=t.toString()),t=oF);for(var r=0;r<t.length;r++){var o=YN(e,t[r],i||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function aF(n){Gx(n.g,function(e,t){this.g.hasOwnProperty(t)&&Xx(e)},n),n.g={}}function Ry(){this.g=!0}function Fd(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function hK(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<r.length;s++)r[s]=""}}}return nC(t)}catch{return e}}(n,t)+(i?" "+i:"")})}Gp.prototype.N=function(){Gp.$.N.call(this),aF(this)},Gp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ry.prototype.Ea=function(){this.g=!1},Ry.prototype.info=function(){};var yc={},lF=null;function My(){return lF=lF||new Di}function cF(n){Qi.call(this,yc.Ta,n)}function Zp(n){const e=My();Bi(e,new cF(e))}function uF(n,e){Qi.call(this,yc.STAT_EVENT,n),this.stat=e}function br(n){const e=My();Bi(e,new uF(e,n))}function dF(n,e){Qi.call(this,yc.Ua,n),this.size=e}function Kp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return st.setTimeout(function(){n()},e)}yc.Ta="serverreachability",Ti(cF,Qi),yc.STAT_EVENT="statevent",Ti(uF,Qi),yc.Ua="timingevent",Ti(dF,Qi);var Py={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},hF={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function sC(){}function pF(){}sC.prototype.h=null;var cC,Qp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function aC(){Qi.call(this,"d")}function lC(){Qi.call(this,"c")}function ky(){}function Yp(n,e,t,i){this.l=n,this.j=e,this.m=t,this.W=i||1,this.U=new Gp(this),this.P=fK,this.V=new Sy(n=jx?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new mF}function mF(){this.i=null,this.g="",this.h=!1}Ti(aC,Qi),Ti(lC,Qi),Ti(ky,sC),ky.prototype.g=function(){return new XMLHttpRequest},ky.prototype.i=function(){return{}},cC=new ky;var fK=45e3,gF={},uC={};function dC(n,e,t){n.L=1,n.A=Ly(ra(e)),n.u=t,n.S=!0,_F(n,null)}function _F(n,e){n.G=Date.now(),Xp(n),n.B=ra(n.A);var t=n.B,i=n.W;Array.isArray(i)||(i=[String(i)]),DF(t.i,"t",i),n.o=0,t=n.l.J,n.h=new mF,n.g=YF(n.l,t?e:null,!n.u),0<n.O&&(n.M=new lK(Ki(n.Pa,n,n.g),n.O)),sF(n.U,n.g,"readystatechange",n.nb),e=n.I?ZN(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),Zp(),function cK(n,e,t,i,r,o){n.info(function(){if(n.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var h=c[0];c=c[1];var p=h.split("_");s=2<=p.length&&"type"==p[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+s})}(n.j,n.v,n.B,n.m,n.W,n.u)}function vF(n){return!!n.g&&"GET"==n.v&&2!=n.L&&n.l.Ha}function yF(n,e,t){let r,i=!0;for(;!n.J&&n.o<t.length;){if(r=pK(n,t),r==uC){4==e&&(n.s=4,br(14),i=!1),Fd(n.j,n.m,null,"[Incomplete Response]");break}if(r==gF){n.s=4,br(15),Fd(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}Fd(n.j,n.m,r,null),hC(n,r)}vF(n)&&0!=n.o&&(n.h.g=n.h.g.slice(n.o),n.o=0),4!=e||0!=t.length||n.h.h||(n.s=1,br(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),yC(e),e.M=!0,br(11))):(Fd(n.j,n.m,t,"[Invalid Chunked Response]"),bc(n),Jp(n))}function pK(n,e){var t=n.o,i=e.indexOf("\n",t);return-1==i?uC:(t=Number(e.substring(t,i)),isNaN(t)?gF:(i+=1)+t>e.length?uC:(e=e.slice(i,i+t),n.o=i+t,e))}function Xp(n){n.Y=Date.now()+n.P,bF(n,n.P)}function bF(n,e){if(null!=n.C)throw Error("WatchDog timer not null");n.C=Kp(Ki(n.lb,n),e)}function Oy(n){n.C&&(st.clearTimeout(n.C),n.C=null)}function Jp(n){0==n.l.H||n.J||GF(n.l,n)}function bc(n){Oy(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,rC(n.V),aF(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function hC(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||fC(t.i,n)))if(!n.K&&fC(t.i,n)&&3==t.H){try{var i=t.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;$y(t),jy(t)}vC(t),br(18)}}else t.Fa=r[1],0<t.Fa-t.V&&37500>r[2]&&t.G&&0==t.A&&!t.v&&(t.v=Kp(Ki(t.ib,t),6e3));if(1>=RF(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else wc(t,11)}else if((n.K||t.g==n)&&$y(t),!zp(e))for(r=t.Ja.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(t.V=c[0],c=c[1],2==t.H)if("c"==c[0]){t.K=c[1],t.pa=c[2];const h=c[3];null!=h&&(t.ra=h,t.l.info("VER="+t.ra));const p=c[4];null!=p&&(t.Ga=p,t.l.info("SVER="+t.Ga));const g=c[5];null!=g&&"number"==typeof g&&0<g&&(t.L=i=1.5*g,t.l.info("backChannelRequestTimeoutMs_="+i)),i=t;const _=n.g;if(_){const E=_.g?_.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var o=i.i;o.g||-1==E.indexOf("spdy")&&-1==E.indexOf("quic")&&-1==E.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(pC(o,o.h),o.h=null))}if(i.F){const x=_.g?_.g.getResponseHeader("X-HTTP-Session-Id"):null;x&&(i.Da=x,wn(i.I,i.F,x))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var s=n;if((i=t).wa=QF(i,i.J?i.pa:null,i.Y),s.K){MF(i.i,s);var a=s,l=i.L;l&&a.setTimeout(l),a.C&&(Oy(a),Xp(a)),i.g=s}else qF(i);0<t.j.length&&zy(t)}else"stop"!=c[0]&&"close"!=c[0]||wc(t,7);else 3==t.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?wc(t,7):_C(t):"noop"!=c[0]&&t.h&&t.h.Aa(c),t.A=0)}Zp()}catch{}}function EF(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Iy(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function gK(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Iy(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function mK(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Iy(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],t&&t[o],n)}(Te=Yp.prototype).setTimeout=function(n){this.P=n},Te.nb=function(n){n=n.target;const e=this.M;e&&3==_s(n)?e.l():this.Pa(n)},Te.Pa=function(n){try{if(n==this.g)e:{const h=_s(this.g);var e=this.g.Ia();if(this.g.da(),!(3>h)&&(3!=h||jx||this.g&&(this.h.h||this.g.ja()||BF(this.g)))){this.J||4!=h||7==e||Zp(),Oy(this);var t=this.g.da();this.ca=t;t:if(vF(this)){var i=BF(this.g);n="";var r=i.length,o=4==_s(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){bc(this),Jp(this);var s="";break t}this.h.i=new st.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:o&&e==r-1});i.length=0,this.h.g+=n,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==t,function uK(n,e,t,i,r,o,s){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+o+" "+s})}(this.j,this.v,this.B,this.m,this.W,h,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zp(a)){var c=a;break t}}c=null}if(!(t=c)){this.i=!1,this.s=3,br(12),bc(this),Jp(this);break e}Fd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hC(this,t)}this.S?(yF(this,h,s),jx&&this.i&&3==h&&(sF(this.U,this.V,"tick",this.mb),this.V.start())):(Fd(this.j,this.m,s,null),hC(this,s)),4==h&&bc(this),this.i&&!this.J&&(4==h?GF(this.l,this):(this.i=!1,Xp(this)))}else(function OK(n){const e={};n=(n.g&&2<=_s(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<n.length;i++){if(zp(n[i]))continue;var t=oK(n[i]);const r=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const o=e[r]||[];e[r]=o,o.push(t)}!function XZ(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(i){return i.join(", ")})})(this.g),400==t&&0<s.indexOf("Unknown SID")?(this.s=3,br(12)):(this.s=0,br(13)),bc(this),Jp(this)}}}catch{}},Te.mb=function(){if(this.g){var n=_s(this.g),e=this.g.ja();this.o<e.length&&(Oy(this),yF(this,n,e),this.i&&4!=n&&Xp(this))}},Te.cancel=function(){this.J=!0,bc(this)},Te.lb=function(){this.C=null;const n=Date.now();0<=n-this.Y?(function dK(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(Zp(),br(17)),bc(this),this.s=2,Jp(this)):bF(this,this.Y-n)};var wF=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ec(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ec){this.h=n.h,Ny(this,n.j),this.s=n.s,this.g=n.g,Fy(this,n.m),this.l=n.l;var e=n.i,t=new nm;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),IF(this,t),this.o=n.o}else n&&(e=String(n).match(wF))?(this.h=!1,Ny(this,e[1]||"",!0),this.s=em(e[2]||""),this.g=em(e[3]||"",!0),Fy(this,e[4]),this.l=em(e[5]||"",!0),IF(this,e[6]||"",!0),this.o=em(e[7]||"")):(this.h=!1,this.i=new nm(null,this.h))}function ra(n){return new Ec(n)}function Ny(n,e,t){n.j=t?em(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Fy(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function IF(n,e,t){e instanceof nm?(n.i=e,function IK(n,e){e&&!n.j&&(il(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(CF(this,i),DF(this,r,t))},n)),n.j=e}(n.i,n.h)):(t||(e=tm(e,EK)),n.i=new nm(e,n.h))}function wn(n,e,t){n.i.set(e,t)}function Ly(n){return wn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function em(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function tm(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,vK),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function vK(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ec.prototype.toString=function(){var n=[],e=this.j;e&&n.push(tm(e,xF,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(tm(e,xF,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(tm(t,"/"==t.charAt(0)?bK:yK,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",tm(t,wK)),n.join("")};var xF=/[#\/\?@]/g,yK=/[#\?:]/g,bK=/[#\?]/g,EK=/[#\?@]/g,wK=/#/g;function nm(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function il(n){n.g||(n.g=new Map,n.h=0,n.i&&function _K(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var o=n[t].substring(0,i);r=n[t].substring(i+1)}else o=n[t];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function CF(n,e){il(n),e=Ld(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function TF(n,e){return il(n),e=Ld(n,e),n.g.has(e)}function DF(n,e,t){CF(n,e),0<t.length&&(n.i=null,n.g.set(Ld(n,e),Bx(t)),n.h+=t.length)}function Ld(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function AF(n){this.l=n||CK,n=st.PerformanceNavigationTiming?0<(n=st.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(st.g&&st.g.Ka&&st.g.Ka()&&st.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Te=nm.prototype).add=function(n,e){il(this),this.i=null,n=Ld(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Te.forEach=function(n,e){il(this),this.g.forEach(function(t,i){t.forEach(function(r){n.call(e,r,i,this)},this)},this)},Te.ta=function(){il(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const r=n[i];for(let o=0;o<r.length;o++)t.push(e[i])}return t},Te.Z=function(n){il(this);let e=[];if("string"==typeof n)TF(this,n)&&(e=e.concat(this.g.get(Ld(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Te.set=function(n,e){return il(this),this.i=null,TF(this,n=Ld(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Te.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Te.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const o=encodeURIComponent(String(i)),s=this.Z(i);for(i=0;i<s.length;i++){var r=o;""!==s[i]&&(r+="="+encodeURIComponent(String(s[i]))),n.push(r)}}return this.i=n.join("&")};var CK=10;function SF(n){return!!n.h||!!n.g&&n.g.size>=n.j}function RF(n){return n.h?1:n.g?n.g.size:0}function fC(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function pC(n,e){n.g?n.g.add(e):n.h=e}function MF(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function PF(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Bx(n.i)}AF.prototype.cancel=function(){if(this.i=PF(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var TK=class{stringify(n){return st.JSON.stringify(n,void 0)}parse(n){return st.JSON.parse(n,void 0)}};function DK(){this.g=new TK}function AK(n,e,t){const i=t||"";try{EF(n,function(r,o){let s=r;jp(r)&&(s=nC(r)),e.push(i+o+"="+encodeURIComponent(s))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function Vy(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function im(n){this.l=n.ec||null,this.j=n.ob||!1}function By(n,e){Di.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=mC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ti(im,sC),im.prototype.g=function(){return new By(this.l,this.j)},im.prototype.i=function(n){return function(){return n}}({}),Ti(By,Di);var mC=0;function kF(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function rm(n){n.readyState=4,n.l=null,n.j=null,n.A=null,om(n)}function om(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Te=By.prototype).open=function(n,e){if(this.readyState!=mC)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,om(this)},Te.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||st).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Te.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,rm(this)),this.readyState=mC},Te.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,om(this)),this.g&&(this.readyState=3,om(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof st.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;kF(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Te.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?rm(this):om(this),3==this.readyState&&kF(this)}},Te.Za=function(n){this.g&&(this.response=this.responseText=n,rm(this))},Te.Ya=function(n){this.g&&(this.response=n,rm(this))},Te.ka=function(){this.g&&rm(this)},Te.setRequestHeader=function(n,e){this.v.append(n,e)},Te.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Te.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(By.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var RK=st.JSON.parse;function Hn(n){Di.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=OF,this.L=this.M=!1}Ti(Hn,Di);var OF="",MK=/^https?$/i,PK=["POST","PUT"];function NF(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,FF(n),Uy(n)}function FF(n){n.F||(n.F=!0,Bi(n,"complete"),Bi(n,"error"))}function LF(n){if(n.h&&typeof Lx<"u"&&(!n.C[1]||4!=_s(n)||2!=n.da()))if(n.v&&4==_s(n))oC(n.La,0,n);else if(Bi(n,"readystatechange"),4==_s(n)){n.h=!1;try{const s=n.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===s){var r=String(n.I).match(wF)[1]||null;!r&&st.self&&st.self.location&&(r=st.self.location.protocol.slice(0,-1)),i=!MK.test(r?r.toLowerCase():"")}t=i}if(t)Bi(n,"complete"),Bi(n,"success");else{n.m=6;try{var o=2<_s(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.da()+"]",FF(n)}}finally{Uy(n)}}}function Uy(n,e){if(n.g){VF(n);const t=n.g,i=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Bi(n,"ready");try{t.onreadystatechange=i}catch{}}}function VF(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(st.clearTimeout(n.A),n.A=null)}function _s(n){return n.g?n.g.readyState:0}function BF(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case OF:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function UF(n){let e="";return Gx(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function gC(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=UF(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):wn(n,e,t))}function sm(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function jF(n){this.Ga=0,this.j=[],this.l=new Ry,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=sm("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=sm("baseRetryDelayMs",5e3,n),this.hb=sm("retryDelaySeedMs",1e4,n),this.eb=sm("forwardChannelMaxRetries",2,n),this.xa=sm("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new AF(n&&n.concurrentRequestLimit),this.Ja=new DK,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function _C(n){if(zF(n),3==n.H){var e=n.W++,t=ra(n.I);if(wn(t,"SID",n.K),wn(t,"RID",e),wn(t,"TYPE","terminate"),am(n,t),(e=new Yp(n,n.l,e)).L=2,e.A=Ly(ra(t)),t=!1,st.navigator&&st.navigator.sendBeacon)try{t=st.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&st.Image&&((new Image).src=e.A,t=!0),t||(e.g=YF(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Xp(e)}KF(n)}function jy(n){n.g&&(yC(n),n.g.cancel(),n.g=null)}function zF(n){jy(n),n.u&&(st.clearTimeout(n.u),n.u=null),$y(n),n.i.cancel(),n.m&&("number"==typeof n.m&&st.clearTimeout(n.m),n.m=null)}function zy(n){if(!SF(n.i)&&!n.m){n.m=!0;var e=n.Na;qp||iF(),Wp||(qp(),Wp=!0),iC.add(e,n),n.C=0}}function $F(n,e){var t;t=e?e.m:n.W++;const i=ra(n.I);wn(i,"SID",n.K),wn(i,"RID",t),wn(i,"AID",n.V),am(n,i),n.o&&n.s&&gC(i,n.o,n.s),t=new Yp(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=HF(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),pC(n.i,t),dC(t,i,e)}function am(n,e){n.na&&Gx(n.na,function(t,i){wn(e,i,t)}),n.h&&EF({},function(t,i){wn(e,i,t)})}function HF(n,e,t){t=Math.min(n.j.length,t);var i=n.h?Ki(n.h.Va,n.h,n):null;e:{var r=n.j;let o=-1;for(;;){const s=["count="+t];-1==o?0<t?(o=r[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let l=0;l<t;l++){let c=r[l].g;const h=r[l].map;if(c-=o,0>c)o=Math.max(0,r[l].g-100),a=!1;else try{AK(h,s,"req"+c+"_")}catch{i&&i(h)}}if(a){i=s.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,i}function qF(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;qp||iF(),Wp||(qp(),Wp=!0),iC.add(e,n),n.A=0}}function vC(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Kp(Ki(n.Ma,n),ZF(n,n.A)),n.A++,0))}function yC(n){null!=n.B&&(st.clearTimeout(n.B),n.B=null)}function WF(n){n.g=new Yp(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=ra(n.wa);wn(e,"RID","rpc"),wn(e,"SID",n.K),wn(e,"AID",n.V),wn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&wn(e,"TO",n.qa),wn(e,"TYPE","xmlhttp"),am(n,e),n.o&&n.s&&gC(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=Ly(ra(e)),t.u=null,t.S=!0,_F(t,n)}function $y(n){null!=n.v&&(st.clearTimeout(n.v),n.v=null)}function GF(n,e){var t=null;if(n.g==e){$y(n),yC(n),n.g=null;var i=2}else{if(!fC(n.i,e))return;t=e.F,MF(n.i,e),i=1}if(0!=n.H)if(e.i)if(1==i){t=e.u?e.u.length:0,e=Date.now()-e.G;var r=n.C;Bi(i=My(),new dF(i,t)),zy(n)}else qF(n);else if(3==(r=e.s)||0==r&&0<e.ca||!(1==i&&function NK(n,e){return!(RF(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Kp(Ki(n.Na,n,e),ZF(n,n.C)),n.C++,0)))}(n,e)||2==i&&vC(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),r){case 1:wc(n,5);break;case 4:wc(n,10);break;case 3:wc(n,6);break;default:wc(n,2)}}function ZF(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function wc(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var i=Ki(n.pb,n);t||(t=new Ec("//www.google.com/images/cleardot.gif"),st.location&&"http"==st.location.protocol||Ny(t,"https"),Ly(t)),function SK(n,e){const t=new Ry;if(st.Image){const i=new Image;i.onload=xy(Vy,t,i,"TestLoadImage: loaded",!0,e),i.onerror=xy(Vy,t,i,"TestLoadImage: error",!1,e),i.onabort=xy(Vy,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=xy(Vy,t,i,"TestLoadImage: timeout",!1,e),st.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else br(2);n.H=0,n.h&&n.h.za(e),KF(n),zF(n)}function KF(n){if(n.H=0,n.ma=[],n.h){const e=PF(n.i);(0!=e.length||0!=n.j.length)&&($N(n.ma,e),$N(n.ma,n.j),n.i.i.length=0,Bx(n.j),n.j.length=0),n.h.ya()}}function QF(n,e,t){var i=t instanceof Ec?ra(t):new Ec(t);if(""!=i.g)e&&(i.g=e+"."+i.g),Fy(i,i.m);else{var r=st.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var o=new Ec(null);i&&Ny(o,i),e&&(o.g=e),r&&Fy(o,r),t&&(o.l=t),i=o}return e=n.Da,(t=n.F)&&e&&wn(i,t,e),wn(i,"VER",n.ra),am(n,i),i}function YF(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Hn(n.Ha&&!n.va?new im({ob:t}):n.va)).Oa(n.J),e}function XF(){}function Hy(){if(Nd&&!(10<=Number(ZZ)))throw Error("Environmental error: no available transport.")}function Xr(n,e){Di.call(this),this.g=new jF(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!zp(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!zp(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Vd(this)}function JF(n){aC.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function eL(){lC.call(this),this.status=1}function Vd(n){this.g=n}function Wo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function bC(n,e,t){t||(t=0);var i=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(r=0;16>r;++r)i[r]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var o=n.g[3],s=(e=n.g[0])+(o^(t=n.g[1])&((r=n.g[2])^o))+i[0]+3614090360&4294967295;s=(t=(r=(o=(e=(t=(r=(o=(e=(t=(r=(o=(e=(t=(r=(o=(e=(t=(r=(o=(e=(t=(r=(o=(e=(t=(r=(o=(e=(t=(r=(o=(e=(t=(r=(o=(e=(t=(r=(o=(e=(t=(r=(o=(e=(t=(r=(o=(e=(t=(r=(o=(e=(t=(r=(o=(e=(t=(r=(o=(e=t+(s<<7&4294967295|s>>>25))+((s=o+(r^e&(t^r))+i[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=r+(t^o&(e^t))+i[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=t+(e^r&(o^e))+i[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^t&(r^o))+i[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(r^e&(t^r))+i[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=r+(t^o&(e^t))+i[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=t+(e^r&(o^e))+i[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^t&(r^o))+i[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(r^e&(t^r))+i[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=r+(t^o&(e^t))+i[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=t+(e^r&(o^e))+i[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^t&(r^o))+i[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(r^e&(t^r))+i[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=r+(t^o&(e^t))+i[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=t+(e^r&(o^e))+i[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=e+(r^o&(t^r))+i[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(t^r&(e^t))+i[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=r+(e^t&(o^e))+i[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=t+(o^e&(r^o))+i[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=e+(r^o&(t^r))+i[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(t^r&(e^t))+i[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=r+(e^t&(o^e))+i[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=t+(o^e&(r^o))+i[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=e+(r^o&(t^r))+i[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(t^r&(e^t))+i[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=r+(e^t&(o^e))+i[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=t+(o^e&(r^o))+i[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=e+(r^o&(t^r))+i[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(t^r&(e^t))+i[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=r+(e^t&(o^e))+i[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=t+(o^e&(r^o))+i[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=e+(t^r^o)+i[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^t^r)+i[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=r+(o^e^t)+i[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=t+(r^o^e)+i[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=e+(t^r^o)+i[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^t^r)+i[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=r+(o^e^t)+i[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=t+(r^o^e)+i[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=e+(t^r^o)+i[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^t^r)+i[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=r+(o^e^t)+i[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=t+(r^o^e)+i[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=e+(t^r^o)+i[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^t^r)+i[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=r+(o^e^t)+i[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=t+(r^o^e)+i[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=e+(r^(t|~o))+i[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(t^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=r+(e^(o|~t))+i[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=t+(o^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=e+(r^(t|~o))+i[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(t^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=r+(e^(o|~t))+i[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=t+(o^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=e+(r^(t|~o))+i[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(t^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=r+(e^(o|~t))+i[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=t+(o^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(e=t+((s=e+(r^(t|~o))+i[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(t^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((r=o+((s=r+(e^(o|~t))+i[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~e))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(r+(s<<21&4294967295|s>>>11))&4294967295,n.g[2]=n.g[2]+r&4294967295,n.g[3]=n.g[3]+o&4294967295}function Qt(n,e){this.h=e;for(var t=[],i=!0,r=n.length-1;0<=r;r--){var o=0|n[r];i&&o==e||(t[r]=o,i=!1)}this.g=t}(Te=Hn.prototype).Oa=function(n){this.M=n},Te.ha=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():cC.g(),this.C=function fF(n){return n.h||(n.h=n.i())}(this.u?this.u:cC),this.g.onreadystatechange=Ki(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(o){return void NF(this,o)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)t.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const o of i.keys())t.set(o,i.get(o))}i=Array.from(t.keys()).find(o=>"content-type"==o.toLowerCase()),r=st.FormData&&n instanceof st.FormData,!(0<=zN(PK,e))||i||r||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of t)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{VF(this),0<this.B&&((this.L=function kK(n){return Nd&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ki(this.ua,this)):this.A=oC(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){NF(this,o)}},Te.ua=function(){typeof Lx<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Bi(this,"timeout"),this.abort(8))},Te.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Bi(this,"complete"),Bi(this,"abort"),Uy(this))},Te.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Uy(this,!0)),Hn.$.N.call(this)},Te.La=function(){this.s||(this.G||this.v||this.l?LF(this):this.kb())},Te.kb=function(){LF(this)},Te.isActive=function(){return!!this.g},Te.da=function(){try{return 2<_s(this)?this.g.status:-1}catch{return-1}},Te.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Te.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),RK(e)}},Te.Ia=function(){return this.m},Te.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Te=jF.prototype).ra=8,Te.H=1,Te.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const r=new Yp(this,this.l,n);let o=this.s;if(this.U&&(o?(o=ZN(o),QN(o,this.U)):o=this.U),null!==this.o||this.O||(r.I=o,o=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var i=this.j[t];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=HF(this,r,e),wn(t=ra(this.I),"RID",n),wn(t,"CVER",22),this.F&&wn(t,"X-HTTP-Session-Id",this.F),am(this,t),o&&(this.O?e="headers="+encodeURIComponent(String(UF(o)))+"&"+e:this.o&&gC(t,this.o,o)),pC(this.i,r),this.bb&&wn(t,"TYPE","init"),this.P?(wn(t,"$req",e),wn(t,"SID","null"),r.aa=!0,dC(r,t,null)):dC(r,t,e),this.H=2}}else 3==this.H&&(n?$F(this,n):0==this.j.length||SF(this.i)||$F(this))},Te.Ma=function(){if(this.u=null,WF(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Kp(Ki(this.jb,this),n)}},Te.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,br(10),jy(this),WF(this))},Te.ib=function(){null!=this.v&&(this.v=null,jy(this),vC(this),br(19))},Te.pb=function(n){n?(this.l.info("Successfully pinged google.com"),br(2)):(this.l.info("Failed to ping google.com"),br(1))},Te.isActive=function(){return!!this.h&&this.h.isActive(this)},(Te=XF.prototype).Ba=function(){},Te.Aa=function(){},Te.za=function(){},Te.ya=function(){},Te.isActive=function(){return!0},Te.Va=function(){},Hy.prototype.g=function(n,e){return new Xr(n,e)},Ti(Xr,Di),Xr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;br(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=QF(n,null,n.Y),zy(n)},Xr.prototype.close=function(){_C(this.g)},Xr.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=nC(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&zy(e)},Xr.prototype.N=function(){this.g.h=null,delete this.j,_C(this.g),delete this.g,Xr.$.N.call(this)},Ti(JF,aC),Ti(eL,lC),Ti(Vd,XF),Vd.prototype.Ba=function(){Bi(this.g,"a")},Vd.prototype.Aa=function(n){Bi(this.g,new JF(n))},Vd.prototype.za=function(n){Bi(this.g,new eL)},Vd.prototype.ya=function(){Bi(this.g,"b")},Ti(Wo,function FK(){this.blockSize=-1}),Wo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Wo.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,i=this.m,r=this.h,o=0;o<e;){if(0==r)for(;o<=t;)bC(this,n,o),o+=this.blockSize;if("string"==typeof n){for(;o<e;)if(i[r++]=n.charCodeAt(o++),r==this.blockSize){bC(this,i),r=0;break}}else for(;o<e;)if(i[r++]=n[o++],r==this.blockSize){bC(this,i),r=0;break}}this.h=r,this.i+=e},Wo.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var i=0;32>i;i+=8)n[t++]=this.g[e]>>>i&255;return n};var LK={};function EC(n){return-128<=n&&128>n?function qZ(n,e){var t=LK;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Qt([0|e],0>e?-1:0)}):new Qt([0|n],0>n?-1:0)}function vs(n){if(isNaN(n)||!isFinite(n))return Bd;if(0>n)return Ui(vs(-n));for(var e=[],t=1,i=0;n>=t;i++)e[i]=n/t|0,t*=wC;return new Qt(e,0)}var wC=4294967296,Bd=EC(0),IC=EC(1),nL=EC(16777216);function oa(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Ro(n){return-1==n.h}function Ui(n){for(var e=n.g.length,t=[],i=0;i<e;i++)t[i]=~n.g[i];return new Qt(t,~n.h).add(IC)}function qy(n,e){return n.add(Ui(e))}function Wy(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function lm(n,e){this.g=n,this.h=e}function Gy(n,e){if(oa(e))throw Error("division by zero");if(oa(n))return new lm(Bd,Bd);if(Ro(n))return e=Gy(Ui(n),e),new lm(Ui(e.g),Ui(e.h));if(Ro(e))return e=Gy(n,Ui(e)),new lm(Ui(e.g),e.h);if(30<n.g.length){if(Ro(n)||Ro(e))throw Error("slowDivide_ only works with positive integers.");for(var t=IC,i=e;0>=i.X(n);)t=iL(t),i=iL(i);var r=Ud(t,1),o=Ud(i,1);for(i=Ud(i,2),t=Ud(t,2);!oa(i);){var s=o.add(i);0>=s.X(n)&&(r=r.add(t),o=s),i=Ud(i,1),t=Ud(t,1)}return e=qy(n,r.R(e)),new lm(r,e)}for(r=Bd;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),i=48>=(i=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,i-48),s=(o=vs(t)).R(e);Ro(s)||0<s.X(n);)s=(o=vs(t-=i)).R(e);oa(o)&&(o=IC),r=r.add(o),n=qy(n,s)}return new lm(r,n)}function iL(n){for(var e=n.g.length+1,t=[],i=0;i<e;i++)t[i]=n.D(i)<<1|n.D(i-1)>>>31;return new Qt(t,n.h)}function Ud(n,e){var t=e>>5;e%=32;for(var i=n.g.length-t,r=[],o=0;o<i;o++)r[o]=0<e?n.D(o+t)>>>e|n.D(o+t+1)<<32-e:n.D(o+t);return new Qt(r,n.h)}(Te=Qt.prototype).ea=function(){if(Ro(this))return-Ui(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var i=this.D(t);n+=(0<=i?i:wC+i)*e,e*=wC}return n},Te.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(oa(this))return"0";if(Ro(this))return"-"+Ui(this).toString(n);for(var e=vs(Math.pow(n,6)),t=this,i="";;){var r=Gy(t,e).g,o=((0<(t=qy(t,r.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(oa(t=r))return o+i;for(;6>o.length;)o="0"+o;i=o+i}},Te.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Te.X=function(n){return Ro(n=qy(this,n))?-1:oa(n)?0:1},Te.abs=function(){return Ro(this)?Ui(this):this},Te.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0,r=0;r<=e;r++){var o=i+(65535&this.D(r))+(65535&n.D(r)),s=(o>>>16)+(this.D(r)>>>16)+(n.D(r)>>>16);i=s>>>16,t[r]=(s&=65535)<<16|(o&=65535)}return new Qt(t,-2147483648&t[t.length-1]?-1:0)},Te.R=function(n){if(oa(this)||oa(n))return Bd;if(Ro(this))return Ro(n)?Ui(this).R(Ui(n)):Ui(Ui(this).R(n));if(Ro(n))return Ui(this.R(Ui(n)));if(0>this.X(nL)&&0>n.X(nL))return vs(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],i=0;i<2*e;i++)t[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<n.g.length;r++){var o=this.D(i)>>>16,s=65535&this.D(i),a=n.D(r)>>>16,l=65535&n.D(r);t[2*i+2*r]+=s*l,Wy(t,2*i+2*r),t[2*i+2*r+1]+=o*l,Wy(t,2*i+2*r+1),t[2*i+2*r+1]+=s*a,Wy(t,2*i+2*r+1),t[2*i+2*r+2]+=o*a,Wy(t,2*i+2*r+2)}for(i=0;i<e;i++)t[i]=t[2*i+1]<<16|t[2*i];for(i=e;i<2*e;i++)t[i]=0;return new Qt(t,0)},Te.gb=function(n){return Gy(this,n).h},Te.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)&n.D(i);return new Qt(t,this.h&n.h)},Te.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)|n.D(i);return new Qt(t,this.h|n.h)},Te.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)^n.D(i);return new Qt(t,this.h^n.h)},Hy.prototype.createWebChannel=Hy.prototype.g,Xr.prototype.send=Xr.prototype.u,Xr.prototype.open=Xr.prototype.m,Xr.prototype.close=Xr.prototype.close,Py.NO_ERROR=0,Py.TIMEOUT=8,Py.HTTP_ERROR=6,hF.COMPLETE="complete",pF.EventType=Qp,Qp.OPEN="a",Qp.CLOSE="b",Qp.ERROR="c",Qp.MESSAGE="d",Di.prototype.listen=Di.prototype.O,Hn.prototype.listenOnce=Hn.prototype.P,Hn.prototype.getLastError=Hn.prototype.Sa,Hn.prototype.getLastErrorCode=Hn.prototype.Ia,Hn.prototype.getStatus=Hn.prototype.da,Hn.prototype.getResponseJson=Hn.prototype.Wa,Hn.prototype.getResponseText=Hn.prototype.ja,Hn.prototype.send=Hn.prototype.ha,Hn.prototype.setWithCredentials=Hn.prototype.Oa,Wo.prototype.digest=Wo.prototype.l,Wo.prototype.reset=Wo.prototype.reset,Wo.prototype.update=Wo.prototype.j,Qt.prototype.add=Qt.prototype.add,Qt.prototype.multiply=Qt.prototype.R,Qt.prototype.modulo=Qt.prototype.gb,Qt.prototype.compare=Qt.prototype.X,Qt.prototype.toNumber=Qt.prototype.ea,Qt.prototype.toString=Qt.prototype.toString,Qt.prototype.getBits=Qt.prototype.D,Qt.fromNumber=vs,Qt.fromString=function tL(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Ui(tL(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=vs(Math.pow(e,8)),i=Bd,r=0;r<n.length;r+=8){var o=Math.min(8,n.length-r),s=parseInt(n.substring(r,r+o),e);8>o?(o=vs(Math.pow(e,o)),i=i.R(o).add(vs(s))):i=(i=i.R(t)).add(vs(s))}return i};var VK=qo.createWebChannelTransport=function(){return new Hy},BK=qo.getStatEventTarget=function(){return My()},xC=qo.ErrorCode=Py,UK=qo.EventType=hF,jK=qo.Event=yc,rL=qo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Zy=(qo.FetchXmlHttpFactory=im,qo.WebChannel=pF),zK=qo.XhrIo=Hn,$K=qo.Md5=Wo,jd=qo.Integer=Qt;const oL="@firebase/firestore";class Ai{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ai.UNAUTHENTICATED=new Ai(null),Ai.GOOGLE_CREDENTIALS=new Ai("google-credentials-uid"),Ai.FIRST_PARTY=new Ai("first-party-uid"),Ai.MOCK_USER=new Ai("mock-user");let zd="10.7.0";const rl=new ms.Yd("@firebase/firestore");function $d(){return rl.logLevel}function fe(n,...e){if(rl.logLevel<=ms.in.DEBUG){const t=e.map(CC);rl.debug(`Firestore (${zd}): ${n}`,...t)}}function ni(n,...e){if(rl.logLevel<=ms.in.ERROR){const t=e.map(CC);rl.error(`Firestore (${zd}): ${n}`,...t)}}function Or(n,...e){if(rl.logLevel<=ms.in.WARN){const t=e.map(CC);rl.warn(`Firestore (${zd}): ${n}`,...t)}}function CC(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Me(n="Unexpected state"){const e=`FIRESTORE (${zd}) INTERNAL ASSERTION FAILED: `+n;throw ni(e),new Error(e)}function Ve(n,e){n||Me()}function Ee(n,e){return n}const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends tn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class _i{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class sL{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ai.UNAUTHENTICATED))}shutdown(){}}class GK{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ZK{constructor(e){this.t=e,this.currentUser=Ai.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const o=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let s=new _i;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new _i,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable((0,ne.Z)(function*(){yield c.promise,yield o(i.currentUser)}))},l=c=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new _i)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ve("string"==typeof i.accessToken),new sL(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ve(null===e||"string"==typeof e),new Ai(e)}}class KK{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Ai.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class QK{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new KK(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ai.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class aL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YK{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const i=o=>{null!=o.error&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,fe("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?r(o):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ve("string"==typeof t.token),this.R=t.token,new aL(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function XK(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class lL{static newId(){const t=62*Math.floor(256/62);let i="";for(;i.length<20;){const r=XK(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<t&&(i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r[o]%62))}return i}}function rt(n,e){return n<e?-1:n>e?1:0}function Hd(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function cL(n){return n+"\0"}class Sn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ce(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Sn.fromMillis(Date.now())}static fromDate(e){return Sn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Sn(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new Sn(0,0))}static max(){return new Ue(new Sn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class cm{constructor(e,t,i){void 0===t?t=0:t>e.length&&Me(),void 0===i?i=e.length-t:i>e.length-t&&Me(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===cm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof cm?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const o=e.get(r),s=t.get(r);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Nt extends cm{construct(e,t,i){return new Nt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ce(Y.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new Nt(t)}static emptyPath(){return new Nt([])}}const JK=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class In extends cm{construct(e,t,i){return new In(e,t,i)}static isValidIdentifier(e){return JK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),In.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new In(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const o=()=>{if(0===i.length)throw new ce(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let s=!1;for(;r<e.length;){const a=e[r];if("\\"===a){if(r+1===e.length)throw new ce(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new ce(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else"`"===a?(s=!s,r++):"."!==a||s?(i+=a,r++):(o(),r++)}if(o(),s)throw new ce(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new In(t)}static emptyPath(){return new In([])}}class we{constructor(e){this.path=e}static fromPath(e){return new we(Nt.fromString(e))}static fromName(e){return new we(Nt.fromString(e).popFirst(5))}static empty(){return new we(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Nt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new Nt(e.slice()))}}class qd{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function TC(n){return n.fields.find(e=>2===e.kind)}function Ic(n){return n.fields.filter(e=>2!==e.kind)}qd.UNKNOWN_ID=-1;class xc{constructor(e,t){this.fieldPath=e,this.kind=t}}class Wd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Wd(0,Jr.min())}}function uL(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Ue.fromTimestamp(1e9===i?new Sn(t+1,0):new Sn(t,i));return new Jr(r,we.empty(),e)}function dL(n){return new Jr(n.readTime,n.key,-1)}class Jr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Jr(Ue.min(),we.empty(),-1)}static max(){return new Jr(Ue.max(),we.empty(),-1)}}function DC(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=we.comparator(n.documentKey,e.documentKey),0!==t?t:rt(n.largestBatchId,e.largestBatchId))}const hL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ol(n){return AC.apply(this,arguments)}function AC(){return AC=(0,ne.Z)(function*(n){if(n.code!==Y.FAILED_PRECONDITION||n.message!==hL)throw n;fe("LocalStore","Unexpectedly lost primary lease")}),AC.apply(this,arguments)}class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Me(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new U((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof U?t:U.resolve(t)}catch(t){return U.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):U.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):U.reject(t)}static resolve(e){return new U((t,i)=>{t(e)})}static reject(e){return new U((t,i)=>{i(e)})}static waitFor(e){return new U((t,i)=>{let r=0,o=0,s=!1;e.forEach(a=>{++r,a.next(()=>{++o,s&&o===r&&t()},l=>i(l))}),s=!0,o===r&&t()})}static or(e){let t=U.resolve(!1);for(const i of e)t=t.next(r=>r?U.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,o)=>{i.push(t.call(this,r,o))}),this.waitFor(i)}static mapArray(e,t){return new U((i,r)=>{const o=e.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const c=l;t(e[c]).next(h=>{s[c]=h,++a,a===o&&i(s)},h=>r(h))}})}static doWhile(e,t){return new U((i,r)=>{const o=()=>{!0===e()?t().next(()=>{o()},r):i()};o()})}}class Ky{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new _i,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new um(e,t.error)):this.V.resolve()},this.transaction.onerror=i=>{const r=SC(i.target.error);this.V.reject(new um(e,r))}}static open(e,t,i,r){try{return new Ky(t,e.transaction(r,i))}catch(o){throw new um(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new iQ(t)}}class Go{constructor(e,t,i){this.name=e,this.version=t,this.p=i,12.2===Go.S((0,tn.z$)())&&ni("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return fe("SimpleDb","Removing database:",e),Cc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,tn.hl)())return!1;if(Go.C())return!0;const e=(0,tn.z$)(),t=Go.S(e),i=0<t&&t<10,r=Go.v(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static v(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}O(e){var t=this;return(0,ne.Z)(function*(){return t.db||(fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=s=>{i(s.target.result)},o.onblocked=()=>{r(new um(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;r("VersionError"===a.name?new ce(Y.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new ce(Y.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new um(e,a))},o.onupgradeneeded=s=>{fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',s.oldVersion),t.p.N(s.target.result,o.transaction,s.oldVersion,t.version).next(()=>{fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=i=>t.B(i)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var o=this;return(0,ne.Z)(function*(){const s="readonly"===t;let a=0;for(;;){++a;try{o.db=yield o.O(e);const l=Ky.open(o.db,e,s?"readonly":"readwrite",i),c=r(l).next(h=>(l.g(),h)).catch(h=>(l.abort(h),U.reject(h))).toPromise();return c.catch(()=>{}),yield l.m,c}catch(l){const c=l,h="FirebaseError"!==c.name&&a<3;if(fe("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),o.close(),!h)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class nQ{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Cc(this.k.delete())}}class um extends ce{constructor(e,t){super(Y.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function sl(n){return"IndexedDbTransactionError"===n.name}class iQ{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(fe("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Cc(i)}add(e){return fe("SimpleDb","ADD",this.store.name,e,e),Cc(this.store.add(e))}get(e){return Cc(this.store.get(e)).next(t=>(void 0===t&&(t=null),fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return fe("SimpleDb","DELETE",this.store.name,e),Cc(this.store.delete(e))}count(){return fe("SimpleDb","COUNT",this.store.name),Cc(this.store.count())}W(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),o=[];return this.G(r,(s,a)=>{o.push(a)}).next(()=>o)}{const r=this.store.getAll(i.range);return new U((o,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{o(a.target.result)}})}}j(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new U((r,o)=>{i.onerror=s=>{o(s.target.error)},i.onsuccess=s=>{r(s.target.result)}})}H(e,t){fe("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.J=!1;const r=this.cursor(i);return this.G(r,(o,s,a)=>a.delete())}Y(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.G(r,t)}Z(e){const t=this.cursor({});return new U((i,r)=>{t.onerror=o=>{const s=SC(o.target.error);r(s)},t.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():i()}):i()}})}G(e,t){const i=[];return new U((r,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void r();const l=new nQ(a),c=t(a.primaryKey,a.value,l);if(c instanceof U){const h=c.catch(p=>(l.done(),U.reject(p)));i.push(h)}l.isDone?r():null===l.$?a.continue():a.continue(l.$)}}).next(()=>U.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.J?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Cc(n){return new U((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=SC(i.target.error);t(r)}})}let pL=!1;function SC(n){const e=Go.S((0,tn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new ce("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return pL||(pL=!0,setTimeout(()=>{throw i},0)),i}}return n}class rQ{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var t=this;fe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ne.Z)(function*(){t.task=null;try{fe("IndexBackiller",`Documents written: ${yield t.X.te()}`)}catch(i){sl(i)?fe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield ol(i)}yield t.ee(6e4)}))}}class oQ{constructor(e,t){this.localStore=e,this.persistence=t}te(e=50){var t=this;return(0,ne.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.ne(i,e))})()}ne(e,t){const i=new Set;let r=t,o=!0;return U.doWhile(()=>!0===o&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(null!==s&&!i.has(s))return fe("IndexBackiller",`Processing collection: ${s}`),this.re(e,s,r).next(a=>{r-=a,i.add(s)});o=!1})).next(()=>t-r)}re(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(r,o)).next(a=>(fe("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}ie(e,t){let i=e;return t.changes.forEach((r,o)=>{const s=dL(o);DC(s,i)>0&&(i=s)}),new Jr(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}let eo=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.se(r),this.oe=r=>i.writeSequenceNumber(r))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}return n._e=-1,n})();function dm(n){return null==n}function hm(n){return 0===n&&1/n==-1/0}function mL(n){return"number"==typeof n&&Number.isInteger(n)&&!hm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Yi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=gL(e)),e=sQ(n.get(t),e);return gL(e)}function sQ(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const o=n.charAt(r);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function gL(n){return n+"\x01\x01"}function ys(n){const e=n.length;if(Ve(e>=2),2===e)return Ve("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Nt.emptyPath();const t=e-2,i=[];let r="";for(let o=0;o<e;){const s=n.indexOf("\x01",o);switch((s<0||s>t)&&Me(),n.charAt(s+1)){case"\x01":const a=n.substring(o,s);let l;0===r.length?l=a:(r+=a,l=r,r=""),i.push(l);break;case"\x10":r+=n.substring(o,s),r+="\0";break;case"\x11":r+=n.substring(o,s+1);break;default:Me()}o=s+2}return new Nt(i)}const _L=["userId","batchId"];function Qy(n,e){return[n,Yi(e)]}function vL(n,e,t){return[n,Yi(e),t]}const aQ={},lQ=["prefixPath","collectionGroup","readTime","documentId"],cQ=["prefixPath","collectionGroup","documentId"],uQ=["collectionGroup","readTime","prefixPath","documentId"],dQ=["canonicalId","targetId"],hQ=["targetId","path"],fQ=["path","targetId"],pQ=["collectionId","parent"],mQ=["indexId","uid"],gQ=["uid","sequenceNumber"],_Q=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],vQ=["indexId","uid","orderedDocumentKey"],yQ=["userId","collectionPath","documentId"],bQ=["userId","collectionPath","largestBatchId"],EQ=["userId","collectionGroup","largestBatchId"],yL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],wQ=[...yL,"documentOverlays"],bL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],EL=bL,IQ=[...EL,"indexConfiguration","indexState","indexEntries"];class RC extends fL{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function Si(n,e){const t=Ee(n);return Go.M(t.ae,e)}function wL(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function al(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function IL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class dn{constructor(e,t){this.comparator=e,this.root=t||ji.EMPTY}insert(e,t){return new dn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ji.BLACK,null,null))}remove(e){return new dn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ji.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yy(this.root,e,this.comparator,!0)}}class Yy{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ji{constructor(e,t,i,r,o){this.key=e,this.value=t,this.color=i??ji.RED,this.left=r??ji.EMPTY,this.right=o??ji.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,o){return new ji(e??this.key,t??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===o?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ji.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ji.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ji.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ji.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Me();const e=this.left.check();if(e!==this.right.check())throw Me();return e+(this.isRed()?0:1)}}ji.EMPTY=null,ji.RED=!0,ji.BLACK=!1,ji.EMPTY=new class{constructor(){this.size=0}get key(){throw Me()}get value(){throw Me()}get color(){throw Me()}get left(){throw Me()}get right(){throw Me()}copy(e,t,i,r,o){return this}insert(e,t,i){return new ji(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class nn{constructor(e){this.comparator=e,this.data=new dn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new xL(this.data.getIterator())}getIteratorFrom(e){return new xL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof nn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=i.getNext().key;if(0!==this.comparator(r,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new nn(this.comparator);return t.data=e,t}}class xL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Gd(n){return n.hasNext()?n.getNext():void 0}class Nr{constructor(e){this.fields=e,e.sort(In.comparator)}static empty(){return new Nr([])}unionWith(e){let t=new nn(In.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Nr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Hd(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class CL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class vi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new CL("Invalid base64 string: "+o):o}}(e);return new vi(t)}static fromUint8Array(e){const t=function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o}(e);return new vi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vi.EMPTY_BYTE_STRING=new vi("");const CQ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ll(n){if(Ve(!!n),"string"==typeof n){let e=0;const t=CQ.exec(n);if(Ve(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:qn(n.seconds),nanos:qn(n.nanos)}}function qn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function sa(n){return"string"==typeof n?vi.fromBase64String(n):vi.fromUint8Array(n)}function Xy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Jy(n){const e=n.mapValue.fields.__previous_value__;return Xy(e)?Jy(e):e}function fm(n){const e=ll(n.mapValue.fields.__local_write_time__.timestampValue);return new Sn(e.seconds,e.nanos)}class TQ{constructor(e,t,i,r,o,s,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class cl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new cl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof cl&&e.projectId===this.projectId&&e.database===this.database}}const ul={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},eb={nullValue:"NULL_VALUE"};function dl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Xy(n)?4:SL(n)?9007199254740991:10:Me()}function bs(n,e){if(n===e)return!0;const t=dl(n);if(t!==dl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return fm(n).isEqual(fm(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const s=ll(r.timestampValue),a=ll(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,sa(n.bytesValue).isEqual(sa(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return qn(r.geoPointValue.latitude)===qn(o.geoPointValue.latitude)&&qn(r.geoPointValue.longitude)===qn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return qn(r.integerValue)===qn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const s=qn(r.doubleValue),a=qn(o.doubleValue);return s===a?hm(s)===hm(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Hd(n.arrayValue.values||[],e.arrayValue.values||[],bs);case 10:return function(r,o){const s=r.mapValue.fields||{},a=o.mapValue.fields||{};if(wL(s)!==wL(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(void 0===a[l]||!bs(s[l],a[l])))return!1;return!0}(n,e);default:return Me()}var o}function pm(n,e){return void 0!==(n.values||[]).find(t=>bs(t,e))}function hl(n,e){if(n===e)return 0;const t=dl(n),i=dl(e);if(t!==i)return rt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return rt(n.booleanValue,e.booleanValue);case 2:return function(o,s){const a=qn(o.integerValue||o.doubleValue),l=qn(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return TL(n.timestampValue,e.timestampValue);case 4:return TL(fm(n),fm(e));case 5:return rt(n.stringValue,e.stringValue);case 6:return function(o,s){const a=sa(o),l=sa(s);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),l=s.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=rt(a[c],l[c]);if(0!==h)return h}return rt(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){const a=rt(qn(o.latitude),qn(s.latitude));return 0!==a?a:rt(qn(o.longitude),qn(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,s){const a=o.values||[],l=s.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=hl(a[c],l[c]);if(h)return h}return rt(a.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===ul.mapValue&&s===ul.mapValue)return 0;if(o===ul.mapValue)return 1;if(s===ul.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),c=s.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){const g=rt(l[p],h[p]);if(0!==g)return g;const _=hl(a[l[p]],c[h[p]]);if(0!==_)return _}return rt(l.length,h.length)}(n.mapValue,e.mapValue);default:throw Me()}}function TL(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return rt(n,e);const t=ll(n),i=ll(e),r=rt(t.seconds,i.seconds);return 0!==r?r:rt(t.nanos,i.nanos)}function Zd(n){return MC(n)}function MC(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=ll(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?sa(n.bytesValue).toBase64():"referenceValue"in n?we.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(const o of t.values||[])r?r=!1:i+=",",i+=MC(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let r="{",o=!0;for(const s of i)o?o=!1:r+=",",r+=`${s}:${MC(t.fields[s])}`;return r+"}"}(n.mapValue):Me()}function Tc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function PC(n){return!!n&&"integerValue"in n}function mm(n){return!!n&&"arrayValue"in n}function DL(n){return!!n&&"nullValue"in n}function AL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function nb(n){return!!n&&"mapValue"in n}function gm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return al(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=gm(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gm(n.arrayValue.values[t]);return e}return Object.assign({},n)}function SL(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function DQ(n){return"nullValue"in n?eb:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Tc(cl.empty(),we.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Me()}function AQ(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Tc(cl.empty(),we.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ul:Me()}function RL(n,e){const t=hl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ML(n,e){const t=hl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class zi{constructor(e){this.value=e}static empty(){return new zi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!nb(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gm(t)}setAll(e){let t=In.emptyPath(),i={},r=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=a.popLast()}s?i[a.lastSegment()]=gm(s):r.push(a.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,i,r)}delete(e){const t=this.field(e.popLast());nb(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return bs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];nb(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){al(t,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new zi(gm(this.value))}}function PL(n){const e=[];return al(n.fields,(t,i)=>{const r=new In([t]);if(nb(i)){const o=PL(i.mapValue).fields;if(0===o.length)e.push(r);else for(const s of o)e.push(r.child(s))}else e.push(r)}),new Nr(e)}class xn{constructor(e,t,i,r,o,s,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new xn(e,0,Ue.min(),Ue.min(),Ue.min(),zi.empty(),0)}static newFoundDocument(e,t,i,r){return new xn(e,1,t,Ue.min(),i,r,0)}static newNoDocument(e,t){return new xn(e,2,t,Ue.min(),Ue.min(),zi.empty(),0)}static newUnknownDocument(e,t){return new xn(e,3,t,Ue.min(),Ue.min(),zi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ue.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class fl{constructor(e,t){this.position=e,this.inclusive=t}}function kL(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const o=e[r],s=n.position[r];if(i=o.field.isKeyField()?we.comparator(we.fromName(s.referenceValue),t.key):hl(s,t.data.field(o.field)),"desc"===o.dir&&(i*=-1),0!==i)break}return i}function OL(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!bs(n.position[t],e.position[t]))return!1;return!0}class _m{constructor(e,t="asc"){this.field=e,this.dir=t}}function SQ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class NL{}class Pt extends NL{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new RQ(e,t,i):"array-contains"===t?new kQ(e,i):"in"===t?new jL(e,i):"not-in"===t?new OQ(e,i):"array-contains-any"===t?new NQ(e,i):new Pt(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new MQ(e,i):new PQ(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(hl(t,this.value)):null!==t&&dl(this.value)===dl(t)&&this.matchesComparison(hl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Me()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yt extends NL{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Yt(e,t)}matches(e){return Kd(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Kd(n){return"and"===n.op}function kC(n){return"or"===n.op}function OC(n){return FL(n)&&Kd(n)}function FL(n){for(const e of n.filters)if(e instanceof Yt)return!1;return!0}function NC(n){if(n instanceof Pt)return n.field.canonicalString()+n.op.toString()+Zd(n.value);if(OC(n))return n.filters.map(e=>NC(e)).join(",");{const e=n.filters.map(t=>NC(t)).join(",");return`${n.op}(${e})`}}function LL(n,e){return n instanceof Pt?(i=n,(r=e)instanceof Pt&&i.op===r.op&&i.field.isEqual(r.field)&&bs(i.value,r.value)):n instanceof Yt?function(i,r){return r instanceof Yt&&i.op===r.op&&i.filters.length===r.filters.length&&i.filters.reduce((o,s,a)=>o&&LL(s,r.filters[a]),!0)}(n,e):void Me();var i,r}function VL(n,e){const t=n.filters.concat(e);return Yt.create(t,n.op)}function BL(n){return n instanceof Pt?`${(t=n).field.canonicalString()} ${t.op} ${Zd(t.value)}`:n instanceof Yt?function(t){return t.op.toString()+" {"+t.getFilters().map(BL).join(" ,")+"}"}(n):"Filter";var t}class RQ extends Pt{constructor(e,t,i){super(e,t,i),this.key=we.fromName(i.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class MQ extends Pt{constructor(e,t){super(e,"in",t),this.keys=UL(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class PQ extends Pt{constructor(e,t){super(e,"not-in",t),this.keys=UL(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function UL(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>we.fromName(i.referenceValue))}class kQ extends Pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return mm(t)&&pm(t.arrayValue,this.value)}}class jL extends Pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&pm(this.value.arrayValue,t)}}class OQ extends Pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(pm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!pm(this.value.arrayValue,t)}}class NQ extends Pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!mm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>pm(this.value.arrayValue,i))}}class FQ{constructor(e,t=null,i=[],r=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}}function FC(n,e=null,t=[],i=[],r=null,o=null,s=null){return new FQ(n,e,t,i,r,o,s)}function Dc(n){const e=Ee(n);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>NC(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(o=i).field.canonicalString()+o.dir;var o}).join(","),dm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Zd(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Zd(i)).join(",")),e.ce=t}return e.ce}function vm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!SQ(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!LL(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!OL(n.startAt,e.startAt)&&OL(n.endAt,e.endAt)}function ib(n){return we.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function rb(n,e){return n.filters.filter(t=>t instanceof Pt&&t.field.isEqual(e))}function zL(n,e,t){let i=eb,r=!0;for(const o of rb(n,e)){let s=eb,a=!0;switch(o.op){case"<":case"<=":s=DQ(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=eb}RL({value:i,inclusive:r},{value:s,inclusive:a})<0&&(i=s,r=a)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const s=t.position[o];RL({value:i,inclusive:r},{value:s,inclusive:t.inclusive})<0&&(i=s,r=t.inclusive);break}return{value:i,inclusive:r}}function $L(n,e,t){let i=ul,r=!0;for(const o of rb(n,e)){let s=ul,a=!0;switch(o.op){case">=":case">":s=AQ(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=ul}ML({value:i,inclusive:r},{value:s,inclusive:a})>0&&(i=s,r=a)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const s=t.position[o];ML({value:i,inclusive:r},{value:s,inclusive:t.inclusive})>0&&(i=s,r=t.inclusive);break}return{value:i,inclusive:r}}class aa{constructor(e,t=null,i=[],r=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null}}function HL(n,e,t,i,r,o,s,a){return new aa(n,e,t,i,r,o,s,a)}function Qd(n){return new aa(n)}function qL(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function LC(n){return null!==n.collectionGroup}function Yd(n){const e=Ee(n);if(null===e.le){e.le=[];const t=new Set;for(const o of e.explicitOrderBy)e.le.push(o),t.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new nn(In.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.le.push(new _m(o,i))}),t.has(In.keyField().canonicalString())||e.le.push(new _m(In.keyField(),i))}return e.le}function Er(n){const e=Ee(n);return e.he||(e.he=function WL(n,e){if("F"===n.limitType)return FC(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>new _m(r.field,"desc"===r.dir?"asc":"desc"));const t=n.endAt?new fl(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new fl(n.startAt.position,n.startAt.inclusive):null;return FC(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}(e,Yd(n))),e.he}function VC(n,e){const t=n.filters.concat([e]);return new aa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ob(n,e,t){return new aa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ym(n,e){return vm(Er(n),Er(e))&&n.limitType===e.limitType}function GL(n){return`${Dc(Er(n))}|lt:${n.limitType}`}function Xd(n){return`Query(target=${function(t){let i=t.path.canonicalString();return null!==t.collectionGroup&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>BL(r)).join(", ")}]`),dm(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Zd(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Zd(r)).join(",")),`Target(${i})`}(Er(n))}; limitType=${n.limitType})`}function bm(n,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return null!==i.collectionGroup?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):we.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,e)&&function(i,r){for(const o of Yd(i))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((i=n).startAt&&!function(s,a,l){const c=kL(s,a,l);return s.inclusive?c<=0:c<0}(i.startAt,Yd(i),r)||i.endAt&&!function(s,a,l){const c=kL(s,a,l);return s.inclusive?c>=0:c>0}(i.endAt,Yd(i),r)));var i,r}function ZL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function KL(n){return(e,t)=>{let i=!1;for(const r of Yd(n)){const o=LQ(r,e,t);if(0!==o)return o;i=i||r.field.isKeyField()}return 0}}function LQ(n,e,t){const i=n.field.isKeyField()?we.comparator(e.key,t.key):function(o,s,a){const l=s.data.field(o),c=a.data.field(o);return null!==l&&null!==c?hl(l,c):Me()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Me()}}class la{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,o]of i)if(this.equalsFn(r,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){al(this.inner,(t,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return IL(this.inner)}size(){return this.innerSize}}const VQ=new dn(we.comparator);function Fr(){return VQ}const QL=new dn(we.comparator);function Em(...n){let e=QL;for(const t of n)e=e.insert(t.key,t);return e}function YL(n){let e=QL;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Es(){return wm()}function XL(){return wm()}function wm(){return new la(n=>n.toString(),(n,e)=>n.isEqual(e))}const BQ=new dn(we.comparator),UQ=new nn(we.comparator);function ct(...n){let e=UQ;for(const t of n)e=e.add(t);return e}const jQ=new nn(rt);function BC(){return jQ}function JL(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hm(e)?"-0":e}}function e2(n){return{integerValue:""+n}}function t2(n,e){return mL(e)?e2(e):JL(n,e)}class sb{constructor(){this._=void 0}}function zQ(n,e,t){return n instanceof Jd?function(r,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Xy(o)&&(o=Jy(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Ac?r2(n,e):n instanceof Sc?o2(n,e):function(r,o){const s=n2(r,o),a=s2(s)+s2(r.Ie);return PC(s)&&PC(r.Ie)?e2(a):JL(r.serializer,a)}(n,e)}function $Q(n,e,t){return n instanceof Ac?r2(n,e):n instanceof Sc?o2(n,e):t}function n2(n,e){return n instanceof eh?PC(i=e)||(o=i)&&"doubleValue"in o?e:{integerValue:0}:null;var i,o}class Jd extends sb{}class Ac extends sb{constructor(e){super(),this.elements=e}}function r2(n,e){const t=a2(e);for(const i of n.elements)t.some(r=>bs(r,i))||t.push(i);return{arrayValue:{values:t}}}class Sc extends sb{constructor(e){super(),this.elements=e}}function o2(n,e){let t=a2(e);for(const i of n.elements)t=t.filter(r=>!bs(r,i));return{arrayValue:{values:t}}}class eh extends sb{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function s2(n){return qn(n.integerValue||n.doubleValue)}function a2(n){return mm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Im{constructor(e,t){this.field=e,this.transform=t}}class qQ{constructor(e,t){this.version=e,this.transformResults=t}}class Rn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Rn}static exists(e){return new Rn(void 0,e)}static updateTime(e){return new Rn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ab(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class lb{}function l2(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new nh(n.key,Rn.none()):new th(n.key,n.data,Rn.none());{const t=n.data,i=zi.empty();let r=new nn(In.comparator);for(let o of e.fields)if(!r.has(o)){let s=t.field(o);null===s&&o.length>1&&(o=o.popLast(),s=t.field(o)),null===s?i.delete(o):i.set(o,s),r=r.add(o)}return new ca(n.key,i,new Nr(r.toArray()),Rn.none())}}function WQ(n,e,t){n instanceof th?function(r,o,s){const a=r.value.clone(),l=d2(r.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof ca?function(r,o,s){if(!ab(r.precondition,o))return void o.convertToUnknownDocument(s.version);const a=d2(r.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(u2(r)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function xm(n,e,t,i){return n instanceof th?function(o,s,a,l){if(!ab(o.precondition,s))return a;const c=o.value.clone(),h=h2(o.fieldTransforms,l,s);return c.setAll(h),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(n,e,t,i):n instanceof ca?function(o,s,a,l){if(!ab(o.precondition,s))return a;const c=h2(o.fieldTransforms,l,s),h=s.data;return h.setAll(u2(o)),h.setAll(c),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,i):(a=t,ab(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function GQ(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),o=n2(i.transform,r||null);null!=o&&(null===t&&(t=zi.empty()),t.set(i.field,o))}return t||null}function c2(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(i=n.fieldTransforms)&&void 0===r||i&&r&&Hd(i,r,(o,s)=>function HQ(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(i=n.transform)instanceof Ac&&r instanceof Ac||i instanceof Sc&&r instanceof Sc?Hd(i.elements,r.elements,bs):i instanceof eh&&r instanceof eh?bs(i.Ie,r.Ie):i instanceof Jd&&r instanceof Jd);var i,r}(o,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var i,r}class th extends lb{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ca extends lb{constructor(e,t,i,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function u2(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function d2(n,e,t){const i=new Map;Ve(n.length===t.length);for(let r=0;r<t.length;r++){const o=n[r],s=o.transform,a=e.data.field(o.field);i.set(o.field,$Q(s,a,t[r]))}return i}function h2(n,e,t){const i=new Map;for(const r of n){const o=r.transform,s=t.data.field(r.field);i.set(r.field,zQ(o,s,e))}return i}class nh extends lb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UC extends lb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class jC{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&WQ(o,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=xm(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=xm(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=XL();return this.mutations.forEach(r=>{const o=e.get(r.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=t.has(r.key)?null:a;const l=l2(s,a);null!==l&&i.set(r.key,l),s.isValidDocument()||s.convertToNoDocument(Ue.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ct())}isEqual(e){return this.batchId===e.batchId&&Hd(this.mutations,e.mutations,(t,i)=>c2(t,i))&&Hd(this.baseMutations,e.baseMutations,(t,i)=>c2(t,i))}}class zC{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Ve(e.mutations.length===i.length);let r=BQ;const o=e.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,i[s].version);return new zC(e,t,i,r)}}class $C{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class KQ{constructor(e,t){this.count=e,this.unchangedNames=t}}var si,Ft;function f2(n){switch(n){default:return Me();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0}}function p2(n){if(void 0===n)return ni("GRPC error has no .code"),Y.UNKNOWN;switch(n){case si.OK:return Y.OK;case si.CANCELLED:return Y.CANCELLED;case si.UNKNOWN:return Y.UNKNOWN;case si.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case si.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case si.INTERNAL:return Y.INTERNAL;case si.UNAVAILABLE:return Y.UNAVAILABLE;case si.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case si.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case si.NOT_FOUND:return Y.NOT_FOUND;case si.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case si.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case si.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case si.ABORTED:return Y.ABORTED;case si.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case si.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case si.DATA_LOSS:return Y.DATA_LOSS;default:return Me()}}(Ft=si||(si={}))[Ft.OK=0]="OK",Ft[Ft.CANCELLED=1]="CANCELLED",Ft[Ft.UNKNOWN=2]="UNKNOWN",Ft[Ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ft[Ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ft[Ft.NOT_FOUND=5]="NOT_FOUND",Ft[Ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ft[Ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ft[Ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ft[Ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ft[Ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ft[Ft.ABORTED=10]="ABORTED",Ft[Ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ft[Ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ft[Ft.INTERNAL=13]="INTERNAL",Ft[Ft.UNAVAILABLE=14]="UNAVAILABLE",Ft[Ft.DATA_LOSS=15]="DATA_LOSS";function m2(){return new TextEncoder}const QQ=new jd([4294967295,4294967295],0);function g2(n){const e=m2().encode(n),t=new $K;return t.update(e),new Uint8Array(t.digest())}function _2(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new jd([t,i],0),new jd([r,o],0)]}class HC{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Cm(`Invalid padding: ${t}`);if(i<0)throw new Cm(`Invalid hash count: ${i}`);if(e.length>0&&0===this.hashCount)throw new Cm(`Invalid hash count: ${i}`);if(0===e.length&&0!==t)throw new Cm(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=jd.fromNumber(this.Te)}de(e,t,i){let r=e.add(t.multiply(jd.fromNumber(i)));return 1===r.compare(QQ)&&(r=new jd([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=g2(e),[i,r]=_2(t);for(let o=0;o<this.hashCount;o++){const s=this.de(i,r,o);if(!this.Ae(s))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new HC(o,r,t);return i.forEach(a=>s.insert(a)),s}insert(e){if(0===this.Te)return;const t=g2(e),[i,r]=_2(t);for(let o=0;o<this.hashCount;o++){const s=this.de(i,r,o);this.Re(s)}}Re(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Cm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Tm{constructor(e,t,i,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Dm.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Tm(Ue.min(),r,new dn(rt),Fr(),ct())}}class Dm{constructor(e,t,i,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Dm(i,t,ct(),ct(),ct())}}class ub{constructor(e,t,i,r){this.Ve=e,this.removedTargetIds=t,this.key=i,this.me=r}}class v2{constructor(e,t){this.targetId=e,this.fe=t}}class y2{constructor(e,t,i=vi.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class b2{constructor(){this.ge=0,this.pe=w2(),this.ye=vi.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=ct(),t=ct(),i=ct();return this.pe.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Me()}}),new Dm(this.ye,this.we,e,t,i)}Fe(){this.Se=!1,this.pe=w2()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ve(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class YQ{constructor(e){this.Le=e,this.ke=new Map,this.qe=Fr(),this.Qe=E2(),this.Ke=new dn(rt)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{const i=this.ze(t);switch(e.state){case 0:this.je(t)&&i.Ce(e.resumeToken);break;case 1:i.Ne(),i.be||i.Fe(),i.Ce(e.resumeToken);break;case 2:i.Ne(),i.be||this.removeTarget(t);break;case 3:this.je(t)&&(i.Be(),i.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),i.Ce(e.resumeToken));break;default:Me()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((i,r)=>{this.je(r)&&t(r)})}Je(e){const t=e.targetId,i=e.fe.count,r=this.Ye(t);if(r){const o=r.target;if(ib(o))if(0===i){const s=new we(o.path);this.We(t,s,xn.newNoDocument(s,Ue.min()))}else Ve(1===i);else{const s=this.Ze(t);if(s!==i){const a=this.Xe(e),l=a?this.et(a,e,s):1;0!==l&&(this.He(t),this.Ke=this.Ke.insert(t,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=t;let s,a;try{s=sa(i).toUint8Array()}catch(l){if(l instanceof CL)return Or("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new HC(s,r,o)}catch(l){return Or(l instanceof Cm?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return 0===a.Te?null:a}et(e,t,i){return t.fe.count===i-this.rt(e,t.targetId)?0:2}rt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let r=0;return i.forEach(o=>{const s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(t,o,null),r++)}),r}it(e){const t=new Map;this.ke.forEach((o,s)=>{const a=this.Ye(s);if(a){if(o.current&&ib(a.target)){const l=new we(a.target.path);null!==this.qe.get(l)||this.st(s,l)||this.We(s,l,xn.newNoDocument(l,e))}o.De&&(t.set(s,o.ve()),o.Fe())}});let i=ct();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const c=this.Ye(l);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(i=i.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));const r=new Tm(e,t,this.Ke,this.qe,i);return this.qe=Fr(),this.Qe=E2(),this.Ke=new dn(rt),r}Ue(e,t){if(!this.je(e))return;const i=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,i),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,i){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),i&&(this.qe=this.qe.insert(t,i))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new b2,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new nn(rt),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||fe("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new b2),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function E2(){return new dn(we.comparator)}function w2(){return new dn(we.comparator)}const XQ={asc:"ASCENDING",desc:"DESCENDING"},JQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eY={and:"AND",or:"OR"};class tY{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function qC(n,e){return n.useProto3Json||dm(e)?e:{value:e}}function ih(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function I2(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function nY(n,e){return ih(n,e.toTimestamp())}function ii(n){return Ve(!!n),Ue.fromTimestamp(function(t){const i=ll(t);return new Sn(i.seconds,i.nanos)}(n))}function WC(n,e){return(i=n,new Nt(["projects",i.projectId,"databases",i.database])).child("documents").child(e).canonicalString();var i}function x2(n){const e=Nt.fromString(n);return Ve(k2(e)),e}function Am(n,e){return WC(n.databaseId,e.path)}function ws(n,e){const t=x2(e);if(t.get(1)!==n.databaseId.projectId)throw new ce(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ce(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new we(T2(t))}function GC(n,e){return WC(n.databaseId,e)}function C2(n){const e=x2(n);return 4===e.length?Nt.emptyPath():T2(e)}function Sm(n){return new Nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function T2(n){return Ve(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function D2(n,e,t){return{name:Am(n,e),fields:t.value.mapValue.fields}}function A2(n,e,t){const i=ws(n,e.name),r=ii(e.updateTime),o=e.createTime?ii(e.createTime):Ue.min(),s=new zi({mapValue:{fields:e.fields}}),a=xn.newFoundDocument(i,r,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Rm(n,e){let t;if(e instanceof th)t={update:D2(n,e.key,e.value)};else if(e instanceof nh)t={delete:Am(n,e.key)};else if(e instanceof ca)t={update:D2(n,e.key,e.data),updateMask:uY(e.fieldMask)};else{if(!(e instanceof UC))return Me();t={verify:Am(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(o,s){const a=s.transform;if(a instanceof Jd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ac)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Sc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof eh)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw Me()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:nY(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Me()),t;var o}function ZC(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Rn.updateTime(ii(o.updateTime)):void 0!==o.exists?Rn.exists(o.exists):Rn.none():Rn.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,a){let l=null;"setToServerValue"in a?(Ve("REQUEST_TIME"===a.setToServerValue),l=new Jd):"appendMissingElements"in a?l=new Ac(a.appendMissingElements.values||[]):"removeAllFromArray"in a?l=new Sc(a.removeAllFromArray.values||[]):"increment"in a?l=new eh(s,a.increment):Me();const c=In.fromServerFormat(a.fieldPath);return new Im(c,l)}(n,r)):[];var o;if(e.update){const r=ws(n,e.update.name),o=new zi({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=new Nr((e.updateMask.fieldPaths||[]).map(h=>In.fromServerFormat(h)));return new ca(r,o,s,t,i)}return new th(r,o,t,i)}if(e.delete){const r=ws(n,e.delete);return new nh(r,t)}if(e.verify){const r=ws(n,e.verify);return new UC(r,t)}return Me()}function S2(n,e){return{documents:[GC(n,e.path)]}}function KC(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=GC(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=GC(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(l){if(0!==l.length)return P2(Yt.create(l,"and"))}(e.filters);r&&(t.structuredQuery.where=r);const o=function(l){if(0!==l.length)return l.map(c=>{return{field:pl((p=c).field),direction:aY(p.dir)};var p})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const s=qC(n,e.limit);return null!==s&&(t.structuredQuery.limit=s),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),t;var l}function R2(n){let e=C2(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Ve(1===i);const h=t.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){const g=M2(p);return g instanceof Yt&&OC(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=t.orderBy.map(g=>{return new _m(rh((E=g).field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let a=null;t.limit&&(a=function(p){let g;return g="object"==typeof p?p.value:p,dm(g)?null:g}(t.limit));let l=null;var p;t.startAt&&(l=new fl((p=t.startAt).values||[],!!p.before));let c=null;return t.endAt&&(c=function(p){return new fl(p.values||[],!p.before)}(t.endAt)),HL(e,r,s,o,a,"F",l,c)}function M2(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=rh(t.unaryFilter.field);return Pt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=rh(t.unaryFilter.field);return Pt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=rh(t.unaryFilter.field);return Pt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=rh(t.unaryFilter.field);return Pt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Me()}}(n):void 0!==n.fieldFilter?Pt.create(rh((t=n).fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Me()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Yt.create(t.compositeFilter.filters.map(i=>M2(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Me()}}(t.compositeFilter.op))}(n):Me();var t}function aY(n){return XQ[n]}function lY(n){return JQ[n]}function cY(n){return eY[n]}function pl(n){return{fieldPath:n.canonicalString()}}function rh(n){return In.fromServerFormat(n.fieldPath)}function P2(n){return n instanceof Pt?function(t){if("=="===t.op){if(AL(t.value))return{unaryFilter:{field:pl(t.field),op:"IS_NAN"}};if(DL(t.value))return{unaryFilter:{field:pl(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(AL(t.value))return{unaryFilter:{field:pl(t.field),op:"IS_NOT_NAN"}};if(DL(t.value))return{unaryFilter:{field:pl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pl(t.field),op:lY(t.op),value:t.value}}}(n):n instanceof Yt?function(t){const i=t.getFilters().map(r=>P2(r));return 1===i.length?i[0]:{compositeFilter:{op:cY(t.op),filters:i}}}(n):Me()}function uY(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function k2(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class ua{constructor(e,t,i,r,o=Ue.min(),s=Ue.min(),a=vi.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ua(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ua(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ua(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ua(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class O2{constructor(e){this.ut=e}}function N2(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:db(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:Am(o=n.ut,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:ih(o,s.version.toTimestamp()),createTime:ih(o,s.createTime.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Rc(e.version)};else{if(!e.isUnknownDocument())return Me();i.unknownDocument={path:t.path.toArray(),version:Rc(e.version)}}var o,s;return i}function db(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Rc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Mc(n){const e=new Sn(n.seconds,n.nanoseconds);return Ue.fromTimestamp(e)}function Pc(n,e){const t=(e.baseMutations||[]).map(o=>ZC(n.ut,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const i=e.mutations.map(o=>ZC(n.ut,o)),r=Sn.fromMillis(e.localWriteTimeMs);return new jC(e.batchId,r,t,i)}function Mm(n){const e=Mc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Mc(n.lastLimboFreeSnapshotVersion):Ue.min();let i;return i=void 0!==n.query.documents?(Ve(1===(o=n.query).documents.length),Er(Qd(C2(o.documents[0])))):function(o){return Er(R2(o))}(n.query),new ua(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,vi.fromBase64String(n.resumeToken));var o}function F2(n,e){const t=Rc(e.snapshotVersion),i=Rc(e.lastLimboFreeSnapshotVersion);let r;r=ib(e.target)?S2(n.ut,e.target):KC(n.ut,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Dc(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function QC(n){const e=R2({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?ob(e,e.limit,"L"):e}function YC(n,e){return new $C(e.largestBatchId,ZC(n.ut,e.overlayMutation))}function L2(n,e){const t=e.path.lastSegment();return[n,Yi(e.path.popLast()),t]}function V2(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Rc(i.readTime),documentKey:Yi(i.documentKey.path),largestBatchId:i.largestBatchId}}class hY{getBundleMetadata(e,t){return B2(e).get(t).next(i=>{if(i)return{id:(o=i).bundleId,createTime:Mc(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return B2(e).put({bundleId:(r=t).id,createTime:Rc(ii(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return U2(e).get(t).next(i=>{if(i)return{name:(o=i).name,query:QC(o.bundledQuery),readTime:Mc(o.readTime)};var o})}saveNamedQuery(e,t){return U2(e).put({name:(r=t).name,readTime:Rc(ii(r.readTime)),bundledQuery:r.bundledQuery});var r}}function B2(n){return Si(n,"bundles")}function U2(n){return Si(n,"namedQueries")}class hb{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){return new hb(e,t.uid||"")}getOverlay(e,t){return Pm(e).get(L2(this.userId,t)).next(i=>i?YC(this.serializer,i):null)}getOverlays(e,t){const i=Es();return U.forEach(t,r=>this.getOverlay(e,r).next(o=>{null!==o&&i.set(r,o)})).next(()=>i)}saveOverlays(e,t,i){const r=[];return i.forEach((o,s)=>{const a=new $C(t,s);r.push(this.lt(e,a))}),U.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(s=>r.add(Yi(s.getCollectionPath())));const o=[];return r.forEach(s=>{const a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,i+1],!1,!0);o.push(Pm(e).H("collectionPathOverlayIndex",a))}),U.waitFor(o)}getOverlaysForCollection(e,t,i){const r=Es(),o=Yi(t),s=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Pm(e).W("collectionPathOverlayIndex",s).next(a=>{for(const l of a){const c=YC(this.serializer,l);r.set(c.getKey(),c)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const o=Es();let s;const a=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Pm(e).Y({index:"collectionGroupOverlayIndex",range:a},(l,c,h)=>{const p=YC(this.serializer,c);o.size()<r||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}lt(e,t){return Pm(e).put(function(r,o,s){const[a,l,c]=L2(o,s.mutation.key);return{userId:o,collectionPath:l,documentId:c,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Rm(r.ut,s.mutation)}}(this.serializer,this.userId,t))}}function Pm(n){return Si(n,"documentOverlays")}class kc{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(qn(e.integerValue));else if("doubleValue"in e){const i=qn(e.doubleValue);isNaN(i)?this.Tt(t,13):(this.Tt(t,15),hm(i)?t.Et(0):t.Et(i))}else if("timestampValue"in e){const i=e.timestampValue;this.Tt(t,20),"string"==typeof i?t.dt(i):(t.dt(`${i.seconds||""}`),t.Et(i.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(sa(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Tt(t,45),t.Et(i.latitude||0),t.Et(i.longitude||0)}else"mapValue"in e?SL(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):Me()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const i=e.fields||{};this.Tt(t,55);for(const r of Object.keys(i))this.At(r,t),this.Pt(i[r],t)}yt(e,t){const i=e.values||[];this.Tt(t,50);for(const r of i)this.Pt(r,t)}ft(e,t){this.Tt(t,37),we.fromName(e).path.forEach(i=>{this.Tt(t,60),this.wt(i,t)})}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}function fY(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function j2(n){const e=64-function(i){let r=0;for(let o=0;o<8;++o){const s=fY(255&i[o]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}kc.St=new kc;class pY{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Dt(i.value),i=t.next();this.Ct()}vt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ft(i.value),i=t.next();this.Mt()}xt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Dt(i);else if(i<2048)this.Dt(960|i>>>6),this.Dt(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Dt(480|i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i);else{const r=t.codePointAt(0);this.Dt(240|r>>>18),this.Dt(128|63&r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r)}}this.Ct()}Ot(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{const r=t.codePointAt(0);this.Ft(240|r>>>18),this.Ft(128|63&r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r)}}this.Mt()}Nt(e){const t=this.Bt(e),i=j2(t);this.Lt(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}kt(e){const t=this.Bt(e),i=j2(t);this.Lt(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Dt(e){const t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class mY{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class gY{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class km{constructor(){this.Wt=new pY,this.Gt=new mY(this.Wt),this.zt=new gY(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Oc{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Ht(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new Oc(this.indexId,this.documentKey,this.arrayValue,i)}}function ml(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=z2(n.arrayValue,e.arrayValue),0!==t?t:(t=z2(n.directionalValue,e.directionalValue),0!==t?t:we.comparator(n.documentKey,e.documentKey)))}function z2(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class $2{constructor(e){this.Jt=new nn((t,i)=>In.comparator(t.field,i.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const i=t;i.isInequality()?this.Jt=this.Jt.add(i):this.Zt.push(i)}}get Xt(){return this.Jt.size>1}en(e){if(Ve(e.collectionGroup===this.collectionId),this.Xt)return!1;const t=TC(e);if(void 0!==t&&!this.tn(t))return!1;const i=Ic(e);let r=new Set,o=0,s=0;for(;o<i.length&&this.tn(i[o]);++o)r=r.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Jt.size>0){const a=this.Jt.getIterator().getNext();if(!r.has(a.field.canonicalString())){const l=i[o];if(!this.nn(a,l)||!this.rn(this.Yt[s++],l))return!1}++o}for(;o<i.length;++o)if(s>=this.Yt.length||!this.rn(this.Yt[s++],i[o]))return!1;return!0}sn(){if(this.Xt)return null;let e=new nn(In.comparator);const t=[];for(const i of this.Zt)if(!i.field.isKeyField())if("array-contains"===i.op||"array-contains-any"===i.op)t.push(new xc(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new xc(i.field,0))}for(const i of this.Yt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new xc(i.field,"asc"===i.dir?0:1)));return new qd(qd.UNKNOWN_ID,this.collectionId,t,Wd.empty())}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function H2(n){var e,t;if(Ve(n instanceof Pt||n instanceof Yt),n instanceof Pt){if(n instanceof jL){const r=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(o=>Pt.create(n.field,"==",o)))||[];return Yt.create(r,"or")}return n}const i=n.filters.map(r=>H2(r));return Yt.create(i,n.op)}function _Y(n){if(0===n.getFilters().length)return[];const e=eT(H2(n));return Ve(q2(e)),XC(e)||JC(e)?[e]:e.getFilters()}function XC(n){return n instanceof Pt}function JC(n){return n instanceof Yt&&OC(n)}function q2(n){return XC(n)||JC(n)||function(t){if(t instanceof Yt&&kC(t)){for(const i of t.getFilters())if(!XC(i)&&!JC(i))return!1;return!0}return!1}(n)}function eT(n){if(Ve(n instanceof Pt||n instanceof Yt),n instanceof Pt)return n;if(1===n.filters.length)return eT(n.filters[0]);const e=n.filters.map(i=>eT(i));let t=Yt.create(e,n.op);return t=fb(t),q2(t)?t:(Ve(t instanceof Yt),Ve(Kd(t)),Ve(t.filters.length>1),t.filters.reduce((i,r)=>tT(i,r)))}function tT(n,e){let t;return Ve(n instanceof Pt||n instanceof Yt),Ve(e instanceof Pt||e instanceof Yt),t=n instanceof Pt?e instanceof Pt?Yt.create([n,e],"and"):W2(n,e):e instanceof Pt?W2(e,n):function(r,o){if(Ve(r.filters.length>0&&o.filters.length>0),Kd(r)&&Kd(o))return VL(r,o.getFilters());const s=kC(r)?r:o,a=kC(r)?o:r,l=s.filters.map(c=>tT(c,a));return Yt.create(l,"or")}(n,e),fb(t)}function W2(n,e){if(Kd(e))return VL(e,n.getFilters());{const t=e.filters.map(i=>tT(n,i));return Yt.create(t,"or")}}function fb(n){if(Ve(n instanceof Pt||n instanceof Yt),n instanceof Pt)return n;const e=n.getFilters();if(1===e.length)return fb(e[0]);if(FL(n))return n;const t=e.map(r=>fb(r)),i=[];return t.forEach(r=>{r instanceof Pt?i.push(r):r instanceof Yt&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:Yt.create(i,n.op)}class vY{constructor(){this.on=new nT}addToCollectionParentIndex(e,t){return this.on.add(t),U.resolve()}getCollectionParents(e,t){return U.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return U.resolve()}deleteFieldIndex(e,t){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,t){return U.resolve()}getDocumentsMatchingTarget(e,t){return U.resolve(null)}getIndexType(e,t){return U.resolve(0)}getFieldIndexes(e,t){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,t){return U.resolve(Jr.min())}getMinOffsetFromCollectionGroup(e,t){return U.resolve(Jr.min())}updateCollectionGroup(e,t,i){return U.resolve()}updateIndexEntries(e,t){return U.resolve()}}class nT{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new nn(Nt.comparator),o=!r.has(i);return this.index[t]=r.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new nn(Nt.comparator)).toArray()}}const pb=new Uint8Array(0);class yY{constructor(e,t){this.user=e,this.databaseId=t,this._n=new nT,this.an=new la(i=>Dc(i),(i,r)=>vm(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this._n.add(t)});const o={collectionId:i,parent:Yi(r)};return G2(e).put(o)}return U.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[cL(t),""],!1,!0);return G2(e).W(r).next(o=>{for(const s of o){if(s.collectionId!==t)break;i.push(ys(s.parent))}return i})}addFieldIndex(e,t){const i=Om(e),r={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;delete r.indexId;const o=i.add(r);if(t.indexState){const s=sh(e);return o.next(a=>{s.put(V2(a,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const i=Om(e),r=sh(e),o=oh(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Om(e),i=oh(e),r=sh(e);return t.H().next(()=>i.H()).next(()=>r.H())}createTargetIndexes(e,t){return U.forEach(this.un(t),i=>this.getIndexType(e,i).next(r=>{if(0===r||1===r){const o=new $2(i).sn();if(null!=o)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){const i=oh(e);let r=!0;const o=new Map;return U.forEach(this.un(t),s=>this.cn(e,s).next(a=>{r&&(r=!!a),o.set(s,a)})).next(()=>{if(r){let s=ct();const a=[];return U.forEach(o,(l,c)=>{var j;fe("IndexedDbIndexManager",`Using index ${j=l,`id=${j.indexId}|cg=${j.collectionGroup}|f=${j.fields.map(ie=>`${ie.fieldPath}:${ie.kind}`).join(",")}`} to execute ${Dc(t)}`);const h=function(j,ie){const _e=TC(ie);if(void 0===_e)return null;for(const Be of rb(j,_e.fieldPath))switch(Be.op){case"array-contains-any":return Be.value.arrayValue.values||[];case"array-contains":return[Be.value]}return null}(c,l),p=function(j,ie){const _e=new Map;for(const Be of Ic(ie))for(const et of rb(j,Be.fieldPath))switch(et.op){case"==":case"in":_e.set(Be.fieldPath.canonicalString(),et.value);break;case"not-in":case"!=":return _e.set(Be.fieldPath.canonicalString(),et.value),Array.from(_e.values())}return null}(c,l),g=function(j,ie){const _e=[];let Be=!0;for(const et of Ic(ie)){const Gt=0===et.kind?zL(j,et.fieldPath,j.startAt):$L(j,et.fieldPath,j.startAt);_e.push(Gt.value),Be&&(Be=Gt.inclusive)}return new fl(_e,Be)}(c,l),_=function(j,ie){const _e=[];let Be=!0;for(const et of Ic(ie)){const Gt=0===et.kind?$L(j,et.fieldPath,j.endAt):zL(j,et.fieldPath,j.endAt);_e.push(Gt.value),Be&&(Be=Gt.inclusive)}return new fl(_e,Be)}(c,l),E=this.ln(l,c,g),x=this.ln(l,c,_),T=this.hn(l,c,p),V=this.Pn(l.indexId,h,E,g.inclusive,x,_.inclusive,T);return U.forEach(V,M=>i.j(M,t.limit).next(j=>{j.forEach(ie=>{const _e=we.fromSegments(ie.documentKey);s.has(_e)||(s=s.add(_e),a.push(_e))})}))}).next(()=>a)}return U.resolve(null)})}un(e){let t=this.an.get(e);return t||(t=0===e.filters.length?[e]:_Y(Yt.create(e.filters,"and")).map(i=>FC(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,t),t)}Pn(e,t,i,r,o,s,a){const l=(null!=t?t.length:1)*Math.max(i.length,o.length),c=l/(null!=t?t.length:1),h=[];for(let p=0;p<l;++p){const g=t?this.In(t[p/c]):pb,_=this.Tn(e,g,i[p%c],r),E=this.En(e,g,o[p%c],s),x=a.map(T=>this.Tn(e,g,T,!0));h.push(...this.createRange(_,E,x))}return h}Tn(e,t,i,r){const o=new Oc(e,we.empty(),t,i);return r?o:o.Ht()}En(e,t,i,r){const o=new Oc(e,we.empty(),t,i);return r?o.Ht():o}cn(e,t){const i=new $2(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(o=>{let s=null;for(const a of o)i.en(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let i=2;const r=this.un(t);return U.forEach(r,o=>this.cn(e,o).next(s=>{s?0!==i&&s.fields.length<function(l){let c=new nn(In.comparator),h=!1;for(const p of l.filters)for(const g of p.getFlattenedFilters())g.field.isKeyField()||("array-contains"===g.op||"array-contains-any"===g.op?h=!0:c=c.add(g.field));for(const p of l.orderBy)p.field.isKeyField()||(c=c.add(p.field));return c.size+(h?1:0)}(o)&&(i=1):i=0})).next(()=>null!==t.limit&&r.length>1&&2===i?1:i)}dn(e,t){const i=new km;for(const r of Ic(e)){const o=t.data.field(r.fieldPath);if(null==o)return null;const s=i.jt(r.kind);kc.St.ht(o,s)}return i.Ut()}In(e){const t=new km;return kc.St.ht(e,t.jt(0)),t.Ut()}An(e,t){const i=new km;return kc.St.ht(Tc(this.databaseId,t),i.jt(function(o){const s=Ic(o);return 0===s.length?0:s[s.length-1].kind}(e))),i.Ut()}hn(e,t,i){if(null===i)return[];let r=[];r.push(new km);let o=0;for(const s of Ic(e)){const a=i[o++];for(const l of r)if(this.Rn(t,s.fieldPath)&&mm(a))r=this.Vn(r,s,a);else{const c=l.jt(s.kind);kc.St.ht(a,c)}}return this.mn(r)}ln(e,t,i){return this.hn(e,t,i.position)}mn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Ut();return t}Vn(e,t,i){const r=[...e],o=[];for(const s of i.arrayValue.values||[])for(const a of r){const l=new km;l.seed(a.Ut()),kc.St.ht(s,l.jt(t.kind)),o.push(l)}return o}Rn(e,t){return!!e.filters.find(i=>i instanceof Pt&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=Om(e),r=sh(e);return(t?i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.W()).next(o=>{const s=[];return U.forEach(o,a=>r.get([a.indexId,this.uid]).next(l=>{s.push(function(h,p){const g=p?new Wd(p.sequenceNumber,new Jr(Mc(p.readTime),new we(ys(p.documentKey)),p.largestBatchId)):Wd.empty(),_=h.fields.map(([E,x])=>new xc(In.fromServerFormat(E),x));return new qd(h.indexId,h.collectionGroup,_,g)}(a,l))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>{const o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==o?o:rt(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=Om(e),o=sh(e);return this.fn(e).next(s=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>U.forEach(a,l=>o.put(V2(l.indexId,this.user,s,i)))))}updateIndexEntries(e,t){const i=new Map;return U.forEach(t,(r,o)=>{const s=i.get(r.collectionGroup);return(s?U.resolve(s):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),U.forEach(a,l=>this.gn(e,r,l).next(c=>{const h=this.pn(o,l);return c.isEqual(h)?U.resolve():this.yn(e,o,l,c,h)}))))})}wn(e,t,i,r){return oh(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(i,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,i,r){return oh(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(i,t.key),t.key.path.toArray()])}gn(e,t,i){const r=oh(e);let o=new nn(ml);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.An(i,t)])},(s,a)=>{o=o.add(new Oc(i.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}pn(e,t){let i=new nn(ml);const r=this.dn(t,e);if(null==r)return i;const o=TC(t);if(null!=o){const s=e.data.field(o.fieldPath);if(mm(s))for(const a of s.arrayValue.values||[])i=i.add(new Oc(t.indexId,e.key,this.In(a),r))}else i=i.add(new Oc(t.indexId,e.key,pb,r));return i}yn(e,t,i,r,o){fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(l,c,h,p,g){const _=l.getIterator(),E=c.getIterator();let x=Gd(_),T=Gd(E);for(;x||T;){let V=!1,M=!1;if(x&&T){const j=h(x,T);j<0?M=!0:j>0&&(V=!0)}else null!=x?M=!0:V=!0;V?(p(T),T=Gd(E)):M?(g(x),x=Gd(_)):(x=Gd(_),T=Gd(E))}}(r,o,ml,a=>{s.push(this.wn(e,t,i,a))},a=>{s.push(this.Sn(e,t,i,a))}),U.waitFor(s)}fn(e){let t=1;return sh(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((s,a)=>ml(s,a)).filter((s,a,l)=>!a||0!==ml(s,l[a-1]));const r=[];r.push(e);for(const s of i){const a=ml(s,e),l=ml(s,t);if(0===a)r[0]=e.Ht();else if(a>0&&l<0)r.push(s),r.push(s.Ht());else if(l>0)break}r.push(t);const o=[];for(let s=0;s<r.length;s+=2){if(this.bn(r[s],r[s+1]))return[];o.push(IDBKeyRange.bound([r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,pb,[]],[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,pb,[]]))}return o}bn(e,t){return ml(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Z2)}getMinOffset(e,t){return U.mapArray(this.un(t),i=>this.cn(e,i).next(r=>r||Me())).next(Z2)}}function G2(n){return Si(n,"collectionParents")}function oh(n){return Si(n,"indexEntries")}function Om(n){return Si(n,"indexConfiguration")}function sh(n){return Si(n,"indexState")}function Z2(n){Ve(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;DC(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new Jr(e.readTime,e.documentKey,t)}const K2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Xi{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new Xi(e,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Q2(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId);let a=0;const l=i.Y({range:s},(h,p,g)=>(a++,g.delete()));o.push(l.next(()=>{Ve(1===a)}));const c=[];for(const h of t.mutations){const p=vL(e,h.key.path,t.batchId);o.push(r.delete(p)),c.push(h.key)}return U.waitFor(o).next(()=>c)}function mb(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Me();e=n.noDocument}return JSON.stringify(e).length}Xi.DEFAULT_COLLECTION_PERCENTILE=10,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xi.DEFAULT=new Xi(41943040,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xi.DISABLED=new Xi(-1,0,0);class gb{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.Dn={}}static ct(e,t,i,r){Ve(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new gb(o,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return gl(e).Y({index:"userMutationsIndex",range:i},(r,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const o=ah(e),s=gl(e);return s.add({}).next(a=>{Ve("number"==typeof a);const l=new jC(a,t,i,r),c=function(_,E,x){const T=x.baseMutations.map(M=>Rm(_.ut,M)),V=x.mutations.map(M=>Rm(_.ut,M));return{userId:E,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:T,mutations:V}}(this.serializer,this.userId,l),h=[];let p=new nn((g,_)=>rt(g.canonicalString(),_.canonicalString()));for(const g of r){const _=vL(this.userId,g.key.path,a);p=p.add(g.key.path.popLast()),h.push(s.put(c)),h.push(o.put(_,aQ))}return p.forEach(g=>{h.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Dn[a]=l.keys()}),U.waitFor(h).next(()=>l)})}lookupMutationBatch(e,t){return gl(e).get(t).next(i=>i?(Ve(i.userId===this.userId),Pc(this.serializer,i)):null)}Cn(e,t){return this.Dn[t]?U.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.Dn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return gl(e).Y({index:"userMutationsIndex",range:r},(s,a,l)=>{a.userId===this.userId&&(Ve(a.batchId>=i),o=Pc(this.serializer,a)),l.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return gl(e).Y({index:"userMutationsIndex",range:t,reverse:!0},(r,o,s)=>{i=o.batchId,s.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return gl(e).W("userMutationsIndex",t).next(i=>i.map(r=>Pc(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Qy(this.userId,t.path),r=IDBKeyRange.lowerBound(i),o=[];return ah(e).Y({range:r},(s,a,l)=>{const[c,h,p]=s,g=ys(h);if(c===this.userId&&t.path.isEqual(g))return gl(e).get(p).next(_=>{if(!_)throw Me();Ve(_.userId===this.userId),o.push(Pc(this.serializer,_))});l.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new nn(rt);const r=[];return t.forEach(o=>{const s=Qy(this.userId,o.path),a=IDBKeyRange.lowerBound(s),l=ah(e).Y({range:a},(c,h,p)=>{const[g,_,E]=c,x=ys(_);g===this.userId&&o.path.isEqual(x)?i=i.add(E):p.done()});r.push(l)}),U.waitFor(r).next(()=>this.vn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,o=Qy(this.userId,i),s=IDBKeyRange.lowerBound(o);let a=new nn(rt);return ah(e).Y({range:s},(l,c,h)=>{const[p,g,_]=l,E=ys(g);p===this.userId&&i.isPrefixOf(E)?E.length===r&&(a=a.add(_)):h.done()}).next(()=>this.vn(e,a))}vn(e,t){const i=[],r=[];return t.forEach(o=>{r.push(gl(e).get(o).next(s=>{if(null===s)throw Me();Ve(s.userId===this.userId),i.push(Pc(this.serializer,s))}))}),U.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return Q2(e.ae,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.Fn(t.batchId)}),U.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return U.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return ah(e).Y({range:i},(o,s,a)=>{if(o[0]===this.userId){const l=ys(o[1]);r.push(l)}else a.done()}).next(()=>{Ve(0===r.length)})})}containsKey(e,t){return Y2(e,this.userId,t)}Mn(e){return X2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Y2(n,e,t){const i=Qy(e,t.path),r=i[1],o=IDBKeyRange.lowerBound(i);let s=!1;return ah(n).Y({range:o,J:!0},(a,l,c)=>{const[h,p,g]=a;h===e&&p===r&&(s=!0),c.done()}).next(()=>s)}function gl(n){return Si(n,"mutations")}function ah(n){return Si(n,"documentMutations")}function X2(n){return Si(n,"mutationQueues")}class Nc{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Nc(0)}static Nn(){return new Nc(-1)}}class bY{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const i=new Nc(t.highestTargetId);return t.highestTargetId=i.next(),this.Ln(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>Ue.fromTimestamp(new Sn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Bn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Ln(e,r)))}addTargetData(e,t){return this.kn(e,t).next(()=>this.Bn(e).next(i=>(i.targetCount+=1,this.qn(t,i),this.Ln(e,i))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>lh(e).delete(t.targetId)).next(()=>this.Bn(e)).next(i=>(Ve(i.targetCount>0),i.targetCount-=1,this.Ln(e,i)))}removeTargets(e,t,i){let r=0;const o=[];return lh(e).Y((s,a)=>{const l=Mm(a);l.sequenceNumber<=t&&null===i.get(l.targetId)&&(r++,o.push(this.removeTargetData(e,l)))}).next(()=>U.waitFor(o)).next(()=>r)}forEachTarget(e,t){return lh(e).Y((i,r)=>{const o=Mm(r);t(o)})}Bn(e){return J2(e).get("targetGlobalKey").next(t=>(Ve(null!==t),t))}Ln(e,t){return J2(e).put("targetGlobalKey",t)}kn(e,t){return lh(e).put(F2(this.serializer,t))}qn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=Dc(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return lh(e).Y({range:r,index:"queryTargetsIndex"},(s,a,l)=>{const c=Mm(a);vm(t,c.target)&&(o=c,l.done())}).next(()=>o)}addMatchingKeys(e,t,i){const r=[],o=_l(e);return t.forEach(s=>{const a=Yi(s.path);r.push(o.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,s))}),U.waitFor(r)}removeMatchingKeys(e,t,i){const r=_l(e);return U.forEach(t,o=>{const s=Yi(o.path);return U.waitFor([r.delete([i,s]),this.referenceDelegate.removeReference(e,i,o)])})}removeMatchingKeysForTargetId(e,t){const i=_l(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=_l(e);let o=ct();return r.Y({range:i,J:!0},(s,a,l)=>{const c=ys(s[1]),h=new we(c);o=o.add(h)}).next(()=>o)}containsKey(e,t){const i=Yi(t.path),r=IDBKeyRange.bound([i],[cL(i)],!1,!0);let o=0;return _l(e).Y({index:"documentTargetsIndex",J:!0,range:r},([s,a],l,c)=>{0!==s&&(o++,c.done())}).next(()=>o>0)}_t(e,t){return lh(e).get(t).next(i=>i?Mm(i):null)}}function lh(n){return Si(n,"targets")}function J2(n){return Si(n,"targetGlobal")}function _l(n){return Si(n,"targetDocuments")}function eV([n,e],[t,i]){const r=rt(n,t);return 0===r?rt(e,i):r}class EY{constructor(e){this.Qn=e,this.buffer=new nn(eV),this.Kn=0}$n(){return++this.Kn}Un(e){const t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();eV(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class tV{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var t=this;fe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ne.Z)(function*(){t.Wn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){sl(i)?fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield ol(i)}yield t.Gn(3e5)}))}}class wY{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return U.resolve(eo._e);const i=new EY(t);return this.zn.forEachTarget(e,r=>i.Un(r.sequenceNumber)).next(()=>this.zn.Hn(e,r=>i.Un(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.zn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(K2)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),K2):this.Jn(e,t))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let i,r,o,s,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,s=Date.now(),this.nthSequenceNumber(e,r))).next(p=>(i=p,a=Date.now(),this.removeTargets(e,i,t))).next(p=>(o=p,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(p=>(c=Date.now(),$d()<=ms.in.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-h}ms\n\tDetermined least recently used ${r} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(l-a)+`ms\n\tRemoved ${p} documents in `+(c-l)+`ms\nTotal Duration: ${c-h}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:p})))}}class IY{constructor(e,t){this.db=e,this.garbageCollector=function nV(n,e){return new wY(n,e)}(this,t)}jn(e){const t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}Yn(e){let t=0;return this.Hn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,(i,r)=>t(r))}addReference(e,t,i){return _b(e,i)}removeReference(e,t,i){return _b(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return _b(e,t)}Xn(e,t){return function(r,o){let s=!1;return X2(r).Z(a=>Y2(r,a,o).next(l=>(l&&(s=!0),U.resolve(!l)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let o=0;return this.Zn(e,(s,a)=>{if(a<=t){const l=this.Xn(e,s).next(c=>{if(!c)return o++,i.getEntry(e,s).next(()=>(i.removeEntry(s,Ue.min()),_l(e).delete([0,Yi(s.path)])))});r.push(l)}}).next(()=>U.waitFor(r)).next(()=>i.apply(e)).next(()=>o)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return _b(e,t)}Zn(e,t){const i=_l(e);let r,o=eo._e;return i.Y({index:"documentTargetsIndex"},([s,a],{path:l,sequenceNumber:c})=>{0===s?(o!==eo._e&&t(new we(ys(r)),o),o=c,r=l):o=eo._e}).next(()=>{o!==eo._e&&t(new we(ys(r)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function _b(n,e){return _l(n).put((r=n.currentSequenceNumber,{targetId:0,path:Yi(e.path),sequenceNumber:r}));var r}class iV{constructor(){this.changes=new la(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?U.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class xY{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Fc(e).put(i)}removeEntry(e,t,i){return Fc(e).delete(function(o,s){const a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],db(s),a[a.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.er(e,i)))}getEntry(e,t){let i=xn.newInvalidDocument(t);return Fc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Nm(t))},(r,o)=>{i=this.tr(t,o)}).next(()=>i)}nr(e,t){let i={size:0,document:xn.newInvalidDocument(t)};return Fc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Nm(t))},(r,o)=>{i={document:this.tr(t,o),size:mb(o)}}).next(()=>i)}getEntries(e,t){let i=Fr();return this.rr(e,t,(r,o)=>{const s=this.tr(r,o);i=i.insert(r,s)}).next(()=>i)}ir(e,t){let i=Fr(),r=new dn(we.comparator);return this.rr(e,t,(o,s)=>{const a=this.tr(o,s);i=i.insert(o,a),r=r.insert(o,mb(s))}).next(()=>({documents:i,sr:r}))}rr(e,t,i){if(t.isEmpty())return U.resolve();let r=new nn(aV);t.forEach(l=>r=r.add(l));const o=IDBKeyRange.bound(Nm(r.first()),Nm(r.last())),s=r.getIterator();let a=s.getNext();return Fc(e).Y({index:"documentKeyIndex",range:o},(l,c,h)=>{const p=we.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&aV(a,p)<0;)i(a,null),a=s.getNext();a&&a.isEqual(p)&&(i(a,c),a=s.hasNext()?s.getNext():null),a?h.U(Nm(a)):h.done()}).next(()=>{for(;a;)i(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,i,r,o){const s=t.path,a=[s.popLast().toArray(),s.lastSegment(),db(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fc(e).W(IDBKeyRange.bound(a,l,!0)).next(c=>{o?.incrementDocumentReadCount(c.length);let h=Fr();for(const p of c){const g=this.tr(we.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);g.isFoundDocument()&&(bm(t,g)||r.has(g.key))&&(h=h.insert(g.key,g))}return h})}getAllFromCollectionGroup(e,t,i,r){let o=Fr();const s=sV(t,i),a=sV(t,Jr.max());return Fc(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(l,c,h)=>{const p=this.tr(we.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);o=o.insert(p.key,p),o.size===r&&h.done()}).next(()=>o)}newChangeBuffer(e){return new CY(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return oV(e).get("remoteDocumentGlobalKey").next(t=>(Ve(!!t),t))}er(e,t){return oV(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){const i=function dY(n,e){let t;if(e.document)t=A2(n.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=we.fromSegments(e.noDocument.path),r=Mc(e.noDocument.readTime);t=xn.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Me();{const i=we.fromSegments(e.unknownDocument.path),r=Mc(e.unknownDocument.version);t=xn.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(r){const o=new Sn(r[0],r[1]);return Ue.fromTimestamp(o)}(e.readTime)),t}(this.serializer,t);if(!i.isNoDocument()||!i.version.isEqual(Ue.min()))return i}return xn.newInvalidDocument(e)}}function rV(n){return new xY(n)}class CY extends iV{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new la(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new nn((o,s)=>rt(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{const a=this.ar.get(o);if(t.push(this._r.removeEntry(e,o,a.readTime)),s.isValidDocument()){const l=N2(this._r.serializer,s);r=r.add(o.path.popLast());const c=mb(l);i+=c-a.size,t.push(this._r.addEntry(e,o,l))}else if(i-=a.size,this.trackRemovals){const l=N2(this._r.serializer,s.convertToNoDocument(Ue.min()));t.push(this._r.addEntry(e,o,l))}}),r.forEach(o=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,o))}),t.push(this._r.updateMetadata(e,i)),U.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next(i=>(this.ar.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this._r.ir(e,t).next(({documents:i,sr:r})=>(r.forEach((o,s)=>{this.ar.set(o,{size:s,readTime:i.get(o).readTime})}),i))}}function oV(n){return Si(n,"remoteDocumentGlobal")}function Fc(n){return Si(n,"remoteDocumentsV14")}function Nm(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function sV(n,e){const t=e.documentKey.path.toArray();return[n,db(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function aV(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let o=0;o<t.length-2&&o<i.length-2;++o)if(r=rt(t[o],i[o]),r)return r;return r=rt(t.length,i.length),r||(r=rt(t[t.length-2],i[i.length-2]),r||rt(t[t.length-1],i[i.length-1]))}class TY{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class lV{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(null!==i&&xm(i.mutation,r,Nr.empty(),Sn.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,ct()).next(()=>i))}getLocalViewOfDocuments(e,t,i=ct()){const r=Es();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(o=>{let s=Em();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){const i=Es();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,ct()))}populateOverlays(e,t,i){const r=[];return i.forEach(o=>{t.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,i,r){let o=Fr();const s=wm(),a=wm();return t.forEach((l,c)=>{const h=i.get(c.key);r.has(c.key)&&(void 0===h||h.mutation instanceof ca)?o=o.insert(c.key,c):void 0!==h?(s.set(c.key,h.mutation.getFieldMask()),xm(h.mutation,c,h.mutation.getFieldMask(),Sn.now())):s.set(c.key,Nr.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((c,h)=>s.set(c,h)),t.forEach((c,h)=>{var p;return a.set(c,new TY(h,null!==(p=s.get(c))&&void 0!==p?p:null))}),a))}recalculateAndSaveOverlays(e,t){const i=wm();let r=new dn((s,a)=>s-a),o=ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(const a of s)a.keys().forEach(l=>{const c=t.get(l);if(null===c)return;let h=i.get(l)||Nr.empty();h=a.applyToLocalView(c,h),i.set(l,h);const p=(r.get(a.batchId)||ct()).add(l);r=r.insert(a.batchId,p)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,p=XL();h.forEach(g=>{if(!o.has(g)){const _=l2(t.get(g),i.get(g));null!==_&&p.set(g,_),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,p))}return U.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return we.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):LC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r);var s}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(o=>{const s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-o.size):U.resolve(Es());let a=-1,l=o;return s.next(c=>U.forEach(c,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{l=l.insert(h,g)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,l,c,ct())).next(h=>({batchId:a,changes:YL(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next(i=>{let r=Em();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const o=t.collectionGroup;let s=Em();return this.indexManager.getCollectionParents(e,o).next(a=>U.forEach(a,l=>{const c=(p=t,g=l.child(o),new aa(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt));var p,g;return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,r))).next(s=>{o.forEach((l,c)=>{const h=c.getKey();null===s.get(h)&&(s=s.insert(h,xn.newInvalidDocument(h)))});let a=Em();return s.forEach((l,c)=>{const h=o.get(l);void 0!==h&&xm(h.mutation,c,Nr.empty(),Sn.now()),bm(t,c)&&(a=a.insert(l,c))}),a})}}class DY{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return U.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,{id:(r=t).id,version:r.version,createTime:ii(r.createTime)}),U.resolve();var r}getNamedQuery(e,t){return U.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,{name:(r=t).name,query:QC(r.bundledQuery),readTime:ii(r.readTime)}),U.resolve();var r}}class AY{constructor(){this.overlays=new dn(we.comparator),this.lr=new Map}getOverlay(e,t){return U.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Es();return U.forEach(t,r=>this.getOverlay(e,r).next(o=>{null!==o&&i.set(r,o)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,o)=>{this.lt(e,t,o)}),U.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.lr.get(i);return void 0!==r&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.lr.delete(i)),U.resolve()}getOverlaysForCollection(e,t,i){const r=Es(),o=t.length+1,s=new we(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>i&&r.set(l.getKey(),l)}return U.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let o=new dn((c,h)=>c-h);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>i){let h=o.get(c.largestBatchId);null===h&&(h=Es(),o=o.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Es(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=r)););return U.resolve(a)}lt(e,t,i){const r=this.overlays.get(i.key);if(null!==r){const s=this.lr.get(r.largestBatchId).delete(i.key);this.lr.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new $C(t,i));let o=this.lr.get(t);void 0===o&&(o=ct(),this.lr.set(t,o)),this.lr.set(t,o.add(i.key))}}class iT{constructor(){this.hr=new nn(Ri.Pr),this.Ir=new nn(Ri.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const i=new Ri(e,t);this.hr=this.hr.add(i),this.Ir=this.Ir.add(i)}Er(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.dr(new Ri(e,t))}Ar(e,t){e.forEach(i=>this.removeReference(i,t))}Rr(e){const t=new we(new Nt([])),i=new Ri(t,e),r=new Ri(t,e+1),o=[];return this.Ir.forEachInRange([i,r],s=>{this.dr(s),o.push(s.key)}),o}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new we(new Nt([])),i=new Ri(t,e),r=new Ri(t,e+1);let o=ct();return this.Ir.forEachInRange([i,r],s=>{o=o.add(s.key)}),o}containsKey(e){const t=new Ri(e,0),i=this.hr.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class Ri{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return we.comparator(e.key,t.key)||rt(e.gr,t.gr)}static Tr(e,t){return rt(e.gr,t.gr)||we.comparator(e.key,t.key)}}class SY{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new nn(Ri.Pr)}checkEmpty(e){return U.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){const o=this.pr;this.pr++;const s=new jC(o,t,i,r);this.mutationQueue.push(s);for(const a of r)this.yr=this.yr.add(new Ri(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(s)}lookupMutationBatch(e,t){return U.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.Sr(t+1),o=r<0?0:r;return U.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ri(t,0),r=new Ri(t,Number.POSITIVE_INFINITY),o=[];return this.yr.forEachInRange([i,r],s=>{const a=this.wr(s.gr);o.push(a)}),U.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new nn(rt);return t.forEach(r=>{const o=new Ri(r,0),s=new Ri(r,Number.POSITIVE_INFINITY);this.yr.forEachInRange([o,s],a=>{i=i.add(a.gr)})}),U.resolve(this.br(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let o=i;we.isDocumentKey(o)||(o=o.child(""));const s=new Ri(new we(o),0);let a=new nn(rt);return this.yr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.gr)),!0)},s),U.resolve(this.br(a))}br(e){const t=[];return e.forEach(i=>{const r=this.wr(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){Ve(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let i=this.yr;return U.forEach(t.mutations,r=>{const o=new Ri(r.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.yr=i})}Fn(e){}containsKey(e,t){const i=new Ri(t,0),r=this.yr.firstAfterOrEqual(i);return U.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return U.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class RY{constructor(e){this.Cr=e,this.docs=new dn(we.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),o=r?r.size:0,s=this.Cr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return U.resolve(i?i.document.mutableCopy():xn.newInvalidDocument(t))}getEntries(e,t){let i=Fr();return t.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():xn.newInvalidDocument(r))}),U.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let o=Fr();const s=t.path,a=new we(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||DC(dL(h),i)<=0||(r.has(h.key)||bm(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return U.resolve(o)}getAllFromCollectionGroup(e,t,i,r){Me()}vr(e,t){return U.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new MY(this)}getSize(e){return U.resolve(this.size)}}class MY extends iV{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(i)}),U.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class PY{constructor(e){this.persistence=e,this.Fr=new la(t=>Dc(t),vm),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.Mr=0,this.Or=new iT,this.targetCount=0,this.Nr=Nc.On()}forEachTarget(e,t){return this.Fr.forEach((i,r)=>t(r)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Mr&&(this.Mr=t),U.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new Nc(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,U.resolve()}updateTargetData(e,t){return this.kn(t),U.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,t,i){let r=0;const o=[];return this.Fr.forEach((s,a)=>{a.sequenceNumber<=t&&null===i.get(a.targetId)&&(this.Fr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),U.waitFor(o).next(()=>r)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,t){const i=this.Fr.get(t)||null;return U.resolve(i)}addMatchingKeys(e,t,i){return this.Or.Er(t,i),U.resolve()}removeMatchingKeys(e,t,i){this.Or.Ar(t,i);const r=this.persistence.referenceDelegate,o=[];return r&&t.forEach(s=>{o.push(r.markPotentiallyOrphaned(e,s))}),U.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),U.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Or.mr(t);return U.resolve(i)}containsKey(e,t){return U.resolve(this.Or.containsKey(t))}}class rT{constructor(e,t){this.Br={},this.overlays={},this.Lr=new eo(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new PY(this),this.indexManager=new vY,this.remoteDocumentCache=new RY(i=>this.referenceDelegate.Qr(i)),this.serializer=new O2(t),this.Kr=new DY(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new AY,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Br[e.toKey()];return i||(i=new SY(t,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,i){fe("MemoryPersistence","Starting transaction:",e);const r=new kY(this.Lr.next());return this.referenceDelegate.$r(),i(r).next(o=>this.referenceDelegate.Ur(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Wr(e,t){return U.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,t)))}}class kY extends fL{constructor(e){super(),this.currentSequenceNumber=e}}class vb{constructor(e){this.persistence=e,this.Gr=new iT,this.zr=null}static jr(e){return new vb(e)}get Hr(){if(this.zr)return this.zr;throw Me()}addReference(e,t,i){return this.Gr.addReference(i,t),this.Hr.delete(i.toString()),U.resolve()}removeReference(e,t,i){return this.Gr.removeReference(i,t),this.Hr.add(i.toString()),U.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),U.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach(r=>this.Hr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(o=>this.Hr.add(o.toString()))}).next(()=>i.removeTargetData(e,t))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Hr,i=>{const r=we.fromPath(i);return this.Jr(e,r).next(o=>{o||t.removeEntry(r,Ue.min())})}).next(()=>(this.zr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Jr(e,t).next(i=>{i?this.Hr.delete(t.toString()):this.Hr.add(t.toString())})}Qr(e){return 0}Jr(e,t){return U.or([()=>U.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class OY{constructor(e){this.serializer=e}N(e,t,i,r){const o=new Ky("createOrUpgrade",t);var l;i<1&&r>=1&&(e.createObjectStore("owner"),(l=e).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_L,{unique:!0}),l.createObjectStore("documentMutations"),cV(e),function(l){l.createObjectStore("remoteDocuments")}(e));let s=U.resolve();return i<3&&r>=3&&(0!==i&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),cV(e)),s=s.next(()=>function(l){const c=l.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ue.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",h)}(o))),i<4&&r>=4&&(0!==i&&(s=s.next(()=>function(l,c){return c.store("mutations").W().next(h=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_L,{unique:!0});const p=c.store("mutations"),g=h.map(_=>p.put(_));return U.waitFor(g)})}(e,o))),s=s.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(s=s.next(()=>this.Zr(o))),i<6&&r>=6&&(s=s.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(o)))),i<7&&r>=7&&(s=s.next(()=>this.ei(o))),i<8&&r>=8&&(s=s.next(()=>this.ti(e,o))),i<9&&r>=9&&(s=s.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(s=s.next(()=>this.ni(o))),i<11&&r>=11&&(s=s.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(s=s.next(()=>{!function(l){const c=l.createObjectStore("documentOverlays",{keyPath:yQ});c.createIndex("collectionPathOverlayIndex",bQ,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",EQ,{unique:!1})}(e)})),i<13&&r>=13&&(s=s.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:lQ});c.createIndex("documentKeyIndex",cQ),c.createIndex("collectionGroupIndex",uQ)}(e)).next(()=>this.ri(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(s=s.next(()=>this.ii(e,o))),i<15&&r>=15&&(s=s.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:mQ}).createIndex("sequenceNumberIndex",gQ,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:_Q}).createIndex("documentKeyIndex",vQ,{unique:!1})}(e))),s}Xr(e){let t=0;return e.store("remoteDocuments").Y((i,r)=>{t+=mb(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Zr(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.W().next(r=>U.forEach(r,o=>{const s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",s).next(a=>U.forEach(a,l=>{Ve(l.userId===o.userId);const c=Pc(this.serializer,l);return Q2(e,o.userId,c).next(()=>{})}))}))}ei(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const o=[];return i.Y((s,a)=>{const l=new Nt(s),c=[0,Yi(l)];o.push(t.get(c).next(h=>h?U.resolve():t.put({targetId:0,path:Yi(l),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>U.waitFor(o))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:pQ});const i=t.store("collectionParents"),r=new nT,o=s=>{if(r.add(s)){const a=s.lastSegment(),l=s.popLast();return i.put({collectionId:a,parent:Yi(l)})}};return t.store("remoteDocuments").Y({J:!0},(s,a)=>{const l=new Nt(s);return o(l.popLast())}).next(()=>t.store("documentMutations").Y({J:!0},([s,a,l],c)=>{const h=ys(a);return o(h.popLast())}))}ni(e){const t=e.store("targets");return t.Y((i,r)=>{const o=Mm(r),s=F2(this.serializer,o);return t.put(s)})}ri(e,t){const i=t.store("remoteDocuments"),r=[];return i.Y((o,s)=>{const a=t.store("remoteDocumentsV14"),l=(p=s,p.document?new we(Nt.fromString(p.document.name).popFirst(5)):p.noDocument?we.fromSegments(p.noDocument.path):p.unknownDocument?we.fromSegments(p.unknownDocument.path):Me()).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};var p;r.push(a.put(c))}).next(()=>U.waitFor(r))}ii(e,t){const i=t.store("mutations"),r=rV(this.serializer),o=new rT(vb.jr,this.serializer.ut);return i.W().next(s=>{const a=new Map;return s.forEach(l=>{var c;let h=null!==(c=a.get(l.userId))&&void 0!==c?c:ct();Pc(this.serializer,l).keys().forEach(p=>h=h.add(p)),a.set(l.userId,h)}),U.forEach(a,(l,c)=>{const h=new Ai(c),p=hb.ct(this.serializer,h),g=o.getIndexManager(h),_=gb.ct(h,this.serializer,g,o.referenceDelegate);return new lV(r,_,p,g).recalculateAndSaveOverlaysForDocumentKeys(new RC(t,eo._e),l).next()})})}}function cV(n){n.createObjectStore("targetDocuments",{keyPath:hQ}).createIndex("documentTargetsIndex",fQ,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",dQ,{unique:!0}),n.createObjectStore("targetGlobal")}const oT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class sT{constructor(e,t,i,r,o,s,a,l,c,h,p=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.si=o,this.window=s,this.document=a,this.oi=c,this._i=h,this.ai=p,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=g=>Promise.resolve(),!sT.D())throw new ce(Y.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new IY(this,r),this.Ii=t+"main",this.serializer=new O2(l),this.Ti=new Go(this.Ii,this.ai,new OY(this.serializer)),this.qr=new bY(this.referenceDelegate,this.serializer),this.remoteDocumentCache=rV(this.serializer),this.Kr=new hY,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===h&&ni("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ce(Y.FAILED_PRECONDITION,oT);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new eo(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var t=this;return this.Pi=function(){var i=(0,ne.Z)(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var t=(0,ne.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,ne.Z)(function*(){t.started&&(yield t.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>bb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(t=>this.isPrimary&&!t?this.pi(e).next(()=>!1):!!t&&this.yi(e).next(()=>!0))).catch(e=>{if(sl(e))return fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Fm(e).get("owner").next(t=>U.resolve(this.wi(t)))}Si(e){return bb(e).delete(this.clientId)}bi(){var e=this;return(0,ne.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Si(i,"clientMetadata");return r.W().next(o=>{const s=e.Ci(o,18e5),a=o.filter(l=>-1===s.indexOf(l));return U.forEach(a,l=>r.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Ei)for(const i of t)e.Ei.removeItem(e.vi(i.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?U.resolve(!0):Fm(e).get("owner").next(t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new ce(Y.FAILED_PRECONDITION,oT);return!1}}return!(!this.networkEnabled||!this.inForeground)||bb(e).W().next(i=>void 0===this.Ci(i,5e3).find(r=>!(this.clientId===r.clientId||!(!this.networkEnabled&&r.networkEnabled||!this.inForeground&&r.inForeground&&this.networkEnabled===r.networkEnabled))))}).next(t=>(this.isPrimary!==t&&fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ne.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new RC(t,eo._e);return e.pi(i).next(()=>e.Si(i))}),e.Ti.close(),e.Ni()})()}Ci(e,t){return e.filter(i=>this.Di(i.updateTimeMs,t)&&!this.Fi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>bb(e).W().next(t=>this.Ci(t,18e5).map(i=>i.clientId)))}get started(){return this.kr}getMutationQueue(e,t){return gb.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new yY(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return hb.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,i){fe("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",o=15===(l=this.ai)?IQ:14===l?EL:13===l?bL:12===l?wQ:11===l?yL:void Me();var l;let s;return this.Ti.runTransaction(e,r,o,a=>(s=new RC(a,this.Lr?this.Lr.next():eo._e),"readwrite-primary"===t?this.fi(s).next(l=>!!l||this.gi(s)).next(l=>{if(!l)throw ni(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new ce(Y.FAILED_PRECONDITION,hL);return i(s)}).next(l=>this.yi(s).next(()=>l)):this.Li(s).next(()=>i(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Li(e){return Fm(e).get("owner").next(t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)&&!this.wi(t)&&!(this._i||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ce(Y.FAILED_PRECONDITION,oT)})}yi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fm(e).put("owner",t)}static D(){return Go.D()}pi(e){const t=Fm(e);return t.get("owner").next(i=>this.wi(i)?(fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):U.resolve())}Di(e,t){const i=Date.now();return!(e<i-t||e>i&&(ni(`Detected an update time that is in the future: ${e} > ${i}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const t=/(?:Version|Mobile)\/1[456]/;(0,tn.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{const i=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return fe("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return ni("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){ni("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Fm(n){return Si(n,"owner")}function bb(n){return Si(n,"clientMetadata")}function aT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class lT{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.ki=i,this.qi=r}static Qi(e,t){let i=ct(),r=ct();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new lT(e,t.fromCache,i,r)}}class NY{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class uV{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,i,r){const o={result:null};return this.zi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ji(e,t,r,i).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new NY;return this.Hi(e,t,s).next(a=>{if(o.result=a,this.$i)return this.Ji(e,t,s,a.size)})}).next(()=>o.result)}Ji(e,t,i,r){return i.documentReadCount<this.Ui?($d()<=ms.in.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",Xd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),U.resolve()):($d()<=ms.in.DEBUG&&fe("QueryEngine","Query:",Xd(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Wi*r?($d()<=ms.in.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",Xd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Er(t))):U.resolve())}zi(e,t){if(qL(t))return U.resolve(null);let i=Er(t);return this.indexManager.getIndexType(e,i).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=ob(t,null,"F"),i=Er(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const s=ct(...o);return this.Gi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.Yi(t,a);return this.Zi(t,c,s,l.readTime)?this.zi(e,ob(t,null,"F")):this.Xi(e,c,t,l)}))})))}ji(e,t,i,r){return qL(t)||r.isEqual(Ue.min())?U.resolve(null):this.Gi.getDocuments(e,i).next(o=>{const s=this.Yi(t,o);return this.Zi(t,s,i,r)?U.resolve(null):($d()<=ms.in.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Xd(t)),this.Xi(e,s,t,uL(r,-1)).next(a=>a))})}Yi(e,t){let i=new nn(KL(e));return t.forEach((r,o)=>{bm(e,o)&&(i=i.add(o))}),i}Zi(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Hi(e,t,i){return $d()<=ms.in.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",Xd(t)),this.Gi.getDocumentsMatchingQuery(e,t,Jr.min(),i)}Xi(e,t,i,r){return this.Gi.getDocumentsMatchingQuery(e,i,r).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}}class FY{constructor(e,t,i,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new dn(rt),this.ns=new la(o=>Dc(o),vm),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(i)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lV(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ts))}}function dV(n,e,t,i){return new FY(n,e,t,i)}function hV(n,e){return cT.apply(this,arguments)}function cT(){return cT=(0,ne.Z)(function*(n,e){const t=Ee(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,t.os(e),t.mutationQueue.getAllMutationBatches(i))).next(o=>{const s=[],a=[];let l=ct();for(const c of r){s.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of o){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(i,l).next(c=>({_s:c,removedBatchIds:s,addedBatchIds:a}))})})}),cT.apply(this,arguments)}function fV(n){const e=Ee(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.qr.getLastRemoteSnapshotVersion(t))}function pV(n,e,t){let i=ct(),r=ct();return t.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let s=Fr();return t.forEach((a,l)=>{const c=o.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Ue.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):fe("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{us:s,cs:r}})}function BY(n,e){const t=Ee(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function ch(n,e){const t=Ee(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.qr.getTargetData(i,e).next(o=>o?(r=o,U.resolve(r)):t.qr.allocateTargetId(i).next(s=>(r=new ua(e,s,"TargetPurposeListen",i.currentSequenceNumber),t.qr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.ts.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.ts=t.ts.insert(i.targetId,i),t.ns.set(e,i.targetId)),i})}function uh(n,e,t){return uT.apply(this,arguments)}function uT(){return uT=(0,ne.Z)(function*(n,e,t){const i=Ee(n),r=i.ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",o,s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!sl(s))throw s;fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}i.ts=i.ts.remove(e),i.ns.delete(r.target)}),uT.apply(this,arguments)}function Eb(n,e,t){const i=Ee(n);let r=Ue.min(),o=ct();return i.persistence.runTransaction("Execute query","readwrite",s=>function(l,c,h){const p=Ee(l),g=p.ns.get(h);return void 0!==g?U.resolve(p.ts.get(g)):p.qr.getTargetData(c,h)}(i,s,Er(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.qr.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>i.es.getDocumentsMatchingQuery(s,e,t?r:Ue.min(),t?o:ct())).next(a=>(_V(i,ZL(e),a),{documents:a,ls:o})))}function mV(n,e){const t=Ee(n),i=Ee(t.qr),r=t.ts.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",o=>i._t(o,e).next(s=>s?s.target:null))}function gV(n,e){const t=Ee(n),i=t.rs.get(e)||Ue.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.ss.getAllFromCollectionGroup(r,e,uL(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(_V(t,e,r),r))}function _V(n,e,t){let i=n.rs.get(e)||Ue.min();t.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.rs.set(e,i)}function dT(){return dT=(0,ne.Z)(function*(n,e,t,i){const r=Ee(n);let o=ct(),s=Fr();for(const c of t){const h=e.hs(c.metadata.name);c.document&&(o=o.add(h));const p=e.Ps(c);p.setReadTime(e.Is(c.metadata.readTime)),s=s.insert(h,p)}const a=r.ss.newChangeBuffer({trackRemovals:!0}),l=yield ch(r,(h=i,Er(Qd(Nt.fromString(`__bundle__/docs/${h}`)))));var h;return r.persistence.runTransaction("Apply bundle documents","readwrite",c=>pV(c,a,s).next(h=>(a.apply(c),h)).next(h=>r.qr.removeMatchingKeysForTargetId(c,l.targetId).next(()=>r.qr.addMatchingKeys(c,o,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(c,h.us,h.cs)).next(()=>h.us)))}),dT.apply(this,arguments)}function jY(n,e){return hT.apply(this,arguments)}function hT(){return hT=(0,ne.Z)(function*(n,e,t=ct()){const i=yield ch(n,Er(QC(e.bundledQuery))),r=Ee(n);return r.persistence.runTransaction("Save named query","readwrite",o=>{const s=ii(e.readTime);if(i.snapshotVersion.compareTo(s)>=0)return r.Kr.saveNamedQuery(o,e);const a=i.withResumeToken(vi.EMPTY_BYTE_STRING,s);return r.ts=r.ts.insert(a.targetId,a),r.qr.updateTargetData(o,a).next(()=>r.qr.removeMatchingKeysForTargetId(o,i.targetId)).next(()=>r.qr.addMatchingKeys(o,t,i.targetId)).next(()=>r.Kr.saveNamedQuery(o,e))})}),hT.apply(this,arguments)}function vV(n,e){return`firestore_clients_${n}_${e}`}function yV(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function fT(n,e){return`firestore_targets_${n}_${e}`}class wb{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Ts(e,t,i){const r=JSON.parse(i);let o,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(o=new ce(r.error.code,r.error.message))),s?new wb(e,t,r.state,o):(ni("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Lm{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Ts(e,t){const i=JSON.parse(t);let r,o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(r=new ce(i.error.code,i.error.message))),o?new Lm(e,i.state,r):(ni("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ib{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,o=BC();for(let s=0;r&&s<i.activeTargetIds.length;++s)r=mL(i.activeTargetIds[s]),o=o.add(i.activeTargetIds[s]);return r?new Ib(e,o):(ni("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class pT{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new pT(t.clientId,t.onlineState):(ni("SharedClientState",`Failed to parse online state: ${e}`),null)}}class mT{constructor(){this.activeTargetIds=BC()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gT{constructor(e,t,i,r,o){this.window=e,this.si=t,this.persistenceKey=i,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new dn(rt),this.started=!1,this.ps=[];const s=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ys=vV(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new mT),this.Ss=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ne.Z)(function*(){const t=yield e.syncEngine.Bi();for(const r of t){if(r===e.Rs)continue;const o=e.getItem(vV(e.persistenceKey,r));if(o){const s=Ib.Ts(r,o);s&&(e.gs=e.gs.insert(s.clientId,s))}}e.Fs();const i=e.storage.getItem(e.Cs);if(i){const r=e.Ms(i);r&&e.xs(r)}for(const r of e.ps)e.fs(r);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,i){this.Ns(e,t,i),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(fT(this.persistenceKey,e));if(i){const r=Lm.Ts(e,i);r&&(t=r.state)}}return this.Ls.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(fT(this.persistenceKey,e))}updateQueryState(e,t,i){this.ks(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Bs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return fe("SharedClientState","READ",e,t),t}setItem(e,t){fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var t=this;const i=e;if(i.storageArea===this.storage){if(fe("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ys)return void ni("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,ne.Z)(function*(){if(t.started){if(null!==i.key)if(t.Ss.test(i.key)){if(null==i.newValue){const r=t.Ks(i.key);return t.$s(r,null)}{const r=t.Us(i.key,i.newValue);if(r)return t.$s(r.clientId,r)}}else if(t.bs.test(i.key)){if(null!==i.newValue){const r=t.Ws(i.key,i.newValue);if(r)return t.Gs(r)}}else if(t.Ds.test(i.key)){if(null!==i.newValue){const r=t.zs(i.key,i.newValue);if(r)return t.js(r)}}else if(i.key===t.Cs){if(null!==i.newValue){const r=t.Ms(i.newValue);if(r)return t.xs(r)}}else if(i.key===t.ws){const r=function(s){let a=eo._e;if(null!=s)try{const l=JSON.parse(s);Ve("number"==typeof l),a=l}catch(l){ni("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(i.newValue);r!==eo._e&&t.sequenceNumberHandler(r)}else if(i.key===t.vs){const r=t.Hs(i.newValue);yield Promise.all(r.map(o=>t.syncEngine.Js(o)))}}else t.ps.push(i)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,t,i){const r=new wb(this.currentUser,e,t,i),o=yV(this.persistenceKey,this.currentUser,e);this.setItem(o,r.Es())}Bs(e){const t=yV(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,t,i){const r=fT(this.persistenceKey,e),o=new Lm(e,t,i);this.setItem(r,o.Es())}Qs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){const t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){const i=this.Ks(e);return Ib.Ts(i,t)}Ws(e,t){const i=this.bs.exec(e),r=Number(i[1]);return wb.Ts(new Ai(void 0!==i[2]?i[2]:null),r,t)}zs(e,t){const i=this.Ds.exec(e),r=Number(i[1]);return Lm.Ts(r,t)}Ms(e){return pT.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var t=this;return(0,ne.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Ys(e.batchId,e.state,e.error);fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){const i=t?this.gs.insert(e,t):this.gs.remove(e),r=this.Os(this.gs),o=this.Os(i),s=[],a=[];return o.forEach(l=>{r.has(l)||s.push(l)}),r.forEach(l=>{o.has(l)||a.push(l)}),this.syncEngine.Xs(s,a).then(()=>{this.gs=i})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=BC();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class bV{constructor(){this.eo=new mT,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,i){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new mT,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class zY{ro(e){}shutdown(){}}class EV{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let xb=null;function _T(){return null===xb?xb=268435456+Math.round(2147483648*Math.random()):xb++,"0x"+xb.toString(16)}const $Y={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class HY{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Ji="WebChannelConnection";class qY extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.mo=i+"://"+t.host,this.fo=`projects/${r}/databases/${o}`,this.po="(default)"===this.databaseId.database?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get yo(){return!1}wo(t,i,r,o,s){const a=_T(),l=this.So(t,i);fe("RestConnection",`Sending RPC '${t}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(c,o,s),this.Do(t,l,c,r).then(h=>(fe("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Or("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}Co(t,i,r,o,s,a){return this.wo(t,i,r,o,s)}bo(t,i,r){t["X-Goog-Api-Client"]="gl-js/ fire/"+zd,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,s)=>t[s]=o),r&&r.headers.forEach((o,s)=>t[s]=o)}So(t,i){return`${this.mo}/v1/${i}:${$Y[t]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,i,r){const o=_T();return new Promise((s,a)=>{const l=new zK;l.setWithCredentials(!0),l.listenOnce(UK.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case xC.NO_ERROR:const h=l.getResponseJson();fe(Ji,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case xC.TIMEOUT:fe(Ji,`RPC '${e}' ${o} timed out`),a(new ce(Y.DEADLINE_EXCEEDED,"Request time out"));break;case xC.HTTP_ERROR:const p=l.getStatus();if(fe(Ji,`RPC '${e}' ${o} failed with status:`,p,"response text:",l.getResponseText()),p>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g?.error;if(_&&_.status&&_.message){const E=function(T){const V=T.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(V)>=0?V:Y.UNKNOWN}(_.status);a(new ce(E,_.message))}else a(new ce(Y.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ce(Y.UNAVAILABLE,"Connection failed."));break;default:Me()}}finally{fe(Ji,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(r);fe(Ji,`RPC '${e}' ${o} sending request:`,r),l.send(t,"POST",c,i,15)})}vo(e,t,i){const r=_T(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=VK(),a=BK(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.bo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;const h=o.join("");fe(Ji,`Creating RPC '${e}' stream ${r}: ${h}`,l);const p=s.createWebChannel(h,l);let g=!1,_=!1;const E=new HY({co:T=>{_?fe(Ji,`Not sending because RPC '${e}' stream ${r} is closed:`,T):(g||(fe(Ji,`Opening RPC '${e}' stream ${r} transport.`),p.open(),g=!0),fe(Ji,`RPC '${e}' stream ${r} sending:`,T),p.send(T))},lo:()=>p.close()}),x=(T,V,M)=>{T.listen(V,j=>{try{M(j)}catch(ie){setTimeout(()=>{throw ie},0)}})};return x(p,Zy.EventType.OPEN,()=>{_||fe(Ji,`RPC '${e}' stream ${r} transport opened.`)}),x(p,Zy.EventType.CLOSE,()=>{_||(_=!0,fe(Ji,`RPC '${e}' stream ${r} transport closed`),E.Ro())}),x(p,Zy.EventType.ERROR,T=>{_||(_=!0,Or(Ji,`RPC '${e}' stream ${r} transport errored:`,T),E.Ro(new ce(Y.UNAVAILABLE,"The operation could not be completed")))}),x(p,Zy.EventType.MESSAGE,T=>{var V;if(!_){const M=T.data[0];Ve(!!M);const ie=M.error||(null===(V=M[0])||void 0===V?void 0:V.error);if(ie){fe(Ji,`RPC '${e}' stream ${r} received error:`,ie);const _e=ie.status;let Be=function(Cr){const Lr=si[Cr];if(void 0!==Lr)return p2(Lr)}(_e),et=ie.message;void 0===Be&&(Be=Y.INTERNAL,et="Unknown error status: "+_e+" with message "+ie.message),_=!0,E.Ro(new ce(Be,et)),p.close()}else fe(Ji,`RPC '${e}' stream ${r} received:`,M),E.Vo(M)}}),x(a,jK.STAT_EVENT,T=>{T.stat===rL.PROXY?fe(Ji,`RPC '${e}' stream ${r} detected buffering proxy`):T.stat===rL.NOPROXY&&fe(Ji,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{E.Ao()},0),E}}function wV(){return typeof window<"u"?window:null}function Cb(){return typeof document<"u"?document:null}function Vm(n){return new tY(n,!0)}class vT{constructor(e,t,i=1e3,r=1.5,o=6e4){this.si=e,this.timerId=t,this.Fo=i,this.Mo=r,this.xo=o,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),i=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-i);r>0&&fe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Oo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,r,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class IV{constructor(e,t,i,r,o,s,a,l){this.si=e,this.Ko=i,this.$o=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new vT(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,ne.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,ne.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,t){var i=this;return(0,ne.Z)(function*(){i.t_(),i.n_(),i.zo.cancel(),i.Uo++,4!==e?i.zo.reset():t&&t.code===Y.RESOURCE_EXHAUSTED?(ni(t.toString()),ni("Using maximum backoff delay to prevent overloading the backend."),i.zo.Lo()):t&&t.code===Y.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.r_(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.Io(t)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Uo===t&&this.s_(i,r)},i=>{e(()=>{const r=new ce(Y.UNKNOWN,"Fetching auth token failed: "+i.message);return this.o_(r)})})}s_(e,t){const i=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho(()=>{i(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(r=>{i(()=>this.o_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Jo(){var e=this;this.state=5,this.zo.ko((0,ne.Z)(function*(){e.state=0,e.start()}))}o_(e){return fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget(()=>this.Uo===e?t():(fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class WY extends IV{constructor(e,t,i,r,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,s),this.serializer=o}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function rY(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:Me(),r=e.targetChange.targetIds||[],o=function(c,h){return c.useProto3Json?(Ve(void 0===h||"string"==typeof h),vi.fromBase64String(h||"")):(Ve(void 0===h||h instanceof Uint8Array),vi.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){const h=void 0===c.code?Y.UNKNOWN:p2(c.code);return new ce(h,c.message||"")}(s);t=new y2(i,r,o,a||null)}else if("documentChange"in e){const i=e.documentChange,r=ws(n,i.document.name),o=ii(i.document.updateTime),s=i.document.createTime?ii(i.document.createTime):Ue.min(),a=new zi({mapValue:{fields:i.document.fields}}),l=xn.newFoundDocument(r,o,s,a);t=new ub(i.targetIds||[],i.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const i=e.documentDelete,r=ws(n,i.document),o=i.readTime?ii(i.readTime):Ue.min(),s=xn.newNoDocument(r,o);t=new ub([],i.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const i=e.documentRemove,r=ws(n,i.document);t=new ub([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return Me();{const i=e.filter,{count:r=0,unchangedNames:o}=i,s=new KQ(r,o);t=new v2(i.targetId,s)}}var c;return t}(this.serializer,e),i=function(o){if(!("targetChange"in o))return Ue.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Ue.min():s.readTime?ii(s.readTime):Ue.min()}(e);return this.listener.a_(t,i)}u_(e){const t={};t.database=Sm(this.serializer),t.addTarget=function(o,s){let a;const l=s.target;if(a=ib(l)?{documents:S2(o,l)}:{query:KC(o,l)},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=I2(o,s.resumeToken);const c=qC(o,s.expectedCount);null!==c&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(Ue.min())>0){a.readTime=ih(o,s.snapshotVersion.toTimestamp());const c=qC(o,s.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const i=function sY(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.e_(t)}c_(e){const t={};t.database=Sm(this.serializer),t.removeTarget=e,this.e_(t)}}class GY extends IV{constructor(e,t,i,r,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,s),this.serializer=o,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(Ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function oY(n,e){return n&&n.length>0?(Ve(void 0!==e),n.map(t=>function(r,o){let s=ii(r.updateTime?r.updateTime:o);return s.isEqual(Ue.min())&&(s=ii(o)),new qQ(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=ii(e.commitTime);return this.listener.I_(i,t)}return Ve(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Sm(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Rm(this.serializer,i))};this.e_(t)}}class ZY extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new ce(Y.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.wo(e,t,i,r,o)).catch(r=>{throw"FirebaseError"===r.name?(r.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new ce(Y.UNKNOWN,r.toString())})}Co(e,t,i,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,t,i,o,s,r)).catch(o=>{throw"FirebaseError"===o.name?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(Y.UNKNOWN,o.toString())})}terminate(){this.d_=!0}}class QY{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(ni(t),this.f_=!1):fe("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class YY{constructor(e,t,i,r,o){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=o,this.F_.ro(a=>{i.enqueueAndForget((0,ne.Z)(function*(){var l;vl(s)&&(fe("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,ne.Z)(function*(h){const p=Ee(h);p.C_.add(4),yield dh(p),p.M_.set("Unknown"),p.C_.delete(4),yield Bm(p)}),function c(h){return l.apply(this,arguments)})(s))}))}),this.M_=new QY(i,r)}}function Bm(n){return bT.apply(this,arguments)}function bT(){return bT=(0,ne.Z)(function*(n){if(vl(n))for(const e of n.v_)yield e(!0)}),bT.apply(this,arguments)}function dh(n){return ET.apply(this,arguments)}function ET(){return ET=(0,ne.Z)(function*(n){for(const e of n.v_)yield e(!1)}),ET.apply(this,arguments)}function Tb(n,e){const t=Ee(n);t.D_.has(e.targetId)||(t.D_.set(e.targetId,e),xT(t)?IT(t):fh(t).Ho()&&wT(t,e))}function Um(n,e){const t=Ee(n),i=fh(t);t.D_.delete(e),i.Ho()&&xV(t,e),0===t.D_.size&&(i.Ho()?i.Zo():vl(t)&&t.M_.set("Unknown"))}function wT(n,e){if(n.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fh(n).u_(e)}function xV(n,e){n.x_.Oe(e),fh(n).c_(e)}function IT(n){n.x_=new YQ({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.D_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),fh(n).start(),n.M_.g_()}function xT(n){return vl(n)&&!fh(n).jo()&&n.D_.size>0}function vl(n){return 0===Ee(n).C_.size}function CV(n){n.x_=void 0}function XY(n){return CT.apply(this,arguments)}function CT(){return CT=(0,ne.Z)(function*(n){n.D_.forEach((e,t)=>{wT(n,e)})}),CT.apply(this,arguments)}function JY(n,e){return TT.apply(this,arguments)}function TT(){return TT=(0,ne.Z)(function*(n,e){CV(n),xT(n)?(n.M_.w_(e),IT(n)):n.M_.set("Unknown")}),TT.apply(this,arguments)}function eX(n,e,t){return DT.apply(this,arguments)}function DT(){return DT=(0,ne.Z)(function*(n,e,t){if(n.M_.set("Online"),e instanceof y2&&2===e.state&&e.cause)try{yield(i=(0,ne.Z)(function*(o,s){const a=s.cause;for(const l of s.targetIds)o.D_.has(l)&&(yield o.remoteSyncer.rejectListen(l,a),o.D_.delete(l),o.x_.removeTarget(l))}),function r(o,s){return i.apply(this,arguments)})(n,e)}catch(i){fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Db(n,i)}else if(e instanceof ub?n.x_.$e(e):e instanceof v2?n.x_.Je(e):n.x_.Ge(e),!t.isEqual(Ue.min()))try{const i=yield fV(n.localStore);t.compareTo(i)>=0&&(yield function(o,s){const a=o.x_.it(s);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=o.D_.get(c);h&&o.D_.set(c,h.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,c)=>{const h=o.D_.get(l);if(!h)return;o.D_.set(l,h.withResumeToken(vi.EMPTY_BYTE_STRING,h.snapshotVersion)),xV(o,l);const p=new ua(h.target,l,c,h.sequenceNumber);wT(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(i){fe("RemoteStore","Failed to raise snapshot:",i),yield Db(n,i)}var i}),DT.apply(this,arguments)}function Db(n,e,t){return AT.apply(this,arguments)}function AT(){return AT=(0,ne.Z)(function*(n,e,t){if(!sl(e))throw e;n.C_.add(1),yield dh(n),n.M_.set("Offline"),t||(t=()=>fV(n.localStore)),n.asyncQueue.enqueueRetryable((0,ne.Z)(function*(){fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.C_.delete(1),yield Bm(n)}))}),AT.apply(this,arguments)}function TV(n,e){return e().catch(t=>Db(n,t,e))}function hh(n){return ST.apply(this,arguments)}function ST(){return ST=(0,ne.Z)(function*(n){const e=Ee(n),t=yl(e);let i=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;tX(e);)try{const r=yield BY(e.localStore,i);if(null===r){0===e.b_.length&&t.Zo();break}i=r.batchId,nX(e,r)}catch(r){yield Db(e,r)}DV(e)&&AV(e)}),ST.apply(this,arguments)}function tX(n){return vl(n)&&n.b_.length<10}function nX(n,e){n.b_.push(e);const t=yl(n);t.Ho()&&t.h_&&t.P_(e.mutations)}function DV(n){return vl(n)&&!yl(n).jo()&&n.b_.length>0}function AV(n){yl(n).start()}function iX(n){return RT.apply(this,arguments)}function RT(){return RT=(0,ne.Z)(function*(n){yl(n).E_()}),RT.apply(this,arguments)}function rX(n){return MT.apply(this,arguments)}function MT(){return MT=(0,ne.Z)(function*(n){const e=yl(n);for(const t of n.b_)e.P_(t.mutations)}),MT.apply(this,arguments)}function oX(n,e,t){return PT.apply(this,arguments)}function PT(){return PT=(0,ne.Z)(function*(n,e,t){const i=n.b_.shift(),r=zC.from(i,e,t);yield TV(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield hh(n)}),PT.apply(this,arguments)}function sX(n,e){return kT.apply(this,arguments)}function kT(){return kT=(0,ne.Z)(function*(n,e){var t;e&&yl(n).h_&&(yield(t=(0,ne.Z)(function*(r,o){if(f2(a=o.code)&&a!==Y.ABORTED){const s=r.b_.shift();yl(r).Yo(),yield TV(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield hh(r)}var a}),function i(r,o){return t.apply(this,arguments)})(n,e)),DV(n)&&AV(n)}),kT.apply(this,arguments)}function SV(n,e){return OT.apply(this,arguments)}function OT(){return OT=(0,ne.Z)(function*(n,e){const t=Ee(n);t.asyncQueue.verifyOperationInProgress(),fe("RemoteStore","RemoteStore received new credentials");const i=vl(t);t.C_.add(3),yield dh(t),i&&t.M_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.C_.delete(3),yield Bm(t)}),OT.apply(this,arguments)}function NT(n,e){return FT.apply(this,arguments)}function FT(){return FT=(0,ne.Z)(function*(n,e){const t=Ee(n);e?(t.C_.delete(2),yield Bm(t)):e||(t.C_.add(2),yield dh(t),t.M_.set("Unknown"))}),FT.apply(this,arguments)}function fh(n){return n.O_||(n.O_=function(t,i,r){const o=Ee(t);return o.A_(),new WY(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{ho:XY.bind(null,n),Io:JY.bind(null,n),a_:eX.bind(null,n)}),n.v_.push(function(){var e=(0,ne.Z)(function*(t){t?(n.O_.Yo(),xT(n)?IT(n):n.M_.set("Unknown")):(yield n.O_.stop(),CV(n))});return function(t){return e.apply(this,arguments)}}())),n.O_}function yl(n){return n.N_||(n.N_=function(t,i,r){const o=Ee(t);return o.A_(),new GY(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{ho:iX.bind(null,n),Io:sX.bind(null,n),T_:rX.bind(null,n),I_:oX.bind(null,n)}),n.v_.push(function(){var e=(0,ne.Z)(function*(t){t?(n.N_.Yo(),yield hh(n)):(yield n.N_.stop(),n.b_.length>0&&(fe("RemoteStore",`Stopping write stream with ${n.b_.length} pending writes`),n.b_=[]))});return function(t){return e.apply(this,arguments)}}())),n.N_}class LT{constructor(e,t,i,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new _i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,o){const s=Date.now()+i,a=new LT(e,t,s,r,o);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ce(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ph(n,e){if(ni("AsyncQueue",`${e}: ${n}`),sl(n))return new ce(Y.UNAVAILABLE,`${e}: ${n}`);throw n}class mh{constructor(e){this.comparator=e?(t,i)=>e(t,i)||we.comparator(t.key,i.key):(t,i)=>we.comparator(t.key,i.key),this.keyedMap=Em(),this.sortedSet=new dn(this.comparator)}static emptySet(e){return new mh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof mh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new mh;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class RV{constructor(){this.B_=new dn(we.comparator)}track(e){const t=e.doc.key,i=this.B_.get(t);i?0!==e.type&&3===i.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==i.type?this.B_=this.B_.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.B_=this.B_.remove(t):1===e.type&&2===i.type?this.B_=this.B_.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):Me():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal((t,i)=>{e.push(i)}),e}}class gh{constructor(e,t,i,r,o,s,a,l,c){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,i,r,o){const s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new gh(e,t,mh.emptySet(t),s,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ym(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class aX{constructor(){this.k_=void 0,this.listeners=[]}}class lX{constructor(){this.queries=new la(e=>GL(e),ym),this.onlineState="Unknown",this.q_=new Set}}function VT(n,e){return BT.apply(this,arguments)}function BT(){return BT=(0,ne.Z)(function*(n,e){const t=Ee(n),i=e.query;let r=!1,o=t.queries.get(i);if(o||(r=!0,o=new aX),r)try{o.k_=yield t.onListen(i)}catch(s){const a=ph(s,`Initialization of query '${Xd(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.listeners.push(e),e.Q_(t.onlineState),o.k_&&e.K_(o.k_)&&zT(t)}),BT.apply(this,arguments)}function UT(n,e){return jT.apply(this,arguments)}function jT(){return jT=(0,ne.Z)(function*(n,e){const t=Ee(n),i=e.query;let r=!1;const o=t.queries.get(i);if(o){const s=o.listeners.indexOf(e);s>=0&&(o.listeners.splice(s,1),r=0===o.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),jT.apply(this,arguments)}function cX(n,e){const t=Ee(n);let i=!1;for(const r of e){const s=t.queries.get(r.query);if(s){for(const a of s.listeners)a.K_(r)&&(i=!0);s.k_=r}}i&&zT(t)}function uX(n,e,t){const i=Ee(n),r=i.queries.get(e);if(r)for(const o of r.listeners)o.onError(t);i.queries.delete(e)}function zT(n){n.q_.forEach(e=>{e.next()})}class $T{constructor(e,t,i){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=i||{}}K_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new gh(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){return!e.fromCache||(!this.options.J_||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=gh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class dX{constructor(e,t){this.Y_=e,this.byteLength=t}Z_(){return"metadata"in this.Y_}}class MV{constructor(e){this.serializer=e}hs(e){return ws(this.serializer,e)}Ps(e){return e.metadata.exists?A2(this.serializer,e.document,!1):xn.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return ii(e)}}class hX{constructor(e,t,i){this.X_=e,this.localStore=t,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=PV(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++t;const i=Nt.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ta(e){const t=new Map,i=new MV(this.serializer);for(const r of e)if(r.metadata.queries){const o=i.hs(r.metadata.name);for(const s of r.metadata.queries){const a=(t.get(s)||ct()).add(o);t.set(s,a)}}return t}complete(){var e=this;return(0,ne.Z)(function*(){const t=yield function UY(n,e,t,i){return dT.apply(this,arguments)}(e.localStore,new MV(e.serializer),e.documents,e.X_.id),i=e.ta(e.documents);for(const r of e.queries)yield jY(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:t}})()}}function PV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class kV{constructor(e){this.key=e}}class OV{constructor(e){this.key=e}}class NV{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=ct(),this.mutatedKeys=ct(),this._a=KL(e),this.aa=new mh(this._a)}get ua(){return this.ia}ca(e,t){const i=t?t.la:new RV,r=t?t.aa:this.aa;let o=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const l="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,p)=>{const g=r.get(h),_=bm(this.query,p)?p:null,E=!!g&&this.mutatedKeys.has(g.key),x=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let T=!1;g&&_?g.data.isEqual(_.data)?E!==x&&(i.track({type:3,doc:_}),T=!0):this.ha(g,_)||(i.track({type:2,doc:_}),T=!0,(l&&this._a(_,l)>0||c&&this._a(_,c)<0)&&(a=!0)):!g&&_?(i.track({type:0,doc:_}),T=!0):g&&!_&&(i.track({type:1,doc:g}),T=!0,(l||c)&&(a=!0)),T&&(_?(s=s.add(_),o=x?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const h="F"===this.query.limitType?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),i.track({type:1,doc:h})}return{aa:s,la:i,Zi:a,mutatedKeys:o}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const o=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const s=e.la.L_();s.sort((h,p)=>function(_,E){const x=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me()}};return x(_)-x(E)}(h.type,p.type)||this._a(h.doc,p.doc)),this.Pa(i),r=null!=r&&r;const a=t&&!r?this.Ia():[],l=0===this.oa.size&&this.current&&!r?1:0,c=l!==this.sa;return this.sa=l,0!==s.length||c?{snapshot:new gh(this.query,e.aa,o,s,e.mutatedKeys,0===l,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new RV,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(t=>this.ia=this.ia.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.ia=this.ia.delete(t)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=ct(),this.aa.forEach(i=>{this.Ea(i.key)&&(this.oa=this.oa.add(i.key))});const t=[];return e.forEach(i=>{this.oa.has(i)||t.push(new OV(i))}),this.oa.forEach(i=>{e.has(i)||t.push(new kV(i))}),t}da(e){this.ia=e.ls,this.oa=ct();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return gh.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class fX{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class pX{constructor(e){this.key=e,this.Ra=!1}}class mX{constructor(e,t,i,r,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new la(a=>GL(a),ym),this.fa=new Map,this.ga=new Set,this.pa=new dn(we.comparator),this.ya=new Map,this.wa=new iT,this.Sa={},this.ba=new Map,this.Da=Nc.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function gX(n,e){return HT.apply(this,arguments)}function HT(){return HT=(0,ne.Z)(function*(n,e){const t=fD(n);let i,r;const o=t.ma.get(e);if(o)i=o.targetId,t.sharedClientState.addLocalQueryTarget(i),r=o.view.Aa();else{const s=yield ch(t.localStore,Er(e)),a=t.sharedClientState.addLocalQueryTarget(s.targetId);i=s.targetId,r=yield qT(t,e,i,"current"===a,s.resumeToken),t.isPrimaryClient&&Tb(t.remoteStore,s)}return r}),HT.apply(this,arguments)}function qT(n,e,t,i,r){return WT.apply(this,arguments)}function WT(){return WT=(0,ne.Z)(function*(n,e,t,i,r){n.va=(p,g,_)=>{return(E=(0,ne.Z)(function*(T,V,M,j){let ie=V.view.ca(M);ie.Zi&&(ie=yield Eb(T.localStore,V.query,!1).then(({documents:Gt})=>V.view.ca(Gt,ie)));const _e=j&&j.targetChanges.get(V.targetId),Be=j&&null!=j.targetMismatches.get(V.targetId),et=V.view.applyChanges(ie,T.isPrimaryClient,_e,Be);return nD(T,V.targetId,et.Ta),et.snapshot}),function x(T,V,M,j){return E.apply(this,arguments)})(n,p,g,_);var E};const o=yield Eb(n.localStore,e,!0),s=new NV(e,o.ls),a=s.ca(o.documents),l=Dm.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,r),c=s.applyChanges(a,n.isPrimaryClient,l);nD(n,t,c.Ta);const h=new fX(e,t,s);return n.ma.set(e,h),n.fa.has(t)?n.fa.get(t).push(e):n.fa.set(t,[e]),c.snapshot}),WT.apply(this,arguments)}function _X(n,e){return GT.apply(this,arguments)}function GT(){return GT=(0,ne.Z)(function*(n,e){const t=Ee(n),i=t.ma.get(e),r=t.fa.get(i.targetId);if(r.length>1)return t.fa.set(i.targetId,r.filter(o=>!ym(o,e))),void t.ma.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield uh(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),Um(t.remoteStore,i.targetId),_h(t,i.targetId)}).catch(ol))):(_h(t,i.targetId),yield uh(t.localStore,i.targetId,!0))}),GT.apply(this,arguments)}function ZT(){return ZT=(0,ne.Z)(function*(n,e,t){const i=pD(n);try{const r=yield function(s,a){const l=Ee(s),c=Sn.now(),h=a.reduce((_,E)=>_.add(E.key),ct());let p,g;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let E=Fr(),x=ct();return l.ss.getEntries(_,h).next(T=>{E=T,E.forEach((V,M)=>{M.isValidDocument()||(x=x.add(V))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,E)).next(T=>{p=T;const V=[];for(const M of a){const j=GQ(M,p.get(M.key).overlayedDocument);null!=j&&V.push(new ca(M.key,j,PL(j.value.mapValue),Rn.exists(!0)))}return l.mutationQueue.addMutationBatch(_,c,V,a)}).next(T=>{g=T;const V=T.applyToLocalDocumentSet(p,x);return l.documentOverlayCache.saveOverlays(_,T.batchId,V)})}).then(()=>({batchId:g.batchId,changes:YL(p)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,a,l){let c=s.Sa[s.currentUser.toKey()];c||(c=new dn(rt)),c=c.insert(a,l),s.Sa[s.currentUser.toKey()]=c}(i,r.batchId,t),yield da(i,r.changes),yield hh(i.remoteStore)}catch(r){const o=ph(r,"Failed to persist write");t.reject(o)}}),ZT.apply(this,arguments)}function FV(n,e){return KT.apply(this,arguments)}function KT(){return KT=(0,ne.Z)(function*(n,e){const t=Ee(n);try{const i=yield function VY(n,e){const t=Ee(n),i=e.snapshotVersion;let r=t.ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=t.ss.newChangeBuffer({trackRemovals:!0});r=t.ts;const a=[];e.targetChanges.forEach((h,p)=>{const g=r.get(p);if(!g)return;a.push(t.qr.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.qr.addMatchingKeys(o,h.addedDocuments,p)));let _=g.withSequenceNumber(o.currentSequenceNumber);var x,T,V;null!==e.targetMismatches.get(p)?_=_.withResumeToken(vi.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,i)),r=r.insert(p,_),T=_,V=h,(0===(x=g).resumeToken.approximateByteSize()||T.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8||V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0)&&a.push(t.qr.updateTargetData(o,_))});let l=Fr(),c=ct();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(pV(o,s,e.documentUpdates).next(h=>{l=h.us,c=h.cs})),!i.isEqual(Ue.min())){const h=t.qr.getLastRemoteSnapshotVersion(o).next(p=>t.qr.setTargetsMetadata(o,o.currentSequenceNumber,i));a.push(h)}return U.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(t.ts=r,o))}(t.localStore,e);e.targetChanges.forEach((r,o)=>{const s=t.ya.get(o);s&&(Ve(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?s.Ra=!0:r.modifiedDocuments.size>0?Ve(s.Ra):r.removedDocuments.size>0&&(Ve(s.Ra),s.Ra=!1))}),yield da(t,i,e)}catch(i){yield ol(i)}}),KT.apply(this,arguments)}function LV(n,e,t){const i=Ee(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.ma.forEach((o,s)=>{const a=s.view.Q_(e);a.snapshot&&r.push(a.snapshot)}),function(s,a){const l=Ee(s);l.onlineState=a;let c=!1;l.queries.forEach((h,p)=>{for(const g of p.listeners)g.Q_(a)&&(c=!0)}),c&&zT(l)}(i.eventManager,e),r.length&&i.Va.a_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function yX(n,e,t){return QT.apply(this,arguments)}function QT(){return QT=(0,ne.Z)(function*(n,e,t){const i=Ee(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.ya.get(e),o=r&&r.key;if(o){let s=new dn(we.comparator);s=s.insert(o,xn.newNoDocument(o,Ue.min()));const a=ct().add(o),l=new Tm(Ue.min(),new Map,new dn(rt),s,a);yield FV(i,l),i.pa=i.pa.remove(o),i.ya.delete(e),iD(i)}else yield uh(i.localStore,e,!1).then(()=>_h(i,e,t)).catch(ol)}),QT.apply(this,arguments)}function bX(n,e){return YT.apply(this,arguments)}function YT(){return YT=(0,ne.Z)(function*(n,e){const t=Ee(n),i=e.batch.batchId;try{const r=yield function LY(n,e){const t=Ee(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=t.ss.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const p=c.batch,g=p.keys();let _=U.resolve();return g.forEach(E=>{_=_.next(()=>h.getEntry(l,E)).next(x=>{const T=c.docVersions.get(E);Ve(null!==T),x.version.compareTo(T)<0&&(p.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),h.addEntry(x)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(t,i,e,o).next(()=>o.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=ct();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}(t.localStore,e);tD(t,i,null),eD(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield da(t,r)}catch(r){yield ol(r)}}),YT.apply(this,arguments)}function EX(n,e,t){return XT.apply(this,arguments)}function XT(){return XT=(0,ne.Z)(function*(n,e,t){const i=Ee(n);try{const r=yield function(s,a){const l=Ee(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(p=>(Ve(null!==p),h=p.keys(),l.mutationQueue.removeMutationBatch(c,p))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(i.localStore,e);tD(i,e,t),eD(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield da(i,r)}catch(r){yield ol(r)}}),XT.apply(this,arguments)}function JT(){return JT=(0,ne.Z)(function*(n,e){const t=Ee(n);vl(t.remoteStore)||fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const a=Ee(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(-1===i)return void e.resolve();const r=t.ba.get(i)||[];r.push(e),t.ba.set(i,r)}catch(i){const r=ph(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}),JT.apply(this,arguments)}function eD(n,e){(n.ba.get(e)||[]).forEach(t=>{t.resolve()}),n.ba.delete(e)}function tD(n,e,t){const i=Ee(n);let r=i.Sa[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),i.Sa[i.currentUser.toKey()]=r}}function _h(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.fa.get(e))n.ma.delete(i),t&&n.Va.Fa(i,t);n.fa.delete(e),n.isPrimaryClient&&n.wa.Rr(e).forEach(i=>{n.wa.containsKey(i)||VV(n,i)})}function VV(n,e){n.ga.delete(e.path.canonicalString());const t=n.pa.get(e);null!==t&&(Um(n.remoteStore,t),n.pa=n.pa.remove(e),n.ya.delete(t),iD(n))}function nD(n,e,t){for(const i of t)i instanceof kV?(n.wa.addReference(i.key,e),IX(n,i)):i instanceof OV?(fe("SyncEngine","Document no longer in limbo: "+i.key),n.wa.removeReference(i.key,e),n.wa.containsKey(i.key)||VV(n,i.key)):Me()}function IX(n,e){const t=e.key,i=t.path.canonicalString();n.pa.get(t)||n.ga.has(i)||(fe("SyncEngine","New document in limbo: "+t),n.ga.add(i),iD(n))}function iD(n){for(;n.ga.size>0&&n.pa.size<n.maxConcurrentLimboResolutions;){const e=n.ga.values().next().value;n.ga.delete(e);const t=new we(Nt.fromString(e)),i=n.Da.next();n.ya.set(i,new pX(t)),n.pa=n.pa.insert(t,i),Tb(n.remoteStore,new ua(Er(Qd(t.path)),i,"TargetPurposeLimboResolution",eo._e))}}function da(n,e,t){return rD.apply(this,arguments)}function rD(){return rD=(0,ne.Z)(function*(n,e,t){const i=Ee(n),r=[],o=[],s=[];var a;i.ma.isEmpty()||(i.ma.forEach((a,l)=>{s.push(i.va(l,e,t).then(c=>{if((c||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,c?.fromCache?"not-current":"current"),c){r.push(c);const h=lT.Qi(l.targetId,c);o.push(h)}}))}),yield Promise.all(s),i.Va.a_(r),yield(a=(0,ne.Z)(function*(c,h){const p=Ee(c);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>U.forEach(h,_=>U.forEach(_.ki,E=>p.persistence.referenceDelegate.addReference(g,_.targetId,E)).next(()=>U.forEach(_.qi,E=>p.persistence.referenceDelegate.removeReference(g,_.targetId,E)))))}catch(g){if(!sl(g))throw g;fe("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const _=g.targetId;if(!g.fromCache){const E=p.ts.get(_),T=E.withLastLimboFreeSnapshotVersion(E.snapshotVersion);p.ts=p.ts.insert(_,T)}}}),function l(c,h){return a.apply(this,arguments)})(i.localStore,o))}),rD.apply(this,arguments)}function xX(n,e){return oD.apply(this,arguments)}function oD(){return oD=(0,ne.Z)(function*(n,e){const t=Ee(n);if(!t.currentUser.isEqual(e)){fe("SyncEngine","User change. New user:",e.toKey());const i=yield hV(t.localStore,e);t.currentUser=e,(o=t).ba.forEach(a=>{a.forEach(l=>{l.reject(new ce(Y.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ba.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield da(t,i._s)}var o}),oD.apply(this,arguments)}function CX(n,e){const t=Ee(n),i=t.ya.get(e);if(i&&i.Ra)return ct().add(i.key);{let r=ct();const o=t.fa.get(e);if(!o)return r;for(const s of o){const a=t.ma.get(s);r=r.unionWith(a.view.ua)}return r}}function TX(n,e){return sD.apply(this,arguments)}function sD(){return sD=(0,ne.Z)(function*(n,e){const t=Ee(n),i=yield Eb(t.localStore,e.query,!0),r=e.view.da(i);return t.isPrimaryClient&&nD(t,e.targetId,r.Ta),r}),sD.apply(this,arguments)}function DX(n,e){return aD.apply(this,arguments)}function aD(){return aD=(0,ne.Z)(function*(n,e){const t=Ee(n);return gV(t.localStore,e).then(i=>da(t,i))}),aD.apply(this,arguments)}function AX(n,e,t,i){return lD.apply(this,arguments)}function lD(){return lD=(0,ne.Z)(function*(n,e,t,i){const r=Ee(n),o=yield function(a,l){const c=Ee(a),h=Ee(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Cn(p,l).next(g=>g?c.localDocuments.getDocuments(p,g):U.resolve(null)))}(r.localStore,e);var l;null!==o?("pending"===t?yield hh(r.remoteStore):"acknowledged"===t||"rejected"===t?(tD(r,e,i||null),eD(r,e),l=e,Ee(Ee(r.localStore).mutationQueue).Fn(l)):Me(),yield da(r,o)):fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),lD.apply(this,arguments)}function cD(){return cD=(0,ne.Z)(function*(n,e){const t=Ee(n);if(fD(t),pD(t),!0===e&&!0!==t.Ca){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield BV(t,i.toArray());t.Ca=!0,yield NT(t.remoteStore,!0);for(const o of r)Tb(t.remoteStore,o)}else if(!1===e&&!1!==t.Ca){const i=[];let r=Promise.resolve();t.fa.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?i.push(s):r=r.then(()=>(_h(t,s),uh(t.localStore,s,!0))),Um(t.remoteStore,s)}),yield r,yield BV(t,i),function(s){const a=Ee(s);a.ya.forEach((l,c)=>{Um(a.remoteStore,c)}),a.wa.Vr(),a.ya=new Map,a.pa=new dn(we.comparator)}(t),t.Ca=!1,yield NT(t.remoteStore,!1)}}),cD.apply(this,arguments)}function BV(n,e,t){return uD.apply(this,arguments)}function uD(){return uD=(0,ne.Z)(function*(n,e,t){const i=Ee(n),r=[],o=[];for(const s of e){let a;const l=i.fa.get(s);if(l&&0!==l.length){a=yield ch(i.localStore,Er(l[0]));for(const c of l){const h=i.ma.get(c),p=yield TX(i,h);p.snapshot&&o.push(p.snapshot)}}else{const c=yield mV(i.localStore,s);a=yield ch(i.localStore,c),yield qT(i,UV(c),s,!1,a.resumeToken)}r.push(a)}return i.Va.a_(o),r}),uD.apply(this,arguments)}function UV(n){return HL(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function RX(n){return t=Ee(n).localStore,Ee(Ee(t).persistence).Bi();var t}function MX(n,e,t,i){return dD.apply(this,arguments)}function dD(){return dD=(0,ne.Z)(function*(n,e,t,i){const r=Ee(n);if(r.Ca)return void fe("SyncEngine","Ignoring unexpected query state notification.");const o=r.fa.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const s=yield gV(r.localStore,ZL(o[0])),a=Tm.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,vi.EMPTY_BYTE_STRING);yield da(r,s,a);break}case"rejected":yield uh(r.localStore,e,!0),_h(r,e,i);break;default:Me()}}),dD.apply(this,arguments)}function PX(n,e,t){return hD.apply(this,arguments)}function hD(){return hD=(0,ne.Z)(function*(n,e,t){const i=fD(n);if(i.Ca){for(const r of e){if(i.fa.has(r)){fe("SyncEngine","Adding an already active target "+r);continue}const o=yield mV(i.localStore,r),s=yield ch(i.localStore,o);yield qT(i,UV(o),s.targetId,!1,s.resumeToken),Tb(i.remoteStore,s)}for(const r of t)i.fa.has(r)&&(yield uh(i.localStore,r,!1).then(()=>{Um(i.remoteStore,r),_h(i,r)}).catch(ol))}}),hD.apply(this,arguments)}function fD(n){const e=Ee(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=FV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CX.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yX.bind(null,e),e.Va.a_=cX.bind(null,e.eventManager),e.Va.Fa=uX.bind(null,e.eventManager),e}function pD(n){const e=Ee(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bX.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EX.bind(null,e),e}class jm{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ne.Z)(function*(){t.serializer=Vm(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return dV(this.persistence,new uV,e.initialUser,this.serializer)}createPersistence(e){return new rT(vb.jr,this.serializer)}createSharedClientState(e){return new bV}terminate(){var e=this;return(0,ne.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class mD extends jm{constructor(e,t,i){super(),this.xa=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,ne.Z)(function*(){yield t().call(i,e),yield i.xa.initialize(i,e),yield pD(i.xa.syncEngine),yield hh(i.xa.remoteStore),yield i.persistence.mi(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return dV(this.persistence,new uV,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new tV(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const i=new oQ(t,this.persistence);return new rQ(e.asyncQueue,i)}createPersistence(e){const t=aT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Xi.withCacheSize(this.cacheSizeBytes):Xi.DEFAULT;return new sT(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,wV(),Cb(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new bV}}class jV extends mD{constructor(e,t){super(e,t,!1),this.xa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,ne.Z)(function*(){yield t().call(i,e);const r=i.xa.syncEngine;i.sharedClientState instanceof gT&&(i.sharedClientState.syncEngine={Ys:AX.bind(null,r),Zs:MX.bind(null,r),Xs:PX.bind(null,r),Bi:RX.bind(null,r),Js:DX.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.mi(function(){var o=(0,ne.Z)(function*(s){yield function SX(n,e){return cD.apply(this,arguments)}(i.xa.syncEngine,s),i.gcScheduler&&(s&&!i.gcScheduler.started?i.gcScheduler.start():s||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(s&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():s||i.indexBackfillerScheduler.stop())});return function(s){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const t=wV();if(!gT.D(t))throw new ce(Y.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=aT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new gT(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class vh{initialize(e,t){var i=this;return(0,ne.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>LV(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=xX.bind(null,i.syncEngine),yield NT(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new lX}createDatastore(e){const t=Vm(e.databaseInfo.databaseId),i=new qY(e.databaseInfo);return new ZY(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return i=this.localStore,r=this.datastore,o=e.asyncQueue,s=t=>LV(this.syncEngine,t,0),a=EV.D()?new EV:new zY,new YY(i,r,o,s,a);var i,r,o,s,a}createSyncEngine(e,t){return function(r,o,s,a,l,c,h){const p=new mX(r,o,s,a,l,c);return h&&(p.Ca=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ne.Z)(function*(i){const r=Ee(i);fe("RemoteStore","RemoteStore shutting down."),r.C_.add(5),yield dh(r),r.F_.shutdown(),r.M_.set("Unknown")}),function t(i){return e.apply(this,arguments)})(this.remoteStore);var e}}function zV(n,e=10240){let t=0;return{read:()=>(0,ne.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,ne.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Ab{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):ni("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class NX{constructor(e,t){this.Ba=e,this.serializer=t,this.metadata=new _i,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(i=>{i&&i.Z_()?this.metadata.resolve(i.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.Y_)}`))},i=>this.metadata.reject(i))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,ne.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,ne.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,ne.Z)(function*(){const t=yield e.qa();if(null===t)return null;const i=e.La.decode(t),r=Number(i);isNaN(r)&&e.Qa(`length string (${i}) is not valid number`);const o=yield e.Ka(r);return new dX(JSON.parse(o),t.length+r)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,ne.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const t=e.$a();t<0&&e.Qa("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}Ka(e){var t=this;return(0,ne.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ua())&&t.Qa("Reached the end of bundle when more is expected.");const i=t.La.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,ne.Z)(function*(){const t=yield e.Ba.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class FX{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ne.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ce(Y.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,ne.Z)(function*(s,a){const l=Ee(s),c=Sm(l.serializer)+"/documents",h={documents:a.map(E=>Am(l.serializer,E))},p=yield l.Co("BatchGetDocuments",c,h,a.length),g=new Map;p.forEach(E=>{const x=function iY(n,e){return"found"in e?function(i,r){Ve(!!r.found);const o=ws(i,r.found.name),s=ii(r.found.updateTime),a=r.found.createTime?ii(r.found.createTime):Ue.min(),l=new zi({mapValue:{fields:r.found.fields}});return xn.newFoundDocument(o,s,a,l)}(n,e):"missing"in e?function(i,r){Ve(!!r.missing),Ve(!!r.readTime);const o=ws(i,r.missing),s=ii(r.readTime);return xn.newNoDocument(o,s)}(n,e):Me()}(l.serializer,E);g.set(x.key.toString(),x)});const _=[];return a.forEach(E=>{const x=g.get(E.toString());Ve(!!x),_.push(x)}),_}),function o(s,a){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new nh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ne.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const o=we.fromPath(r);e.mutations.push(new UC(o,e.precondition(o)))}),yield(i=(0,ne.Z)(function*(o,s){const a=Ee(o),l=Sm(a.serializer)+"/documents",c={writes:s.map(h=>Rm(a.serializer,h))};yield a.wo("Commit",l,c)}),function r(o,s){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Me();t=Ue.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new ce(Y.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ue.min())?Rn.exists(!1):Rn.updateTime(t):Rn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ue.min()))throw new ce(Y.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rn.updateTime(t)}return Rn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class LX{constructor(e,t,i,r,o){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=o,this.Wa=i.maxAttempts,this.zo=new vT(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,ne.Z)(function*(){const t=new FX(e.datastore),i=e.za(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(o=>{e.ja(o)}))}).catch(r=>{e.ja(r)})}))}za(e){try{const t=this.updateFunction(e);return!dm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!f2(t)}return!1}}class VX{constructor(e,t,i,r){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Ai.UNAUTHENTICATED,this.clientId=lL.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var s=(0,ne.Z)(function*(a){fe("FirestoreClient","Received user=",a.uid),yield o.authCredentialListener(a),o.user=a});return function(a){return s.apply(this,arguments)}}()),this.appCheckCredentials.start(i,s=>(fe("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}getConfiguration(){var e=this;return(0,ne.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ce(Y.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new _i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ne.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=ph(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function Sb(n,e){return gD.apply(this,arguments)}function gD(){return gD=(0,ne.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=(0,ne.Z)(function*(o){i.isEqual(o)||(yield hV(e.localStore,o),i=o)});return function(o){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),gD.apply(this,arguments)}function _D(n,e){return vD.apply(this,arguments)}function vD(){return vD=(0,ne.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield yD(n);fe("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>SV(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,o)=>SV(e.remoteStore,o)),n._onlineComponents=e}),vD.apply(this,arguments)}function $V(n){return"FirebaseError"===n.name?n.code===Y.FAILED_PRECONDITION||n.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function yD(n){return bD.apply(this,arguments)}function bD(){return bD=(0,ne.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){fe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Sb(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!$V(t))throw t;Or("Error using user provided cache. Falling back to memory cache: "+t),yield Sb(n,new jm)}}else fe("FirestoreClient","Using default OfflineComponentProvider"),yield Sb(n,new jm);return n._offlineComponents}),bD.apply(this,arguments)}function Rb(n){return ED.apply(this,arguments)}function ED(){return ED=(0,ne.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(fe("FirestoreClient","Using user provided OnlineComponentProvider"),yield _D(n,n._uninitializedComponentsProvider._online)):(fe("FirestoreClient","Using default OnlineComponentProvider"),yield _D(n,new vh))),n._onlineComponents}),ED.apply(this,arguments)}function HV(n){return yD(n).then(e=>e.persistence)}function yh(n){return yD(n).then(e=>e.localStore)}function qV(n){return Rb(n).then(e=>e.remoteStore)}function wD(n){return Rb(n).then(e=>e.syncEngine)}function bh(n){return ID.apply(this,arguments)}function ID(){return ID=(0,ne.Z)(function*(n){const e=yield Rb(n),t=e.eventManager;return t.onListen=gX.bind(null,e.syncEngine),t.onUnlisten=_X.bind(null,e.syncEngine),t}),ID.apply(this,arguments)}function GV(n,e,t={}){const i=new _i;return n.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function(o,s,a,l,c){const h=new Ab({next:g=>{s.enqueueAndForget(()=>UT(o,p));const _=g.docs.has(a);!_&&g.fromCache?c.reject(new ce(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&l&&"server"===l.source?c.reject(new ce(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new $T(Qd(a.path),h,{includeMetadataChanges:!0,J_:!0});return VT(o,p)}(yield bh(n),n.asyncQueue,e,t,i)})),i.promise}function ZV(n,e,t={}){const i=new _i;return n.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function(o,s,a,l,c){const h=new Ab({next:g=>{s.enqueueAndForget(()=>UT(o,p)),g.fromCache&&"server"===l.source?c.reject(new ce(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new $T(a,h,{includeMetadataChanges:!0,J_:!0});return VT(o,p)}(yield bh(n),n.asyncQueue,e,t,i)})),i.promise}function KV(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const QV=new Map;function xD(n,e,t){if(!t)throw new ce(Y.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function YV(n,e,t,i){if(!0===e&&!0===i)throw new ce(Y.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function XV(n){if(!we.isDocumentKey(n))throw new ce(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function JV(n){if(we.isDocumentKey(n))throw new ce(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Mb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(i=n).constructor?i.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var i;return"function"==typeof n?"a function":Me()}function At(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ce(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Mb(n);throw new ce(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function eB(n,e){if(e<=0)throw new ce(Y.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class tB{constructor(e){var t,i;if(void 0===e.host){if(void 0!==e.ssl)throw new ce(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ce(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=KV(null!==(i=e.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new ce(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ce(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ce(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zm{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tB({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ce(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ce(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tB(e),void 0!==e.credentials&&(this._authCredentials=function(i){if(!i)return new WK;switch(i.type){case"firstParty":return new QK(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ce(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=QV.get(t);i&&(fe("ComponentProvider","Removing Datastore"),QV.delete(t),i.terminate())}(this),Promise.resolve()}}function nB(n,e,t,i={}){var r;const o=(n=At(n,zm))._getSettings(),s=`${e}:${t}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&Or("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),i.mockUserToken){let a,l;if("string"==typeof i.mockUserToken)a=i.mockUserToken,l=Ai.MOCK_USER;else{a=(0,tn.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new ce(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ai(c)}n._authCredentials=new GK(new sL(a,l))}}class $i{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new $i(this.firestore,e,this._query)}}class Cn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Cn(this.firestore,e,this._key)}}class Is extends $i{constructor(e,t,i){super(e,t,Qd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Cn(this.firestore,null,new we(e))}withConverter(e){return new Is(this.firestore,e,this._path)}}function CD(n,e,...t){if(n=(0,tn.m9)(n),xD("collection","path",e),n instanceof zm){const i=Nt.fromString(e,...t);return JV(i),new Is(n,null,i)}{if(!(n instanceof Cn||n instanceof Is))throw new ce(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Nt.fromString(e,...t));return JV(i),new Is(n.firestore,null,i)}}function $m(n,e,...t){if(n=(0,tn.m9)(n),1===arguments.length&&(e=lL.newId()),xD("doc","path",e),n instanceof zm){const i=Nt.fromString(e,...t);return XV(i),new Cn(n,null,new we(i))}{if(!(n instanceof Cn||n instanceof Is))throw new ce(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Nt.fromString(e,...t));return XV(i),new Cn(n.firestore,n instanceof Is?n.converter:null,new we(i))}}function iB(n,e){return n=(0,tn.m9)(n),e=(0,tn.m9)(e),(n instanceof Cn||n instanceof Is)&&(e instanceof Cn||e instanceof Is)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function TD(n,e){return n=(0,tn.m9)(n),e=(0,tn.m9)(e),n instanceof $i&&e instanceof $i&&n.firestore===e.firestore&&ym(n._query,e._query)&&n.converter===e.converter}class QX{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new vT(this,"async_queue_retry"),this.iu=()=>{const t=Cb();t&&fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.zo.Qo()};const e=Cb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=Cb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const t=new _i;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,ne.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(t){if(!sl(t))throw t;fe("AsyncQueue","Operation failed with retryable error: "+t)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const t=this.Ja.then(()=>(this.tu=!0,e().catch(i=>{throw this.eu=i,this.tu=!1,ni("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(i)),i}).then(i=>(this.tu=!1,i))));return this.Ja=t,t}enqueueAfterDelay(e,t,i){this.su(),this.ru.indexOf(e)>-1&&(t=0);const r=LT.createAndSchedule(this,e,t,i,o=>this.au(o));return this.Xa.push(r),r}su(){this.eu&&Me()}verifyOperationInProgress(){}uu(){var e=this;return(0,ne.Z)(function*(){let t;do{t=e.Ja,yield t}while(t!==e.Ja)})()}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}function DD(n){return function(t,i){if("object"!=typeof t||null===t)return!1;const r=t;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class YX{constructor(){this._progressObserver={},this._taskCompletionResolver=new _i,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class hn extends zm{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new QX,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||rB(this),this._firestoreClient.terminate()}}function JX(n,e){const t="object"==typeof n?n:(0,kr.getApp)(),i="string"==typeof n?n:e||"(default)",r=(0,kr._getProvider)(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=(0,tn.P0)("firestore");o&&nB(r,...o)}return r}function Wn(n){return n._firestoreClient||rB(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function rB(n){var e,t,i;const r=n._freezeSettings(),o=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new TQ(n._databaseId,l,n._persistenceKey,(h=r).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,KV(h.experimentalLongPollingOptions),h.useFetchStreams));var l,h;n._firestoreClient=new VX(n._authCredentials,n._appCheckCredentials,n._queue,o),null!==(t=r.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(i=r.localCache)&&void 0!==i&&i._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function oB(n,e,t){const i=new _i;return n.asyncQueue.enqueue((0,ne.Z)(function*(){try{yield Sb(n,t),yield _D(n,e),i.resolve()}catch(r){const o=r;if(!$V(o))throw o;Or("Error enabling indexeddb cache. Falling back to memory cache: "+o),i.reject(o)}})).then(()=>i.promise)}function sB(n){if(n._initialized||n._terminated)throw new ce(Y.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class xs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xs(vi.fromBase64String(e))}catch(t){throw new ce(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xs(vi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ha{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ce(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new In(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Lc{constructor(e){this._methodName=e}}class Pb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}}const cJ=/^__.*__$/;class uJ{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new ca(e,this.data,this.fieldMask,t,this.fieldTransforms):new th(e,this.data,t,this.fieldTransforms)}}class aB{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ca(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function lB(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me()}}class kb{constructor(e,t,i,r,o,s){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===o&&this.Pu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new kb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:i,du:!1});return r.Au(e),r}Ru(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:i,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Fb(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(lB(this.Iu)&&cJ.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class dJ{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Vm(e)}pu(e,t,i,r=!1){return new kb({Iu:e,methodName:t,gu:i,path:In.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vc(n){const e=n._freezeSettings(),t=Vm(n._databaseId);return new dJ(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ob(n,e,t,i,r,o={}){const s=n.pu(o.merge||o.mergeFields?2:0,e,t,r);MD("Data must be an object, but it was:",s,i);const a=dB(i,s);let l,c;if(o.merge)l=new Nr(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const p of o.mergeFields){const g=Wm(e,p,t);if(!s.contains(g))throw new ce(Y.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);fB(h,g)||h.push(g)}l=new Nr(h),c=s.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,c=s.fieldTransforms;return new uJ(new zi(a),l,c)}class qm extends Lc{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qm}}function cB(n,e,t){return new kb({Iu:3,gu:e.settings.gu,methodName:n._methodName,du:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class AD extends Lc{_toFieldTransform(e){return new Im(e.path,new Jd)}isEqual(e){return e instanceof AD}}class hJ extends Lc{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=cB(this,e,!0),i=this.yu.map(o=>Bc(o,t)),r=new Ac(i);return new Im(e.path,r)}isEqual(e){return this===e}}class fJ extends Lc{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=cB(this,e,!0),i=this.yu.map(o=>Bc(o,t)),r=new Sc(i);return new Im(e.path,r)}isEqual(e){return this===e}}class pJ extends Lc{constructor(e,t){super(e),this.wu=t}_toFieldTransform(e){const t=new eh(e.serializer,t2(e.serializer,this.wu));return new Im(e.path,t)}isEqual(e){return this===e}}function SD(n,e,t,i){const r=n.pu(1,e,t);MD("Data must be an object, but it was:",r,i);const o=[],s=zi.empty();al(i,(l,c)=>{const h=Nb(e,l,t);c=(0,tn.m9)(c);const p=r.Ru(h);if(c instanceof qm)o.push(h);else{const g=Bc(c,p);null!=g&&(o.push(h),s.set(h,g))}});const a=new Nr(o);return new aB(s,a,r.fieldTransforms)}function RD(n,e,t,i,r,o){const s=n.pu(1,e,t),a=[Wm(e,i,t)],l=[r];if(o.length%2!=0)throw new ce(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(Wm(e,o[g])),l.push(o[g+1]);const c=[],h=zi.empty();for(let g=a.length-1;g>=0;--g)if(!fB(c,a[g])){const _=a[g];let E=l[g];E=(0,tn.m9)(E);const x=s.Ru(_);if(E instanceof qm)c.push(_);else{const T=Bc(E,x);null!=T&&(c.push(_),h.set(_,T))}}const p=new Nr(c);return new aB(h,p,s.fieldTransforms)}function uB(n,e,t,i=!1){return Bc(t,n.pu(i?4:3,e))}function Bc(n,e){if(hB(n=(0,tn.m9)(n)))return MD("Unsupported field value:",e,n),dB(n,e);if(n instanceof Lc)return function(i,r){if(!lB(r.Iu))throw r.mu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.mu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(i,r){const o=[];let s=0;for(const a of i){let l=Bc(a,r.Vu(s));null==l&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(n,e)}return function(i,r){if(null===(i=(0,tn.m9)(i)))return{nullValue:"NULL_VALUE"};if("number"==typeof i)return t2(r.serializer,i);if("boolean"==typeof i)return{booleanValue:i};if("string"==typeof i)return{stringValue:i};if(i instanceof Date){const o=Sn.fromDate(i);return{timestampValue:ih(r.serializer,o)}}if(i instanceof Sn){const o=new Sn(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ih(r.serializer,o)}}if(i instanceof Pb)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof xs)return{bytesValue:I2(r.serializer,i._byteString)};if(i instanceof Cn){const o=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(o))throw r.mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:WC(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.mu(`Unsupported field value: ${Mb(i)}`)}(n,e)}function dB(n,e){const t={};return IL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):al(n,(i,r)=>{const o=Bc(r,e.Eu(i));null!=o&&(t[i]=o)}),{mapValue:{fields:t}}}function hB(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Sn||n instanceof Pb||n instanceof xs||n instanceof Cn||n instanceof Lc)}function MD(n,e,t){if(!hB(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const i=Mb(t);throw e.mu("an object"===i?n+" a custom object":n+" "+i)}var r}function Wm(n,e,t){if((e=(0,tn.m9)(e))instanceof ha)return e._internalPath;if("string"==typeof e)return Nb(n,e);throw Fb("Field path arguments must be of type string or ",n,!1,void 0,t)}const mJ=new RegExp("[~\\*/\\[\\]]");function Nb(n,e,t){if(e.search(mJ)>=0)throw Fb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ha(...e.split("."))._internalPath}catch{throw Fb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Fb(n,e,t,i,r){const o=i&&!i.isEmpty(),s=void 0!==r;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${i}`),s&&(l+=` in document ${r}`),l+=")"),new ce(Y.INVALID_ARGUMENT,a+n+l)}function fB(n,e){return n.some(t=>t.isEqual(e))}class Gm{constructor(e,t,i,r,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Cn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new gJ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Lb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class gJ extends Gm{data(){return super.data()}}function Lb(n,e){return"string"==typeof e?Nb(n,e):e instanceof ha?e._internalPath:e._delegate._internalPath}function pB(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ce(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class PD{}class Zm extends PD{}function bl(n,e,...t){let i=[];e instanceof PD&&i.push(e),i=i.concat(t),function(o){const s=o.filter(l=>l instanceof Eh).length,a=o.filter(l=>l instanceof Km).length;if(s>1||s>0&&a>0)throw new ce(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class Km extends Zm{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Km(e,t,i)}_apply(e){const t=this._parse(e);return vB(e._query,t),new $i(e.firestore,e.converter,VC(e._query,t))}_parse(e){const t=Vc(e.firestore);return function(o,s,a,l,c,h,p){let g;if(c.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new ce(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){_B(p,h);const _=[];for(const E of p)_.push(gB(l,o,E));g={arrayValue:{values:_}}}else g=gB(l,o,p)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||_B(p,h),g=uB(a,"where",p,"in"===h||"not-in"===h);return Pt.create(c,h,g)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Eh extends PD{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Eh(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return 1===t.length?t[0]:Yt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,o){let s=r;const a=o.getFlattenedFilters();for(const l of a)vB(s,l),s=VC(s,l)}(e._query,t),new $i(e.firestore,e.converter,VC(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class kD extends Zm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new kD(e,t)}_apply(e){const t=function(r,o,s){if(null!==r.startAt)throw new ce(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ce(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _m(o,s)}(e._query,this._field,this._direction);return new $i(e.firestore,e.converter,function(r,o){const s=r.explicitOrderBy.concat([o]);return new aa(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Vb extends Zm{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new Vb(e,t,i)}_apply(e){return new $i(e.firestore,e.converter,ob(e._query,this._limit,this._limitType))}}class Bb extends Zm{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new Bb(e,t,i)}_apply(e){const t=mB(e,this.type,this._docOrFields,this._inclusive);return new $i(e.firestore,e.converter,(o=t,new aa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class Ub extends Zm{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new Ub(e,t,i)}_apply(e){const t=mB(e,this.type,this._docOrFields,this._inclusive);return new $i(e.firestore,e.converter,(o=t,new aa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function mB(n,e,t,i){if(t[0]=(0,tn.m9)(t[0]),t[0]instanceof Gm)return function(o,s,a,l,c){if(!l)throw new ce(Y.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const p of Yd(o))if(p.field.isKeyField())h.push(Tc(s,l.key));else{const g=l.data.field(p.field);if(Xy(g))throw new ce(Y.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===g){const _=p.field.canonicalString();throw new ce(Y.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}h.push(g)}return new fl(h,c)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=Vc(n.firestore);return function(s,a,l,c,h,p){const g=s.explicitOrderBy;if(h.length>g.length)throw new ce(Y.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let E=0;E<h.length;E++){const x=h[E];if(g[E].field.isKeyField()){if("string"!=typeof x)throw new ce(Y.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof x}`);if(!LC(s)&&-1!==x.indexOf("/"))throw new ce(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${x}' contains a slash.`);const T=s.path.child(Nt.fromString(x));if(!we.isDocumentKey(T))throw new ce(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);const V=new we(T);_.push(Tc(a,V))}else{const T=uB(l,c,x);_.push(T)}}return new fl(_,p)}(n._query,n.firestore._databaseId,r,e,t,i)}}function gB(n,e,t){if("string"==typeof(t=(0,tn.m9)(t))){if(""===t)throw new ce(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!LC(e)&&-1!==t.indexOf("/"))throw new ce(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Nt.fromString(t));if(!we.isDocumentKey(i))throw new ce(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Tc(n,new we(i))}if(t instanceof Cn)return Tc(n,t._key);throw new ce(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mb(t)}.`)}function _B(n,e){if(!Array.isArray(n)||0===n.length)throw new ce(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vB(n,e){const t=function(r,o){for(const s of r)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ce(Y.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class OD{convertValue(e,t="none"){switch(dl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(sa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Me()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return al(e,(r,o)=>{i[r]=this.convertValue(o,t)}),i}convertGeoPoint(e){return new Pb(qn(e.latitude),qn(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Jy(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(fm(e));default:return null}}convertTimestamp(e){const t=ll(e);return new Sn(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Nt.fromString(e);Ve(k2(i));const r=new cl(i.get(1),i.get(3)),o=new we(i.popFirst(5));return r.isEqual(t)||ni(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function jb(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class CJ extends OD{constructor(e){super(),this.firestore=e}convertBytes(e){return new xs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Cn(this.firestore,null,t)}}class Uc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fa extends Gm{constructor(e,t,i,r,o,s){super(e,t,i,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Qm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Lb("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Qm extends fa{data(e={}){return super.data(e)}}class El{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Uc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Qm(this._firestore,this._userDataWriter,i.key,i,new Uc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(a=>({type:"added",doc:new Qm(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Uc(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const l=new Qm(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Uc(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return 0!==a.type&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:DJ(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function DJ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me()}}function bB(n,e){return n instanceof fa&&e instanceof fa?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof El&&e instanceof El&&n._firestore===e._firestore&&TD(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function EB(n){n=At(n,Cn);const e=At(n.firestore,hn);return GV(Wn(e),n._key).then(t=>FD(e,n,t))}class wl extends OD{constructor(e){super(),this.firestore=e}convertBytes(e){return new xs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Cn(this.firestore,null,t)}}function wB(n){n=At(n,$i);const e=At(n.firestore,hn),t=Wn(e),i=new wl(e);return pB(n._query),ZV(t,n._query).then(r=>new El(e,i,n,r))}function ND(n,e,t){n=At(n,Cn);const i=At(n.firestore,hn),r=jb(n.converter,e,t);return wh(i,[Ob(Vc(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,Rn.none())])}function IB(n,e,t,...i){n=At(n,Cn);const r=At(n.firestore,hn),o=Vc(r);let s;return s="string"==typeof(e=(0,tn.m9)(e))||e instanceof ha?RD(o,"updateDoc",n._key,e,t,i):SD(o,"updateDoc",n._key,e),wh(r,[s.toMutation(n._key,Rn.exists(!0))])}function xB(n){return wh(At(n.firestore,hn),[new nh(n._key,Rn.none())])}function CB(n,...e){var t,i,r;n=(0,tn.m9)(n);let o={includeMetadataChanges:!1},s=0;"object"!=typeof e[s]||DD(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges};if(DD(e[s])){const p=e[s];e[s]=null===(t=p.next)||void 0===t?void 0:t.bind(p),e[s+1]=null===(i=p.error)||void 0===i?void 0:i.bind(p),e[s+2]=null===(r=p.complete)||void 0===r?void 0:r.bind(p)}let l,c,h;if(n instanceof Cn)c=At(n.firestore,hn),h=Qd(n._key.path),l={next:p=>{e[s]&&e[s](FD(c,n,p))},error:e[s+1],complete:e[s+2]};else{const p=At(n,$i);c=At(p.firestore,hn),h=p._query;const g=new wl(c);l={next:_=>{e[s]&&e[s](new El(c,g,p,_))},error:e[s+1],complete:e[s+2]},pB(n._query)}return function(g,_,E,x){const T=new Ab(x),V=new $T(_,T,E);return g.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return VT(yield bh(g),V)})),()=>{T.Na(),g.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return UT(yield bh(g),V)}))}}(Wn(c),h,a,l)}function wh(n,e){return function(i,r){const o=new _i;return i.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function vX(n,e,t){return ZT.apply(this,arguments)}(yield wD(i),r,o)})),o.promise}(Wn(n),e)}function FD(n,e,t){const i=t.docs.get(e._key),r=new wl(n);return new fa(n,r,e._key,i,new Uc(t.hasPendingWrites,t.fromCache),e.converter)}const zJ={maxAttempts:5};class TB{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Vc(e)}set(e,t,i){this._verifyNotCommitted();const r=Il(e,this._firestore),o=jb(r.converter,t,i),s=Ob(this._dataReader,"WriteBatch.set",r._key,o,null!==r.converter,i);return this._mutations.push(s.toMutation(r._key,Rn.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const o=Il(e,this._firestore);let s;return s="string"==typeof(t=(0,tn.m9)(t))||t instanceof ha?RD(this._dataReader,"WriteBatch.update",o._key,t,i,r):SD(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Rn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Il(e,this._firestore);return this._mutations=this._mutations.concat(new nh(t._key,Rn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ce(Y.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Il(n,e){if((n=(0,tn.m9)(n)).firestore!==e)throw new ce(Y.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class $J extends class{constructor(t,i){this._firestore=t,this._transaction=i,this._dataReader=Vc(t)}get(t){const i=Il(t,this._firestore),r=new CJ(this._firestore);return this._transaction.lookup([i._key]).then(o=>{if(!o||1!==o.length)return Me();const s=o[0];if(s.isFoundDocument())return new Gm(this._firestore,r,s.key,s,i.converter);if(s.isNoDocument())return new Gm(this._firestore,r,i._key,null,i.converter);throw Me()})}set(t,i,r){const o=Il(t,this._firestore),s=jb(o.converter,i,r),a=Ob(this._dataReader,"Transaction.set",o._key,s,null!==o.converter,r);return this._transaction.set(o._key,a),this}update(t,i,r,...o){const s=Il(t,this._firestore);let a;return a="string"==typeof(i=(0,tn.m9)(i))||i instanceof ha?RD(this._dataReader,"Transaction.update",s._key,i,r,o):SD(this._dataReader,"Transaction.update",s._key,i),this._transaction.update(s._key,a),this}delete(t){const i=Il(t,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Il(e,this._firestore),i=new wl(this._firestore);return super.get(e).then(r=>new fa(this._firestore,i,t._key,r._document,new Uc(!1,!1),t.converter))}}function VD(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ce("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function RB(){if(typeof Uint8Array>"u")throw new ce("unimplemented","Uint8Arrays are not available in this environment.")}function MB(){if(!function xQ(){return typeof atob<"u"}())throw new ce("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){zd=kr.SDK_VERSION,(0,kr._registerComponent)(new wN.wA("firestore",(i,{instanceIdentifier:r,options:o})=>{const s=i.getProvider("app").getImmediate(),a=new hn(new ZK(i.getProvider("auth-internal")),new YK(i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ce(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cl(c.options.projectId,h)}(s,r),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),(0,kr.registerVersion)(oL,"4.4.0",e),(0,kr.registerVersion)(oL,"4.4.0","esm2017")}();class Ym{constructor(e){this._delegate=e}static fromBase64String(e){return MB(),new Ym(xs.fromBase64String(e))}static fromUint8Array(e){return RB(),new Ym(xs.fromUint8Array(e))}toBase64(){return MB(),this._delegate.toBase64()}toUint8Array(){return RB(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function BD(n){return function JJ(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class eee{enableIndexedDbPersistence(e,t){return function eJ(n,e){sB(n=At(n,hn));const t=Wn(n);if(t._uninitializedComponentsProvider)throw new ce(Y.FAILED_PRECONDITION,"SDK cache is already specified.");Or("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=n._freezeSettings(),r=new vh;return oB(t,r,new mD(r,i.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function tJ(n){sB(n=At(n,hn));const e=Wn(n);if(e._uninitializedComponentsProvider)throw new ce(Y.FAILED_PRECONDITION,"SDK cache is already specified.");Or("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),i=new vh;return oB(e,i,new jV(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function nJ(n){if(n._initialized&&!n._terminated)throw new ce(Y.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new _i;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ne.Z)(function*(){try{yield(t=(0,ne.Z)(function*(r){if(!Go.D())return Promise.resolve();const o=r+"main";yield Go.delete(o)}),function i(r){return t.apply(this,arguments)})(aT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class PB{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof cl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Or("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){nB(this._delegate,e,t,i)}enableNetwork(){return function rJ(n){return function BX(n){return n.asyncQueue.enqueue((0,ne.Z)(function*(){const e=yield HV(n),t=yield qV(n);return e.setNetworkEnabled(!0),function(r){const o=Ee(r);return o.C_.delete(0),Bm(o)}(t)}))}(Wn(n=At(n,hn)))}(this._delegate)}disableNetwork(){return function oJ(n){return function UX(n){return n.asyncQueue.enqueue((0,ne.Z)(function*(){const e=yield HV(n),t=yield qV(n);return e.setNetworkEnabled(!1),(i=(0,ne.Z)(function*(o){const s=Ee(o);s.C_.add(0),yield dh(s),s.M_.set("Offline")}),function r(o){return i.apply(this,arguments)})(t);var i}))}(Wn(n=At(n,hn)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,YV("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function iJ(n){return function(t){const i=new _i;return t.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function wX(n,e){return JT.apply(this,arguments)}(yield wD(t),i)})),i.promise}(Wn(n=At(n,hn)))}(this._delegate)}onSnapshotsInSync(e){return function kJ(n,e){return function $X(n,e){const t=new Ab(e);return n.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return r=yield bh(n),o=t,Ee(r).q_.add(o),void o.next();var r,o})),()=>{t.Na(),n.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return r=yield bh(n),o=t,void Ee(r).q_.delete(o);var r,o}))}}(Wn(n=At(n,hn)),DD(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ce("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ih(this,CD(this._delegate,e))}catch(t){throw wr(t,"collection()","Firestore.collection()")}}doc(e){try{return new Mo(this,$m(this._delegate,e))}catch(t){throw wr(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ir(this,function KX(n,e){if(n=At(n,zm),xD("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ce(Y.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new $i(n,null,(i=e,new aa(Nt.emptyPath(),i)));var i}(this._delegate,e))}catch(t){throw wr(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function HJ(n,e,t){n=At(n,hn);const i=Object.assign(Object.assign({},zJ),t);return function(o){if(o.maxAttempts<1)throw new ce(Y.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(o,s,a){const l=new _i;return o.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){const c=yield function WV(n){return Rb(n).then(e=>e.datastore)}(o);new LX(o.asyncQueue,c,a,s,l).run()})),l.promise}(Wn(n),r=>e(new $J(n,r)),i)}(this._delegate,t=>e(new kB(this,t)))}batch(){return Wn(this._delegate),new OB(new TB(this._delegate,e=>wh(this._delegate,e)))}loadBundle(e){return function sJ(n,e){const t=Wn(n=At(n,hn)),i=new YX;return function HX(n,e,t,i){const r=function(s,a){let l;return l="string"==typeof s?m2().encode(s):s,h=function(h,p){if(h instanceof Uint8Array)return zV(h,p);if(h instanceof ArrayBuffer)return zV(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new NX(h,a);var h}(t,Vm(e));n.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){!function kX(n,e,t){const i=Ee(n);var r;(r=(0,ne.Z)(function*(s,a,l){try{const c=yield a.getMetadata();if(yield function(E,x){const T=Ee(E),V=ii(x.createTime);return T.persistence.runTransaction("hasNewerBundle","readonly",M=>T.Kr.getBundleMetadata(M,x.id)).then(M=>!!M&&M.createTime.compareTo(V)>=0)}(s.localStore,c))return yield a.close(),l._completeWith({taskState:"Success",documentsLoaded:(E=c).totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}),Promise.resolve(new Set);l._updateProgress(PV(c));const h=new hX(c,s.localStore,a.serializer);let p=yield a.Ma();for(;p;){const _=yield h.ea(p);_&&l._updateProgress(_),p=yield a.Ma()}const g=yield h.complete();return yield da(s,g.ra,void 0),yield function(E,x){const T=Ee(E);return T.persistence.runTransaction("Save bundle","readwrite",V=>T.Kr.saveBundleMetadata(V,x))}(s.localStore,c),l._completeWith(g.progress),Promise.resolve(g.na)}catch(c){return Or("SyncEngine",`Loading bundle failed with ${c}`),l._failWith(c),Promise.resolve(new Set)}var E}),function o(s,a,l){return r.apply(this,arguments)})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield wD(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function aJ(n,e){return function qX(n,e){return n.asyncQueue.enqueue((0,ne.Z)(function*(){return function(i,r){const o=Ee(i);return o.persistence.runTransaction("Get named query","readonly",s=>o.Kr.getNamedQuery(s,r))}(yield yh(n),e)}))}(Wn(n=At(n,hn)),e).then(t=>t?new $i(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ir(this,t):null)}}class $b extends OD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ym(new xs(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Mo.forKey(t,this.firestore,null)}}class kB{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new $b(e)}get(e){const t=zc(e);return this._delegate.get(t).then(i=>new Xm(this._firestore,new fa(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=zc(e);return i?(VD("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const o=zc(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,i,...r),this}delete(e){const t=zc(e);return this._delegate.delete(t),this}}class OB{constructor(e){this._delegate=e}set(e,t,i){const r=zc(e);return i?(VD("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const o=zc(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,i,...r),this}delete(e){const t=zc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class jc{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new Qm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Jm(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=jc.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let o=r.get(t);return o||(o=new jc(e,new $b(e),t),r.set(t,o)),o}}jc.INSTANCES=new WeakMap;class Mo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new $b(e)}static forPath(e,t,i){if(e.length%2!=0)throw new ce("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Mo(t,new Cn(t._delegate,i,new we(e)))}static forKey(e,t,i){return new Mo(t,new Cn(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Ih(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ih(this.firestore,CD(this._delegate,e))}catch(t){throw wr(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,tn.m9)(e))instanceof Cn&&iB(this._delegate,e)}set(e,t){t=VD("DocumentReference.set",t);try{return t?ND(this._delegate,e,t):ND(this._delegate,e)}catch(i){throw wr(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?IB(this._delegate,e):IB(this._delegate,e,t,...i)}catch(r){throw wr(r,"updateDoc()","DocumentReference.update()")}}delete(){return xB(this._delegate)}onSnapshot(...e){const t=NB(e),i=FB(e,r=>new Xm(this.firestore,new fa(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return CB(this._delegate,t,i)}get(e){let t;return t="cache"===e?.source?function AJ(n){n=At(n,Cn);const e=At(n.firestore,hn),t=Wn(e),i=new wl(e);return function jX(n,e){const t=new _i;return n.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return(i=(0,ne.Z)(function*(o,s,a){try{const l=yield function(h,p){const g=Ee(h);return g.persistence.runTransaction("read document","readonly",_=>g.localDocuments.getDocument(_,p))}(o,s);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new ce(Y.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const c=ph(l,`Failed to get document '${s} from cache`);a.reject(c)}}),function r(o,s,a){return i.apply(this,arguments)})(yield yh(n),e,t);var i})),t.promise}(t,n._key).then(r=>new fa(e,i,n._key,r,new Uc(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function SJ(n){n=At(n,Cn);const e=At(n.firestore,hn);return GV(Wn(e),n._key,{source:"server"}).then(t=>FD(e,n,t))}(this._delegate):EB(this._delegate),t.then(i=>new Xm(this.firestore,new fa(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Mo(this.firestore,this._delegate.withConverter(e?jc.getInstance(this.firestore,e):null))}}function wr(n,e,t){return n.message=n.message.replace(e,t),n}function NB(n){for(const e of n)if("object"==typeof e&&!BD(e))return e;return{}}function FB(n,e){var t,i;let r;return r=BD(n[0])?n[0]:BD(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{r.next&&r.next(e(o))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class Xm{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Mo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return bB(this._delegate,e._delegate)}}class Jm extends Xm{data(e){const t=this._delegate.data(e);return this._delegate._converter||function qK(n,e){n||Me()}(void 0!==t),t}}class Ir{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new $b(e)}where(e,t,i){try{return new Ir(this.firestore,bl(this._delegate,function _J(n,e,t){const i=e,r=Lb("where",n);return Km._create(r,i,t)}(e,t,i)))}catch(r){throw wr(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ir(this.firestore,bl(this._delegate,function vJ(n,e="asc"){const t=e,i=Lb("orderBy",n);return kD._create(i,t)}(e,t)))}catch(i){throw wr(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ir(this.firestore,bl(this._delegate,function yJ(n){return eB("limit",n),Vb._create("limit",n,"F")}(e)))}catch(t){throw wr(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ir(this.firestore,bl(this._delegate,function bJ(n){return eB("limitToLast",n),Vb._create("limitToLast",n,"L")}(e)))}catch(t){throw wr(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ir(this.firestore,bl(this._delegate,function EJ(...n){return Bb._create("startAt",n,!0)}(...e)))}catch(t){throw wr(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ir(this.firestore,bl(this._delegate,function wJ(...n){return Bb._create("startAfter",n,!1)}(...e)))}catch(t){throw wr(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ir(this.firestore,bl(this._delegate,function IJ(...n){return Ub._create("endBefore",n,!1)}(...e)))}catch(t){throw wr(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ir(this.firestore,bl(this._delegate,function xJ(...n){return Ub._create("endAt",n,!0)}(...e)))}catch(t){throw wr(t,"endAt()","Query.endAt()")}}isEqual(e){return TD(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function RJ(n){n=At(n,$i);const e=At(n.firestore,hn),t=Wn(e),i=new wl(e);return function zX(n,e){const t=new _i;return n.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return(i=(0,ne.Z)(function*(o,s,a){try{const l=yield Eb(o,s,!0),c=new NV(s,l.ls),h=c.ca(l.documents),p=c.applyChanges(h,!1);a.resolve(p.snapshot)}catch(l){const c=ph(l,`Failed to execute query '${s} against cache`);a.reject(c)}}),function r(o,s,a){return i.apply(this,arguments)})(yield yh(n),e,t);var i})),t.promise}(t,n._query).then(r=>new El(e,i,n,r))}(this._delegate):"server"===e?.source?function MJ(n){n=At(n,$i);const e=At(n.firestore,hn),t=Wn(e),i=new wl(e);return ZV(t,n._query,{source:"server"}).then(r=>new El(e,i,n,r))}(this._delegate):wB(this._delegate),t.then(i=>new UD(this.firestore,new El(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=NB(e),i=FB(e,r=>new UD(this.firestore,new El(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return CB(this._delegate,t,i)}withConverter(e){return new Ir(this.firestore,this._delegate.withConverter(e?jc.getInstance(this.firestore,e):null))}}class nee{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Jm(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class UD{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ir(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Jm(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new nee(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new Jm(this._firestore,i))})}isEqual(e){return bB(this._delegate,e._delegate)}}class Ih extends Ir{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Mo(this.firestore,e):null}doc(e){try{return new Mo(this.firestore,void 0===e?$m(this._delegate):$m(this._delegate,e))}catch(t){throw wr(t,"doc()","CollectionReference.doc()")}}add(e){return function PJ(n,e){const t=At(n.firestore,hn),i=$m(n),r=jb(n.converter,e);return wh(t,[Ob(Vc(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Rn.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new Mo(this.firestore,t))}isEqual(e){return iB(this._delegate,e._delegate)}withConverter(e){return new Ih(this.firestore,this._delegate.withConverter(e?jc.getInstance(this.firestore,e):null))}}function zc(n){return At(n,Cn)}class jD{constructor(...e){this._delegate=new ha(...e)}static documentId(){return new jD(In.keyField().canonicalString())}isEqual(e){return(e=(0,tn.m9)(e))instanceof ha&&this._delegate._internalPath.isEqual(e._internalPath)}}class $c{constructor(e){this._delegate=e}static serverTimestamp(){const e=function WJ(){return new AD("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new $c(e)}static delete(){const e=function qJ(){return new qm("deleteField")}();return e._methodName="FieldValue.delete",new $c(e)}static arrayUnion(...e){const t=function GJ(...n){return new hJ("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new $c(t)}static arrayRemove(...e){const t=function ZJ(...n){return new fJ("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new $c(t)}static increment(e){const t=function KJ(n){return new pJ("increment",n)}(e);return t._methodName="FieldValue.increment",new $c(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const iee={Firestore:PB,GeoPoint:Pb,Timestamp:Sn,Blob:Ym,Transaction:kB,WriteBatch:OB,DocumentReference:Mo,DocumentSnapshot:Xm,Query:Ir,QueryDocumentSnapshot:Jm,QuerySnapshot:UD,CollectionReference:Ih,FieldPath:jD,FieldValue:$c,setLogLevel:function tee(n){!function HK(n){rl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function LB(n,e){return function see(n,e=Bp){return new Ke(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}(n,e)}function zD(n,e){return LB(n,e).pipe(be(t=>({payload:t,type:"query"})))}!function oee(n){(function ree(n,e){n.INTERNAL.registerComponent(new wN.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},iee)))})(n,(e,t)=>new PB(e,t,new eee)),n.registerVersion("@firebase/firestore-compat","0.3.23")}(ia.Z);class VB{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:r,query:o}=zB(i,t);return new jB(r,o,this.afs)}snapshotChanges(){return function aee(n,e){return LB(n,e).pipe(vc(void 0),Fx(),be(t=>{const[i,r]=t;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Yr)}valueChanges(e={}){return this.snapshotChanges().pipe(be(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return b(this.ref.get(e)).pipe(Yr)}}function Hb(n,e){return zD(n,e).pipe(vc(void 0),Fx(),be(t=>{const[i,r]=t,o=r.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,l)=>{const c=o.find(p=>p.doc.ref.isEqual(a.ref)),h=i?.payload.docs.find(p=>p.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),s}))}function BB(n,e,t){return Hb(n,t).pipe(wy((i,r)=>function lee(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function cee(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return $D(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return $D(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return $D(n,e.oldIndex,1)}return n}(n,i))}),n}(i,r.map(o=>o.payload),e),[]),We(),be(i=>i.map(r=>({type:r.type,payload:r}))))}function $D(n,e,t,...i){const r=n.slice();return r.splice(e,t,...i),r}function UB(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class jB{ref;query;afs;constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=Hb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(be(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(vc(void 0),Fx(),gi(([i,r])=>r.length>0||!i),be(([,i])=>i),Yr)}auditTrail(e){return this.stateChanges(e).pipe(wy((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=UB(e);return BB(this.query,t,this.afs.schedulers.outsideAngular).pipe(Yr)}valueChanges(e={}){return zD(this.query,this.afs.schedulers.outsideAngular).pipe(be(t=>t.payload.docs.map(i=>e.idField?{...i.data(),[e.idField]:i.id}:i.data())),Yr)}get(e){return b(this.query.get(e)).pipe(Yr)}add(e){return this.ref.add(e)}doc(e){return new VB(this.ref.doc(e),this.afs)}}class uee{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Hb(this.query,this.afs.schedulers.outsideAngular).pipe(be(t=>t.filter(i=>e.indexOf(i.type)>-1)),gi(t=>t.length>0),Yr):Hb(this.query,this.afs.schedulers.outsideAngular).pipe(Yr)}auditTrail(e){return this.stateChanges(e).pipe(wy((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=UB(e);return BB(this.query,t,this.afs.schedulers.outsideAngular).pipe(Yr)}valueChanges(e={}){return zD(this.query,this.afs.schedulers.outsideAngular).pipe(be(i=>i.payload.docs.map(r=>e.idField?{[e.idField]:r.id,...r.data()}:r.data())),Yr)}get(e){return b(this.query.get(e)).pipe(Yr)}}const dee=new re("angularfire2.enableFirestorePersistence"),hee=new re("angularfire2.firestore.persistenceSettings"),fee=new re("angularfire2.firestore.settings"),pee=new re("angularfire2.firestore.use-emulator");function zB(n,e=(t=>t)){return{query:e(n),ref:n}}let $B=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,i,r,o,s,a,l,c,h,p,g,_,E,x,T,V,M){this.schedulers=l;const j=Ox(t,a,i),ie=h;p&&LN(j,a,g,E,x,T,_,V),[this.firestore,this.persistenceEnabled$]=TN(`${j.name}.firestore`,"AngularFirestore",j.name,()=>{const _e=a.runOutsideAngular(()=>j.firestore());if(o&&_e.settings(o),ie&&_e.useEmulator(...ie),r&&!ay(s)){const Be=()=>{try{return b(_e.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(et){return typeof console<"u"&&console.warn(et),S(!1)}};return[_e,a.runOutsideAngular(Be)]}return[_e,S(!1)]},[o,ie,r])}collection(t,i){let r;r="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:s}=zB(r,i),a=this.schedulers.ngZone.run(()=>o);return new jB(a,s,this)}collectionGroup(t,i){const r=i||(s=>s),o=this.firestore.collectionGroup(t);return new uee(r(o),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const r=this.schedulers.ngZone.run(()=>i);return new VB(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||n)(F(my),F(gy,8),F(dee,8),F(fee,8),F(Io),F(it),F(py),F(hee,8),F(pee,8),F(yy,8),F(MN,8),F(PN,8),F(kN,8),F(ON,8),F(NN,8),F(FN,8),F(kx,8))};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();const{isArray:gee}=Array,{getPrototypeOf:_ee,prototype:vee,keys:yee}=Object;function HB(n){if(1===n.length){const e=n[0];if(gee(e))return{args:e,keys:null};if(function bee(n){return n&&"object"==typeof n&&_ee(n)===vee}(e)){const t=yee(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:Eee}=Array;function HD(n){return be(e=>function wee(n,e){return Eee(e)?n(...e):n(e)}(n,e))}function qB(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function qb(...n){const e=$r(n),t=ho(n),{args:i,keys:r}=HB(n);if(0===i.length)return b([],e);const o=new Ke(function Iee(n,e,t=Pn){return i=>{WB(e,()=>{const{length:r}=n,o=new Array(r);let s=r,a=r;for(let l=0;l<r;l++)WB(e,()=>{const c=b(n[l],e);let h=!1;c.subscribe(ye(i,p=>{o[l]=p,h||(h=!0,a--),a||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}(i,e,r?s=>qB(r,s):Pn));return t?o.pipe(HD(t)):o}function WB(n,e,t){n?sr(t,n,e):e()}function Wb(n){return new Ke(e=>{Et(n()).subscribe(e)})}function eg(n,e){const t=C(n)?n:()=>n,i=r=>r.error(t());return new Ke(e?r=>e.schedule(i,0,r):i)}function qD(){return se((n,e)=>{let t=null;n._refCount++;const i=ye(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class GB extends Ke{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ae(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new yt;const t=this.getSubject();e.add(this.source.subscribe(ye(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=yt.EMPTY)}return e}refCount(){return qD()(this)}}function xh(n,e){return C(e)?Ut(n,e,1):Ut(n,1)}function Hc(n){return se((e,t)=>{let o,i=null,r=!1;i=e.subscribe(ye(t,void 0,void 0,s=>{o=Et(n(s,Hc(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function WD(n){return n<=0?()=>kn:se((e,t)=>{let i=[];e.subscribe(ye(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function Ch(n){return se((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Gb(n){return se((e,t)=>{Et(n).subscribe(ye(t,()=>t.complete(),Oe)),!t.closed&&e.subscribe(t)})}const ut="primary",tg=Symbol("RouteTitle");class Tee{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Th(n){return new Tee(n)}function Dee(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let o=0;o<i.length;o++){const s=i[o],a=n[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Cs(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!ZB(n[r],e[r]))return!1;return!0}function ZB(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}return n===e}function KB(n){return n.length>0?n[n.length-1]:null}function xl(n){return function mee(n){return!!n&&(n instanceof Ke||C(n.lift)&&C(n.subscribe))}(n)?n:bp(n)?b(Promise.resolve(n)):S(n)}const See={exact:function XB(n,e,t){if(!qc(n.segments,e.segments)||!Zb(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!XB(n.children[i],e.children[i],t))return!1;return!0},subset:JB},QB={exact:function Ree(n,e){return Cs(n,e)},subset:function Mee(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ZB(n[t],e[t]))},ignored:()=>!0};function YB(n,e,t){return See[t.paths](n.root,e.root,t.matrixParams)&&QB[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function JB(n,e,t){return eU(n,e,e.segments,t)}function eU(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!qc(r,t)||e.hasChildren()||!Zb(r,t,i))}if(n.segments.length===t.length){if(!qc(n.segments,t)||!Zb(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!JB(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(qc(n.segments,r)&&Zb(n.segments,r,i)&&n.children[ut])&&eU(n.children[ut],e,o,i)}}function Zb(n,e,t){return e.every((i,r)=>QB[t](n[r].parameters,i.parameters))}class Dh{constructor(e=new Xt([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Th(this.queryParams)),this._queryParamMap}toString(){return Oee.serialize(this)}}class Xt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Kb(this)}}class ng{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Th(this.parameters)),this._parameterMap}toString(){return iU(this)}}function qc(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let ig=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ge({token:n,factory:function(){return new GD},providedIn:"root"})}return n})();class GD{parse(e){const t=new qee(e);return new Dh(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${rg(e.root,!0)}`,i=function Lee(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${Qb(t)}=${Qb(r)}`).join("&"):`${Qb(t)}=${Qb(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),r="string"==typeof e.fragment?`#${function Nee(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${i}${r}`}}const Oee=new GD;function Kb(n){return n.segments.map(e=>iU(e)).join("/")}function rg(n,e){if(!n.hasChildren())return Kb(n);if(e){const t=n.children[ut]?rg(n.children[ut],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==ut&&i.push(`${r}:${rg(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function kee(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===ut&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==ut&&(t=t.concat(e(r,i)))}),t}(n,(i,r)=>r===ut?[rg(n.children[ut],!1)]:[`${r}:${rg(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ut]?`${Kb(n)}/${t[0]}`:`${Kb(n)}/(${t.join("//")})`}}function tU(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Qb(n){return tU(n).replace(/%3B/gi,";")}function ZD(n){return tU(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Yb(n){return decodeURIComponent(n)}function nU(n){return Yb(n.replace(/\+/g,"%20"))}function iU(n){return`${ZD(n.path)}${function Fee(n){return Object.keys(n).map(e=>`;${ZD(e)}=${ZD(n[e])}`).join("")}(n.parameters)}`}const Vee=/^[^\/()?;#]+/;function KD(n){const e=n.match(Vee);return e?e[0]:""}const Bee=/^[^\/()?;=#]+/,jee=/^[^=?&#]+/,$ee=/^[^&#]+/;class qee{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xt([],{}):new Xt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[ut]=new Xt(e,t)),i}parseSegment(){const e=KD(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new B(4009,!1);return this.capture(e),new ng(Yb(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Uee(n){const e=n.match(Bee);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=KD(this.remaining);r&&(i=r,this.capture(i))}e[Yb(t)]=Yb(i)}parseQueryParam(e){const t=function zee(n){const e=n.match(jee);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const s=function Hee(n){const e=n.match($ee);return e?e[0]:""}(this.remaining);s&&(i=s,this.capture(i))}const r=nU(t),o=nU(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=KD(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new B(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ut);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[ut]:new Xt([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new B(4011,!1)}}function rU(n){return n.segments.length>0?new Xt([],{[ut]:n}):n}function oU(n){const e={};for(const i of Object.keys(n.children)){const o=oU(n.children[i]);if(i===ut&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}return function Wee(n){if(1===n.numberOfChildren&&n.children[ut]){const e=n.children[ut];return new Xt(n.segments.concat(e.segments),e.children)}return n}(new Xt(n.segments,e))}function Wc(n){return n instanceof Dh}function sU(n){let e;const r=rU(function t(o){const s={};for(const l of o.children){const c=t(l);s[l.outlet]=c}const a=new Xt(o.url,s);return o===n&&(e=a),a}(n.root));return e??r}function aU(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(0===e.length)return QD(r,r,r,t,i);const o=function Zee(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new cU(!0,0,n);let e=0,t=!1;const i=n.reduce((r,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===s?(o.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,o]},[]);return new cU(t,e,i)}(e);if(o.toRoot())return QD(r,r,new Xt([],{}),t,i);const s=function Kee(n,e,t){if(n.isAbsolute)return new Jb(e,!0,0);if(!t)return new Jb(e,!1,NaN);if(null===t.parent)return new Jb(t,!0,0);const i=Xb(n.commands[0])?0:1;return function Qee(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new B(4005,!1);r=i.segments.length}return new Jb(i,!1,r-o)}(t,t.segments.length-1+i,n.numberOfDoubleDots)}(o,r,n),a=s.processChildren?sg(s.segmentGroup,s.index,o.commands):uU(s.segmentGroup,s.index,o.commands);return QD(r,s.segmentGroup,a,t,i)}function Xb(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function og(n){return"object"==typeof n&&null!=n&&n.outlets}function QD(n,e,t,i,r){let s,o={};i&&Object.entries(i).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(h=>`${h}`):`${c}`}),s=n===e?t:lU(n,e,t);const a=rU(oU(s));return new Dh(a,o,r)}function lU(n,e,t){const i={};return Object.entries(n.children).forEach(([r,o])=>{i[r]=o===e?t:lU(o,e,t)}),new Xt(n.segments,i)}class cU{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Xb(i[0]))throw new B(4003,!1);const r=i.find(og);if(r&&r!==KB(i))throw new B(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Jb{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function uU(n,e,t){if(n||(n=new Xt([],{})),0===n.segments.length&&n.hasChildren())return sg(n,e,t);const i=function Xee(n,e,t){let i=0,r=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;const s=n.segments[r],a=t[i];if(og(a))break;const l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!hU(l,c,s))return o;i+=2}else{if(!hU(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const o=new Xt(n.segments.slice(0,i.pathIndex),{});return o.children[ut]=new Xt(n.segments.slice(i.pathIndex),n.children),sg(o,0,r)}return i.match&&0===r.length?new Xt(n.segments,{}):i.match&&!n.hasChildren()?YD(n,e,t):i.match?sg(n,0,r):YD(n,e,t)}function sg(n,e,t){if(0===t.length)return new Xt(n.segments,{});{const i=function Yee(n){return og(n[0])?n[0].outlets:{[ut]:n}}(t),r={};if(Object.keys(i).some(o=>o!==ut)&&n.children[ut]&&1===n.numberOfChildren&&0===n.children[ut].segments.length){const o=sg(n.children[ut],e,t);return new Xt(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=uU(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{void 0===i[o]&&(r[o]=s)}),new Xt(n.segments,r)}}function YD(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const o=t[r];if(og(o)){const l=Jee(o.outlets);return new Xt(i,l)}if(0===r&&Xb(t[0])){i.push(new ng(n.segments[e].path,dU(t[0]))),r++;continue}const s=og(o)?o.outlets[ut]:`${o}`,a=r<t.length-1?t[r+1]:null;s&&a&&Xb(a)?(i.push(new ng(s,dU(a))),r+=2):(i.push(new ng(s,{})),r++)}return new Xt(i,{})}function Jee(n){const e={};return Object.entries(n).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(e[t]=YD(new Xt([],{}),0,i))}),e}function dU(n){const e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function hU(n,e,t){return n==t.path&&Cs(e,t.parameters)}const ag="imperative";class Ts{constructor(e,t){this.id=e,this.url=t}}class e0 extends Ts{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class pa extends Ts{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class lg extends Ts{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ah extends Ts{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}}class t0 extends Ts{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class fU extends Ts{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ete extends Ts{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tte extends Ts{constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class nte extends Ts{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ite extends Ts{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rte{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ote{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ste{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ate{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lte{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cte{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pU{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class XD{}class JD{constructor(e){this.url=e}}class ute{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new cg,this.attachRef=null}}let cg=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new ute,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class mU{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=eA(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=eA(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=tA(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return tA(e,this._root).map(t=>t.value)}}function eA(n,e){if(n===e.value)return e;for(const t of e.children){const i=eA(n,t);if(i)return i}return null}function tA(n,e){if(n===e.value)return[e];for(const t of e.children){const i=tA(n,t);if(i.length)return i.unshift(e),i}return[]}class ma{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Sh(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class gU extends mU{constructor(e,t){super(e),this.snapshot=t,nA(this,e)}toString(){return this.snapshot.toString()}}function _U(n,e){const t=function dte(n,e){const s=new n0([],{},{},"",{},ut,e,null,{});return new yU("",new ma(s,[]))}(0,e),i=new y([new ng("",{})]),r=new y({}),o=new y({}),s=new y({}),a=new y(""),l=new Cl(i,r,s,a,o,ut,e,t.root);return l.snapshot=t.root,new gU(new ma(l,[]),t)}class Cl{constructor(e,t,i,r,o,s,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(be(c=>c[tg]))??S(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(be(e=>Th(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(be(e=>Th(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function vU(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],o=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function hte(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class n0{get title(){return this.data?.[tg]}constructor(e,t,i,r,o,s,a,l,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Th(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Th(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class yU extends mU{constructor(e,t){super(t),this.url=e,nA(this,t)}toString(){return bU(this._root)}}function nA(n,e){e.value._routerState=n,e.children.forEach(t=>nA(n,t))}function bU(n){const e=n.children.length>0?` { ${n.children.map(bU).join(", ")} } `:"";return`${n.value}${e}`}function iA(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Cs(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Cs(e.params,t.params)||n.paramsSubject.next(t.params),function Aee(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Cs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Cs(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function rA(n,e){const t=Cs(n.params,e.params)&&function Pee(n,e){return qc(n,e)&&n.every((t,i)=>Cs(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||rA(n.parent,e.parent))}let oA=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ut,this.activateEvents=new En,this.deactivateEvents=new En,this.attachEvents=new En,this.detachEvents=new En,this.parentContexts=xe(cg),this.location=xe(To),this.changeDetector=xe(Wv),this.environmentInjector=xe(Gr),this.inputBinder=xe(r0,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new B(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new B(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new B(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new B(4013,!1);this._activatedRoute=t;const r=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new fte(t,a,r.injector);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=He({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ar]})}return n})();class fte{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Cl?this.route:e===cg?this.childContexts:this.parent.get(e,t)}}const r0=new re("");let EU=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:i}=t,r=qb([i.queryParams,i.params,i.data]).pipe(Ae(([o,s,a],l)=>(a={...o,...s,...a},0===l?S(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(t);const s=function F8(n){const e=wt(n);if(!e)return null;const t=new fp(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(i.component);if(s)for(const{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,r)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac})}return n})();function ug(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function mte(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return ug(n,i,r);return ug(n,i)})}(n,e,t);return new ma(i,r)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ug(n,a)),s}}const i=function gte(n){return new Cl(new y(n.url),new y(n.params),new y(n.queryParams),new y(n.fragment),new y(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(o=>ug(n,o));return new ma(i,r)}}const sA="ngNavigationCancelingError";function wU(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=Wc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=IU(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function IU(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[sA]=!0,i.cancellationCode=e,t&&(i.url=t),i}function xU(n){return n&&n[sA]}let CU=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=On({type:n,selectors:[["ng-component"]],standalone:!0,features:[ok],decls:1,vars:0,template:function(i,r){1&i&&Ze(0,"router-outlet")},dependencies:[oA],encapsulation:2})}return n})();function aA(n){const e=n.children&&n.children.map(aA),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ut&&(t.component=CU),t}function Zo(n){return n.outlet||ut}function dg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class xte{constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),iA(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Sh(t);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){const r=e.value,o=t?t.value:null;if(r===o)if(r.component){const s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Sh(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);if(i&&i.outlet){const s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Sh(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){const r=Sh(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new cte(o.value.snapshot))}),e.children.length&&this.forwardEvent(new ate(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,o=t?t.value:null;if(iA(r),r===o)if(r.component){const s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),iA(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=dg(r.snapshot);s.attachRef=null,s.route=r,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,i)}}class TU{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class o0{constructor(e,t){this.component=e,this.route=t}}function Cte(n,e,t){const i=n._root;return hg(i,e?e._root:null,t,[i.value])}function Rh(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function Zg(n){return null!==su(n)}(n)?e.get(n):n:i}function hg(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=Sh(e);return n.children.forEach(s=>{(function Dte(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function Ate(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!qc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!qc(n.url,e.url)||!Cs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rA(n,e)||!Cs(n.queryParams,e.queryParams);default:return!rA(n,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new TU(i)):(o.data=s.data,o._resolvedData=s._resolvedData),hg(n,e,o.component?a?a.children:null:t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new o0(a.outlet.component,s))}else s&&fg(e,a,r),r.canActivateChecks.push(new TU(i)),hg(n,null,o.component?a?a.children:null:t,i,r)})(s,o[s.value.outlet],t,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>fg(a,t.getContext(s),r)),r}function fg(n,e,t){const i=Sh(n),r=n.value;Object.entries(i).forEach(([o,s])=>{fg(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new o0(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function pg(n){return"function"==typeof n}function DU(n){return n instanceof _y||"EmptyError"===n?.name}const s0=Symbol("INITIAL_VALUE");function Mh(){return Ae(n=>qb(n.map(e=>e.pipe(So(1),vc(s0)))).pipe(be(e=>{for(const t of e)if(!0!==t){if(t===s0)return s0;if(!1===t||t instanceof Dh)return t}return!0}),gi(e=>e!==s0),So(1)))}function AU(n){return function Vr(...n){return Br(n)}(Vi(e=>{if(Wc(e))throw wU(0,e)}),be(e=>!0===e))}class a0{constructor(e){this.segmentGroup=e||null}}class SU{constructor(e){this.urlTree=e}}function Ph(n){return eg(new a0(n))}function RU(n){return eg(new SU(n))}class Zte{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new B(4002,!1)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return S(i);if(r.numberOfChildren>1||!r.children[ut])return eg(new B(4e3,!1));r=r.children[ut]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const o=this.createSegmentGroup(e,t.root,i,r);return new Dh(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Object.entries(e).forEach(([r,o])=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);i[r]=t[a]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){const o=this.createSegments(e,t.segments,i,r);let s={};return Object.entries(t.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,i,r)}),new Xt(o,s)}createSegments(e,t,i,r){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new B(4001,!1);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}const lA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Kte(n,e,t,i,r){const o=cA(n,e,t);return o.matched?(i=function vte(n,e){return n.providers&&!n._injector&&(n._injector=II(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,i),function qte(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?S(r.map(s=>{const a=Rh(s,n);return xl(function Ote(n){return n&&pg(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Mh(),AU()):S(!0)}(i,e,t).pipe(be(s=>!0===s?o:{...lA}))):S(o)}function cA(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...lA}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||Dee)(t,n,e);if(!r)return{...lA};const o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});const s=r.consumed.length>0?{...o,...r.consumed[r.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function MU(n,e,t,i){return t.length>0&&function Xte(n,e,t){return t.some(i=>l0(n,e,i)&&Zo(i)!==ut)}(n,t,i)?{segmentGroup:new Xt(e,Yte(i,new Xt(t,n.children))),slicedSegments:[]}:0===t.length&&function Jte(n,e,t){return t.some(i=>l0(n,e,i))}(n,t,i)?{segmentGroup:new Xt(n.segments,Qte(n,0,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Xt(n.segments,n.children),slicedSegments:t}}function Qte(n,e,t,i,r){const o={};for(const s of i)if(l0(n,t,s)&&!r[Zo(s)]){const a=new Xt([],{});o[Zo(s)]=a}return{...r,...o}}function Yte(n,e){const t={};t[ut]=e;for(const i of n)if(""===i.path&&Zo(i)!==ut){const r=new Xt([],{});t[Zo(i)]=r}return t}function l0(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class ine{constructor(e,t,i,r,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new Zte(this.urlSerializer,this.urlTree)}noMatchError(e){return new B(4002,!1)}recognize(){const e=MU(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,ut).pipe(Hc(t=>{if(t instanceof SU)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof a0?this.noMatchError(t):t}),be(t=>{const i=new n0([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ut,this.rootComponentType,null,{}),r=new ma(i,t),o=new yU("",r),s=function Gee(n,e,t=null,i=null){return aU(sU(n),e,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,ut).pipe(Hc(i=>{throw i instanceof a0?this.noMatchError(i):i}))}inheritParamsAndData(e){const t=e.value,i=vU(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r,!0)}processChildren(e,t,i){const r=[];for(const o of Object.keys(i.children))"primary"===o?r.unshift(o):r.push(o);return b(r).pipe(xh(o=>{const s=i.children[o],a=function wte(n,e){const t=n.filter(i=>Zo(i)===e);return t.push(...n.filter(i=>Zo(i)!==e)),t}(t,o);return this.processSegmentGroup(e,a,s,o)}),wy((o,s)=>(o.push(...s),o)),vy(null),function xee(n,e){const t=arguments.length>=2;return i=>i.pipe(n?gi((r,o)=>n(r,o,i)):Pn,WD(1),t?vy(e):SN(()=>new _y))}(),Ut(o=>{if(null===o)return Ph(i);const s=PU(o);return function rne(n){n.sort((e,t)=>e.value.outlet===ut?-1:t.value.outlet===ut?1:e.value.outlet.localeCompare(t.value.outlet))}(s),S(s)}))}processSegment(e,t,i,r,o,s){return b(t).pipe(xh(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,i,r,o,s).pipe(Hc(l=>{if(l instanceof a0)return S(null);throw l}))),el(a=>!!a),Hc(a=>{if(DU(a))return function tne(n,e,t){return 0===e.length&&!n.children[t]}(i,r,o)?S([]):Ph(i);throw a}))}processSegmentAgainstRoute(e,t,i,r,o,s,a){return function ene(n,e,t,i){return!!(Zo(n)===i||i!==ut&&l0(e,t,n))&&("**"===n.path||cA(e,n,t).matched)}(i,r,o,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,r,i,o,s,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,s):Ph(r):Ph(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const o=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?RU(o):this.applyRedirects.lineralizeSegments(i,o).pipe(Ut(s=>{const a=new Xt(s,{});return this.processSegment(e,t,a,s,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:h}=cA(t,r,o);if(!a)return Ph(t);const p=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,h);return r.redirectTo.startsWith("/")?RU(p):this.applyRedirects.lineralizeSegments(r,p).pipe(Ut(g=>this.processSegment(e,i,t,g.concat(c),s,!1)))}matchSegmentAgainstRoute(e,t,i,r,o,s){let a;if("**"===i.path){const l=r.length>0?KB(r).parameters:{};a=S({snapshot:new n0(r,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,kU(i),Zo(i),i.component??i._loadedComponent??null,i,OU(i)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=Kte(t,i,r,e).pipe(be(({matched:l,consumedSegments:c,remainingSegments:h,parameters:p})=>l?{snapshot:new n0(c,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,kU(i),Zo(i),i.component??i._loadedComponent??null,i,OU(i)),consumedSegments:c,remainingSegments:h}:null));return a.pipe(Ae(l=>null===l?Ph(t):this.getChildConfig(e=i._injector??e,i,r).pipe(Ae(({routes:c})=>{const h=i._loadedInjector??e,{snapshot:p,consumedSegments:g,remainingSegments:_}=l,{segmentGroup:E,slicedSegments:x}=MU(t,g,_,c);if(0===x.length&&E.hasChildren())return this.processChildren(h,c,E).pipe(be(V=>null===V?null:[new ma(p,V)]));if(0===c.length&&0===x.length)return S([new ma(p,[])]);const T=Zo(i)===o;return this.processSegment(h,c,E,x,T?ut:o,!0).pipe(be(V=>[new ma(p,V)]))}))))}getChildConfig(e,t,i){return t.children?S({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?S({routes:t._loadedRoutes,injector:t._loadedInjector}):function Hte(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?S(!0):S(r.map(s=>{const a=Rh(s,n);return xl(function Rte(n){return n&&pg(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Mh(),AU())}(e,t,i).pipe(Ut(r=>r?this.configLoader.loadChildren(e,t).pipe(Vi(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function Gte(n){return eg(IU(!1,3))}())):S({routes:[],injector:e})}}function one(n){const e=n.value.routeConfig;return e&&""===e.path}function PU(n){const e=[],t=new Set;for(const i of n){if(!one(i)){e.push(i);continue}const r=e.find(o=>i.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=PU(i.children);e.push(new ma(i.value,r))}return e.filter(i=>!t.has(i))}function kU(n){return n.data||{}}function OU(n){return n.resolve||{}}function NU(n){return"string"==typeof n.title||null===n.title}function uA(n){return Ae(e=>{const t=n(e);return t?b(t).pipe(be(()=>e)):S(e)})}const kh=new re("ROUTES");let dA=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=xe(Yk)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return S(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=xl(t.loadComponent()).pipe(be(FU),Vi(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Ch(()=>{this.componentLoaders.delete(t)})),r=new GB(i,()=>new H).pipe(qD());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return S({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const o=function hne(n,e,t,i){return xl(n.loadChildren()).pipe(be(FU),Ut(r=>r instanceof ik||Array.isArray(r)?S(r):b(e.compileModuleAsync(r))),be(r=>{i&&i(n);let o,s,a=!1;return Array.isArray(r)?(s=r,!0):(o=r.create(t).injector,s=o.get(kh,[],{optional:!0,self:!0}).flat()),{routes:s.map(aA),injector:o}}))}(i,this.compiler,t,this.onLoadEndListener).pipe(Ch(()=>{this.childrenLoaders.delete(i)})),s=new GB(o,()=>new H).pipe(qD());return this.childrenLoaders.set(i,s),s}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function FU(n){return function fne(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let c0=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new H,this.transitionAbortSubject=new H,this.configLoader=xe(dA),this.environmentInjector=xe(Gr),this.urlSerializer=xe(ig),this.rootContexts=xe(cg),this.inputBindingEnabled=null!==xe(r0,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>S(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new ote(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new rte(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t,i,r){return this.transitions=new y({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:t.urlHandlingStrategy.extract(i),urlAfterRedirects:t.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ag,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(gi(o=>0!==o.id),be(o=>({...o,extractedUrl:t.urlHandlingStrategy.extract(o.rawUrl)})),Ae(o=>{this.currentTransition=o;let s=!1,a=!1;return S(o).pipe(Vi(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ae(l=>{const c=l.currentBrowserUrl.toString(),h=!t.navigated||l.extractedUrl.toString()!==c||c!==l.currentUrlTree.toString();if(!h&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const g="";return this.events.next(new Ah(l.id,this.urlSerializer.serialize(l.rawUrl),g,0)),l.resolve(null),kn}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return S(l).pipe(Ae(g=>{const _=this.transitions?.getValue();return this.events.next(new e0(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),_!==this.transitions?.getValue()?kn:Promise.resolve(g)}),function sne(n,e,t,i,r,o){return Ut(s=>function nne(n,e,t,i,r,o,s="emptyOnly"){return new ine(n,e,t,i,r,s,o).recognize()}(n,e,t,i,s.extractedUrl,r,o).pipe(be(({state:a,tree:l})=>({...s,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Vi(g=>{o.targetSnapshot=g.targetSnapshot,o.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:g.urlAfterRedirects};const _=new fU(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}));if(h&&t.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:g,extractedUrl:_,source:E,restoredState:x,extras:T}=l,V=new e0(g,this.urlSerializer.serialize(_),E,x);this.events.next(V);const M=_U(0,this.rootComponentType).snapshot;return this.currentTransition=o={...l,targetSnapshot:M,urlAfterRedirects:_,extras:{...T,skipLocationChange:!1,replaceUrl:!1}},S(o)}{const g="";return this.events.next(new Ah(l.id,this.urlSerializer.serialize(l.extractedUrl),g,1)),l.resolve(null),kn}}),Vi(l=>{const c=new ete(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),be(l=>(this.currentTransition=o={...l,guards:Cte(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},o)),function Fte(n,e){return Ut(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?S({...t,guardsResult:!0}):function Lte(n,e,t,i){return b(n).pipe(Ut(r=>function $te(n,e,t,i,r){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?S(o.map(a=>{const l=dg(e)??r,c=Rh(a,l);return xl(function kte(n){return n&&pg(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,i):l.runInContext(()=>c(n,e,t,i))).pipe(el())})).pipe(Mh()):S(!0)}(r.component,r.route,t,e,i)),el(r=>!0!==r,!0))}(s,i,r,n).pipe(Ut(a=>a&&function Ste(n){return"boolean"==typeof n}(a)?function Vte(n,e,t,i){return b(e).pipe(xh(r=>Ey(function Ute(n,e){return null!==n&&e&&e(new ste(n)),S(!0)}(r.route.parent,i),function Bte(n,e){return null!==n&&e&&e(new lte(n)),S(!0)}(r.route,i),function zte(n,e,t){const i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function Tte(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>Wb(()=>S(s.guards.map(l=>{const c=dg(s.node)??t,h=Rh(l,c);return xl(function Pte(n){return n&&pg(n.canActivateChild)}(h)?h.canActivateChild(i,n):c.runInContext(()=>h(i,n))).pipe(el())})).pipe(Mh())));return S(o).pipe(Mh())}(n,r.path,t),function jte(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return S(!0);const r=i.map(o=>Wb(()=>{const s=dg(e)??t,a=Rh(o,s);return xl(function Mte(n){return n&&pg(n.canActivate)}(a)?a.canActivate(e,n):s.runInContext(()=>a(e,n))).pipe(el())}));return S(r).pipe(Mh())}(n,r.route,t))),el(r=>!0!==r,!0))}(i,o,n,e):S(a)),be(a=>({...t,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),Vi(l=>{if(o.guardsResult=l.guardsResult,Wc(l.guardsResult))throw wU(0,l.guardsResult);const c=new tte(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),gi(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",3),!1)),uA(l=>{if(l.guards.canActivateChecks.length)return S(l).pipe(Vi(c=>{const h=new nte(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}),Ae(c=>{let h=!1;return S(c).pipe(function ane(n,e){return Ut(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return S(t);let o=0;return b(r).pipe(xh(s=>function lne(n,e,t,i){const r=n.routeConfig,o=n._resolve;return void 0!==r?.title&&!NU(r)&&(o[tg]=r.title),function cne(n,e,t,i){const r=function une(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return S({});const o={};return b(r).pipe(Ut(s=>function dne(n,e,t,i){const r=dg(e)??i,o=Rh(n,r);return xl(o.resolve?o.resolve(e,t):r.runInContext(()=>o(e,t)))}(n[s],e,t,i).pipe(el(),Vi(a=>{o[s]=a}))),WD(1),function Cee(n){return be(()=>n)}(o),Hc(s=>DU(s)?kn:eg(s)))}(o,n,e,i).pipe(be(s=>(n._resolvedData=s,n.data=vU(n,t).resolve,r&&NU(r)&&(n.data[tg]=r.title),null)))}(s.route,i,n,e)),Vi(()=>o++),WD(1),Ut(s=>o===r.length?S(t):kn))})}(t.paramsInheritanceStrategy,this.environmentInjector),Vi({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(c,"",2)}}))}),Vi(c=>{const h=new ite(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}))}),uA(l=>{const c=h=>{const p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(Vi(g=>{h.component=g}),be(()=>{})));for(const g of h.children)p.push(...c(g));return p};return qb(c(l.targetSnapshot.root)).pipe(vy(),So(1))}),uA(()=>this.afterPreactivation()),be(l=>{const c=function pte(n,e,t){const i=ug(n,e._root,t?t._root:void 0);return new gU(i,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o={...l,targetRouterState:c},o}),Vi(()=>{this.events.next(new XD)}),((n,e,t,i)=>be(r=>(new xte(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),So(1),Vi({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new pa(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),Gb(this.transitionAbortSubject.pipe(Vi(l=>{throw l}))),Ch(()=>{s||a||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Hc(l=>{if(a=!0,xU(l))this.events.next(new lg(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),function _te(n){return xU(n)&&Wc(n.url)}(l)?this.events.next(new JD(l.url)):o.resolve(!1);else{this.events.next(new t0(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(t.errorHandler(l))}catch(c){o.reject(c)}}return kn}))}))}cancelNavigationTransition(t,i,r){const o=new lg(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function LU(n){return n!==ag}let VU=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===ut);return i}getResolvedTitleForRoute(t){return t.data[tg]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ge({token:n,factory:function(){return xe(pne)},providedIn:"root"})}return n})(),pne=(()=>{class n extends VU{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||n)(F(vN))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mne=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ge({token:n,factory:function(){return xe(_ne)},providedIn:"root"})}return n})();class gne{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let _ne=(()=>{class n extends gne{static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=Jn(n)))(r||n)}}();static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const u0=new re("",{providedIn:"root",factory:()=>({})});let vne=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ge({token:n,factory:function(){return xe(yne)},providedIn:"root"})}return n})(),yne=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var mg=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(mg||{});function BU(n,e){n.events.pipe(gi(t=>t instanceof pa||t instanceof lg||t instanceof t0||t instanceof Ah),be(t=>t instanceof pa||t instanceof Ah?mg.COMPLETE:t instanceof lg&&(0===t.code||1===t.code)?mg.REDIRECTING:mg.FAILED),gi(t=>t!==mg.REDIRECTING),So(1)).subscribe(()=>{e()})}function bne(n){throw n}function Ene(n,e,t){return e.parse("/")}const wne={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ine={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Mi=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=xe(Qk),this.isNgZoneEnabled=!1,this._events=new H,this.options=xe(u0,{optional:!0})||{},this.pendingTasks=xe(zv),this.errorHandler=this.options.errorHandler||bne,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Ene,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=xe(vne),this.routeReuseStrategy=xe(mne),this.titleStrategy=xe(VU),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=xe(kh,{optional:!0})?.flat()??[],this.navigationTransitions=xe(c0),this.urlSerializer=xe(ig),this.location=xe(kp),this.componentInputBindingEnabled=!!xe(r0,{optional:!0}),this.eventsSubscription=new yt,this.isNgZoneEnabled=xe(it)instanceof it&&it.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Dh,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=_U(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:r}=this.navigationTransitions;if(null===r)return void(UU(i)&&this._events.next(i));if(i instanceof e0)LU(r.source)&&(this.browserUrlTree=r.extractedUrl);else if(i instanceof Ah)this.rawUrlTree=r.rawUrl;else if(i instanceof fU){if("eager"===this.urlUpdateStrategy){if(!r.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl);this.setBrowserUrl(o,r)}this.browserUrlTree=r.urlAfterRedirects}}else if(i instanceof XD)this.currentUrlTree=r.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r),this.browserUrlTree=r.urlAfterRedirects);else if(i instanceof lg)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(r);else if(i instanceof JD){const o=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),s={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||LU(r.source)};this.scheduleNavigation(o,ag,null,s,{resolve:r.resolve,reject:r.reject,promise:r.promise})}i instanceof t0&&this.restoreHistory(r,!0),i instanceof pa&&(this.navigated=!0),UU(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ag,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(o.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(aA),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){const{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:s;let p,h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...o};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}null!==h&&(h=this.removeEmptyProps(h));try{p=sU(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),p=this.currentUrlTree.root}return aU(p,t,h,c??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Wc(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,ag,null,i)}navigate(t,i={skipLocationChange:!1}){return function xne(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new B(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...wne}:!1===i?{...Ine}:i,Wc(t))return YB(this.currentUrlTree,t,r);const o=this.parseUrl(t);return YB(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const o=t[r];return null!=o&&(i[r]=o),i},{})}scheduleNavigation(t,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((p,g)=>{a=p,l=g});const h=this.pendingTasks.add();return BU(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(p=>Promise.reject(p))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",s)}else{const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",o)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function UU(n){return!(n instanceof XD||n instanceof JD)}let ga=(()=>{class n{constructor(t,i,r,o,s,a){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new H,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=t.events.subscribe(c=>{c instanceof pa&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,i,r,o,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||i||r||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function a1(n,e,t){return function e3(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?s1:gr}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,i){const r=this.renderer,o=this.el.nativeElement;null!==i?r.setAttribute(o,t,i):r.removeAttribute(o,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(i){return new(i||n)(q(Mi),q(Cl),function W_(n){return function ze(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const o=t[r];if(gu(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(o===e)return t[r+1];r+=2}}}return null}(fi(),n)}("tabindex"),q(Qs),q(ei),q(pc))};static#t=this.\u0275dir=He({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){1&i&&ke("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&i&&Co("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",Sd],skipLocationChange:["skipLocationChange","skipLocationChange",Sd],replaceUrl:["replaceUrl","replaceUrl",Sd],routerLink:"routerLink"},standalone:!0,features:[_M,Ar]})}return n})();class jU{}let Dne=(()=>{class n{constructor(t,i,r,o,s){this.router=t,this.injector=r,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(gi(t=>t instanceof pa),xh(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const o of i){o.providers&&!o._injector&&(o._injector=II(o.providers,t,`Route: ${o.path}`));const s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return b(r).pipe(ar())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):S(null);const o=r.pipe(Ut(s=>null===s?S(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return i.loadComponent&&!i._loadedComponent?b([o,this.loader.loadComponent(i)]).pipe(ar()):o})}static#e=this.\u0275fac=function(i){return new(i||n)(F(Mi),F(Yk),F(Gr),F(jU),F(dA))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const hA=new re("");let zU=(()=>{class n{constructor(t,i,r,o,s={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof e0?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof pa?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ah&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof pU&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new pU(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){qw()};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac})}return n})();function _a(n,e){return{\u0275kind:n,\u0275providers:e}}function HU(){const n=xe(jn);return e=>{const t=n.get(Qa);if(e!==t.components[0])return;const i=n.get(Mi),r=n.get(qU);1===n.get(fA)&&i.initialNavigation(),n.get(WU,null,ft.Optional)?.setUpPreloading(),n.get(hA,null,ft.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const qU=new re("",{factory:()=>new H}),fA=new re("",{providedIn:"root",factory:()=>1}),WU=new re("");function Mne(n){return _a(0,[{provide:WU,useExisting:Dne},{provide:jU,useExisting:n}])}const GU=new re("ROUTER_FORROOT_GUARD"),kne=[kp,{provide:ig,useClass:GD},Mi,cg,{provide:Cl,useFactory:function $U(n){return n.routerState.root},deps:[Mi]},dA,[]];function One(){return new rO("Router",Mi)}let ZU=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[kne,[],{provide:kh,multi:!0,useValue:t},{provide:GU,useFactory:Vne,deps:[[Mi,new Wr,new K_]]},{provide:u0,useValue:i||{}},i?.useHash?{provide:pc,useClass:j8}:{provide:pc,useClass:OO},{provide:hA,useFactory:()=>{const n=xe(s7),e=xe(it),t=xe(u0),i=xe(c0),r=xe(ig);return t.scrollOffset&&n.setOffset(t.scrollOffset),new zU(r,i,n,e,t)}},i?.preloadingStrategy?Mne(i.preloadingStrategy).\u0275providers:[],{provide:rO,multi:!0,useFactory:One},i?.initialNavigation?Bne(i):[],i?.bindToComponentInputs?_a(8,[EU,{provide:r0,useExisting:EU}]).\u0275providers:[],[{provide:KU,useFactory:HU},{provide:ZI,multi:!0,useExisting:KU}]]}}static forChild(t){return{ngModule:n,providers:[{provide:kh,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(i){return new(i||n)(F(GU,8))};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({})}return n})();function Vne(n){return"guarded"}function Bne(n){return["disabled"===n.initialNavigation?_a(3,[{provide:UI,multi:!0,useFactory:()=>{const e=xe(Mi);return()=>{e.setUpLocationChangeListener()}}},{provide:fA,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?_a(2,[{provide:fA,useValue:0},{provide:UI,multi:!0,deps:[jn],useFactory:e=>{const t=e.get(B8,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(Mi),o=e.get(qU);BU(r,()=>{i(!0)}),e.get(c0).afterPreactivation=()=>(i(!0),o.closed?S(void 0):o),r.initialNavigation()}))}}]).\u0275providers:[]]}const KU=new re("");let Tl=(()=>{class n{getUserId(){return localStorage.getItem("uid")}constructor(t,i,r,o){this.afAuth=t,this.cookieService=i,this.firestore=r,this.router=o,this.isLoggedIn=!1,this.userData=t.authState,this.afAuth.setPersistence("session"),this.checkAuthState(),this.initializeTokenListener()}checkToken(){console.log("ngOnInit() start");const t=this.cookieService.get("token");if(!t)return void console.log("No token found");console.log("Token found");const i=this.cookieService.get("uid");i?(console.log("Uid found"),this.firestore.collection("users").doc(i).get().toPromise().then(r=>{if(r&&r.exists){console.log("Document data:",r.data());const o=r.data();o&&o.token===t&&(console.log("Token is valid"),this.isLoggedIn=!0)}}).catch(r=>{console.log("Error getting document:",r)})):console.log("No uid found")}initializeTokenListener(){console.log("initializeTokenListener() start"),this.afAuth.onIdTokenChanged(t=>{t&&t.getIdToken(!0).then(i=>{console.log(i),this.cookieService.get("rememberMe")&&(console.log("Storing new token in cookie"+i),this.cookieService.put("token",i),console.log("Storing new uid in cookie"+t.uid),this.cookieService.put("uid",t.uid))})})}googleSignIn(){const t=new mc.X;return(0,mc.c)((0,mc.o)(),t).then(i=>(console.log(i),this.isLoggedIn=!0,localStorage.setItem("uid",i.user?.uid),i.user?.getIdToken(!0).then(r=>{console.log("Storing new token in cookie"+r),this.cookieService.put("token",r),console.log("Storing new uid in cookie"+i.user?.uid),this.cookieService.put("uid",i.user?.uid)}),i)).catch(i=>(console.log(i),{}))}googleSignOut(){(0,mc.C)((0,mc.o)())}register(t,i,r,o){return this.afAuth.createUserWithEmailAndPassword(t,i).then(s=>(this.isLoggedIn=!0,s.user?.updateProfile({displayName:`${r} ${o}`})))}login(t,i,r){var o=this;return(0,ne.Z)(function*(){const s=yield o.afAuth.signInWithEmailAndPassword(t,i);if(!s.user)return;const a=s.user.uid;o.isLoggedIn=!0,s.user.getIdToken(!0).then(l=>{o.firestore.collection("users").doc(a).set({token:l},{merge:!0}),r?(o.cookieService.put("uid",a),o.cookieService.put("token",l)):(o.cookieService.remove("token"),o.cookieService.put("uid",a))}).catch(l=>{console.log(l)})})()}logout(){this.isLoggedIn=!1,this.router.navigateByUrl("/"),this.cookieService.remove("uid"),this.cookieService.remove("token"),this.afAuth.signOut().then(()=>{})}checkAuthState(){this.afAuth.authState.subscribe(t=>{this.isLoggedIn=!!t})}static#e=this.\u0275fac=function(i){return new(i||n)(F(yy),F(Od),F($B),F(Mi))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const jne=function(n,e){return{displayed:n,hidden:e}};let zne=(()=>{class n{constructor(t){this.router=t,this.displayed=!1,this.isDarkMode=!1}changeSubCat(){this.displayed=!this.displayed}addSubCat(t){console.log(t),this.router.navigate(["/official-categories/"+t])}static#e=this.\u0275fac=function(i){return new(i||n)(q(Mi))};static#t=this.\u0275cmp=On({type:n,selectors:[["app-navbar"]],decls:21,vars:4,consts:[["id","nav_menu",1,"bg-ang-main_bg","border","dark:bg-zinc-850","dark:text-ang-text_white","border-ang-border_main","rounded-b-lg","border-t-0","w-[17rem]","sm:w-80"],["id","nav_menu_home","routerLink","/"],["src","assets/icons/home.png","alt","","width","28px","height","28px"],["id","nav_menu_tests",1,"expandable_ul",3,"click"],["src","assets/icons/tests.png","alt","","width","28px","height","28px"],[3,"ngClass"],[1,"text-sm","h-8",3,"click"],["id","nav_menu_scripts","routerLink","/education-materials"],["src","assets/icons/notes.png","alt","","width","28px","height","28px"],["id","nav_menu_savedtests","routerLink","/test-history",1,"border-0","hover:rounded-b-lg"],["src","assets/icons/saved.png","alt","","width","28px","height","28px"]],template:function(i,r){1&i&&(k(0,"nav",0)(1,"ul")(2,"li",1),Ze(3,"img",2),te(4,"Domov "),P(),k(5,"ul",3),ke("click",function(){return r.changeSubCat()}),Ze(6,"img",4),te(7,"Maturitn\xe9 testy "),P(),k(8,"div",5)(9,"li",6),ke("click",function(){return r.addSubCat("sjl")}),te(10,"Slovensk\xfd jazyk a literat\xfara"),P(),k(11,"li",6),ke("click",function(){return r.addSubCat("anj")}),te(12,"Anglick\xfd jazyk"),P(),k(13,"li",6),ke("click",function(){return r.addSubCat("mat")}),te(14,"Matematika"),P()(),k(15,"li",7),Ze(16,"img",8),te(17,"U\u010debn\xe9 materi\xe1ly "),P(),k(18,"li",9),Ze(19,"img",10),te(20," Hist\xf3ria testov "),P()()()),2&i&&($(8),W("ngClass",Dp(1,jne,r.displayed,!r.displayed)))},dependencies:[mx,ga],styles:[".hidden[_ngcontent-%COMP%]{display:none}.displayed[_ngcontent-%COMP%]{display:block}"]})}return n})();function $ne(n,e){1&n&&(k(0,"div",7)(1,"button",8)(2,"p",9),te(3,"\xda\u010det"),P()()())}function Hne(n,e){if(1&n){const t=zn();k(0,"div",10)(1,"p",11),Ze(2,"img",12),P(),k(3,"p",13),ke("click",function(){return Kt(t),zt(ve().onLogout())}),Ze(4,"img",14),P()()}}let qne=(()=>{class n{constructor(t,i,r){this.el=i,this.router=r,this.buttonExpanded=!1,this.timerIsOn=!1,this.timeLeft=0,this.authService=t,this.router.events.subscribe(o=>{o instanceof pa&&this.closeNavbar()})}closeNavbar(){document.getElementById("navbar").style.display="none",this.buttonExpanded=!1}onToggleNav(){const t=document.getElementById("navbar"),i=document.getElementById("main_header"),r=window.innerWidth;"flex"===t.style.display?(t.style.display="none",i.style.borderRadius="8px",this.buttonExpanded=!this.buttonExpanded):(t.style.display="flex",r<=320?(i.style.borderBottomLeftRadius="0",i.style.borderBottomRightRadius="0"):(i.style.borderRadius="8px",i.style.borderBottomLeftRadius="0"),this.buttonExpanded=!this.buttonExpanded)}onLogout(){this.authService.logout()}onDocumentClick(t){this.el.nativeElement.contains(t.target)||(document.getElementById("navbar").style.display="none",this.buttonExpanded=!1),this.buttonExpanded||(document.getElementById("main_header").style.borderBottomLeftRadius="10px")}static#e=this.\u0275fac=function(i){return new(i||n)(q(Tl),q(ei),q(Mi))};static#t=this.\u0275cmp=On({type:n,selectors:[["app-header"]],hostBindings:function(i,r){1&i&&ke("click",function(s){return r.onDocumentClick(s)},0,$w)},decls:8,vars:4,consts:[["id","main_header",1,"h-24","relative","flex","justify-between","px-4","items-center","border","border-blue-500","rounded-lg","bg-ang-main_bg","dark:bg-zinc-850"],[1,"w-20","hover:cursor-pointer","h-[4rem]","flex","items-center","justify-center",3,"click"],[1,"transition-all","ease-in-out","delay-[180ms]","before:delay-[260ms]","after:delay-100","bg-ang-main_btn","w-11","h-1.5","rounded-lg","hover:cursor-pointer","block","relative","after:transition-all","after:bg-ang-main_btn","after:w-11","after:h-1.5","after:block","after:absolute","after:content-['']","after:left-0","after:top-3.5","after:rounded-lg","before:transition-all","before:bg-ang-main_btn","before:w-11","before:h-1.5","before:block","before:absolute","before:content-['']","before:left-0","before:-top-3.5","before:rounded-lg"],["src","assets/logo.png","alt","","width","100px","height","100px"],["id","but",4,"ngIf"],["class","flex gap-6",4,"ngIf"],["id","navbar",1,"absolute"],["id","but"],["id","header_reg_button","routerLink","/login",1,"w-20","px-12","flex","justify-center","py-2","border-2","bg-ang-main_btn","border-ang-border_main","rounded-lg","hover:cursor-pointer","overflow-hidden","hover:opacity-90","transition","shadow-md"],[1,"text-ang-text_white","font-medium"],[1,"flex","gap-6"],["routerLink","/user-account",1,"hover:cursor-pointer","hover:scale-110","transition","duration-250"],["src","assets/header_icons/userprofile.png","alt","user_profile_icon","width","38px","height","38px"],[1,"hover:cursor-pointer","hover:scale-110","transition","duration-250",3,"click"],["src","assets/header_icons/logout.png","alt","logout_icon","width","38px","height","38px"]],template:function(i,r){1&i&&(k(0,"header",0)(1,"div",1),ke("click",function(){return r.onToggleNav()}),Ze(2,"span",2),P(),k(3,"div"),Ze(4,"img",3),P(),me(5,$ne,4,0,"div",4),me(6,Hne,5,0,"div",5),P(),Ze(7,"app-navbar",6)),2&i&&($(1),uc("expanded",r.buttonExpanded),$(4),W("ngIf",!r.authService.isLoggedIn),$(1),W("ngIf",r.authService.isLoggedIn))},dependencies:[$o,ga,zne],styles:[".expanded[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .expanded[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:before, .expanded[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:after{border-radius:5px;width:6px}.time-display[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:150px;position:absolute;margin-top:1rem}"]})}return n})();function Wne(n,e){if(1&n){const t=zn();k(0,"div",1)(1,"div",2)(2,"div")(3,"p",3),te(4," Na\u0161a webov\xe1 aplik\xe1cia vyu\u017e\xedva s\xfabory cookies, ktor\xe9 s\xfa k\u013e\xfa\u010dov\xe9 pre jej spr\xe1vne fungovanie a poskytuj\xfa nevyhnutn\xe9 funkcie. Tieto s\xfabory cookies nesl\xfa\u017eia na zbieranie va\u0161ich \xfadajov na \xfa\u010dely marketingu ani sledovania va\u0161ich aktiv\xedt. Pokra\u010dovan\xedm v pou\u017e\xedvan\xed na\u0161ej webovej aplik\xe1cie vyjadrujete s\xfahlas s pou\u017e\xedvan\xedm t\xfdchto nevyhnutn\xfdch s\xfaborov cookies. "),P(),k(5,"button",4),ke("click",function(){return Kt(t),zt(ve().hideWindow())}),te(6," Prija\u0165 "),P()()()()}}let Gne=(()=>{class n{constructor(t){this.authService=t,this.windowShown=!0}hideWindow(){this.windowShown=!1}static#e=this.\u0275fac=function(i){return new(i||n)(q(Tl))};static#t=this.\u0275cmp=On({type:n,selectors:[["app-tos-page"]],decls:1,vars:1,consts:[["class","flex items-center justify-center",4,"ngIf"],[1,"flex","items-center","justify-center"],[1,"fixed","bottom-1","w-3/4","h-16","bg-ang-main_bg","border","border-ang-border_main","rounded-lg","overflow-y-scroll","md:overflow-y-hidden","p-1"],[1,"text-xs"],[1,"float-right","border","border-ang-border_main","rounded-lg","px-1","py-0.5","text-ang-text_main","text-sm","hover:bg-ang-border_main","hover:text-ang-text_white","transition-all",3,"click"]],template:function(i,r){1&i&&me(0,Wne,7,0,"div",0),2&i&&W("ngIf",r.windowShown&&!r.authService.isLoggedIn)},dependencies:[$o]})}return n})(),Zne=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){this.authService.checkToken()}title(t){throw new Error("Method not implemented.")}static#e=this.\u0275fac=function(i){return new(i||n)(q(Tl))};static#t=this.\u0275cmp=On({type:n,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"flex","flex-col","gap-3","min-h-screen","p-1.5","sm:p-3"],[1,"sticky","w-full","top-0","z-50"],[1,"flex-1","bg-ang-main_bg","rounded-lg","basis-1","h-fit"]],template:function(i,r){1&i&&(k(0,"div",0),Ze(1,"app-header",1),k(2,"div",2),Ze(3,"router-outlet")(4,"app-tos-page"),P()())},dependencies:[oA,qne,Gne]})}return n})();function QU(...n){const e=ho(n),{args:t,keys:i}=HB(n),r=new Ke(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let l=s,c=s;for(let h=0;h<s;h++){let p=!1;Et(t[h]).subscribe(ye(o,g=>{p||(p=!0,c--),a[h]=g},()=>l--,void 0,()=>{(!l||!p)&&(c||o.next(i?qB(i,a):a),o.complete())}))}});return e?r.pipe(HD(e)):r}let YU=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(i){return new(i||n)(q(Qs),q(ei))};static#t=this.\u0275dir=He({type:n})}return n})(),Gc=(()=>{class n extends YU{static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=Jn(n)))(r||n)}}();static#t=this.\u0275dir=He({type:n,features:[Vt]})}return n})();const Ds=new re("NgValueAccessor"),Kne={provide:Ds,useExisting:z(()=>pA),multi:!0};let pA=(()=>{class n extends Gc{writeValue(t){this.setProperty("checked",t)}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=Jn(n)))(r||n)}}();static#t=this.\u0275dir=He({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){1&i&&ke("change",function(s){return r.onChange(s.target.checked)})("blur",function(){return r.onTouched()})},features:[An([Kne]),Vt]})}return n})();const Qne={provide:Ds,useExisting:z(()=>va),multi:!0},Xne=new re("CompositionEventMode");let va=(()=>{class n extends YU{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Yne(){const n=Ya()?Ya().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(i){return new(i||n)(q(Qs),q(ei),q(Xne,8))};static#t=this.\u0275dir=He({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&ke("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[An([Qne]),Vt]})}return n})();function Dl(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function XU(n){return null!=n&&"number"==typeof n.length}const er=new re("NgValidators"),Al=new re("NgAsyncValidators"),Jne=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Hi{static min(e){return function JU(n){return e=>{if(Dl(e.value)||Dl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function ej(n){return e=>{if(Dl(e.value)||Dl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return tj(e)}static requiredTrue(e){return function nj(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function ij(n){return Dl(n.value)||Jne.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function rj(n){return e=>Dl(e.value)||!XU(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function oj(n){return e=>XU(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function sj(n){if(!n)return d0;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Dl(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return hj(e)}static composeAsync(e){return fj(e)}}function tj(n){return Dl(n.value)?{required:!0}:null}function d0(n){return null}function aj(n){return null!=n}function lj(n){return bp(n)?b(n):n}function cj(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function uj(n,e){return e.map(t=>t(n))}function dj(n){return n.map(e=>function eie(n){return!n.validate}(e)?e:t=>e.validate(t))}function hj(n){if(!n)return null;const e=n.filter(aj);return 0==e.length?null:function(t){return cj(uj(t,e))}}function mA(n){return null!=n?hj(dj(n)):null}function fj(n){if(!n)return null;const e=n.filter(aj);return 0==e.length?null:function(t){return QU(uj(t,e).map(lj)).pipe(be(cj))}}function gA(n){return null!=n?fj(dj(n)):null}function pj(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function mj(n){return n._rawValidators}function gj(n){return n._rawAsyncValidators}function _A(n){return n?Array.isArray(n)?n:[n]:[]}function h0(n,e){return Array.isArray(n)?n.includes(e):n===e}function _j(n,e){const t=_A(e);return _A(n).forEach(r=>{h0(t,r)||t.push(r)}),t}function vj(n,e){return _A(e).filter(t=>!h0(n,t))}class yj{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=mA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=gA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class xr extends yj{get formDirective(){return null}get path(){return null}}class Sl extends yj{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class bj{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Zc=(()=>{class n extends bj{constructor(t){super(t)}static#e=this.\u0275fac=function(i){return new(i||n)(q(Sl,2))};static#t=this.\u0275dir=He({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&uc("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Vt]})}return n})(),vA=(()=>{class n extends bj{constructor(t){super(t)}static#e=this.\u0275fac=function(i){return new(i||n)(q(xr,10))};static#t=this.\u0275dir=He({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){2&i&&uc("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Vt]})}return n})();const gg="VALID",p0="INVALID",Oh="PENDING",_g="DISABLED";function EA(n){return(m0(n)?n.validators:n)||null}function wA(n,e){return(m0(e)?e.asyncValidators:n)||null}function m0(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function wj(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new B(1e3,"");if(!i[t])throw new B(1001,"")}function Ij(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new B(1002,"")})}class g0{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===gg}get invalid(){return this.status===p0}get pending(){return this.status==Oh}get disabled(){return this.status===_g}get enabled(){return this.status!==_g}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(_j(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(_j(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(vj(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(vj(e,this._rawAsyncValidators))}hasValidator(e){return h0(this._rawValidators,e)}hasAsyncValidator(e){return h0(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Oh,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=_g,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=gg,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===gg||this.status===Oh)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?_g:gg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Oh,this._hasOwnPendingAsyncValidator=!0;const t=lj(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new En,this.statusChanges=new En}_calculateStatus(){return this._allControlsDisabled()?_g:this.errors?p0:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Oh)?Oh:this._anyControlsHaveStatus(p0)?p0:gg}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){m0(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function rie(n){return Array.isArray(n)?mA(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function oie(n){return Array.isArray(n)?gA(n):n||null}(this._rawAsyncValidators)}}class vg extends g0{constructor(e,t,i){super(EA(t),wA(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Ij(this,0,e),Object.keys(e).forEach(i=>{wj(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class xj extends vg{}const Kc=new re("CallSetDisabledState",{providedIn:"root",factory:()=>yg}),yg="always";function _0(n,e){return[...e.path,n]}function bg(n,e,t=yg){IA(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function aie(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Cj(n,e)})}(n,e),function cie(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function lie(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Cj(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function sie(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function v0(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),b0(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function y0(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function IA(n,e){const t=mj(n);null!==e.validator?n.setValidators(pj(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=gj(n);null!==e.asyncValidator?n.setAsyncValidators(pj(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();y0(e._rawValidators,r),y0(e._rawAsyncValidators,r)}function b0(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=mj(n);if(Array.isArray(r)&&r.length>0){const o=r.filter(s=>s!==e.validator);o.length!==r.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const r=gj(n);if(Array.isArray(r)&&r.length>0){const o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(t=!0,n.setAsyncValidators(o))}}}const i=()=>{};return y0(e._rawValidators,i),y0(e._rawAsyncValidators,i),t}function Cj(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function CA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function TA(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(o=>{o.constructor===va?t=o:function hie(n){return Object.getPrototypeOf(n.constructor)===Gc}(o)?i=o:r=o}),r||i||t||null}function Aj(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Sj(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const wg=class extends g0{constructor(e=null,t,i){super(EA(t),wA(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),m0(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Sj(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Aj(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Aj(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Sj(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let Rj=(()=>{class n extends xr{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return _0(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=Jn(n)))(r||n)}}();static#t=this.\u0275dir=He({type:n,features:[Vt]})}return n})();const _ie={provide:Sl,useExisting:z(()=>Nh)},Pj=(()=>Promise.resolve())();let Nh=(()=>{class n extends Sl{constructor(t,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new wg,this._registered=!1,this.name="",this.update=new En,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=TA(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),CA(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){bg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Pj.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&Sd(i);Pj.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?_0(t,this._parent):[t]}static#e=this.\u0275fac=function(i){return new(i||n)(q(xr,9),q(er,10),q(Al,10),q(Ds,10),q(Wv,8),q(Kc,8))};static#t=this.\u0275dir=He({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[An([_ie]),Vt,Ar]})}return n})(),AA=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=He({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})();const yie={provide:Ds,useExisting:z(()=>SA),multi:!0};let Oj=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({})}return n})(),bie=(()=>{class n{constructor(){this._accessors=[]}add(t,i){this._accessors.push([t,i])}remove(t){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===t)return void this._accessors.splice(i,1)}select(t){this._accessors.forEach(i=>{this._isSameGroup(i,t)&&i[1]!==t&&i[1].fireUncheck(t.value)})}_isSameGroup(t,i){return!!t[0].control&&t[0]._parent===i._control._parent&&t[1].name===i.name}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:Oj})}return n})(),SA=(()=>{class n extends Gc{constructor(t,i,r,o){super(t,i),this._registry=r,this._injector=o,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=xe(Kc,{optional:!0})??yg}ngOnInit(){this._control=this._injector.get(Sl),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}static#e=this.\u0275fac=function(i){return new(i||n)(q(Qs),q(ei),q(bie),q(jn))};static#t=this.\u0275dir=He({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(i,r){1&i&&ke("change",function(){return r.onChange()})("blur",function(){return r.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[An([yie]),Vt]})}return n})();const RA=new re("NgModelWithFormControlWarning"),Iie={provide:xr,useExisting:z(()=>Ig)};let Ig=(()=>{class n extends xr{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new En,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(b0(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return bg(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){v0(t.control||null,t,!1),function fie(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,function Dj(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(v0(i||null,t),(n=>n instanceof wg)(r)&&(bg(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);(function Tj(n,e){IA(n,e)})(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function uie(n,e){return b0(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){IA(this.form,this),this._oldForm&&b0(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(i){return new(i||n)(q(er,10),q(Al,10),q(Kc,8))};static#t=this.\u0275dir=He({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){1&i&&ke("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[An([Iie]),Vt,Ar]})}return n})();const xie={provide:xr,useExisting:z(()=>xg)};let xg=(()=>{class n extends Rj{constructor(t,i,r){super(),this.name=null,this._parent=t,this._setValidators(i),this._setAsyncValidators(r)}_checkParentType(){Lj(this._parent)}static#e=this.\u0275fac=function(i){return new(i||n)(q(xr,13),q(er,10),q(Al,10))};static#t=this.\u0275dir=He({type:n,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[An([xie]),Vt]})}return n})();const Cie={provide:xr,useExisting:z(()=>Cg)};let Cg=(()=>{class n extends xr{constructor(t,i,r){super(),this.name=null,this._parent=t,this._setValidators(i),this._setAsyncValidators(r)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return _0(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){Lj(this._parent)}static#e=this.\u0275fac=function(i){return new(i||n)(q(xr,13),q(er,10),q(Al,10))};static#t=this.\u0275dir=He({type:n,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[An([Cie]),Vt]})}return n})();function Lj(n){return!(n instanceof xg||n instanceof Ig||n instanceof Cg)}const Tie={provide:Sl,useExisting:z(()=>E0)};let E0=(()=>{class n extends Sl{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,i,r,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new En,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=TA(0,o)}ngOnChanges(t){this._added||this._setUpControl(),CA(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return _0(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(i){return new(i||n)(q(xr,13),q(er,10),q(Al,10),q(Ds,10),q(RA,8))};static#n=this.\u0275dir=He({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[An([Tie]),Vt,Ar]})}return n})();const Die={provide:Ds,useExisting:z(()=>Tg),multi:!0};function Vj(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Tg=(()=>{class n extends Gc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const r=Vj(this._getOptionId(t),t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){const i=function Aie(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=Jn(n)))(r||n)}}();static#t=this.\u0275dir=He({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){1&i&&ke("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[An([Die]),Vt]})}return n})(),MA=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Vj(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(i){return new(i||n)(q(ei),q(Qs),q(Tg,9))};static#t=this.\u0275dir=He({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})();const Sie={provide:Ds,useExisting:z(()=>PA),multi:!0};function Bj(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let PA=(()=>{class n extends Gc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let i;if(this.value=t,Array.isArray(t)){const r=t.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{const r=[],o=i.selectedOptions;if(void 0!==o){const s=o;for(let a=0;a<s.length;a++){const c=this._getOptionValue(s[a].value);r.push(c)}}else{const s=i.options;for(let a=0;a<s.length;a++){const l=s[a];if(l.selected){const c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,t(r)}}_registerOption(t){const i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){const i=function Rie(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=Jn(n)))(r||n)}}();static#t=this.\u0275dir=He({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){1&i&&ke("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[An([Sie]),Vt]})}return n})(),kA=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Bj(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Bj(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(i){return new(i||n)(q(ei),q(Qs),q(PA,9))};static#t=this.\u0275dir=He({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})(),Qc=(()=>{class n{constructor(){this._validator=d0}ngOnChanges(t){if(this.inputName in t){const i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):d0,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=He({type:n,features:[Ar]})}return n})();const kie={provide:er,useExisting:z(()=>Dg),multi:!0};let Dg=(()=>{class n extends Qc{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Sd,this.createValidator=t=>tj}enabled(t){return t}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=Jn(n)))(r||n)}}();static#t=this.\u0275dir=He({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){2&i&&Co("required",r._enabled?"":null)},inputs:{required:"required"},features:[An([kie]),Vt]})}return n})(),Kj=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({imports:[Oj]})}return n})();class Qj extends g0{constructor(e,t,i){super(EA(t),wA(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Ij(this,0,e),e.forEach((i,r)=>{wj(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function Yj(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let Xj=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,i=null){const r=this._reduceControls(t);let o={};return Yj(i)?o=i:null!==i&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new vg(r,o)}record(t,i=null){const r=this._reduceControls(t);return new xj(r,i)}control(t,i,r){let o={};return this.useNonNullable?(Yj(i)?o=i:(o.validators=i,o.asyncValidators=r),new wg(t,{...o,nonNullable:!0})):new wg(t,i,r)}array(t,i,r){const o=t.map(s=>this._createControl(s));return new Qj(o,i,r)}_reduceControls(t){const i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){return t instanceof wg||t instanceof g0?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Bie=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Kc,useValue:t.callSetDisabledState??yg}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({imports:[Kj]})}return n})(),Uie=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:RA,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Kc,useValue:t.callSetDisabledState??yg}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({imports:[Kj]})}return n})(),w0=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=On({type:n,selectors:[["app-landing-page"]],decls:26,vars:0,consts:[["id","main_page_container",1,"outer_container"],["id","main_page_inner_container",1,"inner_container","items-center","justify-evenly","flex-col"],[1,"p-8","text-2xl","text-ang-text_main","lg:text-3xl"],[1,"flex","items-center","justify-evenly","w-full","flex-wrap","px-4"],["id","main_first_card",1,"main_card_containers","bg-first_landing_page_card","bg-cover"],["id","main_first_card_icon","src","assets/test_icon.png","alt","Test icon","height","50px","width","50px",1,"main_card_icon"],["id","main_first_card_textarea",1,"main_card_textareas"],["id","main_second_card",1,"main_card_containers","bg-second_landing_page_card","bg-cover"],["id","main_second_card_icon","src","assets/book_icon.png","alt","Test icon","height","50px","width","50px",1,"main_card_icon"],["id","main_second_card_textarea",1,"main_card_textareas"],["id","main_third_card",1,"main_card_containers","bg-third_landing_page_card","bg-cover"],["id","main_third_card_icon","src","assets/community_icon.png","alt","Test icon","height","50px","width","50px",1,"main_card_icon"],["id","main_third_card_textarea",1,"main_card_textareas"],["id","main_fourth_card",1,"main_card_containers","bg-fourth_landing_page_card","bg-cover"],["id","main_fourth_card_icon","src","assets/graduation_icon.png","alt","Test icon","height","50px","width","50px",1,"main_card_icon"],["id","main_fourth_card_textarea",1,"main_card_textareas"]],template:function(i,r){1&i&&(k(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),te(4," e-Maturity je inovat\xedvna a \u0161tudentom prisp\xf4soben\xe1 webov\xe1 aplik\xe1cia, ktor\xe1 pon\xfaka: "),P()(),k(5,"section",3)(6,"div",4),Ze(7,"img",5),k(8,"div",6)(9,"p"),te(10," Otestovanie sa a rie\u0161enie maturitn\xfdch testov online formou! Modern\xe1 doba toti\u017e vy\u017eaduje modern\xe9 rie\u0161enia, u\u017e \u017eiadne pero a papier. "),P()()(),k(11,"div",7),Ze(12,"img",8),k(13,"div",9)(14,"p"),te(15," R\xfdchly pr\xedstup k u\u010divu a preh\u013eadn\xe9 pozn\xe1mky s\xfa z\xe1rukou k \xfaspe\u0161nej maturite a pr\xe1ve o tieto pozn\xe1mky sa s vami podel\xedme. "),P()()(),k(16,"div",10),Ze(17,"img",11),k(18,"div",12)(19,"p"),te(20," Spojte sa s ostatn\xfdmi maturantmi, zdie\u013eajte medzi sebou sk\xfasenosti, ra\u010fte sa a podporujte navz\xe1jom. "),P()()(),k(21,"div",13),Ze(22,"img",14),k(23,"div",15)(24,"p"),te(25," Precvi\u010dujte sa s testami z minul\xfdch ro\u010dn\xedkov a pripravte sa na v\u0161etky aspekty maturity. Na\u0161e zdroje v\xe1m pom\xf4\u017eu zdokonali\u0165 va\u0161e vedomosti. "),P()()()()()())}})}return n})();const Jj=function(n){return{"border-red-700":n}},jie=function(n,e){return{"text-red-600":n,"opacity-100":e}};let ez=(()=>{class n{constructor(t,i){this.router=t,this.service=i,this.submitted=!1,this.name="",this.password="",this.error=!1,this.rememberMe=!1,this.isDarkMode=!1,this.loggedIn=!1}submit(){this.submitted=!0}newInput(){this.error=!1}login(){this.service.login(this.name,this.password,this.rememberMe).then(()=>this.router.navigate([""])).catch(()=>this.error=!0)}signInWithGoogle(){this.service.googleSignIn().then(()=>this.router.navigate([""])).catch(()=>this.error=!0)}ngOnInit(){const t=localStorage.getItem("rememberMe");if(t){const i=JSON.parse(t);console.log(i),this.name=i.email,this.password=i.password}}static#e=this.\u0275fac=function(i){return new(i||n)(q(Mi),q(Tl))};static#t=this.\u0275cmp=On({type:n,selectors:[["app-login-page"]],decls:29,vars:16,consts:[[1,"outer_container"],[1,"inner_container","justify-center","items-center"],[1,"flex","md:h-[32rem]","flex-col","items-center","justify-between","border","gap-4","border-ang-border_main","py-4","m-2","rounded-lg","max-w-[30rem]","w-full","bg-gradient-to-t","from-ang-gradient_from","to-ang-gradient_to"],[1,"flex","flex-col","text-center","md:items-center","gap-2","w-full","px-2"],["for","meno",1,"text-xl","font-semibold","text-ang-text_white"],["type","text","name","meno","id","meno","required","","placeholder","Zadaj svoj email",1,"py-1","px-2","rounded-md","border","border-ang-border_main","md:w-72",3,"ngModel","ngModelChange"],["for","heslo",1,"text-xl","font-semibold","text-ang-text_white"],["type","password","name","heslo","id","heslo","required","","placeholder","Zadaj svoje heslo",1,"py-1","px-2","rounded-md","border","border-ang-border_main","md:w-72",3,"ngModel","ngModelChange"],[1,"flex","text-sm","justify-evenly","items-start","w-full","md:px-16","text-ang-text_white","font-semibold"],["routerLink","/forgot-password"],[1,"flex","items-center","gap-1"],["for","rememberMe",1,"hover:opacity-95","hover:cursor-pointer"],["type","checkbox","name","rememberMe","id","rememberMe",1,"mt-1",3,"ngModel","ngModelChange"],[1,"opacity-0","font-semibold","text-xl"],[1,"flex","items-center","gap-2","mx-1","px-3","py-2","rounded-lg","bg-ang-text_white","hover:opacity-95","border","border-ang-text_white",3,"click"],["src","assets/googleicon.png","alt","googleicon","width","32px","height","32px"],[1,"flex","justify-evenly","items-center","w-full"],["type","submit",1,"border","border-ang-border_main","px-3","py-1","text-ang-gradient_to","font-semibold","hover:opacity-85","rounded-lg","bg-ang-main_bg",3,"click"],["routerLink","/register",1,"border","border-ang-border_main","px-3","py-1","text-ang-gradient_to","font-semibold","hover:opacity-85","rounded-lg","bg-ang-main_bg"]],template:function(i,r){1&i&&(k(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),te(5,"Prihlasovaci email"),P(),k(6,"input",5),ke("ngModelChange",function(){return r.newInput()})("ngModelChange",function(s){return r.name=s}),P(),k(7,"label",6),te(8,"Heslo"),P(),k(9,"input",7),ke("ngModelChange",function(){return r.newInput()})("ngModelChange",function(s){return r.password=s}),P()(),k(10,"div",8)(11,"button",9),te(12,"Zabudnut\xe9 heslo"),P(),k(13,"div",10)(14,"label",11),te(15,"zapam\xe4taj si ma"),P(),k(16,"input",12),ke("ngModelChange",function(s){return r.rememberMe=s}),P()()(),k(17,"div",13)(18,"p"),te(19,"Nespr\xe1vne zadan\xe9 \xfadaje"),P()(),k(20,"div")(21,"button",14),ke("click",function(){return r.signInWithGoogle()}),Ze(22,"img",15),te(23," Prihl\xe1si\u0165 sa cez google "),P()(),k(24,"div",16)(25,"button",17),ke("click",function(){return r.login()}),te(26," Prihl\xe1si\u0165 "),P(),k(27,"button",18),te(28," Registr\xe1cia "),P()()()()()),2&i&&($(6),kv(Za(9,Jj,r.error)),W("ngModel",r.name),$(3),kv(Za(11,Jj,r.error)),W("ngModel",r.password),$(7),W("ngModel",r.rememberMe),$(1),kv(Dp(13,jie,r.error,r.error)))},dependencies:[va,pA,Zc,Dg,Nh,ga]})}return n})();const OA=function(n){return{"border-red-600":n}},zie=function(n,e){return{"text-red-600":n,"opacity-100":e}};let tz=(()=>{class n{constructor(t,i){this.router=t,this.service=i,this.errorMessage="",this.pswdError=!1,this.emailError=!1}isValidEmail(t){return/^[\w\-\.]+@([\w-]+\.)+[\w-]{2,}$/.test(t)}register(){if(this.email&&this.password&&this.passwordCheck&&this.fname&&this.lname){if(this.password.length<6)return this.errorMessage="Heslo mus\xed obsahova\u0165 aspo\u0148 6 znakov",this.pswdError=!0,void(this.emailError=!1);if(this.pswdError=!1,this.password!==this.passwordCheck)return this.errorMessage="Hesla sa nezhoduj\xfa",this.pswdError=!0,void(this.emailError=!1);if(this.pswdError=!1,!this.isValidEmail(this.email))return this.errorMessage="Neplatn\xe1 emailov\xe1 adresa",void(this.emailError=!0);this.emailError=!1,this.service.register(this.email,this.password,this.fname,this.lname).then(t=>{this.router.navigate([""])}).catch(t=>{"auth/email-already-in-use"===t.code&&(this.errorMessage="Tento email je u\u017e registrovan\xfd",this.emailError=!0)})}else this.errorMessage="Pros\xedm vypl\u0148 v\u0161etky pol\xed\u010dka"}static#e=this.\u0275fac=function(i){return new(i||n)(q(Mi),q(Tl))};static#t=this.\u0275cmp=On({type:n,selectors:[["app-register-page"]],decls:33,vars:19,consts:[[1,"outer_container"],[1,"inner_container","items-center","justify-center"],[1,"bg-gradient-to-t","from-ang-gradient_from","to-ang-gradient_to","p-8","rounded-lg","text-white","font-semibold"],[1,"flex","py-2","gap-1"],[1,"flex","flex-col","w-full"],["for","krstne"],["type","text","name","krstne","id","krstne","required","","placeholder","J\xe1n",1,"w-full","p-1","border","border-ang-border_main","rounded-lg","text-black",3,"ngModel","ngModelChange"],["for","priezv"],["type","text","name","priezv","id","priezv","required","","placeholder","Nov\xe1k",1,"w-full","p-1","border","border-ang-border_main","rounded-lg","text-black",3,"ngModel","ngModelChange"],[1,"py-2"],["for","email"],["type","email","name","email","id","email","required","","placeholder","jan.novak@email.com",1,"w-full","p-1","border","border-ang-border_main","rounded-lg","text-black",3,"ngModel","ngClass","ngModelChange"],["for","heslo"],["type","password","name","heslo","id","heslo","required","","placeholder","Zadajte heslo",1,"w-full","border","border-ang-border_main","rounded-lg","p-1","text-black",3,"ngModel","ngClass","ngModelChange"],["for","hesloKontrola"],["type","password","name","hesloKontrola","id","hesloKontrola","required","","placeholder","Zopakujte heslo",1,"w-full","border","border-ang-border_main","rounded-lg","p-1","text-black",3,"ngModel","ngClass","ngModelChange"],[1,"opacity-0","font-semibold","text-xl","flex","items-center","justify-center","pt-4",3,"ngClass"],[1,"flex","justify-between","pt-10"],["id","register_log_button","routerLink","/login",1,"border","border-ang-border_main","px-3","py-1","text-ang-gradient_to","font-semibold","hover:opacity-85","rounded-lg","bg-ang-main_bg"],[1,"border","border-ang-border_main","px-3","py-1","text-ang-gradient_to","font-semibold","hover:opacity-85","rounded-lg","bg-ang-main_bg"],[3,"click"]],template:function(i,r){1&i&&(k(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),te(6,"Meno"),P(),k(7,"input",6),ke("ngModelChange",function(s){return r.fname=s}),P()(),k(8,"div",4)(9,"label",7),te(10,"Priezvisko"),P(),k(11,"input",8),ke("ngModelChange",function(s){return r.lname=s}),P()()(),k(12,"div",9)(13,"label",10),te(14,"E-mail"),P(),k(15,"input",11),ke("ngModelChange",function(s){return r.email=s}),P()(),k(16,"div",9)(17,"label",12),te(18,"Heslo"),P(),k(19,"input",13),ke("ngModelChange",function(s){return r.password=s}),P()(),k(20,"div",9)(21,"label",14),te(22,"Kontrola hesla"),P(),k(23,"input",15),ke("ngModelChange",function(s){return r.passwordCheck=s}),P()(),k(24,"div",16),te(25),P(),k(26,"div",17)(27,"button",18)(28,"p"),te(29,"Sp\xe4\u0165 na prihl\xe1senie"),P()(),k(30,"button",19)(31,"p",20),ke("click",function(){return r.register()}),te(32,"Zalo\u017e \xfa\u010det"),P()()()()()()),2&i&&($(7),W("ngModel",r.fname),$(4),W("ngModel",r.lname),$(4),W("ngModel",r.email)("ngClass",Za(10,OA,r.emailError)),$(4),W("ngModel",r.password)("ngClass",Za(12,OA,r.pswdError)),$(4),W("ngModel",r.passwordCheck)("ngClass",Za(14,OA,r.pswdError)),$(1),W("ngClass",Dp(16,zie,!r.pswdError||!r.emailError,!r.pswdError||!r.emailError)),$(1),Kr(" ",r.errorMessage," "))},dependencies:[mx,va,Zc,Dg,Nh,ga]})}return n})();class Ag{constructor(e){return e}}class nz{constructor(){return(0,kr.getApps)()}}const NA=new re("angularfire2._apps"),Hie={provide:Ag,useFactory:function $ie(n){return n&&1===n.length?n[0]:new Ag((0,kr.getApp)())},deps:[[new Wr,NA]]},qie={provide:nz,deps:[[new Wr,NA]]};function Wie(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new Ag(i)}}let Gie=(()=>{class n{constructor(t){(0,kr.registerVersion)("angularfire",Md.full,"core"),(0,kr.registerVersion)("angularfire",Md.full,"app"),(0,kr.registerVersion)("angular",Nw.full,t.toString())}static \u0275fac=function(i){return new(i||n)(F(Io))};static \u0275mod=_t({type:n});static \u0275inj=Tt({providers:[Hie,qie]})}return n})();function Zie(n,...e){return{ngModule:Gie,providers:[{provide:NA,useFactory:Wie(n),multi:!0,deps:[it,jn,py,...e]}]}}class rz{constructor(){return Px("auth")}}class Fh{constructor(e){return e}}const oz="firestore",VA=new re("angularfire2.firestore-instances");function ere(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new Fh(i)}}const tre={provide:class Xie{constructor(){return Px(oz)}},deps:[[new Wr,VA]]},nre={provide:Fh,useFactory:function Jie(n,e){const t=function IN(n,e,t){if(e){if(1===e.length)return e[0];const o=e.filter(s=>s.app===t);if(1===o.length)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}(oz,n,e);return t&&new Fh(t)},deps:[[new Wr,VA],Ag]};let ire=(()=>{class n{constructor(){(0,kr.registerVersion)("angularfire",Md.full,"fst")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=_t({type:n});static \u0275inj=Tt({providers:[nre,tre]})}return n})();function rre(n,...e){return{ngModule:ire,providers:[{provide:VA,useFactory:ere(n),multi:!0,deps:[it,jn,py,nz,[new Wr,rz],[new Wr,kx],...e]}]}}const Pi=_c(CD,!0),ore=_c(xB,!0),to=_c($m,!0),sre=_c(EB,!0),Lh=_c(wB,!0),are=_c(JX,!0),I0=_c(ND,!0);let Sg=(()=>{class n{constructor(t,i){this.firestore=t,this.cookieService=i}getTestsYears(t){const i=Pi(this.firestore,"tests"),r=to(i,"official_tests"),o=Pi(r,t);return b(Lh(o)).pipe(be(s=>{const a=[];return console.log(s),s.forEach(l=>{console.log(l.id),a.push(l.id)}),a}))}getTest(t,i,r){const o=Pi(this.firestore,"tests"),s=to(o,"official_tests"),a=Pi(s,t),l=to(a,i),c=Pi(l,"sections");return b(Lh(c)).pipe(Ae(p=>QU(p.docs.map(_=>{const E=Pi(_.ref,"questions");return b(Lh(E)).pipe(be(x=>({questions:x.docs.map(V=>{const M=V.data();return r||delete M.answer,{id:V.id,text:M.text,imageUrl:M.imageUrl,answer:M.answer,questionType:M.questionType,options:M.options,options_2:M.options_2,userAnswer:"",userAnswer_2:""}}),articleUrl:_.data().article_url,audioUrl:_.data().audio_url})))}))),be(p=>({sections:p,subCat:t,year:i})))}getTestResult(t){return new Ke(i=>{this.getTest(t.subCat,t.year,!0).subscribe(r=>{const s=r.sections;let a=0;for(let c=0;c<s.length;c++){const h=s[c],p=t.sections[c];for(let g=0;g<h.questions.length;g++){a++;const E=p.results[g];E.result=this.compareUserAndCorrectAnswer(h.questions[g],E),E.result&&t.score++}}t.percentageScore=Math.round(t.score/a*1e4)/100;const l=this.cookieService.get("uid");l?this.saveFinishedTest(l,t):console.error("User is not logged in"),i.next(t),i.complete()},r=>{i.error(r)})})}compareUserAndCorrectAnswer(t,i){return Array.isArray(t.answer)?t.answer.includes(i.userAnswer):t.answer===i.userAnswer}saveFinishedTest(t,i){const r=Pi(this.firestore,"users"),o=to(r,t),s=Pi(o,"savedTests"),a=to(s);I0(a,i).then(l=>console.log(l)).catch(l=>console.log(l))}addOfficialTestToFirestore(t){var i=this;return(0,ne.Z)(function*(){const r=Pi(i.firestore,"tests"),o=to(r,"official_tests"),s=Pi(o,t.subCat),a=to(s,t.year);yield I0(a,{});for(let l=0;l<t.sections.length;l++){const c=t.sections[l],h=to(Pi(a,"sections"),c.sectionId);yield I0(h,{});for(let p=0;p<c.questions.length;p++){const g=c.questions[p];console.log(g);const _=to(Pi(h,"questions"),g.id);yield I0(_,g)}}})()}static#e=this.\u0275fac=function(i){return new(i||n)(F(Fh),F(Od))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function lre(n,e){1&n&&(k(0,"div")(1,"h1",5),te(2," Matematika "),P(),k(3,"ul")(4,"li"),te(5,"Test obsahuje 30 \xfaloh."),P(),k(6,"li"),te(7," Na vypracovanie testu m\xe1te 100 min\xfat. (\u010das sa spust\xed po kliknut\xed na test) "),P(),k(8,"li"),te(9," Pri rie\u0161enie \xfaloh za\u0161krtnete pol\xed\u010dko alebo nap\xed\u0161ete odpove\u010f. (popros\xedm p\xed\u0161te desatinn\xe9 \u010d\xedsla s \u010diarkou a z\xe1porne hodnoty spolu[4,5 ; -5]) "),P(),k(10,"li"),te(11,"Zru\u0161en\xe9 ot\xe1zky sa V\xe1m pripo\u010d\xedtavaj\xfa za bod automaticky"),P()()())}function cre(n,e){1&n&&(k(0,"div")(1,"h1",5),te(2," Slovensk\xfd jazyk a literat\xfara "),P(),k(3,"ul")(4,"li"),te(5,"Test obsahuje 64 \xfaloh."),P(),k(6,"li"),te(7," Na vypracovanie testu m\xe1te 100 min\xfat. (\u010das sa spust\xed po kliknut\xed na test) "),P(),k(8,"li"),te(9," Pri rie\u0161enie \xfaloh za\u0161krtnete pol\xed\u010dko alebo nap\xed\u0161ete odpove\u010f. (popros\xedm p\xed\u0161te s diakritikou) "),P(),k(10,"li"),te(11,"Zru\u0161en\xe9 ot\xe1zky sa V\xe1m pripo\u010d\xedtavaj\xfa za bod automaticky"),P()()())}function ure(n,e){1&n&&(k(0,"div")(1,"h1",5),te(2," Anglick\xfd jazyk "),P(),k(3,"ul")(4,"li"),te(5,"Testy pre anglick\xfd jazyk sa pripravuj\xfa"),P()()())}const dre=function(n,e){return["/official-test",n,e]};function hre(n,e){if(1&n&&(k(0,"a",8),te(1),P()),2&n){const t=e.$implicit,i=ve(2);W("routerLink",Dp(2,dre,i.subCat,t)),$(1),Kr(" ",t," ")}}function fre(n,e){if(1&n&&(k(0,"div",6),me(1,hre,2,5,"a",7),P()),2&n){const t=ve();$(1),W("ngForOf",t.years)}}function pre(n,e){1&n&&(k(0,"div")(1,"p"),te(2,"no years"),P()())}function mre(n,e){1&n&&(k(0,"div")(1,"p"),te(2,"loading"),P()())}let sz=(()=>{class n{constructor(t,i){this.route=t,this.testService=i,this.loading=!0,this.route.params.subscribe(r=>{r&&(this.subCat=r.subCat,this.fetchTestYears().subscribe(o=>{this.years=o,console.log(this.years),this.loading=!1},o=>{console.error("Error fetching tests:",o)}))})}fetchTestYears(){return this.subCat?this.testService.getTestsYears(this.subCat):new Ke(t=>{t.next([]),t.complete()})}static#e=this.\u0275fac=function(i){return new(i||n)(q(Cl),q(Sg))};static#t=this.\u0275cmp=On({type:n,selectors:[["app-official-categories-page"]],decls:9,vars:6,consts:[[1,"outer_container"],[1,"inner_container","flex-col","justify-evenly","items-center","py-4"],[1,"text-center"],[4,"ngIf"],["class","flex gap-4 flex-wrap items-center justify-center px-2",4,"ngIf"],[1,"text-2xl","sm:text-3xl","font-bold","text-ang-text_main"],[1,"flex","gap-4","flex-wrap","items-center","justify-center","px-2"],["class","border border-ang-border_main py-2 px-8 rounded-lg bg-ang-main_btn text-ang-text_white hover:opacity-85 transition-all",3,"routerLink",4,"ngFor","ngForOf"],[1,"border","border-ang-border_main","py-2","px-8","rounded-lg","bg-ang-main_btn","text-ang-text_white","hover:opacity-85","transition-all",3,"routerLink"]],template:function(i,r){1&i&&(k(0,"div",0)(1,"div",1)(2,"div",2),me(3,lre,12,0,"div",3),me(4,cre,12,0,"div",3),me(5,ure,6,0,"div",3),P(),me(6,fre,2,1,"div",4),me(7,pre,3,0,"div",3),me(8,mre,3,0,"div",3),P()()),2&i&&($(3),W("ngIf","mat"===r.subCat),$(1),W("ngIf","sjl"===r.subCat),$(1),W("ngIf","anj"===r.subCat),$(1),W("ngIf",r.years),$(1),W("ngIf",!(r.years&&0!=r.years.length||r.loading)),$(1),W("ngIf",r.loading))},dependencies:[Xa,$o,ga]})}return n})();function gre(n,e){if(1&n&&(k(0,"div"),Ze(1,"img",13),P()),2&n){const t=e.$implicit;$(1),W("src",t,gr)}}const az=function(n){return[n]};function _re(n,e){if(1&n&&(k(0,"div"),me(1,gre,2,1,"div",12),P()),2&n){const t=ve(2).$implicit;$(1),W("ngForOf",Za(1,az,t.articleUrl))}}function vre(n,e){if(1&n&&(k(0,"div"),Ze(1,"img",13),P()),2&n){const t=e.$implicit;$(1),W("src",t,gr)}}function yre(n,e){if(1&n&&(k(0,"div"),me(1,vre,2,1,"div",12),P()),2&n){const t=ve(2).$implicit;$(1),W("ngForOf",t.articleUrl)}}function bre(n,e){if(1&n&&(k(0,"div",14)(1,"audio",15),Ze(2,"source",16),te(3," Your browser does not support the audio element. "),P()()),2&n){const t=ve(2).$implicit;$(2),W("src",t.audioUrl,gr)}}function Ere(n,e){if(1&n&&(k(0,"div",10),me(1,_re,2,3,"div",3),me(2,yre,2,1,"div",3),me(3,bre,4,1,"div",11),P()),2&n){const t=ve().$implicit,i=ve(3);$(1),W("ngIf",i.isString(t.articleUrl)),$(1),W("ngIf",i.isArray(t.articleUrl)),$(1),W("ngIf",t.audioUrl)}}function wre(n,e){1&n&&Ze(0,"p",24),2&n&&W("innerHTML",ve().$implicit.text,wo)}function Ire(n,e){1&n&&Ze(0,"img",13),2&n&&W("src",ve().$implicit.imageUrl,gr)}function xre(n,e){if(1&n){const t=zn();k(0,"div",26)(1,"input",27),ke("ngModelChange",function(r){return Kt(t),zt(ve(2).$implicit.userAnswer=r)}),P(),Ze(2,"label",28),P()}if(2&n){const t=e.$implicit,i=ve(2).$implicit;$(1),W("name",i.id)("value",t)("id",t+i.id)("ngModel",i.userAnswer),$(1),W("for",t+i.id)("innerHTML",t,wo)}}function Cre(n,e){if(1&n&&(k(0,"div"),me(1,xre,3,6,"div",25),P()),2&n){const t=ve().$implicit;$(1),W("ngForOf",t.options)}}function Tre(n,e){if(1&n){const t=zn();k(0,"div")(1,"input",29),ke("ngModelChange",function(r){return Kt(t),zt(ve().$implicit.userAnswer=r)}),P()()}if(2&n){const t=ve().$implicit;$(1),W("ngModel",t.userAnswer)}}function Dre(n,e){if(1&n){const t=zn();vp(0),k(1,"div")(2,"input",32),ke("ngModelChange",function(r){return Kt(t),zt(ve(2).$implicit.userAnswer=r)}),P(),Ze(3,"label",28),P(),yp()}if(2&n){const t=e.$implicit,i=ve(2).$implicit;$(2),W("name",i.id+"option_1")("value",t)("id",t+i.id)("ngModel",i.userAnswer),$(1),W("for",t+i.id)("innerHTML",t,wo)}}function Are(n,e){if(1&n){const t=zn();vp(0),k(1,"div")(2,"input",32),ke("ngModelChange",function(r){return Kt(t),zt(ve(2).$implicit.userAnswer_2=r)}),P(),Ze(3,"label",28),P(),yp()}if(2&n){const t=e.$implicit,i=ve(2).$implicit;$(2),W("name",i.id+"option_2")("value",t)("id",t+i.id)("ngModel",i.userAnswer_2),$(1),W("for",t+i.id)("innerHTML",t,wo)}}function Sre(n,e){if(1&n&&(k(0,"div",30)(1,"div",31),me(2,Dre,4,6,"ng-container",12),P(),k(3,"div",31),me(4,Are,4,6,"ng-container",12),P()()),2&n){const t=ve().$implicit;$(2),W("ngForOf",t.options),$(2),W("ngForOf",t.options_2)}}function Rre(n,e){if(1&n){const t=zn();k(0,"div",33)(1,"input",34),ke("ngModelChange",function(r){return Kt(t),zt(ve().$implicit.userAnswer=r)}),P(),k(2,"input",35),ke("ngModelChange",function(r){return Kt(t),zt(ve().$implicit.userAnswer_2=r)}),P()()}if(2&n){const t=ve().$implicit;$(1),W("ngModel",t.userAnswer),$(1),W("ngModel",t.userAnswer_2)}}function Mre(n,e){1&n&&(k(0,"div")(1,"p"),te(2,"Question canceled by NUCEM"),P()())}function Pre(n,e){if(1&n&&(k(0,"div",17)(1,"div",18),Ze(2,"p",19),me(3,wre,1,1,"p",20),me(4,Ire,1,1,"img",21),P(),me(5,Cre,2,1,"div",3),me(6,Tre,2,1,"div",3),me(7,Sre,5,2,"div",22),me(8,Rre,3,2,"div",23),me(9,Mre,3,0,"div",3),P()),2&n){const t=e.$implicit;$(2),W("innerHTML",t.id,wo),$(1),W("ngIf",t.text),$(1),W("ngIf",t.imageUrl),$(1),W("ngIf","select"===t.questionType),$(1),W("ngIf","input"===t.questionType),$(1),W("ngIf","select_twice"===t.questionType),$(1),W("ngIf","input_twice"===t.questionType),$(1),W("ngIf","canceled"===t.questionType)}}function kre(n,e){if(1&n&&(k(0,"div",7)(1,"div"),me(2,Ere,4,3,"div",8),me(3,Pre,10,8,"div",9),P()()),2&n){const t=e.$implicit;$(2),W("ngIf",t.articleUrl),$(1),W("ngForOf",t.questions)}}function Ore(n,e){if(1&n&&(k(0,"div",1),me(1,kre,4,2,"div",6),P()),2&n){const t=ve(2);$(1),W("ngForOf",t.test.sections)}}function Nre(n,e){if(1&n&&(k(0,"div"),Ze(1,"img",13),P()),2&n){const t=e.$implicit;$(1),W("src",t,gr)}}function Fre(n,e){if(1&n&&(k(0,"div"),me(1,Nre,2,1,"div",12),P()),2&n){const t=ve(2).$implicit;$(1),W("ngForOf",Za(1,az,t.articleUrl))}}function Lre(n,e){if(1&n&&(k(0,"div"),Ze(1,"img",13),P()),2&n){const t=e.$implicit;$(1),W("src",t,gr)}}function Vre(n,e){if(1&n&&(k(0,"div"),me(1,Lre,2,1,"div",12),P()),2&n){const t=ve(2).$implicit;$(1),W("ngForOf",t.articleUrl)}}function Bre(n,e){if(1&n&&(k(0,"div"),me(1,Fre,2,3,"div",3),me(2,Vre,2,1,"div",3),P()),2&n){const t=ve().$implicit,i=ve(3);$(1),W("ngIf",i.isString(t.articleUrl)),$(1),W("ngIf",i.isArray(t.articleUrl))}}function Ure(n,e){1&n&&Ze(0,"p",24),2&n&&W("innerHTML",ve().$implicit.text,wo)}function jre(n,e){1&n&&Ze(0,"img",13),2&n&&W("src",ve().$implicit.imageUrl,gr)}function zre(n,e){if(1&n){const t=zn();k(0,"div")(1,"input",27),ke("ngModelChange",function(r){return Kt(t),zt(ve(2).$implicit.userAnswer=r)}),P(),Ze(2,"label",28),P()}if(2&n){const t=e.$implicit,i=ve(2).$implicit;$(1),W("name",i.id)("value",t)("id",t+i.id)("ngModel",i.userAnswer),$(1),W("for",t+i.id)("innerHTML",t,wo)}}function $re(n,e){if(1&n&&(k(0,"div"),me(1,zre,3,6,"div",12),P()),2&n){const t=ve().$implicit;$(1),W("ngForOf",t.options)}}function Hre(n,e){if(1&n){const t=zn();k(0,"div")(1,"input",36),ke("ngModelChange",function(r){return Kt(t),zt(ve().$implicit.userAnswer=r)}),P()()}if(2&n){const t=ve().$implicit;$(1),W("ngModel",t.userAnswer)}}function qre(n,e){1&n&&(k(0,"div")(1,"p"),te(2,"Question canceled by NUCEM"),P()())}function Wre(n,e){if(1&n&&(k(0,"div"),Ze(1,"p",24),me(2,Ure,1,1,"p",20),me(3,jre,1,1,"img",21),me(4,$re,2,1,"div",3),me(5,Hre,2,1,"div",3),me(6,qre,3,0,"div",3),P()),2&n){const t=e.$implicit;$(1),W("innerHTML",t.id,wo),$(1),W("ngIf",t.text),$(1),W("ngIf",t.imageUrl),$(1),W("ngIf","select"===t.questionType),$(1),W("ngIf","input"===t.questionType),$(1),W("ngIf","canceled"===t.questionType)}}function Gre(n,e){if(1&n&&(k(0,"div")(1,"div"),me(2,Bre,3,2,"div",3),me(3,Wre,7,6,"div",12),P()()),2&n){const t=e.$implicit;$(2),W("ngIf",t.articleUrl),$(1),W("ngForOf",t.questions)}}function Zre(n,e){if(1&n&&(k(0,"div"),me(1,Gre,4,2,"div",12),P()),2&n){const t=ve(2);$(1),W("ngForOf",t.test.sections)}}function Kre(n,e){1&n&&Ze(0,"p",24),2&n&&W("innerHTML",ve().$implicit.text,wo)}function Qre(n,e){1&n&&Ze(0,"img",13),2&n&&W("src",ve().$implicit.imageUrl,gr)}function Yre(n,e){if(1&n){const t=zn();k(0,"div")(1,"input",36),ke("ngModelChange",function(r){return Kt(t),zt(ve().$implicit.userAnswer=r)}),P()()}if(2&n){const t=ve().$implicit;$(1),W("ngModel",t.userAnswer)}}function Xre(n,e){if(1&n){const t=zn();k(0,"div")(1,"input",27),ke("ngModelChange",function(r){return Kt(t),zt(ve(2).$implicit.userAnswer=r)}),P(),Ze(2,"label",28),P()}if(2&n){const t=e.$implicit,i=ve(2).$implicit;$(1),W("name",i.id)("value",t)("id",t+i.id)("ngModel",i.userAnswer),$(1),W("for",t+i.id)("innerHTML",t,wo)}}function Jre(n,e){if(1&n&&(k(0,"div"),me(1,Xre,3,6,"div",12),P()),2&n){const t=ve().$implicit;$(1),W("ngForOf",t.options)}}function eoe(n,e){1&n&&(k(0,"div")(1,"p"),te(2,"Question canceled by NUCEM"),P()())}function toe(n,e){if(1&n&&(k(0,"div"),Ze(1,"p",24),me(2,Kre,1,1,"p",20),me(3,Qre,1,1,"img",21),me(4,Yre,2,1,"div",3),me(5,Jre,2,1,"div",3),me(6,eoe,3,0,"div",3),P()),2&n){const t=e.$implicit;$(1),W("innerHTML",t.id,wo),$(1),W("ngIf",t.text),$(1),W("ngIf",t.imageUrl),$(1),W("ngIf","input"===t.questionType),$(1),W("ngIf","select"===t.questionType),$(1),W("ngIf","canceled"===t.questionType)}}function noe(n,e){if(1&n&&(k(0,"div")(1,"div"),me(2,toe,7,6,"div",12),P()()),2&n){const t=e.$implicit;$(2),W("ngForOf",t.questions)}}function ioe(n,e){if(1&n&&(k(0,"div"),me(1,noe,3,1,"div",12),P()),2&n){const t=ve(2);$(1),W("ngForOf",t.test.sections)}}function roe(n,e){if(1&n&&(k(0,"div",37)(1,"div",38)(2,"div",39)(3,"h1"),te(4,"Vyhodnotenie"),P(),k(5,"p"),te(6,"V teste ste dosiahli:"),P(),Ze(7,"p",40),P(),k(8,"div",41)(9,"button",42),te(10," Domovsk\xe1 str\xe1nka "),P(),k(11,"button",43),te(12," Detaily testu "),P()()()()),2&n){const t=ve(2);$(7),W("innerText",t.testResults.percentageScore+"%")}}function ooe(n,e){if(1&n){const t=zn();k(0,"div",1)(1,"div",2),te(2),P(),me(3,Ore,2,1,"div",0),me(4,Zre,2,1,"div",3),me(5,ioe,2,1,"div",3),k(6,"button",4),ke("click",function(){return Kt(t),zt(ve().submitTest())}),te(7," Vyhodnoti\u0165 test "),P(),me(8,roe,13,1,"div",5),P()}if(2&n){const t=ve();$(2),hs(t.display),$(1),W("ngIf","anj"===t.subCat),$(1),W("ngIf","sjl"===t.subCat),$(1),W("ngIf","mat"===t.subCat),$(3),W("ngIf",t.testResults)}}let lz=(()=>{class n{isString(t){return"string"==typeof t}isArray(t){return Array.isArray(t)}constructor(t,i){this.route=t,this.testService=i,this.route.params.subscribe(r=>{r&&(this.subCat=r.subCat,this.year=r.year,this.fetchTest().subscribe(o=>{this.test=o,console.log(this.test)},o=>{console.error("Error fetching test:",o)}))}),this.timer()}fetchTest(){return this.subCat&&this.year?this.testService.getTest(this.subCat,this.year,!1):new Ke(t=>{t.next({}),t.complete()})}submitTest(){if(this.test){let t={subCat:this.subCat||"",year:this.year||"",finishedAt:(new Date).toISOString(),timeTaken:this.getRemainingTimeInSeconds(),score:0,percentageScore:0,sections:[]};for(const i of this.test.sections){const r=[];for(const s of i.questions)("select_twice"===s.questionType||"input_twice"===s.questionType)&&(void 0===s.userAnswer||void 0===s.userAnswer_2||""===s.userAnswer||""===s.userAnswer_2?s.userAnswer="Nevyplnen\xe9":"select_twice"===s.questionType?s.userAnswer=s.userAnswer+"-"+s.userAnswer_2:"input_twice"===s.questionType&&(s.userAnswer=s.userAnswer.trim()+", "+s.userAnswer_2.trim())),(void 0===s.userAnswer||""===s.userAnswer)&&(s.userAnswer="Nevyplnen\xe9"),r.push({id:s.id,userAnswer:s.userAnswer,result:!1});t.sections.push({results:r})}this.testService.getTestResult(t).subscribe(i=>{this.testResults=i},i=>{console.error("Error updating test results:",i)})}}getTime(){switch(this.subCat){case"anj":{const t=this.year?.split("-")[1];return"B1"===t?100:"B2"===t?120:"C1"===t?150:(console.error("Unknown level"),0)}case"sjl":return 100;case"mat":return 150;default:return console.error("Unknown subCat"),0}}timer(t=this.getTime()){let i=60*t,r="0",o=60;const s=t<10?"0":"",a=setInterval(()=>{i--,0!=o?o--:o=59,r=o<10?"0"+o:o,this.display=`${s}${Math.floor(i/60)}:${r}`,0==i&&(this.submitTest(),clearInterval(a))},1e3)}getRemainingTimeInSeconds(){const t=this.display.split(":"),o=60*parseInt(t[0])+parseInt(t[1]);let a=60*this.getTime()-o;const l=Math.floor(a/60);return a%=60,l+":"+(a<10?"0"+a:a)}static#e=this.\u0275fac=function(i){return new(i||n)(q(Cl),q(Sg))};static#t=this.\u0275cmp=On({type:n,selectors:[["app-official-test-page"]],decls:1,vars:1,consts:[["class","flex flex-col items-center",4,"ngIf"],[1,"flex","flex-col","items-center"],["id","timer"],[4,"ngIf"],[1,"border-2","border-ang-border_main","my-2","py-2","px-6","bg-ang-main_btn","text-ang-text_white","rounded-lg","hover:opacity-85","transition",3,"click"],["id","dialog","class","fixed left-0 top-0 w-screen h-screen bg-opacity-40 bg-black justify-center items-center flex",4,"ngIf"],["class","flex flex-col items-center max-w-[720px] text-sm sm:text-base px-2 md:px-0 md:border-x-2 md:border-ang-border_main",4,"ngFor","ngForOf"],[1,"flex","flex-col","items-center","max-w-[720px]","text-sm","sm:text-base","px-2","md:px-0","md:border-x-2","md:border-ang-border_main"],["class","pb-4",4,"ngIf"],["class","py-4 px-4 border-b border-ang-border_main",4,"ngFor","ngForOf"],[1,"pb-4"],["class","flex items-center justify-center",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"src"],[1,"flex","items-center","justify-center"],["controls",""],["type","audio/mpeg",3,"src"],[1,"py-4","px-4","border-b","border-ang-border_main"],[1,"flex","gap-3","items-center","pb-2"],[1,"bg-slate-400","px-2","py-0.5",3,"innerHTML"],[3,"innerHTML",4,"ngIf"],[3,"src",4,"ngIf"],["class","flex flex-col gap-2",4,"ngIf"],["class","flex gap-4 flex-wrap",4,"ngIf"],[3,"innerHTML"],["class","flex gap-2",4,"ngFor","ngForOf"],[1,"flex","gap-2"],["type","radio",3,"name","value","id","ngModel","ngModelChange"],[3,"for","innerHTML"],["type","text","placeholder","Sem nap\xed\u0161te svoju odpove\u010f",1,"py-0.5","px-2","rounded-md","border","border-ang-border_main","w-full",3,"ngModel","ngModelChange"],[1,"flex","flex-col","gap-2"],[1,"flex","items-center","justify-evenly"],["type","radio",1,"mr-2",3,"name","value","id","ngModel","ngModelChange"],[1,"flex","gap-4","flex-wrap"],["type","text","placeholder","Sem nap\xed\u0161te prv\xfa odpove\u010f",1,"py-0.5","px-2","rounded-md","border","border-ang-border_main","w-full","md:w-[48%]",3,"ngModel","ngModelChange"],["type","text","placeholder","Sem nap\xed\u0161te druh\xfa odpove\u010f",1,"py-0.5","px-2","rounded-md","border","border-ang-border_main","w-full","md:w-[49.5%]",3,"ngModel","ngModelChange"],["type","text","placeholder","Sem nap\xed\u0161te svoju odpove\u010f",3,"ngModel","ngModelChange"],["id","dialog",1,"fixed","left-0","top-0","w-screen","h-screen","bg-opacity-40","bg-black","justify-center","items-center","flex"],[1,"bg-ang-main_bg","border","border-ang-border_main","p-8","w-4/6","rounded-lg","max-w-[32rem]"],[1,"flex","justify-center","items-center","flex-col","gap-4","text-sm","md:text-base"],[3,"innerText"],[1,"flex","justify-around","text-xs","md:text-base","gap-2","pt-4"],["routerLink","/",1,"text-sm","border","border-ang-border_main","py-1","px-2","rounded-lg","bg-ang-main_btn","text-ang-text_white","hover:opacity-85"],["routerLink","/test-history",1,"border","border-ang-border_main","py-1","px-2","rounded-lg","bg-ang-main_btn","text-ang-text_white","hover:opacity-85"]],template:function(i,r){1&i&&me(0,ooe,9,5,"div",0),2&i&&W("ngIf",r.test)},dependencies:[Xa,$o,va,SA,Zc,Nh,ga],styles:["img[_ngcontent-%COMP%]{width:720px;height:100%;object-fit:cover;border-radius:10px;box-shadow:0 0 10px #0000001a}"]})}return n})();function soe(n,e){if(1&n&&(k(0,"div",8)(1,"p"),te(2),P()()),2&n){const t=ve();$(2),hs(t.errorMessage)}}let cz=(()=>{class n{constructor(t){this.router=t,this.email="",this.isError=!1,this.errorMessage="Nespr\xe1vny form\xe1t emailu.",this.isDarkMode=!1}isValidEmail(){this.isError=!/^[\w\-\.]+@([\w-]+\.)+[\w-]{2,}$/.test(this.email)}sendPasswordResetEmail(){const t=(0,mc.o)();if(this.isValidEmail(),!this.isError)try{(0,mc.a5)(t,this.email),this.isError=!1,this.router.navigate([""])}catch(i){console.error(`Error sending password reset email: ${i.code} - ${i.message}`)}}static#e=this.\u0275fac=function(i){return new(i||n)(q(Mi))};static#t=this.\u0275cmp=On({type:n,selectors:[["app-forgot-password"]],decls:13,vars:2,consts:[[1,"outer_container"],[1,"inner_container","items-center","justify-center","p-2"],[1,"border","border-ang-border_main","rounded-lg","flex","flex-col","justify-around","h-2/3","px-2","md:px-4","bg-ang-border_main","text-ang-text_white"],[1,"text-xl","font-bold"],["class","text-center text-red-600 font-bold",4,"ngIf"],[1,"flex","flex-col","gap-4","justify-center","items-center"],["type","email","placeholder","Zadaj svoj email",1,"rounded-sm","w-3/4","py-1",3,"ngModel","ngModelChange"],[1,"border","border-ang-main_bg","px-4","py-1","rounded-lg","hover:opacity-85","mb-2","sm:mb-0","bg-ang-main_bg","text-ang-text_main",3,"click"],[1,"text-center","text-red-600","font-bold"]],template:function(i,r){1&i&&(k(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h2",3),te(5,"Resetovanie zabudnut\xe9ho hesla"),P(),k(6,"p"),te(7,"zadaj svoj email a pr\xedde ti link na mail na resetovanie hesla"),P()(),me(8,soe,3,1,"div",4),k(9,"div",5)(10,"input",6),ke("ngModelChange",function(s){return r.email=s}),P(),k(11,"button",7),ke("click",function(){return r.sendPasswordResetEmail()}),te(12," Odo\u0161li "),P()()()()()),2&i&&($(8),W("ngIf",r.isError),$(2),W("ngModel",r.email))},dependencies:[$o,va,Zc,Nh]})}return n})(),uz=(()=>{class n{constructor(t){this.firestore=t,this.localStorageKey="savedQuestions"}getAvailableIcons(){return["assets/user_icons/boy.png","assets/user_icons/girl.png","assets/user_icons/default.png"]}getSelectedIcon(){return this.selectedIcon||"assets/user_icons/default.png"}static#e=this.\u0275fac=function(i){return new(i||n)(F($B))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function aoe(n,e){if(1&n){const t=zn();k(0,"div")(1,"img",5),ke("click",function(){const o=Kt(t).$implicit;return zt(ve(2).selectIcon(o))}),P()()}if(2&n){const t=e.$implicit,i=ve(2);$(1),uc("selected",t===i.userServ.selectedIcon),W("src",t,gr)}}function loe(n,e){if(1&n&&(k(0,"div",3),me(1,aoe,2,3,"div",4),P()),2&n){const t=ve();$(1),W("ngForOf",t.availableIcons)}}let BA=(()=>{class n{constructor(t,i){this.userServ=t,this.er=i,this.showIconSelection=!1}handleClick(t){this.er.nativeElement.contains(t.target)||(this.showIconSelection=!1)}ngOnInit(){this.defaultIcon="assets/user_icons/default.png",this.availableIcons=this.userServ.getAvailableIcons()}toggleIconSelection(){this.updateAvailableIcons(),this.showIconSelection=!this.showIconSelection}selectIcon(t){this.userServ.selectedIcon=t,this.showIconSelection=!1}getSelectedIcon(){return this.userServ.getSelectedIcon()}updateAvailableIcons(){this.availableIcons=this.userServ.getAvailableIcons().filter(t=>t!==this.userServ.selectedIcon),this.userServ.selectedIcon||(this.availableIcons=this.availableIcons.filter(t=>t!==this.defaultIcon))}static#e=this.\u0275fac=function(i){return new(i||n)(q(uz),q(ei))};static#t=this.\u0275cmp=On({type:n,selectors:[["app-icon-selector"]],hostBindings:function(i,r){1&i&&ke("click",function(s){return r.handleClick(s)},0,$w)},decls:3,vars:2,consts:[[1,"relative","hover:cursor-pointer",3,"click"],["alt","Vyber ikonku",1,"w-20","h-20","hover:opacity-85",3,"src"],["class","icon_selection absolute bg-ang-main_bg border border-ang-border_main flex flex-wrap rounded-sm mt-4",4,"ngIf"],[1,"icon_selection","absolute","bg-ang-main_bg","border","border-ang-border_main","flex","flex-wrap","rounded-sm","mt-4"],[4,"ngFor","ngForOf"],["alt","Icon",1,"w-20","h-20","hover:opacity-85",3,"src","click"]],template:function(i,r){1&i&&(k(0,"div",0),ke("click",function(){return r.toggleIconSelection()}),Ze(1,"img",1),me(2,loe,2,1,"div",2),P()),2&i&&($(1),W("src",r.getSelectedIcon(),gr),$(1),W("ngIf",r.showIconSelection))},dependencies:[Xa,$o]})}return n})(),dz=(()=>{class n{constructor(t,i){this.authService=t,this.userAccountService=i,this.userName="",this.isDarkMode=!1,this.darkMode=!1,this.darkToggle=document.querySelector(".toggle_dark")}ngOnInit(){this.authService.userData.subscribe(t=>{t&&(this.userName=t.displayName||"")})}toggleDark(){this.darkMode=!this.darkMode,this.darkMode?document.documentElement.classList.toggle("dark"):document.documentElement.classList.remove("dark")}static#e=this.\u0275fac=function(i){return new(i||n)(q(Tl),q(uz))};static#t=this.\u0275cmp=On({type:n,selectors:[["app-user-account"]],decls:11,vars:1,consts:[[1,"outer_container"],[1,"inner_container","flex-col","p-2","text-ang-text_main"],[1,"flex","flex-col","items-center","gap-2","border-b","border-ang-border_main"],[1,"min-w-20","min-h-20"],[1,"flex","flex-col","text-center","pb-2"],[1,"font-bold"],[1,"font-semibold"],[1,"border","border-ang-border_main","toggle_dark",3,"click"]],template:function(i,r){1&i&&(k(0,"div",0)(1,"div",1)(2,"div",2),Ze(3,"app-icon-selector",3),k(4,"div",4)(5,"h1",5),te(6),P(),k(7,"p",6),te(8,"Ko\u0161ick\xe1 ak\xe1demia softv\xe9rov\xe9ho v\xfdvoja"),P(),k(9,"button",7),ke("click",function(){return r.toggleDark()}),te(10," Dark mode "),P()()()()()),2&i&&($(6),hs(r.userName))},dependencies:[BA]})}return n})(),coe=(()=>{class n{constructor(t){this.firestore=t}getFile(t){const i=Pi(this.firestore,"edu_materials"),r=to(i,"Subjects"),o=Pi(r,t);return b(sre(r).then(s=>{if(s.exists())return s.id;throw new Error("Document not found")})),b(Lh(o).then(s=>s.docs.map(l=>({id:l.id,text:l.data().text,url:l.data().url})).sort((l,c)=>l.id.localeCompare(c.id))))}static#e=this.\u0275fac=function(i){return new(i||n)(F(Fh))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uoe(n,e){if(1&n&&(k(0,"div")(1,"a",7),Ze(2,"img",8),k(3,"p",9),te(4),P()()()),2&n){const t=e.$implicit;$(1),W("href",t.url,gr),$(3),Kr(" ",t.text," ")}}function doe(n,e){if(1&n&&(k(0,"div",5),me(1,uoe,5,2,"div",6),P()),2&n){const t=ve();$(1),W("ngForOf",t.sjlMaterials)}}function hoe(n,e){if(1&n&&(k(0,"div")(1,"a",7),Ze(2,"img",8),k(3,"p",9),te(4),P()()()),2&n){const t=e.$implicit;$(1),W("href",t.url,gr),$(3),Kr(" ",t.text," ")}}function foe(n,e){if(1&n&&(k(0,"div",10),me(1,hoe,5,2,"div",6),P()),2&n){const t=ve();$(1),W("ngForOf",t.anjMaterials)}}function poe(n,e){if(1&n&&(k(0,"div")(1,"a",7),Ze(2,"img",8),k(3,"p",9),te(4),P()()()),2&n){const t=e.$implicit;$(1),W("href",t.url,gr),$(3),Kr(" ",t.text," ")}}function moe(n,e){if(1&n&&(k(0,"div",10),me(1,poe,5,2,"div",6),P()),2&n){const t=ve();$(1),W("ngForOf",t.matMaterials)}}let hz=(()=>{class n{constructor(t){this.eduService=t,this.sjlMaterials=[],this.anjMaterials=[],this.matMaterials=[],this.showSjlNotes=!1,this.showAnjNotes=!1,this.showMatNotes=!1,this.isDarkMode=!1}ngOnInit(){this.eduService.getFile("SJL").subscribe(t=>{this.sjlMaterials=t}),this.eduService.getFile("ANJ").subscribe(t=>{this.anjMaterials=t}),this.eduService.getFile("MAT").subscribe(t=>{this.matMaterials=t})}toggleShowSjlNotes(){this.showSjlNotes=!this.showSjlNotes}toggleShowAnjNotes(){this.showAnjNotes=!this.showAnjNotes}toggleShowMatNotes(){this.showMatNotes=!this.showMatNotes}static#e=this.\u0275fac=function(i){return new(i||n)(q(coe))};static#t=this.\u0275cmp=On({type:n,selectors:[["app-education-materials"]],decls:14,vars:3,consts:[[1,"outer_container"],[1,"flex","flex-wrap","justify-around","sm:m-5","sm:p-4","sm:rounded-lg","sm:shadow-inner_sh","sm:w-full","gap-2"],[1,"border","border-ang-border_main","rounded-lg","mt-4","bg-ang-main_btn","text-ang-text_white","px-4","py-2","md:px-8","hover:opacity-85",3,"click"],["class","flex flex-col w-40",4,"ngIf"],["class","flex flex-col w-20",4,"ngIf"],[1,"flex","flex-col","w-40"],[4,"ngFor","ngForOf"],["target","_blank",1,"flex","items-center","text-xs","py-1","gap-2",3,"href"],["src","/assets/pdf_icon.png","alt","pdf_icon",1,"h-6","w-auto"],[1,"text-ang-text_main","font-semibold","hover:opacity-85"],[1,"flex","flex-col","w-20"]],template:function(i,r){1&i&&(k(0,"div",0)(1,"div",1)(2,"div")(3,"button",2),ke("click",function(){return r.toggleShowSjlNotes()}),te(4," Slovensk\xfd jazyk "),P(),me(5,doe,2,1,"div",3),P(),k(6,"div")(7,"button",2),ke("click",function(){return r.toggleShowAnjNotes()}),te(8," Anglick\xfd jazyk "),P(),me(9,foe,2,1,"div",4),P(),k(10,"div")(11,"button",2),ke("click",function(){return r.toggleShowMatNotes()}),te(12," Matematika "),P(),me(13,moe,2,1,"div",4),P()()()),2&i&&($(5),W("ngIf",r.showSjlNotes),$(4),W("ngIf",r.showAnjNotes),$(4),W("ngIf",r.showMatNotes))},dependencies:[Xa,$o]})}return n})(),goe=(()=>{class n{constructor(t,i){this.firestore=t,this.testService=i}getSavedTests(t){const i=Pi(this.firestore,"users"),r=to(i,t),o=Pi(r,"savedTests");return b(Lh(o)).pipe(be(s=>{const a=[],l=[],c=[],h=[];s.forEach(g=>{const _=g.data(),E={subCat:_.subCat,year:_.year,finishedAt:this.formatDate(_.finishedAt),timeTaken:_.timeTaken,score:_.score,percentageScore:_.percentageScore,sections:_.sections.map(x=>({results:x.results.map(T=>({id:T.id,userAnswer:T.userAnswer,result:T.result}))}))};h.push(E),c.includes(E.subCat+"-"+E.year)||(c.push(E.subCat+"-"+E.year),this.testService.getTest(E.subCat,E.year,!0).subscribe(x=>{l.push(x)}))});const p=h.sort((g,_)=>{const E=new Date(g.finishedAt);return new Date(_.finishedAt).getTime()-E.getTime()});return a.push(p),a.push(l),a}))}formatDate(t){const i=new Date(t);return`${i.getFullYear()}-${("0"+(i.getMonth()+1)).slice(-2)}-${("0"+i.getDate()).slice(-2)} ${("0"+i.getHours()).slice(-2)}:${("0"+i.getMinutes()).slice(-2)}`}removeOldestTest(t){const i=new y(!0),r=Pi(this.firestore,"users"),o=to(r,t),s=Pi(o,"savedTests"),a=[];return b(Lh(s)).pipe(Ch(()=>i.next(!1))).subscribe({next:l=>{l.forEach(h=>{a.push({id:h.id,data:h.data()})});const c=a.sort((h,p)=>{const g=new Date(h.data.finishedAt),_=new Date(p.data.finishedAt);return g.getTime()-_.getTime()});for(;c.length>10;){const h=c.shift();if(h){const g=to(s,h.id);b(ore(g)).subscribe({next:()=>console.log("Document successfully deleted!"),error:_=>console.error("Error deleting document: ",_)})}}},error:l=>{console.error("Error fetching saved tests:",l),i.next(!1)}}),i.asObservable()}static#e=this.\u0275fac=function(i){return new(i||n)(F(Fh),F(Sg))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _oe(n,e){1&n&&(k(0,"div",6),Ze(1,"div")(2,"div")(3,"div")(4,"div"),P())}function voe(n,e){1&n&&(k(0,"div"),te(1,"Open"),P())}function yoe(n,e){1&n&&(k(0,"div"),te(1,"Close"),P())}function boe(n,e){if(1&n&&(k(0,"div")(1,"p"),te(2),P()()),2&n){const t=e.$implicit;$(2),hs(t)}}const Eoe=function(){return{color:"lime"}};function woe(n,e){if(1&n&&(k(0,"span",15),te(1),P()),2&n){const t=ve(2).$implicit;W("ngStyle",CI(2,Eoe)),$(1),hs(t.userAnswer)}}const Ioe=function(){return{color:"red"}};function xoe(n,e){if(1&n&&(k(0,"span",15),te(1),P()),2&n){const t=ve(2).$implicit;W("ngStyle",CI(2,Ioe)),$(1),hs(t.userAnswer)}}function Coe(n,e){if(1&n&&(k(0,"div")(1,"p"),te(2),P(),k(3,"p"),te(4),P(),me(5,boe,3,1,"div",9),k(6,"p"),te(7,"Va\u0161a odpove\u010f:"),P(),me(8,woe,2,3,"span",13),me(9,xoe,2,3,"ng-template",null,14,kk),k(11,"p"),te(12),P()()),2&n){const t=function PM(n){return function Na(n,e){return n[e]}(function Lf(){return Qe.lFrame.contextLView}(),vt+n)}(10),i=ve(),r=i.$implicit,o=i.index,s=ve().index,a=ve(4);$(2),hs(r.id),$(2),Kr(" ",a.selectedTest.sections[s].questions[o].text," "),$(1),W("ngForOf",a.selectedTest.sections[s].questions[o].options),$(3),W("ngIf",r.result)("ngIfElse",t),$(4),hs(r.result)}}function Toe(n,e){if(1&n&&(k(0,"div"),me(1,Coe,13,6,"div",10),P()),2&n){const t=e.$implicit;$(1),W("ngIf","Nevyplnen\xe9"!=t.userAnswer)}}function Doe(n,e){if(1&n&&(k(0,"div"),me(1,Toe,2,1,"div",9),P()),2&n){const t=e.$implicit;$(1),W("ngForOf",t.results)}}function Aoe(n,e){if(1&n){const t=zn();k(0,"div")(1,"div",12),ke("click",function(){Kt(t);const r=ve().$implicit,o=ve(2);return zt((r.showResults=!r.showResults)&&o.selectTest(r))}),me(2,voe,2,0,"div",10),me(3,yoe,2,0,"div",10),P(),me(4,Doe,2,1,"div",9),P()}if(2&n){const t=ve().$implicit;$(2),W("ngIf",!t.showResults),$(1),W("ngIf",t.showResults),$(1),W("ngForOf",t.sections)}}function Soe(n,e){1&n&&(k(0,"div"),te(1,"Open"),P())}function Roe(n,e){1&n&&(k(0,"div"),te(1,"Close"),P())}function Moe(n,e){if(1&n){const t=zn();k(0,"div",12),ke("click",function(){Kt(t);const r=ve().$implicit,o=ve(2);return zt((r.showResults=!r.showResults)&&o.selectTest(r))}),me(1,Soe,2,0,"div",10),me(2,Roe,2,0,"div",10),P()}if(2&n){const t=ve().$implicit;$(1),W("ngIf",!t.showResults),$(1),W("ngIf",t.showResults)}}function Poe(n,e){if(1&n&&(k(0,"div")(1,"div")(2,"h2"),te(3),P(),k(4,"h3"),te(5),P(),me(6,Aoe,5,3,"div",10),P(),me(7,Moe,3,2,"div",11),P()),2&n){const t=e.$implicit;$(3),Kr(" ","Test "+t.subCat.toUpperCase()+" "+t.year+" z "+t.finishedAt," "),$(2),Kr(" ","Vyhotoven\xfd za "+t.timeTaken+", s \xfaspe\u0161nos\u0165ou: "+t.percentageScore+"%"," "),$(1),W("ngIf",t.showResults),$(1),W("ngIf",!t.showResults)}}function koe(n,e){if(1&n&&(k(0,"div",7)(1,"div",8)(2,"h1"),te(3,"Hist\xf3ria testov"),P(),me(4,Poe,8,4,"div",9),P()()),2&n){const t=ve();$(4),W("ngForOf",t.savedTests)}}function Ooe(n,e){1&n&&(k(0,"div",16)(1,"h1",17),te(2," Pre ukladanie testov je potrebn\xe9 sa prihl\xe1si\u0165. "),P()())}function Noe(n,e){1&n&&(k(0,"div",16)(1,"h1",17),te(2," Pre zobrazenie testov je potrebn\xe9 vyplni\u0165 aspo\u0148 jeden test "),P()())}let fz=(()=>{class n{constructor(t,i,r){this.testHistoryService=t,this.cookieService=i,this.authServ=r,this.isLoading=!1,this.isSavedTestsEmpty=!0,this.savedTests=[],this.originalTests=[],this.selectedTest={},this.savedTests.forEach(o=>{o.showResults=!1})}ngOnInit(){this.fetchTestsFromUserHistory()}fetchTestsFromUserHistory(){try{const t=this.cookieService.get("uid");if(!t)return void console.error("Uid is not set. User is not logged in.");this.testHistoryService.removeOldestTest(t).pipe(Ae(()=>this.testHistoryService.getSavedTests(t))).subscribe({next:i=>{this.savedTests=i[0],this.originalTests=i[1],console.log("Tests:",i),this.savedTests.length>0&&(this.isSavedTestsEmpty=!1),console.log("Saved tests:",this.savedTests)},error:i=>{console.error("Error loading saved tests:",i)}})}catch(t){console.error("Error loading saved tests:",t)}}selectTest(t){console.log("Test:",t);for(const i of this.originalTests)console.log("Original test:",i),i.subCat===t.subCat&&i.year===t.year&&(this.selectedTest=i,console.log("Selected test:",this.selectedTest))}static#e=this.\u0275fac=function(i){return new(i||n)(q(goe),q(Od),q(Tl))};static#t=this.\u0275cmp=On({type:n,selectors:[["app-test-history-page"]],decls:7,vars:4,consts:[[1,"outer_container"],[1,"inner_container"],[1,"loading"],["class","lds-ellipsis",4,"ngIf"],["class","test-history-page-header",4,"ngIf"],["class","flex items-center justify-center w-full",4,"ngIf"],[1,"lds-ellipsis"],[1,"test-history-page-header"],[1,"test-history-page-header-title"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"click",4,"ngIf"],[3,"click"],[3,"ngStyle",4,"ngIf","ngIfElse"],["wrongAnswer",""],[3,"ngStyle"],[1,"flex","items-center","justify-center","w-full"],[1,"text-2xl","text-ang-text_main"]],template:function(i,r){1&i&&(k(0,"div",0)(1,"div",1)(2,"div",2),me(3,_oe,5,0,"div",3),P(),me(4,koe,5,1,"div",4),me(5,Ooe,3,0,"div",5),me(6,Noe,3,0,"div",5),P()()),2&i&&($(3),W("ngIf",r.isLoading),$(1),W("ngIf",!r.isLoading&&!r.isSavedTestsEmpty),$(1),W("ngIf",!r.isLoading&&!r.authServ.isLoggedIn),$(1),W("ngIf",r.isSavedTestsEmpty&&r.authServ.isLoggedIn))},dependencies:[Xa,$o,QO]})}return n})();function Foe(n,e){1&n&&(k(0,"select",14)(1,"option",15),te(2,"B1"),P(),k(3,"option",16),te(4,"B2"),P(),k(5,"option",17),te(6,"C1"),P()())}function Loe(n,e){1&n&&(k(0,"h2"),te(1,"Articles:"),P())}function Voe(n,e){if(1&n){const t=zn();k(0,"div",18),Ze(1,"input",23)(2,"br"),k(3,"button",22),ke("click",function(){const o=Kt(t).index,s=ve().index;return zt(ve().removeArticleUrl(s,o))}),te(4,"Remove article"),P()()}if(2&n){const t=e.index;W("formGroupName",t),$(1),lc("placeholder"," Article: ",t+1,"")}}function Boe(n,e){1&n&&(k(0,"h2"),te(1,"Questions:"),P())}function Uoe(n,e){if(1&n){const t=zn();k(0,"div",18),Ze(1,"textarea",24)(2,"br"),k(3,"button",22),ke("click",function(){const o=Kt(t).index,s=ve().index;return zt(ve().removeQuestion(s,o))}),te(4,"Remove question"),P()()}if(2&n){const t=e.index;W("formGroupName",t),$(1),lc("placeholder"," Question: ",t+1,"")}}function joe(n,e){if(1&n){const t=zn();k(0,"div",18)(1,"h1"),te(2),P(),k(3,"div",19),me(4,Loe,2,0,"h2",20),me(5,Voe,5,2,"div",11),k(6,"button",12),ke("click",function(){const o=Kt(t).index;return zt(ve().addArticleUrl(o))}),te(7,"Add article"),P()(),k(8,"div",21),me(9,Boe,2,0,"h2",20),me(10,Uoe,5,2,"div",11),k(11,"button",12),ke("click",function(){const o=Kt(t).index;return zt(ve().addQuestion(o))}),te(12,"Add question"),P()(),k(13,"button",22),ke("click",function(){const o=Kt(t).index;return zt(ve().removeSection(o))}),te(14,"Remove section"),P()()}if(2&n){const t=e.index,i=ve();W("formGroupName",t),$(2),Kr("Section: ",t+1,""),$(2),W("ngIf",i.getArticleUrls(t).length>0),$(1),W("ngForOf",i.getArticleUrls(t).controls),$(4),W("ngIf",i.getQuestions(t).length>0),$(1),W("ngForOf",i.getQuestions(t).controls)}}let pz=(()=>{class n{constructor(t,i){this.fb=t,this.testService=i,this.testForm=this.fb.group({year:["",Hi.required],subCat:["",Hi.required],level:["",Hi.required],sections:this.fb.array([this.fb.group({sectionNumber:1,articleUrls:this.fb.array([this.fb.group({url:["",Hi.required]})]),questions:this.fb.array([this.fb.group({questionJson:["",Hi.required]})])})])})}ngOnInit(){}get sections(){return this.testForm.get("sections")}addSection(){this.sections.push(this.fb.group({sectionNumber:this.sections.length+1,articleUrls:this.fb.array([this.fb.group({url:["",Hi.required]})]),questions:this.fb.array([this.fb.group({questionJson:["",Hi.required]})])}))}removeSection(t){this.sections.removeAt(t)}getArticleUrls(t){return this.sections.at(t).get("articleUrls")}addArticleUrl(t){const i=this.fb.group({url:["",Hi.required]});this.getArticleUrls(t).push(i)}removeArticleUrl(t,i){this.getArticleUrls(t).removeAt(i)}getQuestions(t){return this.sections.at(t).get("questions")}addQuestion(t){const i=this.fb.group({questionJson:["",Hi.required]});this.getQuestions(t).push(i)}removeQuestion(t,i){this.getQuestions(t).removeAt(i)}onSubmit(){console.log(this.testForm.value),this.testFromIntoTestModel()}testFromIntoTestModel(){var t=this;return(0,ne.Z)(function*(){const i=t.testForm.get("sections"),r={sections:[],subCat:t.testForm.get("subCat").value,year:t.testForm.get("year").value};"anj"===r.subCat&&(r.year+="-"+t.testForm.get("level").value);for(let o=0;o<i.length;o++){const s=i.at(o),a=s.get("articleUrls"),l=s.get("questions"),c={sectionId:"{{i + 1}}",questions:[],articleUrl:[]};o+1<10&&(c.sectionId="0"+(o+1));for(let h=0;h<a.length;h++){const p=a.at(h);c.articleUrl.push(p.get("url").value)}for(let h=0;h<l.length;h++){const p=l.at(h);c.questions=t.parseJson(JSON.parse(p.get("questionJson").value))}r.sections.push(c)}console.log(r),yield t.testService.addOfficialTestToFirestore(r)})()}parseJson(t){const i=[];for(const r in t)if(t.hasOwnProperty(r)){const o=t[r],a=JSON.stringify({id:r,text:o.text||void 0,options:o.options||void 0,answer:o.answer||void 0,questionType:o.questionType,imageUrl:o.imageUrl||void 0,options_2:o.options_2||void 0,userAnswer:"",userAnswer_2:""},(c,h)=>void 0===h?void 0:h),l=JSON.parse(a);i.push(l)}return i}static#e=this.\u0275fac=function(i){return new(i||n)(q(Xj),q(Sg))};static#t=this.\u0275cmp=On({type:n,selectors:[["app-official-test-constructor-page"]],decls:24,vars:4,consts:[[3,"formGroup"],["id","subCat-window"],["for","subCat"],["id","subCat","formControlName","subCat"],["value","anj"],["value","mat"],["value","sjl"],["for","year"],["id","year","formControlName","year","placeholder"," Year"],["id","level","formControlName","level",4,"ngIf"],["formArrayName","sections"],[3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"addButton",3,"click"],["type","submit",3,"disabled","click"],["id","level","formControlName","level"],["value","B1"],["value","B2"],["value","C1"],[3,"formGroupName"],["formArrayName","articleUrls",1,"articleSection"],[4,"ngIf"],["formArrayName","questions",1,"questionSection"],["type","button",1,"removeButton",3,"click"],["type","text","formControlName","url",3,"placeholder"],["formControlName","questionJson",3,"placeholder"]],template:function(i,r){if(1&i&&(k(0,"div")(1,"div")(2,"form",0)(3,"div",1)(4,"label",2),te(5,"Kateg\xf3ria:"),P(),k(6,"select",3)(7,"option",4),te(8,"Angli\u010dtina"),P(),k(9,"option",5),te(10,"Matematika"),P(),k(11,"option",6),te(12,"Sloven\u010dina"),P()()(),k(13,"div")(14,"label",7),te(15,"Rok:"),P(),Ze(16,"input",8),me(17,Foe,7,0,"select",9),P(),k(18,"div",10),me(19,joe,15,6,"div",11),P(),k(20,"button",12),ke("click",function(){return r.addSection()}),te(21,"Add section"),P()(),k(22,"button",13),ke("click",function(){return r.onSubmit()}),te(23,"Submit"),P()()()),2&i){let o;$(2),W("formGroup",r.testForm),$(15),W("ngIf","anj"===(null==(o=r.testForm.get("subCat"))?null:o.value)),$(2),W("ngForOf",r.sections.controls),$(3),W("disabled",r.testForm.invalid)}},dependencies:[Xa,$o,AA,MA,kA,va,Tg,Zc,vA,Ig,E0,xg,Cg],styles:["input[_ngcontent-%COMP%]{width:50%;height:2rem;margin:10px;border:1px solid black}select[_ngcontent-%COMP%]{height:2rem;margin:10px;border:1px solid black}textarea[_ngcontent-%COMP%]{width:80%;height:15rem;margin:10px;border:1px solid black}h1[_ngcontent-%COMP%]{font-size:1.5rem;margin:10px}h2[_ngcontent-%COMP%]{font-size:1.2rem;margin:10px}label[_ngcontent-%COMP%]{margin:10px}button[_ngcontent-%COMP%]{margin:10px;padding:2px 4px;background-color:#06b7f9;color:#fff;border:none;border-radius:5px}.addButton[_ngcontent-%COMP%]{background-color:#61c430}.removeButton[_ngcontent-%COMP%]{background-color:#c23e3e}#subCat-window[_ngcontent-%COMP%]{margin-top:10px}.articleSection[_ngcontent-%COMP%], .questionSection[_ngcontent-%COMP%]{margin:20px 10px;border:#06b7f9 1px solid}"]})}return n})();function zoe(n,e){1&n&&(k(0,"select",15)(1,"option",16),te(2,"B1"),P(),k(3,"option",17),te(4,"B2"),P(),k(5,"option",18),te(6,"C1"),P()())}function $oe(n,e){1&n&&(k(0,"h2"),te(1,"Articles:"),P())}function Hoe(n,e){if(1&n){const t=zn();k(0,"div",19),Ze(1,"input",24)(2,"br"),k(3,"button",23),ke("click",function(){const o=Kt(t).index,s=ve().index;return zt(ve().removeArticleUrl(s,o))}),te(4," Remove article "),P()()}if(2&n){const t=e.index;W("formGroupName",t),$(1),lc("placeholder"," Article: ",t+1,"")}}function qoe(n,e){1&n&&(k(0,"h2"),te(1,"Questions:"),P())}function Woe(n,e){if(1&n){const t=zn();k(0,"div",19),Ze(1,"textarea",25)(2,"br"),k(3,"button",23),ke("click",function(){const o=Kt(t).index,s=ve().index;return zt(ve().removeQuestion(s,o))}),te(4,"Remove question"),P()()}if(2&n){const t=e.index;W("formGroupName",t),$(1),lc("placeholder"," Question: ",t+1,"")}}function Goe(n,e){if(1&n){const t=zn();k(0,"div",19)(1,"h1"),te(2),P(),k(3,"div",20),me(4,$oe,2,0,"h2",21),me(5,Hoe,5,2,"div",12),k(6,"button",13),ke("click",function(){const o=Kt(t).index;return zt(ve().addArticleUrl(o))}),te(7," Add article "),P()(),k(8,"div",22),me(9,qoe,2,0,"h2",21),me(10,Woe,5,2,"div",12),k(11,"button",13),ke("click",function(){const o=Kt(t).index;return zt(ve().addQuestion(o))}),te(12," Add question "),P()(),k(13,"button",23),ke("click",function(){const o=Kt(t).index;return zt(ve().removeSection(o))}),te(14," Remove section "),P()()}if(2&n){const t=e.index,i=ve();W("formGroupName",t),$(2),Kr("Section: ",t+1,""),$(2),W("ngIf",i.getArticleUrls(t).length>0),$(1),W("ngForOf",i.getArticleUrls(t).controls),$(4),W("ngIf",i.getQuestions(t).length>0),$(1),W("ngForOf",i.getQuestions(t).controls)}}let mz=(()=>{class n{constructor(t,i){this.fb=t,this.testService=i,this.testForm=this.fb.group({year:["",Hi.required],subCat:["",Hi.required],level:["",Hi.required],sections:this.fb.array([this.fb.group({sectionNumber:1,articleUrls:this.fb.array([this.fb.group({url:["",Hi.required]})]),questions:this.fb.array([this.fb.group({questionJson:["",Hi.required]})])})])})}ngOnInit(){}get sections(){return this.testForm.get("sections")}addSection(){this.sections.push(this.fb.group({sectionNumber:this.sections.length+1,articleUrls:this.fb.array([this.fb.group({url:["",Hi.required]})]),questions:this.fb.array([this.fb.group({questionJson:["",Hi.required]})])}))}removeSection(t){this.sections.removeAt(t)}getArticleUrls(t){return this.sections.at(t).get("articleUrls")}addArticleUrl(t){const i=this.fb.group({url:["",Hi.required]});this.getArticleUrls(t).push(i)}removeArticleUrl(t,i){this.getArticleUrls(t).removeAt(i)}getQuestions(t){return this.sections.at(t).get("questions")}addQuestion(t){const i=this.fb.group({});this.getQuestions(t).push(i)}removeQuestion(t,i){this.getQuestions(t).removeAt(i)}onSubmit(){console.log(this.testForm.value)}static#e=this.\u0275fac=function(i){return new(i||n)(q(Xj),q(Sg))};static#t=this.\u0275cmp=On({type:n,selectors:[["app-custom-test-constructor"]],decls:27,vars:4,consts:[[3,"formGroup"],["id","subCat-window"],["for","subCat"],["id","subCat","formControlName","subCat"],["value","anj"],["value","mat"],["value","sjl"],["vaue","custom"],["for","year"],["id","year","formControlName","year","placeholder"," Year"],["id","level","formControlName","level",4,"ngIf"],["formArrayName","sections"],[3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"addButton",3,"click"],["type","submit",3,"disabled","click"],["id","level","formControlName","level"],["value","B1"],["value","B2"],["value","C1"],[3,"formGroupName"],["formArrayName","articleUrls",1,"articleSection"],[4,"ngIf"],["formArrayName","questions",1,"questionSection"],["type","button",1,"removeButton",3,"click"],["type","text","formControlName","url",3,"placeholder"],["formControlName","questionJson",3,"placeholder"]],template:function(i,r){if(1&i&&(k(0,"div")(1,"div")(2,"form",0)(3,"div",1)(4,"label",2),te(5,"Kateg\xf3ria:"),P(),k(6,"select",3)(7,"option",4),te(8,"Angli\u010dtina"),P(),k(9,"option",5),te(10,"Matematika"),P(),k(11,"option",6),te(12,"Sloven\u010dina"),P(),k(13,"option",7),te(14,"Vlastn\xe1 kateg\xf3ria"),P()(),Ze(15,"input"),P(),k(16,"div")(17,"label",8),te(18,"Rok:"),P(),Ze(19,"input",9),me(20,zoe,7,0,"select",10),P(),k(21,"div",11),me(22,Goe,15,6,"div",12),P(),k(23,"button",13),ke("click",function(){return r.addSection()}),te(24," Add section "),P()(),k(25,"button",14),ke("click",function(){return r.onSubmit()}),te(26," Submit "),P()()()),2&i){let o;$(2),W("formGroup",r.testForm),$(18),W("ngIf","anj"===(null==(o=r.testForm.get("subCat"))?null:o.value)),$(2),W("ngForOf",r.sections.controls),$(3),W("disabled",r.testForm.invalid)}},dependencies:[Xa,$o,AA,MA,kA,va,Tg,Zc,vA,Ig,E0,xg,Cg]})}return n})();const Zoe=[{path:"",component:w0},{path:"login",component:ez},{path:"register",component:tz},{path:"landing-page",component:w0},{path:"official-categories/:subCat",component:sz},{path:"official-test/:subCat/:year",component:lz},{path:"forgot-password",component:cz},{path:"user-account",component:dz},{path:"education-materials",component:hz},{path:"test-history",component:fz},{path:"official-test-constructor",component:pz},{path:"custom-test-constructor",component:mz},{path:"icon-selector",component:BA}];let Koe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({imports:[ZU.forRoot(Zoe),ZU]})}return n})();const gz_firebase={apiKey:"AIzaSyDrXz37bgp6zYCw-X9eKtQlg2Q6j4tjDMI",authDomain:"maturity-project.firebaseapp.com",databaseURL:"https://maturity-project-default-rtdb.europe-west1.firebasedatabase.app",projectId:"maturity-project",storageBucket:"maturity-project.appspot.com",messagingSenderId:"759368949191",appId:"1:759368949191:web:a326a11500d8e4c152cde2",measurementId:"G-CJJD6MK3D8"};class x0{}class C0{}class As{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),o=r.toLowerCase(),s=t.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof As?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new As;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof As?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const o=e.value;if(o){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Qoe{encodeKey(e){return _z(e)}encodeValue(e){return _z(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Xoe=/%(\d[a-f0-9])/gi,Joe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function _z(n){return encodeURIComponent(n).replace(Xoe,(e,t)=>Joe[t]??e)}function T0(n){return`${n}`}class Rl{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Qoe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Yoe(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[s,a]=-1==o?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(T0):[T0(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Rl({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(T0(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(T0(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class ese{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function vz(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function yz(n){return typeof Blob<"u"&&n instanceof Blob}function bz(n){return typeof FormData<"u"&&n instanceof FormData}class Rg{constructor(e,t,i,r){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function tse(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new As),this.context||(this.context=new ese),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new Rl,this.urlWithParams=t}serializeBody(){return null===this.body?null:vz(this.body)||yz(this.body)||bz(this.body)||function nse(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Rl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||bz(this.body)?null:yz(this.body)?this.body.type||null:vz(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Rl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const h=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((p,g)=>p.set(g,e.setHeaders[g]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((p,g)=>p.set(g,e.setParams[g]),c)),new Rg(t,i,o,{params:c,headers:l,context:h,reportProgress:a,responseType:r,withCredentials:s})}}var Vh=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Vh||{});class UA{constructor(e,t=200,i="OK"){this.headers=e.headers||new As,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class jA extends UA{constructor(e={}){super(e),this.type=Vh.ResponseHeader}clone(e={}){return new jA({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Bh extends UA{constructor(e={}){super(e),this.type=Vh.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Bh({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ez extends UA{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function zA(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let ise=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof Rg)o=t;else{let l,c;l=r.headers instanceof As?r.headers:new As(r.headers),r.params&&(c=r.params instanceof Rl?r.params:new Rl({fromObject:r.params})),o=new Rg(t,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const s=S(o).pipe(xh(l=>this.handler.handle(l)));if(t instanceof Rg||"events"===r.observe)return s;const a=s.pipe(gi(l=>l instanceof Bh));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(be(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(be(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(be(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(be(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Rl).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,zA(r,i))}post(t,i,r={}){return this.request("POST",t,zA(r,i))}put(t,i,r={}){return this.request("PUT",t,zA(r,i))}static#e=this.\u0275fac=function(i){return new(i||n)(F(x0))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac})}return n})();function xz(n,e){return e(n)}function ose(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}const ase=new re(""),Mg=new re(""),Cz=new re("");function lse(){let n=null;return(e,t)=>{null===n&&(n=(xe(ase,{optional:!0})??[]).reduceRight(ose,xz));const i=xe(zv),r=i.add();return n(e,t).pipe(Ch(()=>i.remove(r)))}}let Tz=(()=>{class n extends x0{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=xe(zv)}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(Mg),...this.injector.get(Cz,[])]));this.chain=r.reduceRight((o,s)=>function sse(n,e,t){return(i,r)=>t.runInContext(()=>e(i,o=>n(o,r)))}(o,s,this.injector),xz)}const i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(Ch(()=>this.pendingTasks.remove(i)))}static#e=this.\u0275fac=function(i){return new(i||n)(F(C0),F(Gr))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac})}return n})();const hse=/^\)\]\}',?\n/;let Az=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new B(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?b(i.\u0275loadImpl()):S(null)).pipe(Ae(()=>new Ke(o=>{const s=i.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((x,T)=>s.setRequestHeader(x,T.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const x=t.detectContentTypeHeader();null!==x&&s.setRequestHeader("Content-Type",x)}if(t.responseType){const x=t.responseType.toLowerCase();s.responseType="json"!==x?x:"text"}const a=t.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const x=s.statusText||"OK",T=new As(s.getAllResponseHeaders()),V=function fse(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return l=new jA({headers:T,status:s.status,statusText:x,url:V}),l},h=()=>{let{headers:x,status:T,statusText:V,url:M}=c(),j=null;204!==T&&(j=typeof s.response>"u"?s.responseText:s.response),0===T&&(T=j?200:0);let ie=T>=200&&T<300;if("json"===t.responseType&&"string"==typeof j){const _e=j;j=j.replace(hse,"");try{j=""!==j?JSON.parse(j):null}catch(Be){j=_e,ie&&(ie=!1,j={error:Be,text:j})}}ie?(o.next(new Bh({body:j,headers:x,status:T,statusText:V,url:M||void 0})),o.complete()):o.error(new Ez({error:j,headers:x,status:T,statusText:V,url:M||void 0}))},p=x=>{const{url:T}=c(),V=new Ez({error:x,status:s.status||0,statusText:s.statusText||"Unknown Error",url:T||void 0});o.error(V)};let g=!1;const _=x=>{g||(o.next(c()),g=!0);let T={type:Vh.DownloadProgress,loaded:x.loaded};x.lengthComputable&&(T.total=x.total),"text"===t.responseType&&s.responseText&&(T.partialText=s.responseText),o.next(T)},E=x=>{let T={type:Vh.UploadProgress,loaded:x.loaded};x.lengthComputable&&(T.total=x.total),o.next(T)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",p),s.addEventListener("abort",p),t.reportProgress&&(s.addEventListener("progress",_),null!==a&&s.upload&&s.upload.addEventListener("progress",E)),s.send(a),o.next({type:Vh.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",p),t.reportProgress&&(s.removeEventListener("progress",_),null!==a&&s.upload&&s.upload.removeEventListener("progress",E)),s.readyState!==s.DONE&&s.abort()}})))}static#e=this.\u0275fac=function(i){return new(i||n)(F(eN))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac})}return n})();const $A=new re("XSRF_ENABLED"),Sz=new re("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Rz=new re("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Mz{}let gse=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=HO(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(i){return new(i||n)(F(Dt),F(Io),F(Sz))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac})}return n})();function _se(n,e){const t=n.url.toLowerCase();if(!xe($A)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const i=xe(Mz).getToken(),r=xe(Rz);return null!=i&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var Ml=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Ml||{});function vse(...n){const e=[ise,Az,Tz,{provide:x0,useExisting:Tz},{provide:C0,useExisting:Az},{provide:Mg,useValue:_se,multi:!0},{provide:$A,useValue:!0},{provide:Mz,useClass:gse}];for(const t of n)e.push(...t.\u0275providers);return function _w(n){return{\u0275providers:n}}(e)}const Pz=new re("LEGACY_INTERCEPTOR_FN");function yse(){return function Yc(n,e){return{\u0275kind:n,\u0275providers:e}}(Ml.LegacyInterceptors,[{provide:Pz,useFactory:lse},{provide:Mg,useExisting:Pz,multi:!0}])}let bse=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({providers:[vse(yse())]})}return n})();class kz{}class Tse{}const ya="*";function Fz(n,e=null){return{type:2,steps:n,options:e}}function Pl(n){return{type:6,styles:n,offset:null}}class Pg{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class Bz{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const o=this.players.length;0==o?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}function Uz(n){return new B(3e3,!1)}function kl(n){switch(n.length){case 0:return new Pg;case 1:return n[0];default:return new Bz(n)}}function jz(n,e,t=new Map,i=new Map){const r=[],o=[];let s=-1,a=null;if(e.forEach(l=>{const c=l.get("offset"),h=c==s,p=h&&a||new Map;l.forEach((g,_)=>{let E=_,x=g;if("offset"!==_)switch(E=n.normalizePropertyName(E,r),x){case"!":x=t.get(_);break;case ya:x=i.get(_);break;default:x=n.normalizeStyleValue(_,E,x,r)}p.set(E,x)}),h||o.push(p),a=p,s=c}),r.length)throw function Kse(n){return new B(3502,!1)}();return o}function ZA(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&KA(t,"start",n)));break;case"done":n.onDone(()=>i(t&&KA(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&KA(t,"destroy",n)))}}function KA(n,e,t){const o=QA(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),s=n._data;return null!=s&&(o._data=s),o}function QA(n,e,t,i,r="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function no(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function zz(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const aae=(()=>typeof document>"u"?null:document.documentElement)();function YA(n){const e=n.parentNode||n.host||null;return e===aae?null:e}let Xc=null,$z=!1;function Hz(n,e){for(;e;){if(e===n)return!0;e=YA(e)}return!1}function qz(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]}let Wz=(()=>{class n{validateStyleProperty(t){return function cae(n){Xc||(Xc=function uae(){return typeof document<"u"?document.body:null}()||{},$z=!!Xc.style&&"WebkitAppearance"in Xc.style);let e=!0;return Xc.style&&!function lae(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Xc.style,!e&&$z&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Xc.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return Hz(t,i)}getParentElement(t){return YA(t)}query(t,i,r){return qz(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,o,s,a=[],l){return new Pg(r,o)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac})}return n})(),XA=(()=>{class n{static#e=this.NOOP=new Wz}return n})();const dae=1e3,JA="ng-enter",A0="ng-leave",S0="ng-trigger",R0=".ng-trigger",Zz="ng-animating",eS=".ng-animating";function ba(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:tS(parseFloat(e[1]),e[2])}function tS(n,e){return"s"===e?n*dae:n}function M0(n,e,t){return n.hasOwnProperty("duration")?n:function fae(n,e,t){let r,o=0,s="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(Uz()),{duration:0,delay:0,easing:""};r=tS(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(o=tS(parseFloat(l),a[4]));const c=a[5];c&&(s=c)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push(function Dse(){return new B(3100,!1)}()),a=!0),o<0&&(e.push(function Ase(){return new B(3101,!1)}()),a=!0),a&&e.splice(l,0,Uz())}return{duration:r,delay:o,easing:s}}(n,e,t)}function kg(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Kz(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Ol(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function Ss(n,e,t){e.forEach((i,r)=>{const o=iS(r);t&&!t.has(r)&&t.set(r,n.style[o]),n.style[o]=i})}function Jc(n,e){e.forEach((t,i)=>{const r=iS(i);n.style[r]=""})}function Og(n){return Array.isArray(n)?1==n.length?n[0]:Fz(n):n}const nS=new RegExp("{{\\s*(.+?)\\s*}}","g");function Yz(n){let e=[];if("string"==typeof n){let t;for(;t=nS.exec(n);)e.push(t[1]);nS.lastIndex=0}return e}function Ng(n,e,t){const i=n.toString(),r=i.replace(nS,(o,s)=>{let a=e[s];return null==a&&(t.push(function Rse(n){return new B(3003,!1)}()),a=""),a.toString()});return r==i?n:r}function P0(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const gae=/-+([a-z0-9])/g;function iS(n){return n.replace(gae,(...e)=>e[1].toUpperCase())}function io(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Mse(n){return new B(3004,!1)}()}}function Xz(n,e){return window.getComputedStyle(n)[e]}const k0="*";function yae(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function bae(n,e,t){if(":"==n[0]){const l=function Eae(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function qse(n){return new B(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function Hse(n){return new B(3015,!1)}()),e;const r=i[1],o=i[2],s=i[3];e.push(Jz(r,s));"<"==o[0]&&!(r==k0&&s==k0)&&e.push(Jz(s,r))}(i,t,e)):t.push(n),t}const O0=new Set(["true","1"]),N0=new Set(["false","0"]);function Jz(n,e){const t=O0.has(n)||N0.has(n),i=O0.has(e)||N0.has(e);return(r,o)=>{let s=n==k0||n==r,a=e==k0||e==o;return!s&&t&&"boolean"==typeof r&&(s=r?O0.has(n):N0.has(n)),!a&&i&&"boolean"==typeof o&&(a=o?O0.has(e):N0.has(e)),s&&a}}const wae=new RegExp("s*:selfs*,?","g");function rS(n,e,t,i){return new Iae(n).build(e,t,i)}class Iae{constructor(e){this._driver=e}build(e,t,i){const r=new Tae(t);return this._resetContextStyleTimingState(r),io(this,Og(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const o=[],s=[];return"@"==e.name.charAt(0)&&t.errors.push(function kse(){return new B(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(h=>{l.name=h,o.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,s.push(l)}else t.errors.push(function Ose(){return new B(3007,!1)}())}),{type:7,name:e.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const o=new Set,s=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{Yz(l).forEach(c=>{s.hasOwnProperty(c)||o.add(c)})})}),o.size&&(P0(o.values()),t.errors.push(function Nse(n,e){return new B(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=io(this,Og(e.animation),t);return{type:1,matchers:yae(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:eu(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>io(this,i,t)),options:eu(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const o=e.steps.map(s=>{t.currentTime=i;const a=io(this,s,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:o,options:eu(e.options)}}visitAnimate(e,t){const i=function Aae(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return oS(M0(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=oS(0,0,"");return o.dynamic=!0,o.strValue=t,o}const r=M0(t,e);return oS(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,o=e.styles?e.styles:Pl({});if(5==o.type)r=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;const c={};i.easing&&(c.easing=i.easing),s=Pl(c)}t.currentTime+=i.duration+i.delay;const l=this.visitStyle(s,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===ya?i.push(a):t.errors.push(new B(3002,!1)):i.push(Kz(a));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o))for(let l of a.values())if(l.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:i,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),h=c.get(l);let p=!0;h&&(o!=r&&o>=h.startTime&&r<=h.endTime&&(t.errors.push(function Lse(n,e,t,i,r){return new B(3010,!1)}()),p=!1),o=h.startTime),p&&c.set(l,{startTime:o,endTime:r}),t.options&&function mae(n,e,t){const i=e.params||{},r=Yz(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||t.push(function Sse(n){return new B(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Vse(){return new B(3011,!1)}()),i;let o=0;const s=[];let a=!1,l=!1,c=0;const h=e.steps.map(V=>{const M=this._makeStyleAst(V,t);let j=null!=M.offset?M.offset:function Dae(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(M.styles),ie=0;return null!=j&&(o++,ie=M.offset=j),l=l||ie<0||ie>1,a=a||ie<c,c=ie,s.push(ie),M});l&&t.errors.push(function Bse(){return new B(3012,!1)}()),a&&t.errors.push(function Use(){return new B(3200,!1)}());const p=e.steps.length;let g=0;o>0&&o<p?t.errors.push(function jse(){return new B(3202,!1)}()):0==o&&(g=1/(p-1));const _=p-1,E=t.currentTime,x=t.currentAnimateTimings,T=x.duration;return h.forEach((V,M)=>{const j=g>0?M==_?1:g*M:s[M],ie=j*T;t.currentTime=E+x.delay+ie,x.duration=ie,this._validateStyleAst(V,t),V.offset=j,i.styles.push(V)}),i}visitReference(e,t){return{type:8,animation:io(this,Og(e.animation),t),options:eu(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:eu(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:eu(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[o,s]=function xae(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(wae,"")),n=n.replace(/@\*/g,R0).replace(/@\w+/g,t=>R0+"-"+t.slice(1)).replace(/:animating/g,eS),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+o:o,no(t.collectedStyles,t.currentQuerySelector,new Map);const a=io(this,Og(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:eu(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function zse(){return new B(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:M0(e.timings,t.errors,!0);return{type:12,animation:io(this,Og(e.animation),t),timings:i,options:null}}}class Tae{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function eu(n){return n?(n=kg(n)).params&&(n.params=function Cae(n){return n?kg(n):null}(n.params)):n={},n}function oS(n,e,t){return{duration:n,delay:e,easing:t}}function sS(n,e,t,i,r,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}class F0{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Mae=new RegExp(":enter","g"),kae=new RegExp(":leave","g");function aS(n,e,t,i,r,o=new Map,s=new Map,a,l,c=[]){return(new Oae).buildKeyframes(n,e,t,i,r,o,s,a,l,c)}class Oae{buildKeyframes(e,t,i,r,o,s,a,l,c,h=[]){c=c||new F0;const p=new lS(e,t,c,r,o,h,[]);p.options=l;const g=l.delay?ba(l.delay):0;p.currentTimeline.delayNextStep(g),p.currentTimeline.setStyles([s],null,p.errors,l),io(this,i,p);const _=p.timelines.filter(E=>E.containsAnimation());if(_.length&&a.size){let E;for(let x=_.length-1;x>=0;x--){const T=_[x];if(T.element===t){E=T;break}}E&&!E.allowOnlyTimelineStyles()&&E.setStyles([a],null,p.errors,l)}return _.length?_.map(E=>E.buildKeyframes()):[sS(t,[],[],[],0,g,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(const r of e){const o=r?.delay;if(o){const s="number"==typeof o?o:ba(Ng(o,r?.params??{},t.errors));i.delayNextStep(s)}}}_visitSubInstructions(e,t,i){let o=t.currentTimeline.currentTime;const s=null!=i.duration?ba(i.duration):null,a=null!=i.delay?ba(i.delay):null;return 0!==s&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,s,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),io(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const o=e.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=L0);const s=ba(o.delay);r.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>io(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?ba(e.options.delay):0;e.steps.forEach(s=>{const a=t.createSubContext(e.options);o&&a.delayNextStep(o),io(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return M0(t.params?Ng(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(i.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const o=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,o=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*o),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+o),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?ba(r.delay):0;o&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=L0);let s=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,h)=>{t.currentQueryIndex=h;const p=t.createSubContext(e.options,c);o&&p.delayNextStep(o),c===t.element&&(l=p.currentTimeline),io(this,e.animation,p),p.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,p.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1);let l=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const h=t.currentTimeline;l&&h.delayNextStep(l);const p=h.currentTime;io(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-p+(r.startTime-i.currentTimeline.startTime)}}const L0={};class lS{constructor(e,t,i,r,o,s,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=L0,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new V0(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=ba(i.duration)),null!=i.delay&&(r.delay=ba(i.delay));const o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=Ng(o[a],s,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,o=new lS(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=L0,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new Nae(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,o,s){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(Mae,"."+this._enterClassName)).replace(kae,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!o&&0==a.length&&s.push(function $se(n){return new B(3014,!1)}()),a}}class V0{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new V0(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||ya),this._currentKeyframe.set(t,ya);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const o=r&&r.params||{},s=function Fae(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let o of i)t.set(o,ya)}else Ol(r,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of s){const c=Ng(l,o,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??ya),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=Ol(a,new Map,this._backFill);c.forEach((h,p)=>{"!"===h?e.add(p):h===ya&&t.add(p)}),i||c.set("offset",l/this.duration),r.push(c)});const o=e.size?P0(e.values()):[],s=t.size?P0(t.values()):[];if(i){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return sS(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}}class Nae extends V0{constructor(e,t,i,r,o,s,a=!1){super(e,t,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],s=i+t,a=t/s,l=Ol(e[0]);l.set("offset",0),o.push(l);const c=Ol(e[0]);c.set("offset",n$(a)),o.push(c);const h=e.length-1;for(let p=1;p<=h;p++){let g=Ol(e[p]);const _=g.get("offset");g.set("offset",n$((t+_*i)/s)),o.push(g)}i=s,t=0,r="",e=o}return sS(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function n$(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class cS{}const Lae=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Vae extends cS{normalizePropertyName(e,t){return iS(e)}normalizeStyleValue(e,t,i,r){let o="";const s=i.toString().trim();if(Lae.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)o="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function Pse(n,e){return new B(3005,!1)}())}return s+o}}function i$(n,e,t,i,r,o,s,a,l,c,h,p,g){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:h,totalTime:p,errors:g}}const uS={};class r${constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function Bae(n,e,t,i,r){return n.some(o=>o(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,o,s,a,l,c,h){const p=[],g=this.ast.options&&this.ast.options.params||uS,E=this.buildStyles(i,a&&a.params||uS,p),x=l&&l.params||uS,T=this.buildStyles(r,x,p),V=new Set,M=new Map,j=new Map,ie="void"===r,_e={params:Uae(x,g),delay:this.ast.options?.delay},Be=h?[]:aS(e,t,this.ast.animation,o,s,E,T,_e,c,p);let et=0;if(Be.forEach(Cr=>{et=Math.max(Cr.duration+Cr.delay,et)}),p.length)return i$(t,this._triggerName,i,r,ie,E,T,[],[],M,j,et,p);Be.forEach(Cr=>{const Lr=Cr.element,X0=no(M,Lr,new Set);Cr.preStyleProps.forEach(ru=>X0.add(ru));const $g=no(j,Lr,new Set);Cr.postStyleProps.forEach(ru=>$g.add(ru)),Lr!==t&&V.add(Lr)});const Gt=P0(V.values());return i$(t,this._triggerName,i,r,ie,E,T,Be,Gt,M,j,et)}}function Uae(n,e){const t=kg(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class jae{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=kg(this.defaultParams);return Object.keys(e).forEach(o=>{const s=e[o];null!==s&&(r[o]=s)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((s,a)=>{s&&(s=Ng(s,r,t));const l=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,l,s,t),i.set(a,s)})}),i}}class $ae{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new jae(r.style,r.options&&r.options.params||{},i))}),o$(this.states,"true","1"),o$(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new r$(e,r,this.states))}),this.fallbackTransition=function Hae(n,e,t){return new r$(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(s=>s.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function o$(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const qae=new F0;class Wae{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],o=rS(this._driver,t,i,[]);if(i.length)throw function Qse(n){return new B(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,i){const r=e.element,o=jz(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],o=this._animations.get(e);let s;const a=new Map;if(o?(s=aS(this._driver,t,o,JA,A0,new Map,new Map,i,qae,r),s.forEach(h=>{const p=no(a,h.element,new Map);h.postStyleProps.forEach(g=>p.set(g,null))})):(r.push(function Yse(){return new B(3300,!1)}()),s=[]),r.length)throw function Xse(n){return new B(3504,!1)}();a.forEach((h,p)=>{h.forEach((g,_)=>{h.set(_,this._driver.computeStyle(p,_,ya))})});const c=kl(s.map(h=>{const p=a.get(h.element);return this._buildPlayer(h,new Map,p)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Jse(n){return new B(3301,!1)}();return t}listen(e,t,i,r){const o=QA(t,"","","");return ZA(this._getPlayer(e),i,o,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const s$="ng-animate-queued",dS="ng-animate-disabled",Yae=[],a$={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Xae={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ko="__ng_removed";class hS{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function nle(n){return n??null}(i?e.value:e),i){const o=kg(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const Fg="void",fS=new hS(Fg);class Jae{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Po(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function eae(n,e){return new B(3302,!1)}();if(null==i||0==i.length)throw function tae(n){return new B(3303,!1)}();if(!function ile(n){return"start"==n||"done"==n}(i))throw function nae(n,e){return new B(3400,!1)}();const o=no(this._elementListeners,e,[]),s={name:t,phase:i,callback:r};o.push(s);const a=no(this._engine.statesByElement,e,new Map);return a.has(t)||(Po(e,S0),Po(e,S0+"-"+t),a.set(t,fS)),()=>{this._engine.afterFlush(()=>{const l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function iae(n){return new B(3401,!1)}();return t}trigger(e,t,i,r=!0){const o=this._getTrigger(t),s=new pS(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Po(e,S0),Po(e,S0+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new hS(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=fS),c.value!==Fg&&l.value===c.value){if(!function sle(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const o=t[r];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(l.params,c.params)){const x=[],T=o.matchStyles(l.value,l.params,x),V=o.matchStyles(c.value,c.params,x);x.length?this._engine.reportError(x):this._engine.afterFlush(()=>{Jc(e,T),Ss(e,V)})}return}const g=no(this._engine.playersByElement,e,[]);g.forEach(x=>{x.namespaceId==this.id&&x.triggerName==t&&x.queued&&x.destroy()});let _=o.matchTransition(l.value,c.value,e,c.params),E=!1;if(!_){if(!r)return;_=o.fallbackTransition,E=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:_,fromState:l,toState:c,player:s,isFallbackTransition:E}),E||(Po(e,s$),s.onStart(()=>{Uh(e,s$)})),s.onDone(()=>{let x=this.players.indexOf(s);x>=0&&this.players.splice(x,1);const T=this._engine.playersByElement.get(e);if(T){let V=T.indexOf(s);V>=0&&T.splice(V,1)}}),this.players.push(s),g.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,R0,!0);i.forEach(r=>{if(r[Ko])return;const o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const o=this._engine.statesByElement.get(e),s=new Map;if(o){const a=[];if(o.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){const h=this.trigger(e,c,Fg,r);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),i&&kl(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(o=>{const s=o.name;if(r.has(s))return;r.add(s);const l=this._triggers.get(s).fallbackTransition,c=i.get(s)||fS,h=new hS(Fg),p=new pS(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:l,fromState:c,toState:h,player:p,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let s=e;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const o=e[Ko];(!o||o===a$)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Po(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){const l=QA(o,i.triggerName,i.fromState.value,i.toState.value);l._data=e,ZA(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const o=i.transition.ast.depCount,s=r.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class ele{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new Jae(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){const l=r.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}return t}trigger(e,t,i,r){if(B0(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!B0(t))return;const o=t[Ko];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){const s=this._fetchNamespace(e);s&&s.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Po(e,dS)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Uh(e,dS))}removeNode(e,t,i){if(B0(t)){const r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,o){this.collectedLeaveElements.push(t),t[Ko]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,i,r,o){return B0(t)?this._fetchNamespace(e).listen(t,i,r,o):()=>{}}_buildInstruction(e,t,i,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,R0,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,eS,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return kl(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Ko];if(t&&t.setForRemoval){if(e[Ko]=a$,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(dS)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Po(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?kl(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function rae(n){return new B(3402,!1)}()}_flushAnimations(e,t){const i=new F0,r=[],o=new Map,s=[],a=new Map,l=new Map,c=new Map,h=new Set;this.disabledNodes.forEach(Fe=>{h.add(Fe);const qe=this.driver.query(Fe,".ng-animate-queued",!0);for(let Ye=0;Ye<qe.length;Ye++)h.add(qe[Ye])});const p=this.bodyNode,g=Array.from(this.statesByElement.keys()),_=u$(g,this.collectedEnterElements),E=new Map;let x=0;_.forEach((Fe,qe)=>{const Ye=JA+x++;E.set(qe,Ye),Fe.forEach(Bt=>Po(Bt,Ye))});const T=[],V=new Set,M=new Set;for(let Fe=0;Fe<this.collectedLeaveElements.length;Fe++){const qe=this.collectedLeaveElements[Fe],Ye=qe[Ko];Ye&&Ye.setForRemoval&&(T.push(qe),V.add(qe),Ye.hasAnimation?this.driver.query(qe,".ng-star-inserted",!0).forEach(Bt=>V.add(Bt)):M.add(qe))}const j=new Map,ie=u$(g,Array.from(V));ie.forEach((Fe,qe)=>{const Ye=A0+x++;j.set(qe,Ye),Fe.forEach(Bt=>Po(Bt,Ye))}),e.push(()=>{_.forEach((Fe,qe)=>{const Ye=E.get(qe);Fe.forEach(Bt=>Uh(Bt,Ye))}),ie.forEach((Fe,qe)=>{const Ye=j.get(qe);Fe.forEach(Bt=>Uh(Bt,Ye))}),T.forEach(Fe=>{this.processLeaveNode(Fe)})});const _e=[],Be=[];for(let Fe=this._namespaceList.length-1;Fe>=0;Fe--)this._namespaceList[Fe].drainQueuedTransitions(t).forEach(Ye=>{const Bt=Ye.player,ki=Ye.element;if(_e.push(Bt),this.collectedEnterElements.length){const tr=ki[Ko];if(tr&&tr.setForMove){if(tr.previousTriggersValues&&tr.previousTriggersValues.has(Ye.triggerName)){const ou=tr.previousTriggersValues.get(Ye.triggerName),ko=this.statesByElement.get(Ye.element);if(ko&&ko.has(Ye.triggerName)){const J0=ko.get(Ye.triggerName);J0.value=ou,ko.set(Ye.triggerName,J0)}}return void Bt.destroy()}}const Ps=!p||!this.driver.containsElement(p,ki),ro=j.get(ki),Fl=E.get(ki),Ln=this._buildInstruction(Ye,i,Fl,ro,Ps);if(Ln.errors&&Ln.errors.length)return void Be.push(Ln);if(Ps)return Bt.onStart(()=>Jc(ki,Ln.fromStyles)),Bt.onDestroy(()=>Ss(ki,Ln.toStyles)),void r.push(Bt);if(Ye.isFallbackTransition)return Bt.onStart(()=>Jc(ki,Ln.fromStyles)),Bt.onDestroy(()=>Ss(ki,Ln.toStyles)),void r.push(Bt);const b4=[];Ln.timelines.forEach(tr=>{tr.stretchStartingKeyframe=!0,this.disabledNodes.has(tr.element)||b4.push(tr)}),Ln.timelines=b4,i.append(ki,Ln.timelines),s.push({instruction:Ln,player:Bt,element:ki}),Ln.queriedElements.forEach(tr=>no(a,tr,[]).push(Bt)),Ln.preStyleProps.forEach((tr,ou)=>{if(tr.size){let ko=l.get(ou);ko||l.set(ou,ko=new Set),tr.forEach((J0,FS)=>ko.add(FS))}}),Ln.postStyleProps.forEach((tr,ou)=>{let ko=c.get(ou);ko||c.set(ou,ko=new Set),tr.forEach((J0,FS)=>ko.add(FS))})});if(Be.length){const Fe=[];Be.forEach(qe=>{Fe.push(function oae(n,e){return new B(3505,!1)}())}),_e.forEach(qe=>qe.destroy()),this.reportError(Fe)}const et=new Map,Gt=new Map;s.forEach(Fe=>{const qe=Fe.element;i.has(qe)&&(Gt.set(qe,qe),this._beforeAnimationBuild(Fe.player.namespaceId,Fe.instruction,et))}),r.forEach(Fe=>{const qe=Fe.element;this._getPreviousPlayers(qe,!1,Fe.namespaceId,Fe.triggerName,null).forEach(Bt=>{no(et,qe,[]).push(Bt),Bt.destroy()})});const Cr=T.filter(Fe=>h$(Fe,l,c)),Lr=new Map;c$(Lr,this.driver,M,c,ya).forEach(Fe=>{h$(Fe,l,c)&&Cr.push(Fe)});const $g=new Map;_.forEach((Fe,qe)=>{c$($g,this.driver,new Set(Fe),l,"!")}),Cr.forEach(Fe=>{const qe=Lr.get(Fe),Ye=$g.get(Fe);Lr.set(Fe,new Map([...qe?.entries()??[],...Ye?.entries()??[]]))});const ru=[],v4=[],y4={};s.forEach(Fe=>{const{element:qe,player:Ye,instruction:Bt}=Fe;if(i.has(qe)){if(h.has(qe))return Ye.onDestroy(()=>Ss(qe,Bt.toStyles)),Ye.disabled=!0,Ye.overrideTotalTime(Bt.totalTime),void r.push(Ye);let ki=y4;if(Gt.size>1){let ro=qe;const Fl=[];for(;ro=ro.parentNode;){const Ln=Gt.get(ro);if(Ln){ki=Ln;break}Fl.push(ro)}Fl.forEach(Ln=>Gt.set(Ln,ki))}const Ps=this._buildAnimation(Ye.namespaceId,Bt,et,o,$g,Lr);if(Ye.setRealPlayer(Ps),ki===y4)ru.push(Ye);else{const ro=this.playersByElement.get(ki);ro&&ro.length&&(Ye.parentPlayer=kl(ro)),r.push(Ye)}}else Jc(qe,Bt.fromStyles),Ye.onDestroy(()=>Ss(qe,Bt.toStyles)),v4.push(Ye),h.has(qe)&&r.push(Ye)}),v4.forEach(Fe=>{const qe=o.get(Fe.element);if(qe&&qe.length){const Ye=kl(qe);Fe.setRealPlayer(Ye)}}),r.forEach(Fe=>{Fe.parentPlayer?Fe.syncPlayerEvents(Fe.parentPlayer):Fe.destroy()});for(let Fe=0;Fe<T.length;Fe++){const qe=T[Fe],Ye=qe[Ko];if(Uh(qe,A0),Ye&&Ye.hasAnimation)continue;let Bt=[];if(a.size){let Ps=a.get(qe);Ps&&Ps.length&&Bt.push(...Ps);let ro=this.driver.query(qe,eS,!0);for(let Fl=0;Fl<ro.length;Fl++){let Ln=a.get(ro[Fl]);Ln&&Ln.length&&Bt.push(...Ln)}}const ki=Bt.filter(Ps=>!Ps.destroyed);ki.length?rle(this,qe,ki):this.processLeaveNode(qe)}return T.length=0,ru.forEach(Fe=>{this.players.push(Fe),Fe.onDone(()=>{Fe.destroy();const qe=this.players.indexOf(Fe);this.players.splice(qe,1)}),Fe.play()}),ru}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,o){let s=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(s=a)}else{const a=this.playersByElement.get(e);if(a){const l=!o||o==Fg;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||s.push(c)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(e,t,i){const o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,h=c!==o,p=no(i,c,[]);this._getPreviousPlayers(c,h,s,a,t.toState).forEach(_=>{const E=_.getRealPlayer();E.beforeDestroy&&E.beforeDestroy(),_.destroy(),p.push(_)})}Jc(o,t.fromStyles)}_buildAnimation(e,t,i,r,o,s){const a=t.triggerName,l=t.element,c=[],h=new Set,p=new Set,g=t.timelines.map(E=>{const x=E.element;h.add(x);const T=x[Ko];if(T&&T.removedBeforeQueried)return new Pg(E.duration,E.delay);const V=x!==l,M=function ole(n){const e=[];return d$(n,e),e}((i.get(x)||Yae).map(et=>et.getRealPlayer())).filter(et=>!!et.element&&et.element===x),j=o.get(x),ie=s.get(x),_e=jz(this._normalizer,E.keyframes,j,ie),Be=this._buildPlayer(E,_e,M);if(E.subTimeline&&r&&p.add(x),V){const et=new pS(e,a,x);et.setRealPlayer(Be),c.push(et)}return Be});c.forEach(E=>{no(this.playersByQueriedElement,E.element,[]).push(E),E.onDone(()=>function tle(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,E.element,E))}),h.forEach(E=>Po(E,Zz));const _=kl(g);return _.onDestroy(()=>{h.forEach(E=>Uh(E,Zz)),Ss(l,t.toStyles)}),p.forEach(E=>{no(r,E,[]).push(_)}),_}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new Pg(e.duration,e.delay)}}class pS{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new Pg,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>ZA(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){no(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function B0(n){return n&&1===n.nodeType}function l$(n,e){const t=n.style.display;return n.style.display=e??"none",t}function c$(n,e,t,i,r){const o=[];t.forEach(l=>o.push(l$(l)));const s=[];i.forEach((l,c)=>{const h=new Map;l.forEach(p=>{const g=e.computeStyle(c,p,r);h.set(p,g),(!g||0==g.length)&&(c[Ko]=Xae,s.push(c))}),n.set(c,h)});let a=0;return t.forEach(l=>l$(l,o[a++])),s}function u$(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),o=new Map;function s(a){if(!a)return 1;let l=o.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?1:s(c),o.set(a,l),l}return e.forEach(a=>{const l=s(a);1!==l&&t.get(l).push(a)}),t}function Po(n,e){n.classList?.add(e)}function Uh(n,e){n.classList?.remove(e)}function rle(n,e,t){kl(t).onDone(()=>n.processLeaveNode(e))}function d$(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof Bz?d$(i.players,e):e.push(i)}}function h$(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(o=>r.add(o)):e.set(n,i),t.delete(n),!0}class U0{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new ele(e,t,i),this._timelineEngine=new Wae(e,t,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,t,i,r,o){const s=e+"-"+r;let a=this._triggerCache[s];if(!a){const l=[],h=rS(this._driver,o,l,[]);if(l.length)throw function Zse(n,e){return new B(3404,!1)}();a=function zae(n,e,t){return new $ae(n,e,t)}(r,h,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[o,s]=zz(i);this._timelineEngine.command(o,t,s,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,o){if("@"==i.charAt(0)){const[s,a]=zz(i);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,i,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let lle=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Ss(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ss(this._element,this._initialStyles),this._endStyles&&(Ss(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Jc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Jc(this._element,this._endStyles),this._endStyles=null),Ss(this._element,this._initialStyles),this._state=3)}}return n})();function mS(n){let e=null;return n.forEach((t,i)=>{(function cle(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class f${constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:Xz(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class ule{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return Hz(e,t)}getParentElement(e){return YA(e)}query(e,t,i){return qz(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,o,s=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};o&&(l.easing=o);const c=new Map,h=s.filter(_=>_ instanceof f$);(function _ae(n,e){return 0===n||0===e})(i,r)&&h.forEach(_=>{_.currentSnapshot.forEach((E,x)=>c.set(x,E))});let p=function pae(n){return n.length?n[0]instanceof Map?n:n.map(e=>Kz(e)):[]}(t).map(_=>Ol(_));p=function vae(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<e.length;o++){let s=e[o];r.forEach(a=>s.set(a,Xz(n,a)))}}return e}(e,p,c);const g=function ale(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=mS(e[0]),e.length>1&&(i=mS(e[e.length-1]))):e instanceof Map&&(t=mS(e)),t||i?new lle(n,t,i):null}(e,p);return new f$(e,p,l,g)}}let dle=(()=>{class n extends kz{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:Tr.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?Fz(t):t;return p$(this._renderer,null,i,"register",[r]),new hle(i,this._renderer)}static#e=this.\u0275fac=function(i){return new(i||n)(F(lp),F(Dt))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac})}return n})();class hle extends Tse{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new fle(this._id,e,t||{},this._renderer)}}class fle{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return p$(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function p$(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const m$="@.disabled";let ple=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,i.onRemovalComplete=(o,s)=>{const a=s?.parentNode(o);a&&s.removeChild(a,o)}}createRenderer(t,i){const o=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let h=this._rendererCache.get(o);return h||(h=new g$("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,h)),h}const s=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=h=>{Array.isArray(h)?h.forEach(l):this.engine.registerTrigger(s,a,t,h.name,h)};return i.data.animation.forEach(l),new mle(this,a,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(i){return new(i||n)(F(lp),F(U0),F(it))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac})}return n})();class g${constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==m$?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class mle extends g${constructor(e,t,i,r,o){super(t,i,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==m$?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function gle(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),s="";return"@"!=o.charAt(0)&&([o,s]=function _le(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,r,o,s,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}let vle=(()=>{class n extends U0{constructor(t,i,r,o){super(t.body,i,r)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(i){return new(i||n)(F(Dt),F(XA),F(cS),F(Qa))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac})}return n})();const _$=[{provide:kz,useClass:dle},{provide:cS,useFactory:function yle(){return new Vae}},{provide:U0,useClass:vle},{provide:lp,useFactory:function ble(n,e,t){return new ple(n,e,t)},deps:[Dx,U0,it]}],gS=[{provide:XA,useFactory:()=>new ule},{provide:op,useValue:"BrowserAnimations"},..._$],v$=[{provide:XA,useClass:Wz},{provide:op,useValue:"NoopAnimations"},..._$];let Ele=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?v$:gS}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({providers:gS,imports:[_N]})}return n})();function y$(n,e=0){return function wle(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function z0(n){return Array.isArray(n)?n:[n]}function ai(n){return null==n?"":"string"==typeof n?n:`${n}px`}function jh(n){return n instanceof ei?n.nativeElement:n}const Ile=["addListener","removeListener"],xle=["addEventListener","removeEventListener"],Cle=["on","off"];function _S(n,e,t,i){if(C(t)&&(i=t,t=void 0),i)return _S(n,e,t).pipe(HD(i));const[r,o]=function Ale(n){return C(n.addEventListener)&&C(n.removeEventListener)}(n)?xle.map(s=>a=>n[s](e,a,t)):function Tle(n){return C(n.addListener)&&C(n.removeListener)}(n)?Ile.map(b$(n,e)):function Dle(n){return C(n.on)&&C(n.off)}(n)?Cle.map(b$(n,e)):[];if(!r&&Ct(n))return Ut(s=>_S(s,e,t))(Et(n));if(!r)throw new TypeError("Invalid event target");return new Ke(s=>{const a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function b$(n,e){return t=>i=>n[t](e,i)}const Lg={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=Lg;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(o=>{t=void 0,n(o)});return new yt(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=Lg;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Lg;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class Rle extends fy{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class Sle extends hy{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=Lg.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:o}=e;null!=t&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==t&&(Lg.cancelAnimationFrame(t),e._scheduled=void 0)}});let vS,Ple=1;const $0={};function E$(n){return n in $0&&(delete $0[n],!0)}const kle={setImmediate(n){const e=Ple++;return $0[e]=!0,vS||(vS=Promise.resolve()),vS.then(()=>E$(e)&&n()),e},clearImmediate(n){E$(n)}},{setImmediate:Ole,clearImmediate:Nle}=kle,H0={setImmediate(...n){const{delegate:e}=H0;return(e?.setImmediate||Ole)(...n)},clearImmediate(n){const{delegate:e}=H0;return(e?.clearImmediate||Nle)(n)},delegate:void 0};new class Lle extends fy{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class Fle extends hy{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=H0.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:o}=e;null!=t&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==t&&(H0.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}});function w$(n,e=Bp){return function Ble(n){return se((e,t)=>{let i=!1,r=null,o=null,s=!1;const a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;const c=r;r=null,t.next(c)}s&&t.complete()},l=()=>{o=null,s&&t.complete()};e.subscribe(ye(t,c=>{i=!0,r=c,o||Et(n(c)).subscribe(o=ye(t,a,l))},()=>{s=!0,(!i||!o||o.closed)&&t.complete()}))})}(()=>function jle(n=0,e,t=dZ){let i=-1;return null!=e&&(Dn(e)?t=e:i=e),new Ke(r=>{let o=function Ule(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}(n,e))}let yS;try{yS=typeof Intl<"u"&&Intl.v8BreakIterator}catch{yS=!1}let Vg,tu,bS,Rs=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function o7(n){return n===JO}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!yS)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(i){return new(i||n)(F(Io))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Bg(n){return function zle(){if(null==Vg&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Vg=!0}))}finally{Vg=Vg||!1}return Vg}()?n:!!n.capture}function $le(){if(null==tu){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return tu=!1,tu;if("scrollBehavior"in document.documentElement.style)tu=!0;else{const n=Element.prototype.scrollTo;tu=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return tu}function ES(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Nl(n){return n.composedPath?n.composedPath()[0]:n.target}function wS(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const Wle=new re("cdk-dir-doc",{providedIn:"root",factory:function Gle(){return xe(Dt)}}),Zle=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let IS=(()=>{class n{constructor(t){this.value="ltr",this.change=new En,t&&(this.value=function Kle(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?Zle.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(i){return new(i||n)(F(Wle,8))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ug=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({})}return n})(),Yle=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new H,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Ke(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(w$(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):S()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(gi(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,t)&&i.push(o)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=jh(i),o=t.getElementRef().nativeElement;do{if(r==o)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>_S(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(i){return new(i||n)(F(it),F(Rs),F(Dt,8))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),x$=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new H,this._changeListener=o=>{this._change.next(o)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,o=r.getBoundingClientRect();return{top:-o.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-o.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(w$(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(i){return new(i||n)(F(Rs),F(it),F(Dt,8))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),C$=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({})}return n})(),T$=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({imports:[Ug,C$,Ug,C$]})}return n})();class xS{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class CS extends xS{constructor(e,t,i,r,o){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}}class D$ extends xS{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class Jle extends xS{constructor(e){super(),this.element=e instanceof ei?e.nativeElement:e}}class TS{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof CS?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof D$?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof Jle?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class ece extends TS{constructor(e,t,i,r,o){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=s=>{const a=s.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=o}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||jn.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let DS=(()=>{class n extends TS{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new En,this.attachDomPortal=o=>{const s=o.element,a=this._document.createComment("dom-portal");o.setAttachedHost(this),s.parentNode.insertBefore(a,s),this._getRootNode().appendChild(s),this._attachedPortal=o,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(s,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),s=i.createComponent(o,i.length,t.injector||i.injector,t.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(s.hostView.rootNodes[0]),super.setDisposeFn(()=>s.destroy()),this._attachedPortal=t,this._attachedRef=s,this.attached.emit(s),s}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static#e=this.\u0275fac=function(i){return new(i||n)(q(ud),q(To),q(Dt))};static#t=this.\u0275dir=He({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Vt]})}return n})(),W0=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({})}return n})();const A$=$le();class tce{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=ai(-this._previousScrollPosition.left),e.style.top=ai(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),A$&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),A$&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class nce{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(gi(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class S${enable(){}disable(){}attach(){}}function AS(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function R$(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class ice{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();AS(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let rce=(()=>{class n{constructor(t,i,r,o){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new S$,this.close=s=>new nce(this._scrollDispatcher,this._ngZone,this._viewportRuler,s),this.block=()=>new tce(this._viewportRuler,this._document),this.reposition=s=>new ice(this._scrollDispatcher,this._viewportRuler,this._ngZone,s),this._document=o}static#e=this.\u0275fac=function(i){return new(i||n)(F(Yle),F(x$),F(it),F(Dt))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class M${constructor(e){if(this.scrollStrategy=new S$,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class oce{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let P$=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(i){return new(i||n)(F(Dt))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sce=(()=>{class n extends P${constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const o=this._attachedOverlays;for(let s=o.length-1;s>-1;s--)if(o[s]._keydownEvents.observers.length>0){const a=o[s]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(i){return new(i||n)(F(Dt),F(it,8))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ace=(()=>{class n extends P${constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=Nl(o)},this._clickListener=o=>{const s=Nl(o),a="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const h=l[c];if(h._outsidePointerEvents.observers.length<1||!h.hasAttached())continue;if(h.overlayElement.contains(s)||h.overlayElement.contains(a))break;const p=h._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>p.next(o)):p.next(o)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(i){return new(i||n)(F(Dt),F(Rs),F(it,8))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),G0=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||wS()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}const i=this._document.createElement("div");i.classList.add(t),wS()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static#e=this.\u0275fac=function(i){return new(i||n)(F(Dt),F(Rs))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class jg{constructor(e,t,i,r,o,s,a,l,c,h=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=h,this._backdropElement=null,this._backdropClick=new H,this._attachments=new H,this._detachments=new H,this._locationChanges=yt.EMPTY,this._backdropClickHandler=p=>this._backdropClick.next(p),this._backdropTransitionendHandler=p=>{this._disposeBackdrop(p.target)},this._keydownEvents=new H,this._outsidePointerEvents=new H,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(So(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=ai(this._config.width),e.height=ai(this._config.height),e.minWidth=ai(this._config.minWidth),e.minHeight=ai(this._config.minHeight),e.maxWidth=ai(this._config.maxWidth),e.maxHeight=ai(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=z0(t||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Gb(I(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const k$="cdk-overlay-connected-position-bounding-box",lce=/([A-Za-z%]+)$/;class cce{get positions(){return this._preferredPositions}constructor(e,t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new H,this._resizeSubscription=yt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(k$),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[];let s;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),c=this._getOverlayPoint(l,t,a),h=this._getOverlayFit(c,t,i,a);if(h.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(h,c,i)?o.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!s||s.overlayFit.visibleArea<h.visibleArea)&&(s={overlayFit:h,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(o.length){let a=null,l=-1;for(const c of o){const h=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);h>l&&(l=h,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&nu(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(k$),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,o;if("center"==i.originX)r=e.left+e.width/2;else{const s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?s:a}return t.left<0&&(r-=t.left),o="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(o-=t.top),{x:r,y:o}}_getOverlayPoint(e,t,i){let r,o;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,o="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,t,i,r){const o=N$(t);let{x:s,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(s+=l),c&&(a+=c);let g=0-a,_=a+o.height-i.height,E=this._subtractOverflows(o.width,0-s,s+o.width-i.width),x=this._subtractOverflows(o.height,g,_),T=E*x;return{visibleArea:T,isCompletelyWithinViewport:o.width*o.height===T,fitsInViewportVertically:x===o.height,fitsInViewportHorizontally:E==o.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,o=i.right-t.x,s=O$(this._overlayRef.getConfig().minHeight),a=O$(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=s&&s<=r)&&(e.fitsInViewportHorizontally||null!=a&&a<=o)}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=N$(t),o=this._viewportRect,s=Math.max(e.x+r.width-o.width,0),a=Math.max(e.y+r.height-o.height,0),l=Math.max(o.top-i.top-e.y,0),c=Math.max(o.left-i.left-e.x,0);let h=0,p=0;return h=r.width<=o.width?c||-s:e.x<this._viewportMargin?o.left-i.left-e.x:0,p=r.height<=o.height?l||-a:e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:h,y:p},{x:e.x+h,y:e.y+p}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new oce(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let o,s,a,h,p,g;if("top"===t.overlayY)s=e.y,o=i.height-s+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,o=i.height-a+this._viewportMargin;else{const _=Math.min(i.bottom-e.y+i.top,e.y),E=this._lastBoundingBoxSize.height;o=2*_,s=e.y-_,o>E&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-E/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)g=i.width-e.x+this._viewportMargin,h=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)p=e.x,h=i.right-e.x;else{const _=Math.min(i.right-e.x+i.left,e.x),E=this._lastBoundingBoxSize.width;h=2*_,p=e.x-_,h>E&&!this._isInitialRender&&!this._growAfterOpen&&(p=e.x-E/2)}return{top:s,left:p,bottom:a,right:g,width:h,height:o}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=ai(i.height),r.top=ai(i.top),r.bottom=ai(i.bottom),r.width=ai(i.width),r.left=ai(i.left),r.right=ai(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",o&&(r.maxHeight=ai(o)),s&&(r.maxWidth=ai(s))}this._lastBoundingBoxSize=i,nu(this._boundingBox.style,r)}_resetBoundingBoxStyles(){nu(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){nu(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){const h=this._viewportRuler.getViewportScrollPosition();nu(i,this._getExactOverlayY(t,e,h)),nu(i,this._getExactOverlayX(t,e,h))}else i.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=ai(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=ai(s.maxWidth):o&&(i.maxWidth="")),nu(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":r.top=ai(o.y),r}_getExactOverlayX(e,t,i){let s,r={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),s=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===s?r.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":r.left=ai(o.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:R$(e,i),isOriginOutsideView:AS(e,i),isOverlayClipped:R$(t,i),isOverlayOutsideView:AS(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&z0(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof ei)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function nu(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function O$(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(lce);return t&&"px"!==t?null:parseFloat(e)}return n||null}function N$(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const F$="cdk-global-overlay-wrapper";class uce{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(F$),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,l=!("100%"!==r&&"100vw"!==r||s&&"100%"!==s&&"100vw"!==s),c=!("100%"!==o&&"100vh"!==o||a&&"100%"!==a&&"100vh"!==a),h=this._xPosition,p=this._xOffset,g="rtl"===this._overlayRef.getConfig().direction;let _="",E="",x="";l?x="flex-start":"center"===h?(x="center",g?E=p:_=p):g?"left"===h||"end"===h?(x="flex-end",_=p):("right"===h||"start"===h)&&(x="flex-start",E=p):"left"===h||"start"===h?(x="flex-start",_=p):("right"===h||"end"===h)&&(x="flex-end",E=p),e.position=this._cssPosition,e.marginLeft=l?"0":_,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":E,t.justifyContent=x,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(F$),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let dce=(()=>{class n{constructor(t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o}global(){return new uce}flexibleConnectedTo(t){return new cce(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(i){return new(i||n)(F(x$),F(Dt),F(Rs),F(G0))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hce=0,$h=(()=>{class n{constructor(t,i,r,o,s,a,l,c,h,p,g,_){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=o,this._keyboardDispatcher=s,this._injector=a,this._ngZone=l,this._document=c,this._directionality=h,this._location=p,this._outsideClickDispatcher=g,this._animationsModuleType=_}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),o=this._createPortalOutlet(r),s=new M$(t);return s.direction=s.direction||this._directionality.value,new jg(o,i,r,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+hce++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Qa)),new ece(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(i){return new(i||n)(F(rce),F(G0),F(ud),F(dce),F(sce),F(jn),F(it),F(Dt),F(IS),F(kp),F(ace),F(op,8))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const mce={provide:new re("cdk-connected-overlay-scroll-strategy"),deps:[$h],useFactory:function pce(n){return()=>n.scrollStrategies.reposition()}};let L$=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({providers:[$h,mce],imports:[Ug,W0,T$,T$]})}return n})();function B$(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function U$(n){return gi((e,t)=>n<=t)}let Ece=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),j$=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({providers:[Ece]})}return n})();const z$=new Set;let iu,Ice=(()=>{class n{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Cce}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function xce(n,e){if(!z$.has(n))try{iu||(iu=document.createElement("style"),e&&(iu.nonce=e),iu.setAttribute("type","text/css"),document.head.appendChild(iu)),iu.sheet&&(iu.sheet.insertRule(`@media ${n} {body{ }}`,0),z$.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(i){return new(i||n)(F(Rs),F(xw,8))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Cce(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let Tce=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new H}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return $$(z0(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let o=qb($$(z0(t)).map(s=>this._registerQuery(s).observable));return o=Ey(o.pipe(So(1)),o.pipe(U$(1),function wce(n,e=Bp){return se((t,i)=>{let r=null,o=null,s=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=o;o=null,i.next(c)}};function l(){const c=s+n,h=e.now();if(h<c)return r=this.schedule(void 0,c-h),void i.add(r);a()}t.subscribe(ye(i,c=>{o=c,s=e.now(),r||(r=e.schedule(l,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}(0))),o.pipe(be(s=>{const a={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),o={observable:new Ke(s=>{const a=l=>this._zone.run(()=>s.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(vc(i),be(({matches:s})=>({query:t,matches:s})),Gb(this._destroySubject)),mql:i};return this._queries.set(t,o),o}static#e=this.\u0275fac=function(i){return new(i||n)(F(Ice),F(it))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $$(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}let Z0=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function Rce(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function Sce(n){try{return n.frameElement}catch{return null}}(function Vce(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===G$(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),o=G$(t);return t.hasAttribute("contenteditable")?-1!==o:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function Fce(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==o:"video"===r?-1!==o&&(null!==o||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function Lce(n){return!function Pce(n){return function Oce(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function Mce(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function kce(n){return function Nce(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||W$(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}static#e=this.\u0275fac=function(i){return new(i||n)(F(Rs))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function W$(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function G$(n){if(!W$(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class Bce{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,i,r,o=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(So(1)).subscribe(e)}}let SS=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new Bce(t,this._checker,this._ngZone,this._document,i)}static#e=this.\u0275fac=function(i){return new(i||n)(F(Z0),F(it),F(Dt))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Z$(n){return 0===n.buttons||0===n.detail}function K$(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const Uce=new re("cdk-input-modality-detector-options"),jce={ignoreKeys:[18,17,224,91,16]},Hh=Bg({passive:!0,capture:!0});let zce=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,i,r,o){this._platform=t,this._mostRecentTarget=null,this._modality=new y(null),this._lastTouchMs=0,this._onKeydown=s=>{this._options?.ignoreKeys?.some(a=>a===s.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Nl(s))},this._onMousedown=s=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Z$(s)?"keyboard":"mouse"),this._mostRecentTarget=Nl(s))},this._onTouchstart=s=>{K$(s)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Nl(s))},this._options={...jce,...o},this.modalityDetected=this._modality.pipe(U$(1)),this.modalityChanged=this.modalityDetected.pipe(We()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Hh),r.addEventListener("mousedown",this._onMousedown,Hh),r.addEventListener("touchstart",this._onTouchstart,Hh)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Hh),document.removeEventListener("mousedown",this._onMousedown,Hh),document.removeEventListener("touchstart",this._onTouchstart,Hh))}static#e=this.\u0275fac=function(i){return new(i||n)(F(Rs),F(it),F(Dt),F(Uce,8))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Hce=new re("cdk-focus-monitor-default-options"),K0=Bg({passive:!0,capture:!0});let RS=(()=>{class n{constructor(t,i,r,o,s){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new H,this._rootNodeFocusAndBlurListener=a=>{for(let c=Nl(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=o,this._detectionMode=s?.detectionMode||0}monitor(t,i=!1){const r=jh(t);if(!this._platform.isBrowser||1!==r.nodeType)return S();const o=function qle(n){if(function Hle(){if(null==bS){const n=typeof document<"u"?document.head:null;bS=!(!n||!n.createShadowRoot&&!n.attachShadow)}return bS}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),s=this._elementInfo.get(r);if(s)return i&&(s.checkChildren=!0),s.subject;const a={checkChildren:i,subject:new H,rootNode:o};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=jh(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const o=jh(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof o.focus&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),o=Nl(t);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,K0),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,K0)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Gb(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,K0),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,K0),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,o)=>{(o===t||r.checkChildren&&o.contains(t))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const o=t.labels;if(o)for(let s=0;s<o.length;s++)if(o[s].contains(i))return!0;return!1}static#e=this.\u0275fac=function(i){return new(i||n)(F(it),F(Rs),F(zce),F(Dt,8),F(Hce,8))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Y$="cdk-high-contrast-black-on-white",X$="cdk-high-contrast-white-on-black",MS="cdk-high-contrast-active";let J$=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=xe(Tce).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(MS,Y$,X$),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(MS,Y$):2===i&&t.add(MS,X$)}}static#e=this.\u0275fac=function(i){return new(i||n)(F(Rs),F(Dt))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qce=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}static#e=this.\u0275fac=function(i){return new(i||n)(F(J$))};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({imports:[j$]})}return n})();function Wce(n,e){}class Q0{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let e4=(()=>{class n extends TS{constructor(t,i,r,o,s,a,l,c){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=o,this._interactivityChecker=s,this._ngZone=a,this._overlayRef=l,this._focusMonitor=c,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this.attachDomPortal=h=>{this._portalOutlet.hasAttached();const p=this._portalOutlet.attachDomPortal(h);return this._contentAttached(),p},this._document=r,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let i=null;if("string"==typeof t?i=this._document.querySelector(t):"boolean"==typeof t?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=ES(),o=this._elementRef.nativeElement;(!r||r===this._document.body||r===o||o.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=ES();return t===i||t.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=ES())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static#e=this.\u0275fac=function(i){return new(i||n)(q(ei),q(SS),q(Dt,8),q(Q0),q(Z0),q(it),q(jg),q(RS))};static#t=this.\u0275cmp=On({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(1&i&&Ak(DS,7),2&i){let o;kI(o=function OI(){return function s9(n,e){return n[Dr].queries[e].queryList}(le(),k_())}())&&(r._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){2&i&&Co("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[Vt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){1&i&&me(0,Wce,0,0,"ng-template",0)},dependencies:[DS],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return n})();class PS{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new H,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!B$(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==t.closeOnOverlayDetachments&&this.close()})}close(e,t){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const t4=new re("DialogScrollStrategy"),Gce=new re("DialogData"),Zce=new re("DefaultDialogConfig"),Qce={provide:t4,deps:[$h],useFactory:function Kce(n){return()=>n.scrollStrategies.block()}};let Yce=0,n4=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(t,i,r,o,s,a){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=o,this._overlayContainer=s,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new H,this._afterOpenedAtThisLevel=new H,this._ariaHiddenElements=new Map,this.afterAllClosed=Wb(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(vc(void 0))),this._scrollStrategy=a}open(t,i){(i={...this._defaultOptions||new Q0,...i}).id=i.id||"cdk-dialog-"+Yce++,i.id&&this.getDialogById(i.id);const o=this._getOverlayConfig(i),s=this._overlay.create(o),a=new PS(s,i),l=this._attachContainer(s,a,i);return a.containerInstance=l,this._attachDialogContent(t,a,l,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){kS(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){kS(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),kS(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const i=new M$({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){const o=r.injector||r.viewContainerRef?.injector,s=[{provide:Q0,useValue:r},{provide:PS,useValue:i},{provide:jg,useValue:t}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,s.push(...r.container.providers(r))):a=e4;const l=new CS(a,r.viewContainerRef,jn.create({parent:o||this._injector,providers:s}),r.componentFactoryResolver);return t.attach(l).instance}_attachDialogContent(t,i,r,o){if(t instanceof fs){const s=this._createInjector(o,i,r,void 0);let a={$implicit:o.data,dialogRef:i};o.templateContext&&(a={...a,..."function"==typeof o.templateContext?o.templateContext():o.templateContext}),r.attachTemplatePortal(new D$(t,null,a,s))}else{const s=this._createInjector(o,i,r,this._injector),a=r.attachComponentPortal(new CS(t,o.viewContainerRef,s,o.componentFactoryResolver));i.componentRef=a,i.componentInstance=a.instance}}_createInjector(t,i,r,o){const s=t.injector||t.viewContainerRef?.injector,a=[{provide:Gce,useValue:t.data},{provide:PS,useValue:i}];return t.providers&&("function"==typeof t.providers?a.push(...t.providers(i,t,r)):a.push(...t.providers)),t.direction&&(!s||!s.get(IS,null,{optional:!0}))&&a.push({provide:IS,useValue:{value:t.direction,change:S()}}),jn.create({parent:s||o,providers:a})}_removeOpenDialog(t,i){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,s)=>{o?s.setAttribute("aria-hidden",o):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){const o=i[r];o!==t&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static#e=this.\u0275fac=function(i){return new(i||n)(F($h),F(jn),F(Zce,8),F(n,12),F(G0),F(t4))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac})}return n})();function kS(n,e){let t=n.length;for(;t--;)e(n[t])}let Xce=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({providers:[n4,Qce],imports:[L$,W0,qce,W0]})}return n})();const eue=new re("mat-sanity-checks",{providedIn:"root",factory:function Jce(){return!0}});let Ms=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!wS()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(i){return new(i||n)(F(J$),F(eue,8),F(Dt))};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({imports:[Ug,Ug]})}return n})();const s4=Bg({passive:!0,capture:!0});class iue{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=Nl(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,t,i,r){const o=this._events.get(t);if(o){const s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,s4)})}removeHandler(e,t,i){const r=this._events.get(e);if(!r)return;const o=r.get(t);o&&(o.delete(i),0===o.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,s4)))}}class OS{static#e=this._eventManager=new iue;constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=jh(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...a4,...i.animation},s=i.radius||function oue(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,l=t-r.top,c=o.enterDuration,h=document.createElement("div");h.classList.add("mat-ripple-element"),h.style.left=a-s+"px",h.style.top=l-s+"px",h.style.height=2*s+"px",h.style.width=2*s+"px",null!=i.color&&(h.style.backgroundColor=i.color),h.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(h);const p=window.getComputedStyle(h),_=p.transitionDuration,E="none"===p.transitionProperty||"0s"===_||"0s, 0s"===_||0===r.width&&0===r.height,x=new nue(this,h,i,E);h.style.transform="scale3d(1, 1, 1)",x.state=0,i.persistent||(this._mostRecentTransientRipple=x);return!E&&(c||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const V=()=>this._finishRippleTransition(x),M=()=>this._destroyRipple(x);h.addEventListener("transitionend",V),h.addEventListener("transitioncancel",M)}),this._activeRipples.set(x,null),(E||!c)&&this._finishRippleTransition(x),x}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...a4,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=jh(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,c4.forEach(i=>{OS._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{u4.forEach(t=>{this._triggerElement.addEventListener(t,this,l4)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=Z$(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!K$(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(c4.forEach(t=>OS._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&u4.forEach(t=>e.removeEventListener(t,this,l4)))}}let sue=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({imports:[Ms,Ms]})}return n})();function aue(n,e){}class Y0{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const NS="mdc-dialog--open",d4="mdc-dialog--opening",h4="mdc-dialog--closing";let uue=(()=>{class n extends e4{constructor(t,i,r,o,s,a,l,c){super(t,i,r,o,s,a,l,c),this._animationStateChanged=new En}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}static#e=this.\u0275fac=function(i){return new(i||n)(q(ei),q(SS),q(Dt,8),q(Y0),q(Z0),q(it),q(jg),q(RS))};static#t=this.\u0275cmp=On({type:n,selectors:[["ng-component"]],features:[Vt],decls:0,vars:0,template:function(i,r){},encapsulation:2})}return n})();const f4="--mat-dialog-transition-duration";function p4(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?y$(n.substring(0,n.length-2)):n.endsWith("s")?1e3*y$(n.substring(0,n.length-1)):"0"===n?0:null}let due=(()=>{class n extends uue{constructor(t,i,r,o,s,a,l,c,h){super(t,i,r,o,s,a,l,h),this._animationMode=c,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?p4(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?p4(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(f4,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(d4,NS)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(NS),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(NS),this._animationsEnabled?(this._hostElement.style.setProperty(f4,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(h4)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(d4,h4)}_waitForAnimationToComplete(t,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(t):t()})}static#e=this.\u0275fac=function(i){return new(i||n)(q(ei),q(SS),q(Dt,8),q(Y0),q(Z0),q(it),q(jg),q(op,8),q(RS))};static#t=this.\u0275cmp=On({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(i,r){2&i&&(pI("id",r._config.id),Co("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),uc("_mat-animation-noopable",!r._animationsEnabled))},features:[Vt],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){1&i&&(k(0,"div",0)(1,"div",1),me(2,aue,0,0,"ng-template",2),P()())},dependencies:[DS],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{--mdc-dialog-container-elevation-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12);--mdc-dialog-container-shadow-color:#000;--mdc-dialog-container-shape:4px;--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2})}return n})();class hue{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new H,this._beforeClosed=new H,this._state=0,this.disableClose=t.disableClose,this.id=e.id,i._animationStateChanged.pipe(gi(r=>"opened"===r.state),So(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(gi(r=>"closed"===r.state),So(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),I(this.backdropClick(),this.keydownEvents().pipe(gi(r=>27===r.keyCode&&!this.disableClose&&!B$(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function fue(n,e,t){n._closeInteractionType=e,n.close(t)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(gi(t=>"closing"===t.state),So(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const pue=new re("MatMdcDialogData"),mue=new re("mat-mdc-dialog-default-options"),m4=new re("mat-mdc-dialog-scroll-strategy"),_ue={provide:m4,deps:[$h],useFactory:function gue(n){return()=>n.scrollStrategies.block()}};let vue=0,yue=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(t,i,r,o,s,a,l,c,h,p){this._overlay=t,this._defaultOptions=r,this._parentDialog=o,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=h,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new H,this._afterOpenedAtThisLevel=new H,this._idPrefix="mat-dialog-",this.dialogConfigClass=Y0,this.afterAllClosed=Wb(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(vc(void 0))),this._scrollStrategy=a,this._dialog=i.get(n4)}open(t,i){let r;(i={...this._defaultOptions||new Y0,...i}).id=i.id||`${this._idPrefix}${vue++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const o=this._dialog.open(t,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:Q0,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(s,a,l)=>(r=new this._dialogRefConstructor(s,i,l),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentRef=o.componentRef,r.componentInstance=o.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const s=this.openDialogs.indexOf(r);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}static#e=this.\u0275fac=function(i){qw()};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac})}return n})(),bue=(()=>{class n extends yue{constructor(t,i,r,o,s,a,l,c){super(t,i,o,a,l,s,hue,due,pue,c),this._idPrefix="mat-mdc-dialog-"}static#e=this.\u0275fac=function(i){return new(i||n)(F($h),F(jn),F(kp,8),F(mue,8),F(m4),F(n,12),F(G0),F(op,8))};static#t=this.\u0275prov=ge({token:n,factory:n.\u0275fac})}return n})(),Eue=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({providers:[bue,_ue],imports:[Xce,L$,W0,Ms,Ms]})}return n})(),wue=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({})}return n})(),_4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({imports:[Ms,XO,j$,Ms]})}return n})(),Sue=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({imports:[Ms,_4,_4,wue,Ms]})}return n})(),Pue=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({imports:[Ms,sue,Ms]})}return n})();var kue=ia.Z.initializeApp;let Oue=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n,bootstrap:[Zne]});static#n=this.\u0275inj=Tt({providers:[Tl,Od,{provide:by,useValue:{}}],imports:[_N,Bie,Zie(()=>kue(gz_firebase)),rre(()=>are()),xZ.initializeApp(gz_firebase),RZ,Koe,bse,Ele,Eue,Sue,Pue,NZ.forRoot(),Uie]})}return n})();Y7().bootstrapModule(Oue).catch(n=>console.error(n))},106:(oo,Gn,$e)=>{$e.d(Gn,{Z:()=>Zn});var C=$e(58),J=$e(537),L=$e(534),Ne=$e(879);class yt{constructor(Xe,Je){this._delegate=Xe,this.firebase=Je,(0,L._addComponent)(Xe,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=Xe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Xe){this._delegate.automaticDataCollectionEnabled=Xe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Xe=>{this._delegate.checkDestroyed(),Xe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(Xe,Je=L._DEFAULT_ENTRY_NAME){var Kn;this._delegate.checkDestroyed();const pn=this._delegate.container.getProvider(Xe);return!pn.isInitialized()&&"EXPLICIT"===(null===(Kn=pn.getComponent())||void 0===Kn?void 0:Kn.instantiationMode)&&pn.initialize(),pn.getImmediate({identifier:Je})}_removeServiceInstance(Xe,Je=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Xe).clearInstance(Je)}_addComponent(Xe){(0,L._addComponent)(this._delegate,Xe)}_addOrOverwriteComponent(Xe){(0,L._addOrOverwriteComponent)(this._delegate,Xe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Mn=new C.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),oe=function St(){const bt=function Jt(bt){const Xe={},Je={__esModule:!0,initializeApp:function mt(lt,he={}){const xt=L.initializeApp(lt,he);if((0,C.r3)(Xe,xt.name))return Xe[xt.name];const rn=new bt(xt,Je);return Xe[xt.name]=rn,rn},app:pn,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function nr(lt){const he=lt.name,xt=he.replace("-compat","");if(L._registerComponent(lt)&&"PUBLIC"===lt.type){const rn=(Tn=pn())=>{if("function"!=typeof Tn[xt])throw Mn.create("invalid-app-argument",{appName:he});return Tn[xt]()};void 0!==lt.serviceProps&&(0,C.ZB)(rn,lt.serviceProps),Je[xt]=rn,bt.prototype[xt]=function(...Tn){return this._getService.bind(this,he).apply(this,lt.multipleInstances?Tn:[])}}return"PUBLIC"===lt.type?Je[xt]:null},removeApp:function Kn(lt){delete Xe[lt]},useAsService:function Vn(lt,he){return"serverAuth"===he?null:he},modularAPIs:L}};function pn(lt){if(!(0,C.r3)(Xe,lt=lt||L._DEFAULT_ENTRY_NAME))throw Mn.create("no-app",{appName:lt});return Xe[lt]}return Je.default=Je,Object.defineProperty(Je,"apps",{get:function jt(){return Object.keys(Xe).map(lt=>Xe[lt])}}),pn.App=bt,Je}(yt);return bt.INTERNAL=Object.assign(Object.assign({},bt.INTERNAL),{createFirebaseNamespace:St,extendNamespace:function Xe(Je){(0,C.ZB)(bt,Je)},createSubscribe:C.ne,ErrorFactory:C.LL,deepExtend:C.ZB}),bt}(),pe=new Ne.Yd("@firebase/app-compat");if((0,C.jU)()&&void 0!==self.firebase){pe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const bt=self.firebase.SDK_VERSION;bt&&bt.indexOf("LITE")>=0&&pe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Zn=oe;!function kt(bt){(0,L.registerVersion)("@firebase/app-compat","0.2.25",bt)}()},534:(oo,Gn,$e)=>{$e.r(Gn),$e.d(Gn,{FirebaseError:()=>Ne.ZR,SDK_VERSION:()=>uo,_DEFAULT_ENTRY_NAME:()=>jr,_addComponent:()=>or,_addOrOverwriteComponent:()=>sr,_apps:()=>yi,_clearComponents:()=>kn,_components:()=>rr,_getProvider:()=>Ut,_registerComponent:()=>ci,_removeServiceInstance:()=>ar,deleteApp:()=>Bn,getApp:()=>$r,getApps:()=>Xn,initializeApp:()=>ho,onLog:()=>Ea,registerVersion:()=>lr,setLogLevel:()=>Qo});var C=$e(861),J=$e(537),L=$e(879),Ne=$e(58);const yt=(z,O)=>O.some(de=>z instanceof de);let fn,Mn;const oe=new WeakMap,pe=new WeakMap,Oe=new WeakMap,ot=new WeakMap,kt=new WeakMap;let Xe={get(z,O,de){if(z instanceof IDBTransaction){if("done"===O)return pe.get(z);if("objectStoreNames"===O)return z.objectStoreNames||Oe.get(z);if("store"===O)return de.objectStoreNames[1]?void 0:de.objectStore(de.objectStoreNames[0])}return mt(z[O])},set:(z,O,de)=>(z[O]=de,!0),has:(z,O)=>z instanceof IDBTransaction&&("done"===O||"store"===O)||O in z};function pn(z){return"function"==typeof z?function Kn(z){return z!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function St(){return Mn||(Mn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(z)?function(...O){return z.apply(jt(this),O),mt(oe.get(this))}:function(...O){return mt(z.apply(jt(this),O))}:function(O,...de){const De=z.call(jt(this),O,...de);return Oe.set(De,O.sort?O.sort():[O]),mt(De)}}(z):(z instanceof IDBTransaction&&function bt(z){if(pe.has(z))return;const O=new Promise((de,De)=>{const dt=()=>{z.removeEventListener("complete",gt),z.removeEventListener("error",B),z.removeEventListener("abort",B)},gt=()=>{de(),dt()},B=()=>{De(z.error||new DOMException("AbortError","AbortError")),dt()};z.addEventListener("complete",gt),z.addEventListener("error",B),z.addEventListener("abort",B)});pe.set(z,O)}(z),yt(z,function Jt(){return fn||(fn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(z,Xe):z)}function mt(z){if(z instanceof IDBRequest)return function Zn(z){const O=new Promise((de,De)=>{const dt=()=>{z.removeEventListener("success",gt),z.removeEventListener("error",B)},gt=()=>{de(mt(z.result)),dt()},B=()=>{De(z.error),dt()};z.addEventListener("success",gt),z.addEventListener("error",B)});return O.then(de=>{de instanceof IDBCursor&&oe.set(de,z)}).catch(()=>{}),kt.set(O,z),O}(z);if(ot.has(z))return ot.get(z);const O=pn(z);return O!==z&&(ot.set(z,O),kt.set(O,z)),O}const jt=z=>kt.get(z),lt=["get","getKey","getAll","getAllKeys","count"],he=["put","add","delete","clear"],xt=new Map;function rn(z,O){if(!(z instanceof IDBDatabase)||O in z||"string"!=typeof O)return;if(xt.get(O))return xt.get(O);const de=O.replace(/FromIndex$/,""),De=O!==de,dt=he.includes(de);if(!(de in(De?IDBIndex:IDBObjectStore).prototype)||!dt&&!lt.includes(de))return;const gt=function(){var B=(0,C.Z)(function*(_n,...Pe){const ht=this.transaction(_n,dt?"readwrite":"readonly");let Vl=ht.store;return De&&(Vl=Vl.index(Pe.shift())),(yield Promise.all([Vl[de](...Pe),dt&&ht.done]))[0]});return function(Pe){return B.apply(this,arguments)}}();return xt.set(O,gt),gt}!function Je(z){Xe=z(Xe)}(z=>({...z,get:(O,de,De)=>rn(O,de)||z.get(O,de,De),has:(O,de)=>!!rn(O,de)||z.has(O,de)}));class Tn{constructor(O){this.container=O}getPlatformInfoString(){return this.container.getProviders().map(de=>{if(function Pn(z){const O=z.getComponent();return"VERSION"===O?.type}(de)){const De=de.getImmediate();return`${De.library}/${De.version}`}return null}).filter(de=>de).join(" ")}}const Vr="@firebase/app",Ke=new L.Yd("@firebase/app"),jr="[DEFAULT]",zr={[Vr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},yi=new Map,rr=new Map;function or(z,O){try{z.container.addComponent(O)}catch(de){Ke.debug(`Component ${O.name} failed to register with FirebaseApp ${z.name}`,de)}}function sr(z,O){z.container.addOrOverwriteComponent(O)}function ci(z){const O=z.name;if(rr.has(O))return Ke.debug(`There were multiple attempts to register component ${O}.`),!1;rr.set(O,z);for(const de of yi.values())or(de,z);return!0}function Ut(z,O){const de=z.container.getProvider("heartbeat").getImmediate({optional:!0});return de&&de.triggerHeartbeat(),z.container.getProvider(O)}function ar(z,O,de=jr){Ut(z,O).clearInstance(de)}function kn(){rr.clear()}const gn=new Ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Dn{constructor(O,de,De){this._isDeleted=!1,this._options=Object.assign({},O),this._config=Object.assign({},de),this._name=de.name,this._automaticDataCollectionEnabled=de.automaticDataCollectionEnabled,this._container=De,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(O){this.checkDestroyed(),this._automaticDataCollectionEnabled=O}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(O){this._isDeleted=O}checkDestroyed(){if(this.isDeleted)throw gn.create("app-deleted",{appName:this._name})}}const uo="10.7.1";function ho(z,O={}){let de=z;"object"!=typeof O&&(O={name:O});const De=Object.assign({name:jr,automaticDataCollectionEnabled:!1},O),dt=De.name;if("string"!=typeof dt||!dt)throw gn.create("bad-app-name",{appName:String(dt)});if(de||(de=(0,Ne.aH)()),!de)throw gn.create("no-options");const gt=yi.get(dt);if(gt){if((0,Ne.vZ)(de,gt.options)&&(0,Ne.vZ)(De,gt.config))return gt;throw gn.create("duplicate-app",{appName:dt})}const B=new J.H0(dt);for(const Pe of rr.values())B.addComponent(Pe);const _n=new Dn(de,De,B);return yi.set(dt,_n),_n}function $r(z=jr){const O=yi.get(z);if(!O&&z===jr&&(0,Ne.aH)())return ho();if(!O)throw gn.create("no-app",{appName:z});return O}function Xn(){return Array.from(yi.values())}function Bn(z){return bi.apply(this,arguments)}function bi(){return(bi=(0,C.Z)(function*(z){const O=z.name;yi.has(O)&&(yi.delete(O),yield Promise.all(z.container.getProviders().map(de=>de.delete())),z.isDeleted=!0)})).apply(this,arguments)}function lr(z,O,de){var De;let dt=null!==(De=zr[z])&&void 0!==De?De:z;de&&(dt+=`-${de}`);const gt=dt.match(/\s|\//),B=O.match(/\s|\//);if(gt||B){const _n=[`Unable to register library "${dt}" with version "${O}":`];return gt&&_n.push(`library name "${dt}" contains illegal characters (whitespace or "/")`),gt&&B&&_n.push("and"),B&&_n.push(`version name "${O}" contains illegal characters (whitespace or "/")`),void Ke.warn(_n.join(" "))}ci(new J.wA(`${dt}-version`,()=>({library:dt,version:O}),"VERSION"))}function Ea(z,O){if(null!==z&&"function"!=typeof z)throw gn.create("invalid-log-argument");(0,L.Am)(z,O)}function Qo(z){(0,L.Ub)(z)}const ks="firebase-heartbeat-database",fo=1,R="firebase-heartbeat-store";let D=null;function b(){return D||(D=function nr(z,O,{blocked:de,upgrade:De,blocking:dt,terminated:gt}={}){const B=indexedDB.open(z,O),_n=mt(B);return De&&B.addEventListener("upgradeneeded",Pe=>{De(mt(B.result),Pe.oldVersion,Pe.newVersion,mt(B.transaction),Pe)}),de&&B.addEventListener("blocked",Pe=>de(Pe.oldVersion,Pe.newVersion,Pe)),_n.then(Pe=>{gt&&Pe.addEventListener("close",()=>gt()),dt&&Pe.addEventListener("versionchange",ht=>dt(ht.oldVersion,ht.newVersion,ht))}).catch(()=>{}),_n}(ks,fo,{upgrade:(z,O)=>{0===O&&z.createObjectStore(R)}}).catch(z=>{throw gn.create("idb-open",{originalErrorMessage:z.message})})),D}function y(){return(y=(0,C.Z)(function*(z){try{return yield(yield b()).transaction(R).objectStore(R).get(Re(z))}catch(O){if(O instanceof Ne.ZR)Ke.warn(O.message);else{const de=gn.create("idb-get",{originalErrorMessage:O?.message});Ke.warn(de.message)}}})).apply(this,arguments)}function S(z,O){return ee.apply(this,arguments)}function ee(){return(ee=(0,C.Z)(function*(z,O){try{const De=(yield b()).transaction(R,"readwrite");yield De.objectStore(R).put(O,Re(z)),yield De.done}catch(de){if(de instanceof Ne.ZR)Ke.warn(de.message);else{const De=gn.create("idb-set",{originalErrorMessage:de?.message});Ke.warn(De.message)}}})).apply(this,arguments)}function Re(z){return`${z.name}!${z.options.appId}`}class Rt{constructor(O){this.container=O,this._heartbeatsCache=null;const de=this.container.getProvider("app").getImmediate();this._storage=new Le(de),this._heartbeatsCachePromise=this._storage.read().then(De=>(this._heartbeatsCache=De,De))}triggerHeartbeat(){var O=this;return(0,C.Z)(function*(){var de,De;const gt=O.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),B=Ie();if((null!=(null===(de=O._heartbeatsCache)||void 0===de?void 0:de.heartbeats)||(O._heartbeatsCache=yield O._heartbeatsCachePromise,null!=(null===(De=O._heartbeatsCache)||void 0===De?void 0:De.heartbeats)))&&O._heartbeatsCache.lastSentHeartbeatDate!==B&&!O._heartbeatsCache.heartbeats.some(_n=>_n.date===B))return O._heartbeatsCache.heartbeats.push({date:B,agent:gt}),O._heartbeatsCache.heartbeats=O._heartbeatsCache.heartbeats.filter(_n=>{const Pe=new Date(_n.date).valueOf();return Date.now()-Pe<=2592e6}),O._storage.overwrite(O._heartbeatsCache)})()}getHeartbeatsHeader(){var O=this;return(0,C.Z)(function*(){var de;if(null===O._heartbeatsCache&&(yield O._heartbeatsCachePromise),null==(null===(de=O._heartbeatsCache)||void 0===de?void 0:de.heartbeats)||0===O._heartbeatsCache.heartbeats.length)return"";const De=Ie(),{heartbeatsToSend:dt,unsentEntries:gt}=function qt(z,O=1024){const de=[];let De=z.slice();for(const dt of z){const gt=de.find(B=>B.agent===dt.agent);if(gt){if(gt.dates.push(dt.date),ri(de)>O){gt.dates.pop();break}}else if(de.push({agent:dt.agent,dates:[dt.date]}),ri(de)>O){de.pop();break}De=De.slice(1)}return{heartbeatsToSend:de,unsentEntries:De}}(O._heartbeatsCache.heartbeats),B=(0,Ne.L)(JSON.stringify({version:2,heartbeats:dt}));return O._heartbeatsCache.lastSentHeartbeatDate=De,gt.length>0?(O._heartbeatsCache.heartbeats=gt,yield O._storage.overwrite(O._heartbeatsCache)):(O._heartbeatsCache.heartbeats=[],O._storage.overwrite(O._heartbeatsCache)),B})()}}function Ie(){return(new Date).toISOString().substring(0,10)}class Le{constructor(O){this.app=O,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,C.Z)(function*(){return!!(0,Ne.hl)()&&(0,Ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var O=this;return(0,C.Z)(function*(){if(yield O._canUseIndexedDBPromise){const De=yield function I(z){return y.apply(this,arguments)}(O.app);return De?.heartbeats?De:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(O){var de=this;return(0,C.Z)(function*(){var De;if(yield de._canUseIndexedDBPromise){const gt=yield de.read();return S(de.app,{lastSentHeartbeatDate:null!==(De=O.lastSentHeartbeatDate)&&void 0!==De?De:gt.lastSentHeartbeatDate,heartbeats:O.heartbeats})}})()}add(O){var de=this;return(0,C.Z)(function*(){var De;if(yield de._canUseIndexedDBPromise){const gt=yield de.read();return S(de.app,{lastSentHeartbeatDate:null!==(De=O.lastSentHeartbeatDate)&&void 0!==De?De:gt.lastSentHeartbeatDate,heartbeats:[...gt.heartbeats,...O.heartbeats]})}})()}}function ri(z){return(0,Ne.L)(JSON.stringify({version:2,heartbeats:z})).length}!function Os(z){ci(new J.wA("platform-logger",O=>new Tn(O),"PRIVATE")),ci(new J.wA("heartbeat",O=>new Rt(O),"PRIVATE")),lr(Vr,"0.9.25",z),lr(Vr,"0.9.25","esm2017"),lr("fire-js","")}("")},537:(oo,Gn,$e)=>{$e.d(Gn,{H0:()=>Jt,wA:()=>L});var C=$e(861),J=$e(58);class L{constructor(oe,pe,Oe){this.name=oe,this.instanceFactory=pe,this.type=Oe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(oe){return this.instantiationMode=oe,this}setMultipleInstances(oe){return this.multipleInstances=oe,this}setServiceProps(oe){return this.serviceProps=oe,this}setInstanceCreatedCallback(oe){return this.onInstanceCreated=oe,this}}const Ne="[DEFAULT]";class yt{constructor(oe,pe){this.name=oe,this.container=pe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(oe){const pe=this.normalizeInstanceIdentifier(oe);if(!this.instancesDeferred.has(pe)){const Oe=new J.BH;if(this.instancesDeferred.set(pe,Oe),this.isInitialized(pe)||this.shouldAutoInitialize())try{const ot=this.getOrInitializeService({instanceIdentifier:pe});ot&&Oe.resolve(ot)}catch{}}return this.instancesDeferred.get(pe).promise}getImmediate(oe){var pe;const Oe=this.normalizeInstanceIdentifier(oe?.identifier),ot=null!==(pe=oe?.optional)&&void 0!==pe&&pe;if(!this.isInitialized(Oe)&&!this.shouldAutoInitialize()){if(ot)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Oe})}catch(kt){if(ot)return null;throw kt}}getComponent(){return this.component}setComponent(oe){if(oe.name!==this.name)throw Error(`Mismatching Component ${oe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=oe,this.shouldAutoInitialize()){if(function Mn(St){return"EAGER"===St.instantiationMode}(oe))try{this.getOrInitializeService({instanceIdentifier:Ne})}catch{}for(const[pe,Oe]of this.instancesDeferred.entries()){const ot=this.normalizeInstanceIdentifier(pe);try{const kt=this.getOrInitializeService({instanceIdentifier:ot});Oe.resolve(kt)}catch{}}}}clearInstance(oe=Ne){this.instancesDeferred.delete(oe),this.instancesOptions.delete(oe),this.instances.delete(oe)}delete(){var oe=this;return(0,C.Z)(function*(){const pe=Array.from(oe.instances.values());yield Promise.all([...pe.filter(Oe=>"INTERNAL"in Oe).map(Oe=>Oe.INTERNAL.delete()),...pe.filter(Oe=>"_delete"in Oe).map(Oe=>Oe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(oe=Ne){return this.instances.has(oe)}getOptions(oe=Ne){return this.instancesOptions.get(oe)||{}}initialize(oe={}){const{options:pe={}}=oe,Oe=this.normalizeInstanceIdentifier(oe.instanceIdentifier);if(this.isInitialized(Oe))throw Error(`${this.name}(${Oe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ot=this.getOrInitializeService({instanceIdentifier:Oe,options:pe});for(const[kt,Zn]of this.instancesDeferred.entries())Oe===this.normalizeInstanceIdentifier(kt)&&Zn.resolve(ot);return ot}onInit(oe,pe){var Oe;const ot=this.normalizeInstanceIdentifier(pe),kt=null!==(Oe=this.onInitCallbacks.get(ot))&&void 0!==Oe?Oe:new Set;kt.add(oe),this.onInitCallbacks.set(ot,kt);const Zn=this.instances.get(ot);return Zn&&oe(Zn,ot),()=>{kt.delete(oe)}}invokeOnInitCallbacks(oe,pe){const Oe=this.onInitCallbacks.get(pe);if(Oe)for(const ot of Oe)try{ot(oe,pe)}catch{}}getOrInitializeService({instanceIdentifier:oe,options:pe={}}){let Oe=this.instances.get(oe);if(!Oe&&this.component&&(Oe=this.component.instanceFactory(this.container,{instanceIdentifier:(St=oe,St===Ne?void 0:St),options:pe}),this.instances.set(oe,Oe),this.instancesOptions.set(oe,pe),this.invokeOnInitCallbacks(Oe,oe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,oe,Oe)}catch{}var St;return Oe||null}normalizeInstanceIdentifier(oe=Ne){return this.component?this.component.multipleInstances?oe:Ne:oe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Jt{constructor(oe){this.name=oe,this.providers=new Map}addComponent(oe){const pe=this.getProvider(oe.name);if(pe.isComponentSet())throw new Error(`Component ${oe.name} has already been registered with ${this.name}`);pe.setComponent(oe)}addOrOverwriteComponent(oe){this.getProvider(oe.name).isComponentSet()&&this.providers.delete(oe.name),this.addComponent(oe)}getProvider(oe){if(this.providers.has(oe))return this.providers.get(oe);const pe=new yt(oe,this);return this.providers.set(oe,pe),pe}getProviders(){return Array.from(this.providers.values())}}},879:(oo,Gn,$e)=>{$e.d(Gn,{Am:()=>St,Ub:()=>Jt,Yd:()=>Mn,in:()=>J});const C=[];var J=function(oe){return oe[oe.DEBUG=0]="DEBUG",oe[oe.VERBOSE=1]="VERBOSE",oe[oe.INFO=2]="INFO",oe[oe.WARN=3]="WARN",oe[oe.ERROR=4]="ERROR",oe[oe.SILENT=5]="SILENT",oe}(J||{});const L={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},Ne=J.INFO,yt={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},fn=(oe,pe,...Oe)=>{if(pe<oe.logLevel)return;const ot=(new Date).toISOString(),kt=yt[pe];if(!kt)throw new Error(`Attempted to log a message with an invalid logType (value: ${pe})`);console[kt](`[${ot}]  ${oe.name}:`,...Oe)};class Mn{constructor(pe){this.name=pe,this._logLevel=Ne,this._logHandler=fn,this._userLogHandler=null,C.push(this)}get logLevel(){return this._logLevel}set logLevel(pe){if(!(pe in J))throw new TypeError(`Invalid value "${pe}" assigned to \`logLevel\``);this._logLevel=pe}setLogLevel(pe){this._logLevel="string"==typeof pe?L[pe]:pe}get logHandler(){return this._logHandler}set logHandler(pe){if("function"!=typeof pe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=pe}get userLogHandler(){return this._userLogHandler}set userLogHandler(pe){this._userLogHandler=pe}debug(...pe){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...pe),this._logHandler(this,J.DEBUG,...pe)}log(...pe){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...pe),this._logHandler(this,J.VERBOSE,...pe)}info(...pe){this._userLogHandler&&this._userLogHandler(this,J.INFO,...pe),this._logHandler(this,J.INFO,...pe)}warn(...pe){this._userLogHandler&&this._userLogHandler(this,J.WARN,...pe),this._logHandler(this,J.WARN,...pe)}error(...pe){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...pe),this._logHandler(this,J.ERROR,...pe)}}function Jt(oe){C.forEach(pe=>{pe.setLogLevel(oe)})}function St(oe,pe){for(const Oe of C){let ot=null;pe&&pe.level&&(ot=L[pe.level]),Oe.userLogHandler=null===oe?null:(kt,Zn,...bt)=>{const Xe=bt.map(Je=>{if(null==Je)return null;if("string"==typeof Je)return Je;if("number"==typeof Je||"boolean"==typeof Je)return Je.toString();if(Je instanceof Error)return Je.message;try{return JSON.stringify(Je)}catch{return null}}).filter(Je=>Je).join(" ");Zn>=(ot??kt.logLevel)&&oe({level:J[Zn].toLowerCase(),message:Xe,args:bt,type:kt.name})}}}},365:(oo,Gn,$e)=>{$e.r(Gn);var C=$e(861),J=$e(106),L=$e(217),Ne=$e(58),Mn=($e(534),$e(879),$e(537));function Jt(){return window}function pe(){return pe=(0,C.Z)(function*(b,I,y){var S;const{BuildInfo:ee}=Jt();(0,L.au)(I.sessionId,"AuthEvent did not contain a session ID");const Re=yield function Je(b){return Kn.apply(this,arguments)}(I.sessionId),Ae={};return(0,L.av)()?Ae.ibi=ee.packageName:(0,L.aw)()?Ae.apn=ee.packageName:(0,L.ax)(b,"operation-not-supported-in-this-environment"),ee.displayName&&(Ae.appDisplayName=ee.displayName),Ae.sessionId=Re,(0,L.ay)(b,y,I.type,void 0,null!==(S=I.eventId)&&void 0!==S?S:void 0,Ae)}),pe.apply(this,arguments)}function ot(){return(ot=(0,C.Z)(function*(b){const{BuildInfo:I}=Jt(),y={};(0,L.av)()?y.iosBundleId=I.packageName:(0,L.aw)()?y.androidPackageName=I.packageName:(0,L.ax)(b,"operation-not-supported-in-this-environment"),yield(0,L.az)(b,y)})).apply(this,arguments)}function bt(){return(bt=(0,C.Z)(function*(b,I,y){const{cordova:S}=Jt();let ee=()=>{};try{yield new Promise((Re,Ae)=>{let We=null;function Rt(){var Le;Re();const ri=null===(Le=S.plugins.browsertab)||void 0===Le?void 0:Le.close;"function"==typeof ri&&ri(),"function"==typeof y?.close&&y.close()}function Ie(){We||(We=window.setTimeout(()=>{Ae((0,L.aB)(b,"redirect-cancelled-by-user"))},2e3))}function qt(){"visible"===document?.visibilityState&&Ie()}I.addPassiveListener(Rt),document.addEventListener("resume",Ie,!1),(0,L.aw)()&&document.addEventListener("visibilitychange",qt,!1),ee=()=>{I.removePassiveListener(Rt),document.removeEventListener("resume",Ie,!1),document.removeEventListener("visibilitychange",qt,!1),We&&window.clearTimeout(We)}})}finally{ee()}})).apply(this,arguments)}function Kn(){return(Kn=(0,C.Z)(function*(b){const I=function pn(b){if((0,L.au)(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(b);const I=new ArrayBuffer(b.length),y=new Uint8Array(I);for(let S=0;S<b.length;S++)y[S]=b.charCodeAt(S);return y}(b),y=yield crypto.subtle.digest("SHA-256",I);return Array.from(new Uint8Array(y)).map(ee=>ee.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class jt extends L.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(I=>{this.resolveInialized=I})}addPassiveListener(I){this.passiveListeners.add(I)}removePassiveListener(I){this.passiveListeners.delete(I)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(I){return this.resolveInialized(),this.passiveListeners.forEach(y=>y(I)),super.onEvent(I)}initialized(){var I=this;return(0,C.Z)(function*(){yield I.initPromise})()}}function lt(b){return he.apply(this,arguments)}function he(){return(he=(0,C.Z)(function*(b){const I=yield Tn()._get(Pn(b));return I&&(yield Tn()._remove(Pn(b))),I})).apply(this,arguments)}function rn(){const b=[];for(let y=0;y<20;y++){const S=Math.floor(62*Math.random());b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(S))}return b.join("")}function Tn(){return(0,L.aE)(L.b)}function Pn(b){return(0,L.aF)("authEvent",b.config.apiKey,b.name)}function Ke(b){if(!b?.includes("?"))return{};const[I,...y]=b.split("?");return(0,Ne.zd)(y.join("?"))}const Q=class so{constructor(){this._redirectPersistence=L.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=L.aG,this._overrideRedirectResult=L.aH}_initialize(I){var y=this;return(0,C.Z)(function*(){const S=I._key();let ee=y.eventManagers.get(S);return ee||(ee=new jt(I),y.eventManagers.set(S,ee),y.attachCallbackListeners(I,ee)),ee})()}_openPopup(I){(0,L.ax)(I,"operation-not-supported-in-this-environment")}_openRedirect(I,y,S,ee){var Re=this;return(0,C.Z)(function*(){!function Xe(b){var I,y,S,ee,Re,Ae,We,Rt,Ie,qt;const Le=Jt();(0,L.aC)("function"==typeof(null===(I=Le?.universalLinks)||void 0===I?void 0:I.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,L.aC)(typeof(null===(y=Le?.BuildInfo)||void 0===y?void 0:y.packageName)<"u",b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,L.aC)("function"==typeof(null===(Re=null===(ee=null===(S=Le?.cordova)||void 0===S?void 0:S.plugins)||void 0===ee?void 0:ee.browsertab)||void 0===Re?void 0:Re.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.aC)("function"==typeof(null===(Rt=null===(We=null===(Ae=Le?.cordova)||void 0===Ae?void 0:Ae.plugins)||void 0===We?void 0:We.browsertab)||void 0===Rt?void 0:Rt.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.aC)("function"==typeof(null===(qt=null===(Ie=Le?.cordova)||void 0===Ie?void 0:Ie.InAppBrowser)||void 0===qt?void 0:qt.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(I);const Ae=yield Re._initialize(I);yield Ae.initialized(),Ae.resetRedirect(),(0,L.aI)(),yield Re._originValidation(I);const We=function nr(b,I,y=null){return{type:I,eventId:y,urlResponse:null,sessionId:rn(),postBody:null,tenantId:b.tenantId,error:(0,L.aB)(b,"no-auth-event")}}(I,S,ee);yield function Vn(b,I){return Tn()._set(Pn(b),I)}(I,We);const Rt=yield function oe(b,I,y){return pe.apply(this,arguments)}(I,We,y),Ie=yield function kt(b){const{cordova:I}=Jt();return new Promise(y=>{I.plugins.browsertab.isAvailable(S=>{let ee=null;S?I.plugins.browsertab.openUrl(b):ee=I.InAppBrowser.open(b,(0,L.aA)()?"_blank":"_system","location=yes"),y(ee)})})}(Rt);return function Zn(b,I,y){return bt.apply(this,arguments)}(I,Ae,Ie)})()}_isIframeWebStorageSupported(I,y){throw new Error("Method not implemented.")}_originValidation(I){const y=I._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Oe(b){return ot.apply(this,arguments)}(I)),this.originValidationPromises[y]}attachCallbackListeners(I,y){const{universalLinks:S,handleOpenURL:ee,BuildInfo:Re}=Jt(),Ae=setTimeout((0,C.Z)(function*(){yield lt(I),y.onEvent(X())}),500),We=function(){var qt=(0,C.Z)(function*(Le){clearTimeout(Ae);const ri=yield lt(I);let Os=null;ri&&Le?.url&&(Os=function xt(b,I){var y,S;const ee=function Br(b){const I=Ke(b),y=I.link?decodeURIComponent(I.link):void 0,S=Ke(y).link,ee=I.deep_link_id?decodeURIComponent(I.deep_link_id):void 0;return Ke(ee).link||ee||S||y||b}(I);if(ee.includes("/__/auth/callback")){const Re=Ke(ee),Ae=Re.firebaseError?function Vr(b){try{return JSON.parse(b)}catch{return null}}(decodeURIComponent(Re.firebaseError)):null,We=null===(S=null===(y=Ae?.code)||void 0===y?void 0:y.split("auth/"))||void 0===S?void 0:S[1],Rt=We?(0,L.aB)(We):null;return Rt?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:Rt,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:ee,postBody:null}}return null}(ri,Le.url)),y.onEvent(Os||X())});return function(ri){return qt.apply(this,arguments)}}();typeof S<"u"&&"function"==typeof S.subscribe&&S.subscribe(null,We);const Rt=ee,Ie=`${Re.packageName.toLowerCase()}://`;Jt().handleOpenURL=function(){var qt=(0,C.Z)(function*(Le){if(Le.toLowerCase().startsWith(Ie)&&We({url:Le}),"function"==typeof Rt)try{Rt(Le)}catch(ri){console.error(ri)}});return function(Le){return qt.apply(this,arguments)}}()}};function X(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,L.aB)("no-auth-event")}}function ye(){var b;return(null===(b=self?.location)||void 0===b?void 0:b.protocol)||null}function be(b=(0,Ne.z$)()){return!("file:"!==ye()&&"ionic:"!==ye()&&"capacitor:"!==ye()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function mn(){try{const b=self.localStorage,I=L.aN();if(b)return b.setItem(I,"1"),b.removeItem(I),!function Zt(b=(0,Ne.z$)()){return function Ct(){return(0,Ne.w1)()&&11===document?.documentMode}()||function sn(b=(0,Ne.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,Ne.hl)()}catch{return Qn()&&(0,Ne.hl)()}return!1}function Qn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Yn(){return(function pt(){return"http:"===ye()||"https:"===ye()}()||(0,Ne.ru)()||be())&&!function je(){return(0,Ne.b$)()||(0,Ne.UG)()}()&&mn()&&!Qn()}function li(){return be()&&typeof document<"u"}function Ur(){return(Ur=(0,C.Z)(function*(){return!!li()&&new Promise(b=>{const I=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(I),b(!0)})})})).apply(this,arguments)}const Et={LOCAL:"local",NONE:"none",SESSION:"session"},lo=L.aC,co="persistence";function zr(b){return yi.apply(this,arguments)}function yi(){return(yi=(0,C.Z)(function*(b){yield b._initializationPromise;const I=or(),y=L.aF(co,b.config.apiKey,b.name);I&&I.setItem(y,b._getPersistence())})).apply(this,arguments)}function or(){var b;try{return(null===(b=function ao(){return typeof window<"u"?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch{return null}}const sr=L.aC;class ci{constructor(){this.browserResolver=L.aE(L.k),this.cordovaResolver=L.aE(Q),this.underlyingResolver=null,this._redirectPersistence=L.a,this._completeRedirectFn=L.aG,this._overrideRedirectResult=L.aH}_initialize(I){var y=this;return(0,C.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._initialize(I)})()}_openPopup(I,y,S,ee){var Re=this;return(0,C.Z)(function*(){return yield Re.selectUnderlyingResolver(),Re.assertedUnderlyingResolver._openPopup(I,y,S,ee)})()}_openRedirect(I,y,S,ee){var Re=this;return(0,C.Z)(function*(){return yield Re.selectUnderlyingResolver(),Re.assertedUnderlyingResolver._openRedirect(I,y,S,ee)})()}_isIframeWebStorageSupported(I,y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(I,y)}_originValidation(I){return this.assertedUnderlyingResolver._originValidation(I)}get _shouldInitProactively(){return li()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return sr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var I=this;return(0,C.Z)(function*(){if(I.underlyingResolver)return;const y=yield function qi(){return Ur.apply(this,arguments)}();I.underlyingResolver=y?I.cordovaResolver:I.browserResolver})()}}function Ut(b){return b.unwrap()}function kn(b){return gn(b)}function gn(b){const{_tokenResponse:I}=b instanceof Ne.ZR?b.customData:b;if(!I)return null;if(!(b instanceof Ne.ZR)&&"temporaryProof"in I&&"phoneNumber"in I)return L.P.credentialFromResult(b);const y=I.providerId;if(!y||y===L.p.PASSWORD)return null;let S;switch(y){case L.p.GOOGLE:S=L.X;break;case L.p.FACEBOOK:S=L.W;break;case L.p.GITHUB:S=L.Y;break;case L.p.TWITTER:S=L.$;break;default:const{oauthIdToken:ee,oauthAccessToken:Re,oauthTokenSecret:Ae,pendingToken:We,nonce:Rt}=I;return Re||Ae||ee||We?We?y.startsWith("saml.")?L.aQ._create(y,We):L.N._fromParams({providerId:y,signInMethod:y,pendingToken:We,idToken:ee,accessToken:Re}):new L.Z(y).credential({idToken:ee,accessToken:Re,rawNonce:Rt}):null}return b instanceof Ne.ZR?S.credentialFromError(b):S.credentialFromResult(b)}function Dn(b,I){return I.catch(y=>{throw y instanceof Ne.ZR&&function Ll(b,I){var y;const S=null===(y=I.customData)||void 0===y?void 0:y._tokenResponse;if("auth/multi-factor-auth-required"===I?.code)I.resolver=new $r(b,L.as(b,I));else if(S){const ee=gn(I),Re=I;ee&&(Re.credential=ee,Re.tenantId=S.tenantId||void 0,Re.email=S.email||void 0,Re.phoneNumber=S.phoneNumber||void 0)}}(b,y),y}).then(y=>{const ee=y.user;return{operationType:y.operationType,credential:kn(y),additionalUserInfo:L.aq(y),user:Xn.getOrCreate(ee)}})}function uo(b,I){return ho.apply(this,arguments)}function ho(){return(ho=(0,C.Z)(function*(b,I){const y=yield I;return{verificationId:y.verificationId,confirm:S=>Dn(b,y.confirm(S))}})).apply(this,arguments)}class $r{constructor(I,y){this.resolver=y,this.auth=function ar(b){return b.wrapped()}(I)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(I){return Dn(Ut(this.auth),this.resolver.resolveSignIn(I))}}class Xn{constructor(I){this._delegate=I,this.multiFactor=L.at(I)}static getOrCreate(I){return Xn.USER_MAP.has(I)||Xn.USER_MAP.set(I,new Xn(I)),Xn.USER_MAP.get(I)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(I){return this._delegate.getIdTokenResult(I)}getIdToken(I){return this._delegate.getIdToken(I)}linkAndRetrieveDataWithCredential(I){return this.linkWithCredential(I)}linkWithCredential(I){var y=this;return(0,C.Z)(function*(){return Dn(y.auth,L.a2(y._delegate,I))})()}linkWithPhoneNumber(I,y){var S=this;return(0,C.Z)(function*(){return uo(S.auth,L.l(S._delegate,I,y))})()}linkWithPopup(I){var y=this;return(0,C.Z)(function*(){return Dn(y.auth,L.d(y._delegate,I,ci))})()}linkWithRedirect(I){var y=this;return(0,C.Z)(function*(){return yield zr(L.aJ(y.auth)),L.g(y._delegate,I,ci)})()}reauthenticateAndRetrieveDataWithCredential(I){return this.reauthenticateWithCredential(I)}reauthenticateWithCredential(I){var y=this;return(0,C.Z)(function*(){return Dn(y.auth,L.a3(y._delegate,I))})()}reauthenticateWithPhoneNumber(I,y){return uo(this.auth,L.r(this._delegate,I,y))}reauthenticateWithPopup(I){return Dn(this.auth,L.e(this._delegate,I,ci))}reauthenticateWithRedirect(I){var y=this;return(0,C.Z)(function*(){return yield zr(L.aJ(y.auth)),L.h(y._delegate,I,ci)})()}sendEmailVerification(I){return L.ag(this._delegate,I)}unlink(I){var y=this;return(0,C.Z)(function*(){return yield L.ap(y._delegate,I),y})()}updateEmail(I){return L.al(this._delegate,I)}updatePassword(I){return L.am(this._delegate,I)}updatePhoneNumber(I){return L.u(this._delegate,I)}updateProfile(I){return L.ak(this._delegate,I)}verifyBeforeUpdateEmail(I,y){return L.ah(this._delegate,I,y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Xn.USER_MAP=new WeakMap;const Bn=L.aC;let bi=(()=>{class b{constructor(y,S){if(this.app=y,S.isInitialized())return this._delegate=S.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ee}=y.options;Bn(ee,"invalid-api-key",{appName:y.name}),Bn(ee,"invalid-api-key",{appName:y.name});const Re=typeof window<"u"?ci:void 0;this._delegate=S.initialize({options:{persistence:Ea(ee,y.name),popupRedirectResolver:Re}}),this._delegate._updateErrorMap(L.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Xn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(y){this._delegate.languageCode=y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(y){this._delegate.tenantId=y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(y,S){L.K(this._delegate,y,S)}applyActionCode(y){return L.a7(this._delegate,y)}checkActionCode(y){return L.a8(this._delegate,y)}confirmPasswordReset(y,S){return L.a6(this._delegate,y,S)}createUserWithEmailAndPassword(y,S){var ee=this;return(0,C.Z)(function*(){return Dn(ee._delegate,L.aa(ee._delegate,y,S))})()}fetchProvidersForEmail(y){return this.fetchSignInMethodsForEmail(y)}fetchSignInMethodsForEmail(y){return L.af(this._delegate,y)}isSignInWithEmailLink(y){return L.ad(this._delegate,y)}getRedirectResult(){var y=this;return(0,C.Z)(function*(){Bn(Yn(),y._delegate,"operation-not-supported-in-this-environment");const S=yield L.j(y._delegate,ci);return S?Dn(y._delegate,Promise.resolve(S)):{credential:null,user:null}})()}addFrameworkForLogging(y){!function H(b,I){(0,L.aJ)(b)._logFramework(I)}(this._delegate,y)}onAuthStateChanged(y,S,ee){const{next:Re,error:Ae,complete:We}=lr(y,S,ee);return this._delegate.onAuthStateChanged(Re,Ae,We)}onIdTokenChanged(y,S,ee){const{next:Re,error:Ae,complete:We}=lr(y,S,ee);return this._delegate.onIdTokenChanged(Re,Ae,We)}sendSignInLinkToEmail(y,S){return L.ac(this._delegate,y,S)}sendPasswordResetEmail(y,S){return L.a5(this._delegate,y,S||void 0)}setPersistence(y){var S=this;return(0,C.Z)(function*(){let ee;switch(function jr(b,I){lo(Object.values(Et).includes(I),b,"invalid-persistence-type"),(0,Ne.b$)()?lo(I!==Et.SESSION,b,"unsupported-persistence-type"):(0,Ne.UG)()?lo(I===Et.NONE,b,"unsupported-persistence-type"):Qn()?lo(I===Et.NONE||I===Et.LOCAL&&(0,Ne.hl)(),b,"unsupported-persistence-type"):lo(I===Et.NONE||mn(),b,"unsupported-persistence-type")}(S._delegate,y),y){case Et.SESSION:ee=L.a;break;case Et.LOCAL:ee=(yield L.aE(L.i)._isAvailable())?L.i:L.b;break;case Et.NONE:ee=L.U;break;default:return L.ax("argument-error",{appName:S._delegate.name})}return S._delegate.setPersistence(ee)})()}signInAndRetrieveDataWithCredential(y){return this.signInWithCredential(y)}signInAnonymously(){return Dn(this._delegate,L.a0(this._delegate))}signInWithCredential(y){return Dn(this._delegate,L.a1(this._delegate,y))}signInWithCustomToken(y){return Dn(this._delegate,L.a4(this._delegate,y))}signInWithEmailAndPassword(y,S){return Dn(this._delegate,L.ab(this._delegate,y,S))}signInWithEmailLink(y,S){return Dn(this._delegate,L.ae(this._delegate,y,S))}signInWithPhoneNumber(y,S){return uo(this._delegate,L.s(this._delegate,y,S))}signInWithPopup(y){var S=this;return(0,C.Z)(function*(){return Bn(Yn(),S._delegate,"operation-not-supported-in-this-environment"),Dn(S._delegate,L.c(S._delegate,y,ci))})()}signInWithRedirect(y){var S=this;return(0,C.Z)(function*(){return Bn(Yn(),S._delegate,"operation-not-supported-in-this-environment"),yield zr(S._delegate),L.f(S._delegate,y,ci)})()}updateCurrentUser(y){return this._delegate.updateCurrentUser(y)}verifyPasswordResetCode(y){return L.a9(this._delegate,y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=Et,b})();function lr(b,I,y){let S=b;"function"!=typeof b&&({next:S,error:I,complete:y}=b);const ee=S;return{next:Ae=>ee(Ae&&Xn.getOrCreate(Ae)),error:I,complete:y}}function Ea(b,I){const y=function rr(b,I){const y=or();if(!y)return[];const S=L.aF(co,b,I);switch(y.getItem(S)){case Et.NONE:return[L.U];case Et.LOCAL:return[L.i,L.a];case Et.SESSION:return[L.a];default:return[]}}(b,I);if(typeof self<"u"&&!y.includes(L.i)&&y.push(L.i),typeof window<"u")for(const S of[L.b,L.a])y.includes(S)||y.push(S);return y.includes(L.U)||y.push(L.U),y}class Qo{constructor(){this.providerId="phone",this._delegate=new L.P(Ut(J.Z.auth()))}static credential(I,y){return L.P.credential(I,y)}verifyPhoneNumber(I,y){return this._delegate.verifyPhoneNumber(I,y)}unwrap(){return this._delegate}}Qo.PHONE_SIGN_IN_METHOD=L.P.PHONE_SIGN_IN_METHOD,Qo.PROVIDER_ID=L.P.PROVIDER_ID;const ks=L.aC;class fo{constructor(I,y,S=J.Z.app()){var ee;ks(null===(ee=S.options)||void 0===ee?void 0:ee.apiKey,"invalid-api-key",{appName:S.name}),this._delegate=new L.R(S.auth(),I,y),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function D(b){b.INTERNAL.registerComponent(new Mn.wA("auth-compat",I=>{const y=I.getProvider("app-compat").getImmediate(),S=I.getProvider("auth");return new bi(y,S)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:L.A.EMAIL_SIGNIN,PASSWORD_RESET:L.A.PASSWORD_RESET,RECOVER_EMAIL:L.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:L.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:L.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:L.A.VERIFY_EMAIL}},EmailAuthProvider:L.V,FacebookAuthProvider:L.W,GithubAuthProvider:L.Y,GoogleAuthProvider:L.X,OAuthProvider:L.Z,SAMLAuthProvider:L._,PhoneAuthProvider:Qo,PhoneMultiFactorGenerator:L.m,RecaptchaVerifier:fo,TwitterAuthProvider:L.$,Auth:bi,AuthCredential:L.L,Error:Ne.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.5.1")}(J.Z)},861:(oo,Gn,$e)=>{function C(L,Ne,yt,fn,Mn,Jt,St){try{var oe=L[Jt](St),pe=oe.value}catch(Oe){return void yt(Oe)}oe.done?Ne(pe):Promise.resolve(pe).then(fn,Mn)}function J(L){return function(){var Ne=this,yt=arguments;return new Promise(function(fn,Mn){var Jt=L.apply(Ne,yt);function St(pe){C(Jt,fn,Mn,St,oe,"next",pe)}function oe(pe){C(Jt,fn,Mn,St,oe,"throw",pe)}St(void 0)})}}$e.d(Gn,{Z:()=>J})},582:(oo,Gn,$e)=>{function Ne(Q,X){var H={};for(var G in Q)Object.prototype.hasOwnProperty.call(Q,G)&&X.indexOf(G)<0&&(H[G]=Q[G]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var ae=0;for(G=Object.getOwnPropertySymbols(Q);ae<G.length;ae++)X.indexOf(G[ae])<0&&Object.prototype.propertyIsEnumerable.call(Q,G[ae])&&(H[G[ae]]=Q[G[ae]])}return H}function Oe(Q,X,H,G){return new(H||(H=Promise))(function(se,ye){function pt(Ct){try{je(G.next(Ct))}catch(sn){ye(sn)}}function be(Ct){try{je(G.throw(Ct))}catch(sn){ye(sn)}}function je(Ct){Ct.done?se(Ct.value):function ae(se){return se instanceof H?se:new H(function(ye){ye(se)})}(Ct.value).then(pt,be)}je((G=G.apply(Q,X||[])).next())})}function mt(Q){return this instanceof mt?(this.v=Q,this):new mt(Q)}function jt(Q,X,H){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ae,G=H.apply(Q,X||[]),se=[];return ae={},ye("next"),ye("throw"),ye("return"),ae[Symbol.asyncIterator]=function(){return this},ae;function ye(Zt){G[Zt]&&(ae[Zt]=function(mn){return new Promise(function(Qn,Yn){se.push([Zt,mn,Qn,Yn])>1||pt(Zt,mn)})})}function pt(Zt,mn){try{!function be(Zt){Zt.value instanceof mt?Promise.resolve(Zt.value.v).then(je,Ct):sn(se[0][2],Zt)}(G[Zt](mn))}catch(Qn){sn(se[0][3],Qn)}}function je(Zt){pt("next",Zt)}function Ct(Zt){pt("throw",Zt)}function sn(Zt,mn){Zt(mn),se.shift(),se.length&&pt(se[0][0],se[0][1])}}function Vn(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var H,X=Q[Symbol.asyncIterator];return X?X.call(Q):(Q=function bt(Q){var X="function"==typeof Symbol&&Symbol.iterator,H=X&&Q[X],G=0;if(H)return H.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&G>=Q.length&&(Q=void 0),{value:Q&&Q[G++],done:!Q}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),H={},G("next"),G("throw"),G("return"),H[Symbol.asyncIterator]=function(){return this},H);function G(se){H[se]=Q[se]&&function(ye){return new Promise(function(pt,be){!function ae(se,ye,pt,be){Promise.resolve(be).then(function(je){se({value:je,done:pt})},ye)}(pt,be,(ye=Q[se](ye)).done,ye.value)})}}}$e.d(Gn,{FC:()=>jt,KL:()=>Vn,_T:()=>Ne,mG:()=>Oe,qq:()=>mt}),"function"==typeof SuppressedError&&SuppressedError}},oo=>{oo(oo.s=420)}]);