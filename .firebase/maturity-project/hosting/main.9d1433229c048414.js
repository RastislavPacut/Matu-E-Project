"use strict";(self.webpackChunkangular_school_project=self.webpackChunkangular_school_project||[]).push([[179],{217:(so,Gn,He)=>{He.d(Gn,{$:()=>n_,A:()=>pe,C:()=>pE,G:()=>kt,K:()=>aE,L:()=>Ca,N:()=>fr,P:()=>Ou,R:()=>T_,U:()=>Ae,V:()=>rf,W:()=>gu,X:()=>Ar,Y:()=>mo,Z:()=>pr,_:()=>Sa,a:()=>yo,a0:()=>lf,a1:()=>Eu,a2:()=>pf,a3:()=>s_,a4:()=>hE,a5:()=>di,a6:()=>Ma,a7:()=>a_,a8:()=>zl,a9:()=>fE,aA:()=>dt,aB:()=>zt,aC:()=>he,aD:()=>Eo,aE:()=>te,aF:()=>Ge,aG:()=>Jl,aH:()=>M_,aI:()=>Ua,aJ:()=>vn,aN:()=>Fn,aQ:()=>Fo,aa:()=>Ce,ab:()=>ln,ac:()=>Gr,ad:()=>xi,ae:()=>Pa,af:()=>nt,ag:()=>l_,ah:()=>Nn,ak:()=>$l,al:()=>os,am:()=>Lo,ap:()=>i_,aq:()=>ql,as:()=>WS,at:()=>QS,au:()=>rn,av:()=>De,aw:()=>$,ax:()=>mt,ay:()=>za,az:()=>N_,b:()=>gE,c:()=>as,d:()=>R_,e:()=>SE,f:()=>ME,g:()=>pi,h:()=>Mt,i:()=>Mu,j:()=>bo,k:()=>q_,l:()=>TE,m:()=>$E,o:()=>c1,p:()=>Jt,r:()=>DE,s:()=>D_,u:()=>en});var C=He(861),ee=He(58),L=He(534),Ne=He(879),yt=He(582),fn=He(537);const Jt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},pe={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const kt=function Oe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Zn=function ot(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},bt=new ee.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Je=new Ne.Yd("@firebase/auth");function pn(f,...u){Je.logLevel<=Ne.in.ERROR&&Je.error(`Auth (${L.SDK_VERSION}): ${f}`,...u)}function mt(f,...u){throw lt(f,...u)}function zt(f,...u){return lt(f,...u)}function or(f,u,d){const m=Object.assign(Object.assign({},Zn()),{[u]:d});return new ee.LL("auth","Firebase",m).create(u,{appName:f.name})}function Vn(f,u,d){if(!(u instanceof d))throw d.name!==u.constructor.name&&mt(f,"argument-error"),or(f,"argument-error",`Type of ${u.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function lt(f,...u){if("string"!=typeof f){const d=u[0],m=[...u.slice(1)];return m[0]&&(m[0].appName=f.name),f._errorFactory.create(d,...m)}return bt.create(f,...u)}function he(f,u,...d){if(!f)throw lt(u,...d)}function xt(f){const u="INTERNAL ASSERTION FAILED: "+f;throw pn(u),new Error(u)}function rn(f,u){f||xt(u)}function Tn(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function kn(){return"http:"===jr()||"https:"===jr()}function jr(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class sr{constructor(u,d){this.shortDelay=u,this.longDelay=d,rn(d>u,"Short delay should be less than long delay!"),this.isMobile=(0,ee.uI)()||(0,ee.b$)()}get(){return function zr(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(kn()||(0,ee.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ao(f,u){rn(f.emulator,"Emulator should always be set here");const{url:d}=f.emulator;return u?`${d}${u.startsWith("/")?u.slice(1):u}`:d}class Q{static initialize(u,d,m){this.fetchImpl=u,d&&(this.headersImpl=d),m&&(this.responseImpl=m)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void xt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void xt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void xt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const J={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},W=new sr(3e4,6e4);function K(f,u){return f.tenantId&&!u.tenantId?Object.assign(Object.assign({},u),{tenantId:f.tenantId}):u}function ae(f,u,d,m){return se.apply(this,arguments)}function se(){return(se=(0,C.Z)(function*(f,u,d,m,v={}){return ye(f,v,(0,C.Z)(function*(){let w={},N={};m&&("GET"===u?N=m:w={body:JSON.stringify(m)});const Y=(0,ee.xO)(Object.assign({key:f.config.apiKey},N)).slice(1),ue=yield f._getAdditionalHeaders();return ue["Content-Type"]="application/json",f.languageCode&&(ue["X-Firebase-Locale"]=f.languageCode),Q.fetch()(Ct(f,f.config.apiHost,d,Y),Object.assign({method:u,headers:ue,referrerPolicy:"no-referrer"},w))}))})).apply(this,arguments)}function ye(f,u,d){return pt.apply(this,arguments)}function pt(){return(pt=(0,C.Z)(function*(f,u,d){f._canInitEmulator=!1;const m=Object.assign(Object.assign({},J),u);try{const v=new Kt(f),w=yield Promise.race([d(),v.promise]);v.clearNetworkTimeout();const N=yield w.json();if("needConfirmation"in N)throw mn(f,"account-exists-with-different-credential",N);if(w.ok&&!("errorMessage"in N))return N;{const Y=w.ok?N.errorMessage:N.error.message,[ue,Se]=Y.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ue)throw mn(f,"credential-already-in-use",N);if("EMAIL_EXISTS"===ue)throw mn(f,"email-already-in-use",N);if("USER_DISABLED"===ue)throw mn(f,"user-disabled",N);const ze=m[ue]||ue.toLowerCase().replace(/[_\s]+/g,"-");if(Se)throw or(f,ze,Se);mt(f,ze)}}catch(v){if(v instanceof ee.ZR)throw v;mt(f,"network-request-failed",{message:String(v)})}})).apply(this,arguments)}function ve(f,u,d,m){return je.apply(this,arguments)}function je(){return(je=(0,C.Z)(function*(f,u,d,m,v={}){const w=yield ae(f,u,d,m,v);return"mfaPendingCredential"in w&&mt(f,"multi-factor-auth-required",{_serverResponse:w}),w})).apply(this,arguments)}function Ct(f,u,d,m){const v=`${u}${d}?${m}`;return f.config.emulator?ao(f.config,v):`${f.config.apiScheme}://${v}`}function sn(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Kt{constructor(u){this.auth=u,this.timer=null,this.promise=new Promise((d,m)=>{this.timer=setTimeout(()=>m(zt(this.auth,"network-request-failed")),W.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function mn(f,u,d){const m={appName:f.name};d.email&&(m.email=d.email),d.phoneNumber&&(m.phoneNumber=d.phoneNumber);const v=zt(f,u,m);return v.customData._tokenResponse=d,v}function Yn(f){return void 0!==f&&void 0!==f.getResponse}function Qn(f){return void 0!==f&&void 0!==f.enterprise}class ci{constructor(u){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===u.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=u.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=u.recaptchaEnforcementState}getProviderEnforcementState(u){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===u)return sn(d.enforcementState);return null}isProviderEnabled(u){return"ENFORCE"===this.getProviderEnforcementState(u)||"AUDIT"===this.getProviderEnforcementState(u)}}function $r(){return($r=(0,C.Z)(function*(f){return(yield ae(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function lo(f,u){return Et.apply(this,arguments)}function Et(){return(Et=(0,C.Z)(function*(f,u){return ae(f,"GET","/v2/recaptchaConfig",K(f,u))})).apply(this,arguments)}function uo(){return(uo=(0,C.Z)(function*(f,u){return ae(f,"POST","/v1/accounts:delete",u)})).apply(this,arguments)}function qr(){return(qr=(0,C.Z)(function*(f,u){return ae(f,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function ar(){return(ar=(0,C.Z)(function*(f,u){return ae(f,"POST","/v1/accounts:lookup",u)})).apply(this,arguments)}function lr(f){if(f)try{const u=new Date(Number(f));if(!isNaN(u.getTime()))return u.toUTCString()}catch{}}function Ut(){return(Ut=(0,C.Z)(function*(f,u=!1){const d=(0,ee.m9)(f),m=yield d.getIdToken(u),v=On(m);he(v&&v.exp&&v.auth_time&&v.iat,d.auth,"internal-error");const w="object"==typeof v.firebase?v.firebase:void 0,N=w?.sign_in_provider;return{claims:v,token:m,authTime:lr(ur(v.auth_time)),issuedAtTime:lr(ur(v.iat)),expirationTime:lr(ur(v.exp)),signInProvider:N||null,signInSecondFactor:w?.sign_in_second_factor||null}})).apply(this,arguments)}function ur(f){return 1e3*Number(f)}function On(f){const[u,d,m]=f.split(".");if(void 0===u||void 0===d||void 0===m)return pn("JWT malformed, contained fewer than 3 sections"),null;try{const v=(0,ee.tV)(d);return v?JSON.parse(v):(pn("Failed to decode base64 JWT payload"),null)}catch(v){return pn("Caught error parsing JWT payload as JSON",v?.toString()),null}}function gn(f,u){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,C.Z)(function*(f,u,d=!1){if(d)return u;try{return yield u}catch(m){throw m instanceof ee.ZR&&function ho({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(m)&&f.auth.currentUser===f&&(yield f.auth.signOut()),m}})).apply(this,arguments)}class fo{constructor(u){this.user=u,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(u){var d;if(u){const m=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),m}{this.errorBackoff=3e4;const v=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,v)}}schedule(u=!1){var d=this;if(!this.isRunning)return;const m=this.getInterval(u);this.timerId=setTimeout((0,C.Z)(function*(){yield d.iteration()}),m)}iteration(){var u=this;return(0,C.Z)(function*(){try{yield u.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&u.schedule(!0))}u.schedule()})()}}class Wr{constructor(u,d){this.createdAt=u,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=lr(this.lastLoginAt),this.creationTime=lr(this.createdAt)}_copy(u){this.createdAt=u.createdAt,this.lastLoginAt=u.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Xn(f){return Bn.apply(this,arguments)}function Bn(){return Bn=(0,C.Z)(function*(f){var u;const d=f.auth,m=yield f.getIdToken(),v=yield gn(f,function bi(f,u){return ar.apply(this,arguments)}(d,{idToken:m}));he(v?.users.length,d,"internal-error");const w=v.users[0];f._notifyReloadListener(w);const N=null!==(u=w.providerUserInfo)&&void 0!==u&&u.length?function Xo(f){return f.map(u=>{var{providerId:d}=u,m=(0,yt._T)(u,["providerId"]);return{providerId:d,uid:m.rawId||"",displayName:m.displayName||null,email:m.email||null,phoneNumber:m.phoneNumber||null,photoURL:m.photoUrl||null}})}(w.providerUserInfo):[],Y=function xa(f,u){return[...f.filter(m=>!u.some(v=>v.providerId===m.providerId)),...u]}(f.providerData,N),ze=!!f.isAnonymous&&!(f.email&&w.passwordHash||Y?.length),It={uid:w.localId,displayName:w.displayName||null,photoURL:w.photoUrl||null,email:w.email||null,emailVerified:w.emailVerified||!1,phoneNumber:w.phoneNumber||null,tenantId:w.tenantId||null,providerData:Y,metadata:new Wr(w.createdAt,w.lastLoginAt),isAnonymous:ze};Object.assign(f,It)}),Bn.apply(this,arguments)}function dr(){return(dr=(0,C.Z)(function*(f){const u=(0,ee.m9)(f);yield Xn(u),yield u.auth._persistUserIfCurrent(u),u.auth._notifyListenersIfCurrent(u)})).apply(this,arguments)}function po(){return(po=(0,C.Z)(function*(f,u){const d=yield ye(f,{},(0,C.Z)(function*(){const m=(0,ee.xO)({grant_type:"refresh_token",refresh_token:u}).slice(1),{tokenApiHost:v,apiKey:w}=f.config,N=Ct(f,v,"/v1/token",`key=${w}`),Y=yield f._getAdditionalHeaders();return Y["Content-Type"]="application/x-www-form-urlencoded",Q.fetch()(N,{method:"POST",headers:Y,body:m})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function D(){return(D=(0,C.Z)(function*(f,u){return ae(f,"POST","/v2/accounts:revokeToken",K(f,u))})).apply(this,arguments)}class b{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(u){he(u.idToken,"internal-error"),he(typeof u.idToken<"u","internal-error"),he(typeof u.refreshToken<"u","internal-error");const d="expiresIn"in u&&typeof u.expiresIn<"u"?Number(u.expiresIn):function Ll(f){const u=On(f);return he(u,"internal-error"),he(typeof u.exp<"u","internal-error"),he(typeof u.iat<"u","internal-error"),Number(u.exp)-Number(u.iat)}(u.idToken);this.updateTokensAndExpiration(u.idToken,u.refreshToken,d)}getToken(u,d=!1){var m=this;return(0,C.Z)(function*(){return he(!m.accessToken||m.refreshToken,u,"user-token-expired"),d||!m.accessToken||m.isExpired?m.refreshToken?(yield m.refresh(u,m.refreshToken),m.accessToken):null:m.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(u,d){var m=this;return(0,C.Z)(function*(){const{accessToken:v,refreshToken:w,expiresIn:N}=yield function Fs(f,u){return po.apply(this,arguments)}(u,d);m.updateTokensAndExpiration(v,w,Number(N))})()}updateTokensAndExpiration(u,d,m){this.refreshToken=d||null,this.accessToken=u||null,this.expirationTime=Date.now()+1e3*m}static fromJSON(u,d){const{refreshToken:m,accessToken:v,expirationTime:w}=d,N=new b;return m&&(he("string"==typeof m,"internal-error",{appName:u}),N.refreshToken=m),v&&(he("string"==typeof v,"internal-error",{appName:u}),N.accessToken=v),w&&(he("number"==typeof w,"internal-error",{appName:u}),N.expirationTime=w),N}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(u){this.accessToken=u.accessToken,this.refreshToken=u.refreshToken,this.expirationTime=u.expirationTime}_clone(){return Object.assign(new b,this.toJSON())}_performRefresh(){return xt("not implemented")}}function I(f,u){he("string"==typeof f||typeof f>"u","internal-error",{appName:u})}class y{constructor(u){var{uid:d,auth:m,stsTokenManager:v}=u,w=(0,yt._T)(u,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=m,this.stsTokenManager=v,this.accessToken=v.accessToken,this.displayName=w.displayName||null,this.email=w.email||null,this.emailVerified=w.emailVerified||!1,this.phoneNumber=w.phoneNumber||null,this.photoURL=w.photoURL||null,this.isAnonymous=w.isAnonymous||!1,this.tenantId=w.tenantId||null,this.providerData=w.providerData?[...w.providerData]:[],this.metadata=new Wr(w.createdAt||void 0,w.lastLoginAt||void 0)}getIdToken(u){var d=this;return(0,C.Z)(function*(){const m=yield gn(d,d.stsTokenManager.getToken(d.auth,u));return he(m,d.auth,"internal-error"),d.accessToken!==m&&(d.accessToken=m,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),m})()}getIdTokenResult(u){return function ui(f){return Ut.apply(this,arguments)}(this,u)}reload(){return function Ei(f){return dr.apply(this,arguments)}(this)}_assign(u){this!==u&&(he(this.uid===u.uid,this.auth,"internal-error"),this.displayName=u.displayName,this.photoURL=u.photoURL,this.email=u.email,this.emailVerified=u.emailVerified,this.phoneNumber=u.phoneNumber,this.isAnonymous=u.isAnonymous,this.tenantId=u.tenantId,this.providerData=u.providerData.map(d=>Object.assign({},d)),this.metadata._copy(u.metadata),this.stsTokenManager._assign(u.stsTokenManager))}_clone(u){const d=new y(Object.assign(Object.assign({},this),{auth:u,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(u){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=u,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(u){this.reloadListener?this.reloadListener(u):this.reloadUserInfo=u}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(u,d=!1){var m=this;return(0,C.Z)(function*(){let v=!1;u.idToken&&u.idToken!==m.stsTokenManager.accessToken&&(m.stsTokenManager.updateFromServerResponse(u),v=!0),d&&(yield Xn(m)),yield m.auth._persistUserIfCurrent(m),v&&m.auth._notifyListenersIfCurrent(m)})()}delete(){var u=this;return(0,C.Z)(function*(){const d=yield u.getIdToken();return yield gn(u,function co(f,u){return uo.apply(this,arguments)}(u.auth,{idToken:d})),u.stsTokenManager.clearRefreshToken(),u.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(u=>Object.assign({},u)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(u,d){var m,v,w,N,Y,ue,Se,ze;const It=null!==(m=d.displayName)&&void 0!==m?m:void 0,Li=null!==(v=d.email)&&void 0!==v?v:void 0,Uo=null!==(w=d.phoneNumber)&&void 0!==w?w:void 0,rc=null!==(N=d.photoURL)&&void 0!==N?N:void 0,G_=null!==(Y=d.tenantId)&&void 0!==Y?Y:void 0,qa=null!==(ue=d._redirectEventId)&&void 0!==ue?ue:void 0,cs=null!==(Se=d.createdAt)&&void 0!==Se?Se:void 0,Z_=null!==(ze=d.lastLoginAt)&&void 0!==ze?ze:void 0,{uid:Gu,emailVerified:qf,isAnonymous:Wa,providerData:Wf,stsTokenManager:Ti}=d;he(Gu&&Ti,u,"internal-error");const GE=b.fromJSON(this.name,Ti);he("string"==typeof Gu,u,"internal-error"),I(It,u.name),I(Li,u.name),he("boolean"==typeof qf,u,"internal-error"),he("boolean"==typeof Wa,u,"internal-error"),I(Uo,u.name),I(rc,u.name),I(G_,u.name),I(qa,u.name),I(cs,u.name),I(Z_,u.name);const Jn=new y({uid:Gu,auth:u,email:Li,emailVerified:qf,displayName:It,isAnonymous:Wa,photoURL:rc,phoneNumber:Uo,tenantId:G_,stsTokenManager:GE,createdAt:cs,lastLoginAt:Z_});return Wf&&Array.isArray(Wf)&&(Jn.providerData=Wf.map(Gf=>Object.assign({},Gf))),qa&&(Jn._redirectEventId=qa),Jn}static _fromIdTokenResponse(u,d,m=!1){return(0,C.Z)(function*(){const v=new b;v.updateFromServerResponse(d);const w=new y({uid:d.localId,auth:u,stsTokenManager:v,isAnonymous:m});return yield Xn(w),w})()}}const M=new Map;function te(f){rn(f instanceof Function,"Expected a class definition");let u=M.get(f);return u?(rn(u instanceof f,"Instance stored in cache mismatched with class"),u):(u=new f,M.set(f,u),u)}const Ae=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,C.Z)(function*(){return!0})()}_set(d,m){var v=this;return(0,C.Z)(function*(){v.storage[d]=m})()}_get(d){var m=this;return(0,C.Z)(function*(){const v=m.storage[d];return void 0===v?null:v})()}_remove(d){var m=this;return(0,C.Z)(function*(){delete m.storage[d]})()}_addListener(d,m){}_removeListener(d,m){}}return f.type="NONE",f})();function Ge(f,u,d){return`firebase:${f}:${u}:${d}`}class Rt{constructor(u,d,m){this.persistence=u,this.auth=d,this.userKey=m;const{config:v,name:w}=this.auth;this.fullUserKey=Ge(this.userKey,v.apiKey,w),this.fullPersistenceKey=Ge("persistence",v.apiKey,w),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(u){return this.persistence._set(this.fullUserKey,u.toJSON())}getCurrentUser(){var u=this;return(0,C.Z)(function*(){const d=yield u.persistence._get(u.fullUserKey);return d?y._fromJSON(u.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(u){var d=this;return(0,C.Z)(function*(){if(d.persistence===u)return;const m=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=u,m?d.setCurrentUser(m):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(u,d,m="authUser"){return(0,C.Z)(function*(){if(!d.length)return new Rt(te(Ae),u,m);const v=(yield Promise.all(d.map(function(){var Se=(0,C.Z)(function*(ze){if(yield ze._isAvailable())return ze});return function(ze){return Se.apply(this,arguments)}}()))).filter(Se=>Se);let w=v[0]||te(Ae);const N=Ge(m,u.config.apiKey,u.name);let Y=null;for(const Se of d)try{const ze=yield Se._get(N);if(ze){const It=y._fromJSON(u,ze);Se!==w&&(Y=It),w=Se;break}}catch{}const ue=v.filter(Se=>Se._shouldAllowMigration);return w._shouldAllowMigration&&ue.length?(w=ue[0],Y&&(yield w._set(N,Y.toJSON())),yield Promise.all(d.map(function(){var Se=(0,C.Z)(function*(ze){if(ze!==w)try{yield ze._remove(N)}catch{}});return function(ze){return Se.apply(this,arguments)}}())),new Rt(w,u,m)):new Rt(w,u,m)})()}}function Ie(f){const u=f.toLowerCase();if(u.includes("opera/")||u.includes("opr/")||u.includes("opios/"))return"Opera";if(Ls(u))return"IEMobile";if(u.includes("msie")||u.includes("trident/"))return"IE";if(u.includes("edge/"))return"Edge";if(qt(u))return"Firefox";if(u.includes("silk/"))return"Silk";if(O(u))return"Blackberry";if(de(u))return"Webos";if(Le(u))return"Safari";if((u.includes("chrome/")||oi(u))&&!u.includes("edge/"))return"Chrome";if($(u))return"Android";{const m=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===m?.length)return m[1]}return"Other"}function qt(f=(0,ee.z$)()){return/firefox\//i.test(f)}function Le(f=(0,ee.z$)()){const u=f.toLowerCase();return u.includes("safari/")&&!u.includes("chrome/")&&!u.includes("crios/")&&!u.includes("android")}function oi(f=(0,ee.z$)()){return/crios\//i.test(f)}function Ls(f=(0,ee.z$)()){return/iemobile/i.test(f)}function $(f=(0,ee.z$)()){return/android/i.test(f)}function O(f=(0,ee.z$)()){return/blackberry/i.test(f)}function de(f=(0,ee.z$)()){return/webos/i.test(f)}function De(f=(0,ee.z$)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function dt(f=(0,ee.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}function _n(f=(0,ee.z$)()){return De(f)||$(f)||de(f)||O(f)||/windows phone/i.test(f)||Ls(f)}function ht(f,u=[]){let d;switch(f){case"Browser":d=Ie((0,ee.z$)());break;case"Worker":d=`${Ie((0,ee.z$)())}-${f}`;break;default:d=f}const m=u.length?u.join(","):"FirebaseCore-web";return`${d}/JsCore/${L.SDK_VERSION}/${m}`}class Vl{constructor(u){this.auth=u,this.queue=[]}pushCallback(u,d){const m=w=>new Promise((N,Y)=>{try{N(u(w))}catch(ue){Y(ue)}});m.onAbort=d,this.queue.push(m);const v=this.queue.length-1;return()=>{this.queue[v]=()=>Promise.resolve()}}runMiddleware(u){var d=this;return(0,C.Z)(function*(){if(d.auth.currentUser===u)return;const m=[];try{for(const v of d.queue)yield v(u),v.onAbort&&m.push(v.onAbort)}catch(v){m.reverse();for(const w of m)try{w()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:v?.message})}})()}}function qh(){return(qh=(0,C.Z)(function*(f,u={}){return ae(f,"GET","/v2/passwordPolicy",K(f,u))})).apply(this,arguments)}class hr{constructor(u){var d,m,v,w;const N=u.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=N.minPasswordLength)&&void 0!==d?d:6,N.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=N.maxPasswordLength),void 0!==N.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=N.containsLowercaseCharacter),void 0!==N.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=N.containsUppercaseCharacter),void 0!==N.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=N.containsNumericCharacter),void 0!==N.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=N.containsNonAlphanumericCharacter),this.enforcementState=u.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(v=null===(m=u.allowedNonAlphanumericCharacters)||void 0===m?void 0:m.join(""))&&void 0!==v?v:"",this.forceUpgradeOnSignin=null!==(w=u.forceUpgradeOnSignin)&&void 0!==w&&w,this.schemaVersion=u.schemaVersion}validatePassword(u){var d,m,v,w,N,Y;const ue={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(u,ue),this.validatePasswordCharacterOptions(u,ue),ue.isValid&&(ue.isValid=null===(d=ue.meetsMinPasswordLength)||void 0===d||d),ue.isValid&&(ue.isValid=null===(m=ue.meetsMaxPasswordLength)||void 0===m||m),ue.isValid&&(ue.isValid=null===(v=ue.containsLowercaseLetter)||void 0===v||v),ue.isValid&&(ue.isValid=null===(w=ue.containsUppercaseLetter)||void 0===w||w),ue.isValid&&(ue.isValid=null===(N=ue.containsNumericCharacter)||void 0===N||N),ue.isValid&&(ue.isValid=null===(Y=ue.containsNonAlphanumericCharacter)||void 0===Y||Y),ue}validatePasswordLengthOptions(u,d){const m=this.customStrengthOptions.minPasswordLength,v=this.customStrengthOptions.maxPasswordLength;m&&(d.meetsMinPasswordLength=u.length>=m),v&&(d.meetsMaxPasswordLength=u.length<=v)}validatePasswordCharacterOptions(u,d){let m;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let v=0;v<u.length;v++)m=u.charAt(v),this.updatePasswordCharacterOptionsStatuses(d,m>="a"&&m<="z",m>="A"&&m<="Z",m>="0"&&m<="9",this.allowedNonAlphanumericCharacters.includes(m))}updatePasswordCharacterOptionsStatuses(u,d,m,v,w){this.customStrengthOptions.containsLowercaseLetter&&(u.containsLowercaseLetter||(u.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(u.containsUppercaseLetter||(u.containsUppercaseLetter=m)),this.customStrengthOptions.containsNumericCharacter&&(u.containsNumericCharacter||(u.containsNumericCharacter=v)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(u.containsNonAlphanumericCharacter||(u.containsNonAlphanumericCharacter=w))}}class VS{constructor(u,d,m,v){this.app=u,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=m,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iE(this),this.idTokenSubscription=new iE(this),this.beforeStateQueue=new Vl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=u.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(u,d){var m=this;return d&&(this._popupRedirectResolver=te(d)),this._initializationPromise=this.queue((0,C.Z)(function*(){var v,w;if(!m._deleted&&(m.persistenceManager=yield Rt.create(m,u),!m._deleted)){if(null!==(v=m._popupRedirectResolver)&&void 0!==v&&v._shouldInitProactively)try{yield m._popupRedirectResolver._initialize(m)}catch{}yield m.initializeCurrentUser(d),m.lastNotifiedUid=(null===(w=m.currentUser)||void 0===w?void 0:w.uid)||null,!m._deleted&&(m._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var u=this;return(0,C.Z)(function*(){if(u._deleted)return;const d=yield u.assertedPersistence.getCurrentUser();if(u.currentUser||d){if(u.currentUser&&d&&u.currentUser.uid===d.uid)return u._currentUser._assign(d),void(yield u.currentUser.getIdToken());yield u._updateCurrentUser(d,!0)}})()}initializeCurrentUser(u){var d=this;return(0,C.Z)(function*(){var m;const v=yield d.assertedPersistence.getCurrentUser();let w=v,N=!1;if(u&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const Y=null===(m=d.redirectUser)||void 0===m?void 0:m._redirectEventId,ue=w?._redirectEventId,Se=yield d.tryRedirectSignIn(u);(!Y||Y===ue)&&Se?.user&&(w=Se.user,N=!0)}if(!w)return d.directlySetCurrentUser(null);if(!w._redirectEventId){if(N)try{yield d.beforeStateQueue.runMiddleware(w)}catch(Y){w=v,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(Y))}return w?d.reloadAndSetCurrentUserOrClear(w):d.directlySetCurrentUser(null)}return he(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===w._redirectEventId?d.directlySetCurrentUser(w):d.reloadAndSetCurrentUserOrClear(w)})()}tryRedirectSignIn(u){var d=this;return(0,C.Z)(function*(){let m=null;try{m=yield d._popupRedirectResolver._completeRedirectFn(d,u,!0)}catch{yield d._setRedirectUser(null)}return m})()}reloadAndSetCurrentUserOrClear(u){var d=this;return(0,C.Z)(function*(){try{yield Xn(u)}catch(m){if("auth/network-request-failed"!==m?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(u)})()}useDeviceLanguage(){this.languageCode=function Ke(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var u=this;return(0,C.Z)(function*(){u._deleted=!0})()}updateCurrentUser(u){var d=this;return(0,C.Z)(function*(){const m=u?(0,ee.m9)(u):null;return m&&he(m.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(m&&m._clone(d))})()}_updateCurrentUser(u,d=!1){var m=this;return(0,C.Z)(function*(){if(!m._deleted)return u&&he(m.tenantId===u.tenantId,m,"tenant-id-mismatch"),d||(yield m.beforeStateQueue.runMiddleware(u)),m.queue((0,C.Z)(function*(){yield m.directlySetCurrentUser(u),m.notifyAuthListeners()}))})()}signOut(){var u=this;return(0,C.Z)(function*(){return yield u.beforeStateQueue.runMiddleware(null),(u.redirectPersistenceManager||u._popupRedirectResolver)&&(yield u._setRedirectUser(null)),u._updateCurrentUser(null,!0)})()}setPersistence(u){var d=this;return this.queue((0,C.Z)(function*(){yield d.assertedPersistence.setPersistence(te(u))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(u){var d=this;return(0,C.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const m=d._getPasswordPolicyInternal();return m.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):m.validatePassword(u)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var u=this;return(0,C.Z)(function*(){const d=yield function LS(f){return qh.apply(this,arguments)}(u),m=new hr(d);null===u.tenantId?u._projectPasswordPolicy=m:u._tenantPasswordPolicies[u.tenantId]=m})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(u){this._errorFactory=new ee.LL("auth","Firebase",u())}onAuthStateChanged(u,d,m){return this.registerStateListener(this.authStateSubscription,u,d,m)}beforeAuthStateChanged(u,d){return this.beforeStateQueue.pushCallback(u,d)}onIdTokenChanged(u,d,m){return this.registerStateListener(this.idTokenSubscription,u,d,m)}authStateReady(){return new Promise((u,d)=>{if(this.currentUser)u();else{const m=this.onAuthStateChanged(()=>{m(),u()},d)}})}revokeAccessToken(u){var d=this;return(0,C.Z)(function*(){if(d.currentUser){const m=yield d.currentUser.getIdToken(),v={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:u,idToken:m};null!=d.tenantId&&(v.tenantId=d.tenantId),yield function P(f,u){return D.apply(this,arguments)}(d,v)}})()}toJSON(){var u;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(u=this._currentUser)||void 0===u?void 0:u.toJSON()}}_setRedirectUser(u,d){var m=this;return(0,C.Z)(function*(){const v=yield m.getOrInitRedirectPersistenceManager(d);return null===u?v.removeCurrentUser():v.setCurrentUser(u)})()}getOrInitRedirectPersistenceManager(u){var d=this;return(0,C.Z)(function*(){if(!d.redirectPersistenceManager){const m=u&&te(u)||d._popupRedirectResolver;he(m,d,"argument-error"),d.redirectPersistenceManager=yield Rt.create(d,[te(m._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(u){var d=this;return(0,C.Z)(function*(){var m,v;return d._isInitialized&&(yield d.queue((0,C.Z)(function*(){}))),(null===(m=d._currentUser)||void 0===m?void 0:m._redirectEventId)===u?d._currentUser:(null===(v=d.redirectUser)||void 0===v?void 0:v._redirectEventId)===u?d.redirectUser:null})()}_persistUserIfCurrent(u){var d=this;return(0,C.Z)(function*(){if(u===d.currentUser)return d.queue((0,C.Z)(function*(){return d.directlySetCurrentUser(u)}))})()}_notifyListenersIfCurrent(u){u===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var u,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const m=null!==(d=null===(u=this.currentUser)||void 0===u?void 0:u.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==m&&(this.lastNotifiedUid=m,this.authStateSubscription.next(this.currentUser))}registerStateListener(u,d,m,v){if(this._deleted)return()=>{};const w="function"==typeof d?d:d.next.bind(d);let N=!1;const Y=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(Y,this,"internal-error"),Y.then(()=>{N||w(this.currentUser)}),"function"==typeof d){const ue=u.addObserver(d,m,v);return()=>{N=!0,ue()}}{const ue=u.addObserver(d);return()=>{N=!0,ue()}}}directlySetCurrentUser(u){var d=this;return(0,C.Z)(function*(){d.currentUser&&d.currentUser!==u&&d._currentUser._stopProactiveRefresh(),u&&d.isProactiveRefreshEnabled&&u._startProactiveRefresh(),d.currentUser=u,u?yield d.assertedPersistence.setCurrentUser(u):yield d.assertedPersistence.removeCurrentUser()})()}queue(u){return this.operations=this.operations.then(u,u),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(u){!u||this.frameworks.includes(u)||(this.frameworks.push(u),this.frameworks.sort(),this.clientVersion=ht(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var u=this;return(0,C.Z)(function*(){var d;const m={"X-Client-Version":u.clientVersion};u.app.options.appId&&(m["X-Firebase-gmpid"]=u.app.options.appId);const v=yield null===(d=u.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();v&&(m["X-Firebase-Client"]=v);const w=yield u._getAppCheckToken();return w&&(m["X-Firebase-AppCheck"]=w),m})()}_getAppCheckToken(){var u=this;return(0,C.Z)(function*(){var d;const m=yield null===(d=u.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return m?.error&&function Kn(f,...u){Je.logLevel<=Ne.in.WARN&&Je.warn(`Auth (${L.SDK_VERSION}): ${f}`,...u)}(`Error while retrieving App Check token: ${m.error}`),m?.token})()}}function vn(f){return(0,ee.m9)(f)}class iE{constructor(u){this.auth=u,this.observer=null,this.addObserver=(0,ee.ne)(d=>this.observer=d)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Gg(f){return new Promise((u,d)=>{const m=document.createElement("script");m.setAttribute("src",f),m.onload=u,m.onerror=v=>{const w=zt("internal-error");w.customData=v,d(w)},m.type="text/javascript",m.charset="UTF-8",function Vs(){var f,u;return null!==(u=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==u?u:document}().appendChild(m)})}function rE(f){return`__${f}${Math.floor(1e6*Math.random())}`}class sE{constructor(u){this.type="recaptcha-enterprise",this.auth=vn(u)}verify(u="verify",d=!1){var m=this;return(0,C.Z)(function*(){function w(){return w=(0,C.Z)(function*(Y){if(!d){if(null==Y.tenantId&&null!=Y._agentRecaptchaConfig)return Y._agentRecaptchaConfig.siteKey;if(null!=Y.tenantId&&void 0!==Y._tenantRecaptchaConfigs[Y.tenantId])return Y._tenantRecaptchaConfigs[Y.tenantId].siteKey}return new Promise(function(){var ue=(0,C.Z)(function*(Se,ze){lo(Y,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(It=>{if(void 0!==It.recaptchaKey){const Li=new ci(It);return null==Y.tenantId?Y._agentRecaptchaConfig=Li:Y._tenantRecaptchaConfigs[Y.tenantId]=Li,Se(Li.siteKey)}ze(new Error("recaptcha Enterprise site key undefined"))}).catch(It=>{ze(It)})});return function(Se,ze){return ue.apply(this,arguments)}}())}),w.apply(this,arguments)}function N(Y,ue,Se){const ze=window.grecaptcha;Qn(ze)?ze.enterprise.ready(()=>{ze.enterprise.execute(Y,{action:u}).then(It=>{ue(It)}).catch(()=>{ue("NO_RECAPTCHA")})}):Se(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Y,ue)=>{(function v(Y){return w.apply(this,arguments)})(m.auth).then(Se=>{if(!d&&Qn(window.grecaptcha))N(Se,Y,ue);else{if(typeof window>"u")return void ue(new Error("RecaptchaVerifier is only supported in browser"));Gg("https://www.google.com/recaptcha/enterprise.js?render="+Se).then(()=>{N(Se,Y,ue)}).catch(ze=>{ue(ze)})}}).catch(Se=>{ue(Se)})})})()}}function Zg(f,u,d){return Kg.apply(this,arguments)}function Kg(){return(Kg=(0,C.Z)(function*(f,u,d,m=!1){const v=new sE(f);let w;try{w=yield v.verify(d)}catch{w=yield v.verify(d,!0)}const N=Object.assign({},u);return Object.assign(N,m?{captchaResp:w}:{captchaResponse:w}),Object.assign(N,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(N,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),N})).apply(this,arguments)}function wi(f,u,d,m){return Ze.apply(this,arguments)}function Ze(){return Ze=(0,C.Z)(function*(f,u,d,m){var v;if(null!==(v=f._getRecaptchaConfig())&&void 0!==v&&v.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const w=yield Zg(f,u,d,"getOobCode"===d);return m(f,w)}return m(f,u).catch(function(){var w=(0,C.Z)(function*(N){if("auth/missing-recaptcha-token"===N.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Y=yield Zg(f,u,d,"getOobCode"===d);return m(f,Y)}return Promise.reject(N)});return function(N){return w.apply(this,arguments)}}())}),Ze.apply(this,arguments)}function aE(f,u,d){const m=vn(f);he(m._canInitEmulator,m,"emulator-config-failed"),he(/^https?:\/\//.test(u),m,"invalid-emulator-scheme");const v=!!d?.disableWarnings,w=Tt(u),{host:N,port:Y}=function au(f){const u=Tt(f),d=/(\/\/)?([^?#/]+)/.exec(f.substr(u.length));if(!d)return{host:"",port:null};const m=d[2].split("@").pop()||"",v=/^(\[[^\]]+\])(:|$)/.exec(m);if(v){const w=v[1];return{host:w,port:Qg(m.substr(w.length+1))}}{const[w,N]=m.split(":");return{host:w,port:Qg(N)}}}(u);m.config.emulator={url:`${w}//${N}${null===Y?"":`:${Y}`}/`},m.settings.appVerificationDisabledForTesting=!0,m.emulatorConfig=Object.freeze({host:N,port:Y,protocol:w.replace(":",""),options:Object.freeze({disableWarnings:v})}),v||function Xg(){function f(){const u=document.createElement("p"),d=u.style;u.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",u.classList.add("firebase-emulator-warning"),document.body.appendChild(u)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}function Tt(f){const u=f.indexOf(":");return u<0?"":f.substr(0,u+1)}function Qg(f){if(!f)return null;const u=Number(f);return isNaN(u)?null:u}class Ca{constructor(u,d){this.providerId=u,this.signInMethod=d}toJSON(){return xt("not implemented")}_getIdTokenResponse(u){return xt("not implemented")}_linkToIdToken(u,d){return xt("not implemented")}_getReauthenticationResolver(u){return xt("not implemented")}}function Bl(f,u){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,C.Z)(function*(f,u){return ae(f,"POST","/v1/accounts:resetPassword",K(f,u))})).apply(this,arguments)}function lu(){return(lu=(0,C.Z)(function*(f,u){return ae(f,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function lE(f,u){return ft.apply(this,arguments)}function ft(){return(ft=(0,C.Z)(function*(f,u){return ae(f,"POST","/v1/accounts:signUp",u)})).apply(this,arguments)}function cu(){return(cu=(0,C.Z)(function*(f,u){return ae(f,"POST","/v1/accounts:update",K(f,u))})).apply(this,arguments)}function Gi(f,u){return uu.apply(this,arguments)}function uu(){return(uu=(0,C.Z)(function*(f,u){return ve(f,"POST","/v1/accounts:signInWithPassword",K(f,u))})).apply(this,arguments)}function Kh(f,u){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,C.Z)(function*(f,u){return ae(f,"POST","/v1/accounts:sendOobCode",K(f,u))})).apply(this,arguments)}function Jg(){return(Jg=(0,C.Z)(function*(f,u){return Kh(f,u)})).apply(this,arguments)}function re(f,u){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,C.Z)(function*(f,u){return Kh(f,u)})).apply(this,arguments)}function Yh(f,u){return du.apply(this,arguments)}function du(){return(du=(0,C.Z)(function*(f,u){return Kh(f,u)})).apply(this,arguments)}function Xh(){return(Xh=(0,C.Z)(function*(f,u){return Kh(f,u)})).apply(this,arguments)}function e_(){return(e_=(0,C.Z)(function*(f,u){return ve(f,"POST","/v1/accounts:signInWithEmailLink",K(f,u))})).apply(this,arguments)}function t_(){return(t_=(0,C.Z)(function*(f,u){return ve(f,"POST","/v1/accounts:signInWithEmailLink",K(f,u))})).apply(this,arguments)}class hu extends Ca{constructor(u,d,m,v=null){super("password",m),this._email=u,this._password=d,this._tenantId=v}static _fromEmailAndPassword(u,d){return new hu(u,d,"password")}static _fromEmailAndCode(u,d,m=null){return new hu(u,d,"emailLink",m)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(u){var d=this;return(0,C.Z)(function*(){switch(d.signInMethod){case"password":return wi(u,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Gi);case"emailLink":return function Jh(f,u){return e_.apply(this,arguments)}(u,{email:d._email,oobCode:d._password});default:mt(u,"internal-error")}})()}_linkToIdToken(u,d){var m=this;return(0,C.Z)(function*(){switch(m.signInMethod){case"password":return wi(u,{idToken:d,returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lE);case"emailLink":return function HS(f,u){return t_.apply(this,arguments)}(u,{idToken:d,email:m._email,oobCode:m._password});default:mt(u,"internal-error")}})()}_getReauthenticationResolver(u){return this._getIdTokenResponse(u)}}function Jo(f,u){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,C.Z)(function*(f,u){return ve(f,"POST","/v1/accounts:signInWithIdp",K(f,u))})).apply(this,arguments)}class fr extends Ca{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(u){const d=new fr(u.providerId,u.signInMethod);return u.idToken||u.accessToken?(u.idToken&&(d.idToken=u.idToken),u.accessToken&&(d.accessToken=u.accessToken),u.nonce&&!u.pendingToken&&(d.nonce=u.nonce),u.pendingToken&&(d.pendingToken=u.pendingToken)):u.oauthToken&&u.oauthTokenSecret?(d.accessToken=u.oauthToken,d.secret=u.oauthTokenSecret):mt("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:m,signInMethod:v}=d,w=(0,yt._T)(d,["providerId","signInMethod"]);if(!m||!v)return null;const N=new fr(m,v);return N.idToken=w.idToken||void 0,N.accessToken=w.accessToken||void 0,N.secret=w.secret,N.nonce=w.nonce,N.pendingToken=w.pendingToken||null,N}_getIdTokenResponse(u){return Jo(u,this.buildRequest())}_linkToIdToken(u,d){const m=this.buildRequest();return m.idToken=d,Jo(u,m)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,Jo(u,d)}buildRequest(){const u={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)u.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),u.postBody=(0,ee.xO)(d)}return u}}function tf(){return(tf=(0,C.Z)(function*(f,u){return ae(f,"POST","/v1/accounts:sendVerificationCode",K(f,u))})).apply(this,arguments)}function fu(){return(fu=(0,C.Z)(function*(f,u){return ve(f,"POST","/v1/accounts:signInWithPhoneNumber",K(f,u))})).apply(this,arguments)}function nf(){return(nf=(0,C.Z)(function*(f,u){const d=yield ve(f,"POST","/v1/accounts:signInWithPhoneNumber",K(f,u));if(d.temporaryProof)throw mn(f,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const es={USER_NOT_FOUND:"user-not-found"};function F(){return(F=(0,C.Z)(function*(f,u){return ve(f,"POST","/v1/accounts:signInWithPhoneNumber",K(f,Object.assign(Object.assign({},u),{operation:"REAUTH"})),es)})).apply(this,arguments)}class ts extends Ca{constructor(u){super("phone","phone"),this.params=u}static _fromVerification(u,d){return new ts({verificationId:u,verificationCode:d})}static _fromTokenResponse(u,d){return new ts({phoneNumber:u,temporaryProof:d})}_getIdTokenResponse(u){return function uE(f,u){return fu.apply(this,arguments)}(u,this._makeVerificationRequest())}_linkToIdToken(u,d){return function Da(f,u){return nf.apply(this,arguments)}(u,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(u){return function dE(f,u){return F.apply(this,arguments)}(u,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:u,phoneNumber:d,verificationId:m,verificationCode:v}=this.params;return u&&d?{temporaryProof:u,phoneNumber:d}:{sessionInfo:m,code:v}}toJSON(){const u={providerId:this.providerId};return this.params.phoneNumber&&(u.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(u.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(u.verificationCode=this.params.verificationCode),this.params.verificationId&&(u.verificationId=this.params.verificationId),u}static fromJSON(u){"string"==typeof u&&(u=JSON.parse(u));const{verificationId:d,verificationCode:m,phoneNumber:v,temporaryProof:w}=u;return m||d||v||w?new ts({verificationId:d,verificationCode:m,phoneNumber:v,temporaryProof:w}):null}}class Us{constructor(u){var d,m,v,w,N,Y;const ue=(0,ee.zd)((0,ee.pd)(u)),Se=null!==(d=ue.apiKey)&&void 0!==d?d:null,ze=null!==(m=ue.oobCode)&&void 0!==m?m:null,It=function xe(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(v=ue.mode)&&void 0!==v?v:null);he(Se&&ze&&It,"argument-error"),this.apiKey=Se,this.operation=It,this.code=ze,this.continueUrl=null!==(w=ue.continueUrl)&&void 0!==w?w:null,this.languageCode=null!==(N=ue.languageCode)&&void 0!==N?N:null,this.tenantId=null!==(Y=ue.tenantId)&&void 0!==Y?Y:null}static parseLink(u){const d=function pu(f){const u=(0,ee.zd)((0,ee.pd)(f)).link,d=u?(0,ee.zd)((0,ee.pd)(u)).deep_link_id:null,m=(0,ee.zd)((0,ee.pd)(f)).deep_link_id;return(m?(0,ee.zd)((0,ee.pd)(m)).link:null)||m||d||u||f}(u);try{return new Us(d)}catch{return null}}}let rf=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(d,m){return hu._fromEmailAndPassword(d,m)}static credentialWithLink(d,m){const v=Us.parseLink(m);return he(v,"argument-error"),hu._fromEmailAndCode(d,v.code,v.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class No{constructor(u){this.providerId=u,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(u){this.defaultLanguageCode=u}setCustomParameters(u){return this.customParameters=u,this}getCustomParameters(){return this.customParameters}}class Aa extends No{constructor(){super(...arguments),this.scopes=[]}addScope(u){return this.scopes.includes(u)||this.scopes.push(u),this}getScopes(){return[...this.scopes]}}class pr extends Aa{static credentialFromJSON(u){const d="string"==typeof u?JSON.parse(u):u;return he("providerId"in d&&"signInMethod"in d,"argument-error"),fr._fromParams(d)}credential(u){return this._credential(Object.assign(Object.assign({},u),{nonce:u.rawNonce}))}_credential(u){return he(u.idToken||u.accessToken,"argument-error"),fr._fromParams(Object.assign(Object.assign({},u),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(u){return pr.oauthCredentialFromTaggedObject(u)}static credentialFromError(u){return pr.oauthCredentialFromTaggedObject(u.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{oauthIdToken:d,oauthAccessToken:m,oauthTokenSecret:v,pendingToken:w,nonce:N,providerId:Y}=u;if(!m&&!v&&!d&&!w||!Y)return null;try{return new pr(Y)._credential({idToken:d,accessToken:m,nonce:N,pendingToken:w})}catch{return null}}}let gu=(()=>{class f extends Aa{constructor(){super("facebook.com")}static credential(d){return fr._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),Ar=(()=>{class f extends Aa{constructor(){super("google.com"),this.addScope("profile")}static credential(d,m){return fr._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:m})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:m,oauthAccessToken:v}=d;if(!m&&!v)return null;try{return f.credential(m,v)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),mo=(()=>{class f extends Aa{constructor(){super("github.com")}static credential(d){return fr._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class Fo extends Ca{constructor(u,d){super(u,u),this.pendingToken=d}_getIdTokenResponse(u){return Jo(u,this.buildRequest())}_linkToIdToken(u,d){const m=this.buildRequest();return m.idToken=d,Jo(u,m)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,Jo(u,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:m,signInMethod:v,pendingToken:w}=d;return m&&v&&w&&m===v?new Fo(m,w):null}static _create(u,d){return new Fo(u,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Sa extends No{constructor(u){he(u.startsWith("saml."),"argument-error"),super(u)}static credentialFromResult(u){return Sa.samlCredentialFromTaggedObject(u)}static credentialFromError(u){return Sa.samlCredentialFromTaggedObject(u.customData||{})}static credentialFromJSON(u){const d=Fo.fromJSON(u);return he(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{pendingToken:d,providerId:m}=u;if(!d||!m)return null;try{return Fo._create(m,d)}catch{return null}}}let n_=(()=>{class f extends Aa{constructor(){super("twitter.com")}static credential(d,m){return fr._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:m})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:m,oauthTokenSecret:v}=d;if(!m||!v)return null;try{return f.credential(m,v)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function go(f,u){return js.apply(this,arguments)}function js(){return(js=(0,C.Z)(function*(f,u){return ve(f,"POST","/v1/accounts:signUp",K(f,u))})).apply(this,arguments)}class mr{constructor(u){this.user=u.user,this.providerId=u.providerId,this._tokenResponse=u._tokenResponse,this.operationType=u.operationType}static _fromIdTokenResponse(u,d,m,v=!1){return(0,C.Z)(function*(){const w=yield y._fromIdTokenResponse(u,m,v),N=af(m);return new mr({user:w,providerId:N,_tokenResponse:m,operationType:d})})()}static _forOperation(u,d,m){return(0,C.Z)(function*(){yield u._updateTokensIfNecessary(m,!0);const v=af(m);return new mr({user:u,providerId:v,_tokenResponse:m,operationType:d})})()}}function af(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function lf(f){return _u.apply(this,arguments)}function _u(){return(_u=(0,C.Z)(function*(f){var u;const d=vn(f);if(yield d._initializationPromise,null!==(u=d.currentUser)&&void 0!==u&&u.isAnonymous)return new mr({user:d.currentUser,providerId:null,operationType:"signIn"});const m=yield go(d,{returnSecureToken:!0}),v=yield mr._fromIdTokenResponse(d,"signIn",m,!0);return yield d._updateCurrentUser(v.user),v})).apply(this,arguments)}class jl extends ee.ZR{constructor(u,d,m,v){var w;super(d.code,d.message),this.operationType=m,this.user=v,Object.setPrototypeOf(this,jl.prototype),this.customData={appName:u.name,tenantId:null!==(w=u.tenantId)&&void 0!==w?w:void 0,_serverResponse:d.customData._serverResponse,operationType:m}}static _fromErrorAndOperation(u,d,m,v){return new jl(u,d,m,v)}}function Ra(f,u,d,m){return("reauthenticate"===u?d._getReauthenticationResolver(f):d._getIdTokenResponse(f)).catch(w=>{throw"auth/multi-factor-auth-required"===w.code?jl._fromErrorAndOperation(f,w,u,m):w})}function cf(f){return new Set(f.map(({providerId:u})=>u).filter(u=>!!u))}function i_(f,u){return uf.apply(this,arguments)}function uf(){return uf=(0,C.Z)(function*(f,u){const d=(0,ee.m9)(f);yield yu(!0,d,u);const{providerUserInfo:m}=yield function Hr(f,u){return qr.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[u]}),v=cf(m||[]);return d.providerData=d.providerData.filter(w=>v.has(w.providerId)),v.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),uf.apply(this,arguments)}function vu(f,u){return df.apply(this,arguments)}function df(){return(df=(0,C.Z)(function*(f,u,d=!1){const m=yield gn(f,u._linkToIdToken(f.auth,yield f.getIdToken()),d);return mr._forOperation(f,"link",m)})).apply(this,arguments)}function yu(f,u,d){return gr.apply(this,arguments)}function gr(){return(gr=(0,C.Z)(function*(f,u,d){yield Xn(u);const v=!1===f?"provider-already-linked":"no-such-provider";he(cf(u.providerData).has(d)===f,u.auth,v)})).apply(this,arguments)}function r_(f,u){return bu.apply(this,arguments)}function bu(){return(bu=(0,C.Z)(function*(f,u,d=!1){const{auth:m}=f,v="reauthenticate";try{const w=yield gn(f,Ra(m,v,u,f),d);he(w.idToken,m,"internal-error");const N=On(w.idToken);he(N,m,"internal-error");const{sub:Y}=N;return he(f.uid===Y,m,"user-mismatch"),mr._forOperation(f,v,w)}catch(w){throw"auth/user-not-found"===w?.code&&mt(m,"user-mismatch"),w}})).apply(this,arguments)}function o_(f,u){return hf.apply(this,arguments)}function hf(){return(hf=(0,C.Z)(function*(f,u,d=!1){const m="signIn",v=yield Ra(f,m,u),w=yield mr._fromIdTokenResponse(f,m,v);return d||(yield f._updateCurrentUser(w.user)),w})).apply(this,arguments)}function Eu(f,u){return ff.apply(this,arguments)}function ff(){return(ff=(0,C.Z)(function*(f,u){return o_(vn(f),u)})).apply(this,arguments)}function pf(f,u){return mf.apply(this,arguments)}function mf(){return(mf=(0,C.Z)(function*(f,u){const d=(0,ee.m9)(f);return yield yu(!1,d,u.providerId),vu(d,u)})).apply(this,arguments)}function s_(f,u){return gf.apply(this,arguments)}function gf(){return(gf=(0,C.Z)(function*(f,u){return r_((0,ee.m9)(f),u)})).apply(this,arguments)}function _f(){return(_f=(0,C.Z)(function*(f,u){return ve(f,"POST","/v1/accounts:signInWithCustomToken",K(f,u))})).apply(this,arguments)}function hE(f,u){return vf.apply(this,arguments)}function vf(){return vf=(0,C.Z)(function*(f,u){const d=vn(f),m=yield function An(f,u){return _f.apply(this,arguments)}(d,{token:u,returnSecureToken:!0}),v=yield mr._fromIdTokenResponse(d,"signIn",m);return yield d._updateCurrentUser(v.user),v}),vf.apply(this,arguments)}class _t{constructor(u,d){this.factorId=u,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(u,d){return"phoneInfo"in d?yf._fromServerResponse(u,d):"totpInfo"in d?wu._fromServerResponse(u,d):mt(u,"internal-error")}}class yf extends _t{constructor(u){super("phone",u),this.phoneNumber=u.phoneInfo}static _fromServerResponse(u,d){return new yf(d)}}class wu extends _t{constructor(u){super("totp",u)}static _fromServerResponse(u,d){return new wu(d)}}function qe(f,u,d){var m;he((null===(m=d.url)||void 0===m?void 0:m.length)>0,f,"invalid-continue-uri"),he(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),u.continueUrl=d.url,u.dynamicLinkDomain=d.dynamicLinkDomain,u.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(he(d.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),u.iOSBundleId=d.iOS.bundleId),d.android&&(he(d.android.packageName.length>0,f,"missing-android-pkg-name"),u.androidInstallApp=d.android.installApp,u.androidMinimumVersionCode=d.android.minimumVersion,u.androidPackageName=d.android.packageName)}function Ii(f){return wt.apply(this,arguments)}function wt(){return(wt=(0,C.Z)(function*(f){const u=vn(f);u._getPasswordPolicyInternal()&&(yield u._updatePasswordPolicy())})).apply(this,arguments)}function di(f,u,d){return hi.apply(this,arguments)}function hi(){return(hi=(0,C.Z)(function*(f,u,d){const m=vn(f),v={requestType:"PASSWORD_RESET",email:u,clientType:"CLIENT_TYPE_WEB"};d&&qe(m,v,d),yield wi(m,v,"getOobCode",re)})).apply(this,arguments)}function Ma(f,u,d){return Oi.apply(this,arguments)}function Oi(){return Oi=(0,C.Z)(function*(f,u,d){yield Bl((0,ee.m9)(f),{oobCode:u,newPassword:d}).catch(function(){var m=(0,C.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&Ii(f),v});return function(v){return m.apply(this,arguments)}}())}),Oi.apply(this,arguments)}function a_(f,u){return Iu.apply(this,arguments)}function Iu(){return Iu=(0,C.Z)(function*(f,u){yield function Zh(f,u){return cu.apply(this,arguments)}((0,ee.m9)(f),{oobCode:u})}),Iu.apply(this,arguments)}function zl(f,u){return bf.apply(this,arguments)}function bf(){return(bf=(0,C.Z)(function*(f,u){const d=(0,ee.m9)(f),m=yield Bl(d,{oobCode:u}),v=m.requestType;switch(he(v,d,"internal-error"),v){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":he(m.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":he(m.mfaInfo,d,"internal-error");default:he(m.email,d,"internal-error")}let w=null;return m.mfaInfo&&(w=_t._fromServerResponse(vn(d),m.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===m.requestType?m.newEmail:m.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===m.requestType?m.email:m.newEmail)||null,multiFactorInfo:w},operation:v}})).apply(this,arguments)}function fE(f,u){return an.apply(this,arguments)}function an(){return(an=(0,C.Z)(function*(f,u){const{data:d}=yield zl((0,ee.m9)(f),u);return d.email})).apply(this,arguments)}function Ce(f,u,d){return tt.apply(this,arguments)}function tt(){return(tt=(0,C.Z)(function*(f,u,d){const m=vn(f),N=yield wi(m,{returnSecureToken:!0,email:u,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",go).catch(ue=>{throw"auth/password-does-not-meet-requirements"===ue.code&&Ii(f),ue}),Y=yield mr._fromIdTokenResponse(m,"signIn",N);return yield m._updateCurrentUser(Y.user),Y})).apply(this,arguments)}function ln(f,u,d){return Eu((0,ee.m9)(f),rf.credential(u,d)).catch(function(){var m=(0,C.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&Ii(f),v});return function(v){return m.apply(this,arguments)}}())}function Gr(f,u,d){return zs.apply(this,arguments)}function zs(){return(zs=(0,C.Z)(function*(f,u,d){const m=vn(f),v={requestType:"EMAIL_SIGNIN",email:u,clientType:"CLIENT_TYPE_WEB"};(function w(N,Y){he(Y.handleCodeInApp,m,"argument-error"),Y&&qe(m,N,Y)})(v,d),yield wi(m,v,"getOobCode",Yh)})).apply(this,arguments)}function xi(f,u){const d=Us.parseLink(u);return"EMAIL_SIGNIN"===d?.operation}function Pa(f,u,d){return yn.apply(this,arguments)}function yn(){return(yn=(0,C.Z)(function*(f,u,d){const m=(0,ee.m9)(f),v=rf.credentialWithLink(u,d||Tn());return he(v._tenantId===(m.tenantId||null),m,"tenant-id-mismatch"),Eu(m,v)})).apply(this,arguments)}function is(){return(is=(0,C.Z)(function*(f,u){return ae(f,"POST","/v1/accounts:createAuthUri",K(f,u))})).apply(this,arguments)}function nt(f,u){return $s.apply(this,arguments)}function $s(){return $s=(0,C.Z)(function*(f,u){const m={identifier:u,continueUri:kn()?Tn():"http://localhost"},{signinMethods:v}=yield function ns(f,u){return is.apply(this,arguments)}((0,ee.m9)(f),m);return v||[]}),$s.apply(this,arguments)}function l_(f,u){return rs.apply(this,arguments)}function rs(){return rs=(0,C.Z)(function*(f,u){const d=(0,ee.m9)(f),v={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};u&&qe(d.auth,v,u);const{email:w}=yield function $S(f,u){return Jg.apply(this,arguments)}(d.auth,v);w!==f.email&&(yield f.reload())}),rs.apply(this,arguments)}function Nn(f,u,d){return Hs.apply(this,arguments)}function Hs(){return Hs=(0,C.Z)(function*(f,u,d){const m=(0,ee.m9)(f),w={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:u};d&&qe(m.auth,w,d);const{email:N}=yield function Qh(f,u){return Xh.apply(this,arguments)}(m.auth,w);N!==f.email&&(yield f.reload())}),Hs.apply(this,arguments)}function Sr(){return(Sr=(0,C.Z)(function*(f,u){return ae(f,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function $l(f,u){return xu.apply(this,arguments)}function xu(){return xu=(0,C.Z)(function*(f,{displayName:u,photoURL:d}){if(void 0===u&&void 0===d)return;const m=(0,ee.m9)(f),w={idToken:yield m.getIdToken(),displayName:u,photoUrl:d,returnSecureToken:!0},N=yield gn(m,function ka(f,u){return Sr.apply(this,arguments)}(m.auth,w));m.displayName=N.displayName||null,m.photoURL=N.photoUrl||null;const Y=m.providerData.find(({providerId:ue})=>"password"===ue);Y&&(Y.displayName=m.displayName,Y.photoURL=m.photoURL),yield m._updateTokensIfNecessary(N)}),xu.apply(this,arguments)}function os(f,u){return Oa((0,ee.m9)(f),u,null)}function Lo(f,u){return Oa((0,ee.m9)(f),null,u)}function Oa(f,u,d){return qs.apply(this,arguments)}function qs(){return qs=(0,C.Z)(function*(f,u,d){const{auth:m}=f,w={idToken:yield f.getIdToken(),returnSecureToken:!0};u&&(w.email=u),d&&(w.password=d);const N=yield gn(f,function Gh(f,u){return lu.apply(this,arguments)}(m,w));yield f._updateTokensIfNecessary(N,!0)}),qs.apply(this,arguments)}class Hl{constructor(u,d,m={}){this.isNewUser=u,this.providerId=d,this.profile=m}}class Cu extends Hl{constructor(u,d,m,v){super(u,d,m),this.username=v}}class c_ extends Hl{constructor(u,d){super(u,"facebook.com",d)}}class _o extends Cu{constructor(u,d){super(u,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class Tu extends Hl{constructor(u,d){super(u,"google.com",d)}}class Na extends Cu{constructor(u,d,m){super(u,"twitter.com",d,m)}}function ql(f){const{user:u,_tokenResponse:d}=f;return u.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function vt(f){var u,d;if(!f)return null;const{providerId:m}=f,v=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},w=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!m&&f?.idToken){const N=null===(d=null===(u=On(f.idToken))||void 0===u?void 0:u.firebase)||void 0===d?void 0:d.sign_in_provider;if(N)return new Hl(w,"anonymous"!==N&&"custom"!==N?N:null)}if(!m)return null;switch(m){case"facebook.com":return new c_(w,v);case"github.com":return new _o(w,v);case"google.com":return new Tu(w,v);case"twitter.com":return new Na(w,v,f.screenName||null);case"custom":case"anonymous":return new Hl(w,null);default:return new Hl(w,m,v)}}(d)}function pE(f){return(0,ee.m9)(f).signOut()}class Gs{constructor(u,d,m){this.type=u,this.credential=d,this.user=m}static _fromIdtoken(u,d){return new Gs("enroll",u,d)}static _fromMfaPendingCredential(u){return new Gs("signin",u)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(u){var d,m;if(u?.multiFactorSession){if(null!==(d=u.multiFactorSession)&&void 0!==d&&d.pendingCredential)return Gs._fromMfaPendingCredential(u.multiFactorSession.pendingCredential);if(null!==(m=u.multiFactorSession)&&void 0!==m&&m.idToken)return Gs._fromIdtoken(u.multiFactorSession.idToken)}return null}}class d_{constructor(u,d,m){this.session=u,this.hints=d,this.signInResolver=m}static _fromError(u,d){const m=vn(u),v=d.customData._serverResponse,w=(v.mfaInfo||[]).map(Y=>_t._fromServerResponse(m,Y));he(v.mfaPendingCredential,m,"internal-error");const N=Gs._fromMfaPendingCredential(v.mfaPendingCredential);return new d_(N,w,function(){var Y=(0,C.Z)(function*(ue){const Se=yield ue._process(m,N);delete v.mfaInfo,delete v.mfaPendingCredential;const ze=Object.assign(Object.assign({},v),{idToken:Se.idToken,refreshToken:Se.refreshToken});switch(d.operationType){case"signIn":const It=yield mr._fromIdTokenResponse(m,d.operationType,ze);return yield m._updateCurrentUser(It.user),It;case"reauthenticate":return he(d.user,m,"internal-error"),mr._forOperation(d.user,d.operationType,ze);default:mt(m,"internal-error")}});return function(ue){return Y.apply(this,arguments)}}())}resolveSignIn(u){var d=this;return(0,C.Z)(function*(){return d.signInResolver(u)})()}}function WS(f,u){var d;const m=(0,ee.m9)(f),v=u;return he(u.customData.operationType,m,"argument-error"),he(null===(d=v.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,m,"argument-error"),d_._fromError(m,v)}class h_{constructor(u){this.user=u,this.enrolledFactors=[],u._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(m=>_t._fromServerResponse(u.auth,m)))})}static _fromUser(u){return new h_(u)}getSession(){var u=this;return(0,C.Z)(function*(){return Gs._fromIdtoken(yield u.user.getIdToken(),u.user)})()}enroll(u,d){var m=this;return(0,C.Z)(function*(){const v=u,w=yield m.getSession(),N=yield gn(m.user,v._process(m.user.auth,w,d));return yield m.user._updateTokensIfNecessary(N),m.user.reload()})()}unenroll(u){var d=this;return(0,C.Z)(function*(){const m="string"==typeof u?u:u.uid,v=yield d.user.getIdToken();try{const w=yield gn(d.user,function YS(f,u){return ae(f,"POST","/v2/accounts/mfaEnrollment:withdraw",K(f,u))}(d.user.auth,{idToken:v,mfaEnrollmentId:m}));d.enrolledFactors=d.enrolledFactors.filter(({uid:N})=>N!==m),yield d.user._updateTokensIfNecessary(w),yield d.user.reload()}catch(w){throw w}})()}}const f_=new WeakMap;function QS(f){const u=(0,ee.m9)(f);return f_.has(u)||f_.set(u,h_._fromUser(u)),f_.get(u)}const xf="__sak";class mE{constructor(u,d){this.storageRetriever=u,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(xf,"1"),this.storage.removeItem(xf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(u,d){return this.storage.setItem(u,JSON.stringify(d)),Promise.resolve()}_get(u){const d=this.storage.getItem(u);return Promise.resolve(d?JSON.parse(d):null)}_remove(u){return this.storage.removeItem(u),Promise.resolve()}get storage(){return this.storageRetriever()}}const gE=(()=>{class f extends mE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,m)=>this.onStorageEvent(d,m),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function p_(){const f=(0,ee.z$)();return Le(f)||De(f)}()&&function ke(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=_n(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const m of Object.keys(this.listeners)){const v=this.storage.getItem(m),w=this.localCache[m];v!==w&&d(m,w,v)}}onStorageEvent(d,m=!1){if(!d.key)return void this.forAllChangedKeys((Y,ue,Se)=>{this.notifyListeners(Y,Se)});const v=d.key;if(m?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Y=this.storage.getItem(v);if(d.newValue!==Y)null!==d.newValue?this.storage.setItem(v,d.newValue):this.storage.removeItem(v);else if(this.localCache[v]===d.newValue&&!m)return}const w=()=>{const Y=this.storage.getItem(v);!m&&this.localCache[v]===Y||this.notifyListeners(v,Y)},N=this.storage.getItem(v);!function B(){return(0,ee.w1)()&&10===document.documentMode}()||N===d.newValue||d.newValue===d.oldValue?w():setTimeout(w,10)}notifyListeners(d,m){this.localCache[d]=m;const v=this.listeners[d];if(v)for(const w of Array.from(v))w(m&&JSON.parse(m))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,m,v)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:m,newValue:v}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,m){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(m)}_removeListener(d,m){this.listeners[d]&&(this.listeners[d].delete(m),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,m){var v=()=>super._set,w=this;return(0,C.Z)(function*(){yield v().call(w,d,m),w.localCache[d]=JSON.stringify(m)})()}_get(d){var m=()=>super._get,v=this;return(0,C.Z)(function*(){const w=yield m().call(v,d);return v.localCache[d]=JSON.stringify(w),w})()}_remove(d){var m=()=>super._remove,v=this;return(0,C.Z)(function*(){yield m().call(v,d),delete v.localCache[d]})()}}return f.type="LOCAL",f})(),yo=(()=>{class f extends mE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,m){}_removeListener(d,m){}}return f.type="SESSION",f})();let e1=(()=>{class f{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const m=this.receivers.find(w=>w.isListeningto(d));if(m)return m;const v=new f(d);return this.receivers.push(v),v}isListeningto(d){return this.eventTarget===d}handleEvent(d){var m=this;return(0,C.Z)(function*(){const v=d,{eventId:w,eventType:N,data:Y}=v.data,ue=m.handlersMap[N];if(!ue?.size)return;v.ports[0].postMessage({status:"ack",eventId:w,eventType:N});const Se=Array.from(ue).map(function(){var It=(0,C.Z)(function*(Li){return Li(v.origin,Y)});return function(Li){return It.apply(this,arguments)}}()),ze=yield function JS(f){return Promise.all(f.map(function(){var u=(0,C.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(m){return{fulfilled:!1,reason:m}}});return function(d){return u.apply(this,arguments)}}()))}(Se);v.ports[0].postMessage({status:"done",eventId:w,eventType:N,response:ze})})()}_subscribe(d,m){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(m)}_unsubscribe(d,m){this.handlersMap[d]&&m&&this.handlersMap[d].delete(m),(!m||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function Fn(f="",u=10){let d="";for(let m=0;m<u;m++)d+=Math.floor(10*Math.random());return f+d}class Du{constructor(u){this.target=u,this.handlers=new Set}removeMessageHandler(u){u.messageChannel&&(u.messageChannel.port1.removeEventListener("message",u.onMessage),u.messageChannel.port1.close()),this.handlers.delete(u)}_send(u,d,m=50){var v=this;return(0,C.Z)(function*(){const w=typeof MessageChannel<"u"?new MessageChannel:null;if(!w)throw new Error("connection_unavailable");let N,Y;return new Promise((ue,Se)=>{const ze=Fn("",20);w.port1.start();const It=setTimeout(()=>{Se(new Error("unsupported_event"))},m);Y={messageChannel:w,onMessage(Li){const Uo=Li;if(Uo.data.eventId===ze)switch(Uo.data.status){case"ack":clearTimeout(It),N=setTimeout(()=>{Se(new Error("timeout"))},3e3);break;case"done":clearTimeout(N),ue(Uo.data.response);break;default:clearTimeout(It),clearTimeout(N),Se(new Error("invalid_response"))}}},v.handlers.add(Y),w.port1.addEventListener("message",Y.onMessage),v.target.postMessage({eventType:u,eventId:ze,data:d},[w.port2])}).finally(()=>{Y&&v.removeMessageHandler(Y)})})()}}function Lt(){return window}function Au(){return typeof Lt().WorkerGlobalScope<"u"&&"function"==typeof Lt().importScripts}function Su(){return(Su=(0,C.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ru="firebaseLocalStorageDb",Wl="firebaseLocalStorage",Df="fbase_key";class La{constructor(u){this.request=u}toPromise(){return new Promise((u,d)=>{this.request.addEventListener("success",()=>{u(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function Zs(f,u){return f.transaction([Wl],u?"readwrite":"readonly").objectStore(Wl)}function ss(){const f=indexedDB.open(Ru,1);return new Promise((u,d)=>{f.addEventListener("error",()=>{d(f.error)}),f.addEventListener("upgradeneeded",()=>{const m=f.result;try{m.createObjectStore(Wl,{keyPath:Df})}catch(v){d(v)}}),f.addEventListener("success",(0,C.Z)(function*(){const m=f.result;m.objectStoreNames.contains(Wl)?u(m):(m.close(),yield function Gl(){const f=indexedDB.deleteDatabase(Ru);return new La(f).toPromise()}(),u(yield ss()))}))})}function Af(f,u,d){return y_.apply(this,arguments)}function y_(){return(y_=(0,C.Z)(function*(f,u,d){const m=Zs(f,!0).put({[Df]:u,value:d});return new La(m).toPromise()})).apply(this,arguments)}function b_(){return(b_=(0,C.Z)(function*(f,u){const d=Zs(f,!1).get(u),m=yield new La(d).toPromise();return void 0===m?null:m.value})).apply(this,arguments)}function E_(f,u){const d=Zs(f,!0).delete(u);return new La(d).toPromise()}const Mu=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,C.Z)(function*(){return d.db||(d.db=yield ss()),d.db})()}_withRetries(d){var m=this;return(0,C.Z)(function*(){let v=0;for(;;)try{const w=yield m._openDb();return yield d(w)}catch(w){if(v++>3)throw w;m.db&&(m.db.close(),m.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,C.Z)(function*(){return Au()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,C.Z)(function*(){d.receiver=e1._getInstance(function v_(){return Au()?self:null}()),d.receiver._subscribe("keyChanged",function(){var m=(0,C.Z)(function*(v,w){return{keyProcessed:(yield d._poll()).includes(w.key)}});return function(v,w){return m.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var m=(0,C.Z)(function*(v,w){return["keyChanged"]});return function(v,w){return m.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,C.Z)(function*(){var m,v;if(d.activeServiceWorker=yield function __(){return Su.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new Du(d.activeServiceWorker);const w=yield d.sender._send("ping",{},800);w&&null!==(m=w[0])&&void 0!==m&&m.fulfilled&&null!==(v=w[0])&&void 0!==v&&v.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var m=this;return(0,C.Z)(function*(){if(m.sender&&m.activeServiceWorker&&function Cf(){var f;return(null===(f=navigator?.serviceWorker)||void 0===f?void 0:f.controller)||null}()===m.activeServiceWorker)try{yield m.sender._send("keyChanged",{key:d},m.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,C.Z)(function*(){try{if(!indexedDB)return!1;const d=yield ss();return yield Af(d,xf,"1"),yield E_(d,xf),!0}catch{}return!1})()}_withPendingWrite(d){var m=this;return(0,C.Z)(function*(){m.pendingWrites++;try{yield d()}finally{m.pendingWrites--}})()}_set(d,m){var v=this;return(0,C.Z)(function*(){return v._withPendingWrite((0,C.Z)(function*(){return yield v._withRetries(w=>Af(w,d,m)),v.localCache[d]=m,v.notifyServiceWorker(d)}))})()}_get(d){var m=this;return(0,C.Z)(function*(){const v=yield m._withRetries(w=>function t1(f,u){return b_.apply(this,arguments)}(w,d));return m.localCache[d]=v,v})()}_remove(d){var m=this;return(0,C.Z)(function*(){return m._withPendingWrite((0,C.Z)(function*(){return yield m._withRetries(v=>E_(v,d)),delete m.localCache[d],m.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,C.Z)(function*(){const m=yield d._withRetries(N=>{const Y=Zs(N,!1).getAll();return new La(Y).toPromise()});if(!m)return[];if(0!==d.pendingWrites)return[];const v=[],w=new Set;if(0!==m.length)for(const{fbase_key:N,value:Y}of m)w.add(N),JSON.stringify(d.localCache[N])!==JSON.stringify(Y)&&(d.notifyListeners(N,Y),v.push(N));for(const N of Object.keys(d.localCache))d.localCache[N]&&!w.has(N)&&(d.notifyListeners(N,null),v.push(N));return v})()}notifyListeners(d,m){this.localCache[d]=m;const v=this.listeners[d];if(v)for(const w of Array.from(v))w(m)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,C.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,m){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(m)}_removeListener(d,m){this.listeners[d]&&(this.listeners[d].delete(m),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),Zl=1e12;class w_{constructor(u){this.auth=u,this.counter=Zl,this._widgets=new Map}render(u,d){const m=this.counter;return this._widgets.set(m,new EE(u,this.auth.name,d||{})),this.counter++,m}reset(u){var d;const m=u||Zl;null===(d=this._widgets.get(m))||void 0===d||d.delete(),this._widgets.delete(m)}getResponse(u){var d;return(null===(d=this._widgets.get(u||Zl))||void 0===d?void 0:d.getResponse())||""}execute(u){var d=this;return(0,C.Z)(function*(){var m;return null===(m=d._widgets.get(u||Zl))||void 0===m||m.execute(),""})()}}class EE{constructor(u,d,m){this.params=m,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const v="string"==typeof u?document.getElementById(u):u;he(v,"argument-error",{appName:d}),this.container=v,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function wE(f){const u=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<f;m++)u.push(d.charAt(Math.floor(62*Math.random())));return u.join("")}(50);const{callback:u,"expired-callback":d}=this.params;if(u)try{u(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Rf=rE("rcb"),I_=new sr(3e4,6e4);class x_{constructor(){var u;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(u=Lt().grecaptcha)||void 0===u||!u.render)}load(u,d=""){return he(function xE(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(d),u,"argument-error"),this.shouldResolveImmediately(d)&&Yn(Lt().grecaptcha)?Promise.resolve(Lt().grecaptcha):new Promise((m,v)=>{const w=Lt().setTimeout(()=>{v(zt(u,"network-request-failed"))},I_.get());Lt()[Rf]=()=>{Lt().clearTimeout(w),delete Lt()[Rf];const Y=Lt().grecaptcha;if(!Y||!Yn(Y))return void v(zt(u,"internal-error"));const ue=Y.render;Y.render=(Se,ze)=>{const It=ue(Se,ze);return this.counter++,It},this.hostLanguage=d,m(Y)},Gg(`https://www.google.com/recaptcha/api.js??${(0,ee.xO)({onload:Rf,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(w),v(zt(u,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(u){var d;return!(null===(d=Lt().grecaptcha)||void 0===d||!d.render)&&(u===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class s1{load(u){return(0,C.Z)(function*(){return new w_(u)})()}clearedOneInstance(){}}const C_="recaptcha",Rr={theme:"light",type:"image"};class T_{constructor(u,d,m=Object.assign({},Rr)){this.parameters=m,this.type=C_,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vn(u),this.isInvisible="invisible"===this.parameters.size,he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const v="string"==typeof d?document.getElementById(d):d;he(v,this.auth,"argument-error"),this.container=v,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new s1:new x_,this.validateStartingState()}verify(){var u=this;return(0,C.Z)(function*(){u.assertNotDestroyed();const d=yield u.render(),m=u.getAssertedRecaptcha();return m.getResponse(d)||new Promise(w=>{const N=Y=>{Y&&(u.tokenChangeListeners.delete(N),w(Y))};u.tokenChangeListeners.add(N),u.isInvisible&&m.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(u){return Promise.reject(u)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(u=>{throw this.renderPromise=null,u})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(u=>{this.container.removeChild(u)})}validateStartingState(){he(!this.parameters.sitekey,this.auth,"argument-error"),he(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(u){return d=>{if(this.tokenChangeListeners.forEach(m=>m(d)),"function"==typeof u)u(d);else if("string"==typeof u){const m=Lt()[u];"function"==typeof m&&m(d)}}}assertNotDestroyed(){he(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var u=this;return(0,C.Z)(function*(){if(yield u.init(),!u.widgetId){let d=u.container;if(!u.isInvisible){const m=document.createElement("div");d.appendChild(m),d=m}u.widgetId=u.getAssertedRecaptcha().render(d,u.parameters)}return u.widgetId})()}init(){var u=this;return(0,C.Z)(function*(){he(kn()&&!Au(),u.auth,"internal-error"),yield function CE(){let f=null;return new Promise(u=>{"complete"!==document.readyState?(f=()=>u(),window.addEventListener("load",f)):u()}).catch(u=>{throw f&&window.removeEventListener("load",f),u})}(),u.recaptcha=yield u._recaptchaLoader.load(u.auth,u.auth.languageCode||void 0);const d=yield function Wi(f){return $r.apply(this,arguments)}(u.auth);he(d,u.auth,"internal-error"),u.parameters.sitekey=d})()}getAssertedRecaptcha(){return he(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Mf{constructor(u,d){this.verificationId=u,this.onConfirmation=d}confirm(u){const d=ts._fromVerification(this.verificationId,u);return this.onConfirmation(d)}}function D_(f,u,d){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,C.Z)(function*(f,u,d){const m=vn(f),v=yield Yl(m,u,(0,ee.m9)(d));return new Mf(v,w=>Eu(m,w))})).apply(this,arguments)}function TE(f,u,d){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,C.Z)(function*(f,u,d){const m=(0,ee.m9)(f);yield yu(!1,m,"phone");const v=yield Yl(m.auth,u,(0,ee.m9)(d));return new Mf(v,w=>pf(m,w))})).apply(this,arguments)}function DE(f,u,d){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,C.Z)(function*(f,u,d){const m=(0,ee.m9)(f),v=yield Yl(m.auth,u,(0,ee.m9)(d));return new Mf(v,w=>s_(m,w))})).apply(this,arguments)}function Yl(f,u,d){return ku.apply(this,arguments)}function ku(){return ku=(0,C.Z)(function*(f,u,d){var m;const v=yield d.verify();try{let w;if(he("string"==typeof v,f,"argument-error"),he(d.type===C_,f,"argument-error"),w="string"==typeof u?{phoneNumber:u}:u,"session"in w){const N=w.session;if("phoneNumber"in w)return he("enroll"===N.type,f,"internal-error"),(yield function GS(f,u){return ae(f,"POST","/v2/accounts/mfaEnrollment:start",K(f,u))}(f,{idToken:N.credential,phoneEnrollmentInfo:{phoneNumber:w.phoneNumber,recaptchaToken:v}})).phoneSessionInfo.sessionInfo;{he("signin"===N.type,f,"internal-error");const Y=(null===(m=w.multiFactorHint)||void 0===m?void 0:m.uid)||w.multiFactorUid;return he(Y,f,"missing-multi-factor-info"),(yield function yE(f,u){return ae(f,"POST","/v2/accounts/mfaSignIn:start",K(f,u))}(f,{mfaPendingCredential:N.credential,mfaEnrollmentId:Y,phoneSignInInfo:{recaptchaToken:v}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:N}=yield function cE(f,u){return tf.apply(this,arguments)}(f,{phoneNumber:w.phoneNumber,recaptchaToken:v});return N}}finally{d._reset()}}),ku.apply(this,arguments)}function en(f,u){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,C.Z)(function*(f,u){yield vu((0,ee.m9)(f),u)})).apply(this,arguments)}let Ou=(()=>{class f{constructor(d){this.providerId=f.PROVIDER_ID,this.auth=vn(d)}verifyPhoneNumber(d,m){return Yl(this.auth,d,(0,ee.m9)(m))}static credential(d,m){return ts._fromVerification(d,m)}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:m,temporaryProof:v}=d;return m&&v?ts._fromTokenResponse(m,v):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function Un(f,u){return u?te(u):(he(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class Pf extends Ca{constructor(u){super("custom","custom"),this.params=u}_getIdTokenResponse(u){return Jo(u,this._buildIdpRequest())}_linkToIdToken(u,d){return Jo(u,this._buildIdpRequest(d))}_getReauthenticationResolver(u){return Jo(u,this._buildIdpRequest())}_buildIdpRequest(u){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return u&&(d.idToken=u),d}}function A_(f){return o_(f.auth,new Pf(f),f.bypassAuthState)}function Va(f){const{auth:u,user:d}=f;return he(d,u,"internal-error"),r_(d,new Pf(f),f.bypassAuthState)}function vr(f){return kf.apply(this,arguments)}function kf(){return(kf=(0,C.Z)(function*(f){const{auth:u,user:d}=f;return he(d,u,"internal-error"),vu(d,new Pf(f),f.bypassAuthState)})).apply(this,arguments)}class S_{constructor(u,d,m,v,w=!1){this.auth=u,this.resolver=m,this.user=v,this.bypassAuthState=w,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var u=this;return new Promise(function(){var d=(0,C.Z)(function*(m,v){u.pendingPromise={resolve:m,reject:v};try{u.eventManager=yield u.resolver._initialize(u.auth),yield u.onExecution(),u.eventManager.registerConsumer(u)}catch(w){u.reject(w)}});return function(m,v){return d.apply(this,arguments)}}())}onAuthEvent(u){var d=this;return(0,C.Z)(function*(){const{urlResponse:m,sessionId:v,postBody:w,tenantId:N,error:Y,type:ue}=u;if(Y)return void d.reject(Y);const Se={auth:d.auth,requestUri:m,sessionId:v,tenantId:N||void 0,postBody:w||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(ue)(Se))}catch(ze){d.reject(ze)}})()}onError(u){this.reject(u)}getIdpTask(u){switch(u){case"signInViaPopup":case"signInViaRedirect":return A_;case"linkViaPopup":case"linkViaRedirect":return vr;case"reauthViaPopup":case"reauthViaRedirect":return Va;default:mt(this.auth,"internal-error")}}resolve(u){rn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(u),this.unregisterAndCleanUp()}reject(u){rn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(u),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const AE=new sr(2e3,1e4);function as(f,u,d){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,C.Z)(function*(f,u,d){const m=vn(f);Vn(f,u,No);const v=Un(m,d);return new Of(m,"signInViaPopup",u,v).executeNotNull()})).apply(this,arguments)}function SE(f,u,d){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,C.Z)(function*(f,u,d){const m=(0,ee.m9)(f);Vn(m.auth,u,No);const v=Un(m.auth,d);return new Of(m.auth,"reauthViaPopup",u,v,m).executeNotNull()})).apply(this,arguments)}function R_(f,u,d){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,C.Z)(function*(f,u,d){const m=(0,ee.m9)(f);Vn(m.auth,u,No);const v=Un(m.auth,d);return new Of(m.auth,"linkViaPopup",u,v,m).executeNotNull()})).apply(this,arguments)}let Of=(()=>{class f extends S_{constructor(d,m,v,w,N){super(d,m,w,N),this.provider=v,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var d=this;return(0,C.Z)(function*(){const m=yield d.execute();return he(m,d.auth,"internal-error"),m})()}onExecution(){var d=this;return(0,C.Z)(function*(){rn(1===d.filter.length,"Popup operations only handle one event");const m=Fn();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],m),d.authWindow.associatedEvent=m,d.resolver._originValidation(d.auth).catch(v=>{d.reject(v)}),d.resolver._isIframeWebStorageSupported(d.auth,v=>{v||d.reject(zt(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(zt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const d=()=>{var m,v;this.pollId=null!==(v=null===(m=this.authWindow)||void 0===m?void 0:m.window)&&void 0!==v&&v.closed?window.setTimeout(()=>{this.pollId=null,this.reject(zt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,AE.get())};d()}}return f.currentPopupAction=null,f})();const Ye="pendingRedirect",Ba=new Map;class a1 extends S_{constructor(u,d,m=!1){super(u,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,m),this.eventId=null}execute(){var u=()=>super.execute,d=this;return(0,C.Z)(function*(){let m=Ba.get(d.auth._key());if(!m){try{const w=(yield function RE(f,u){return Nf.apply(this,arguments)}(d.resolver,d.auth))?yield u().call(d):null;m=()=>Promise.resolve(w)}catch(v){m=()=>Promise.reject(v)}Ba.set(d.auth._key(),m)}return d.bypassAuthState||Ba.set(d.auth._key(),()=>Promise.resolve(null)),m()})()}onAuthEvent(u){var d=()=>super.onAuthEvent,m=this;return(0,C.Z)(function*(){if("signInViaRedirect"===u.type)return d().call(m,u);if("unknown"!==u.type){if(u.eventId){const v=yield m.auth._redirectUserForId(u.eventId);if(v)return m.user=v,d().call(m,u);m.resolve(null)}}else m.resolve(null)})()}onExecution(){return(0,C.Z)(function*(){})()}cleanUp(){}}function Nf(){return(Nf=(0,C.Z)(function*(f,u){const d=k_(u),m=P_(f);if(!(yield m._isAvailable()))return!1;const v="true"===(yield m._get(d));return yield m._remove(d),v})).apply(this,arguments)}function Ff(f,u){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,C.Z)(function*(f,u){return P_(f)._set(k_(u),"true")})).apply(this,arguments)}function Ua(){Ba.clear()}function M_(f,u){Ba.set(f._key(),u)}function P_(f){return te(f._redirectPersistence)}function k_(f){return Ge(Ye,f.config.apiKey,f.name)}function ME(f,u,d){return function PE(f,u,d){return le.apply(this,arguments)}(f,u,d)}function le(){return(le=(0,C.Z)(function*(f,u,d){const m=vn(f);Vn(f,u,No),yield m._initializationPromise;const v=Un(m,d);return yield Ff(v,m),v._openRedirect(m,u,"signInViaRedirect")})).apply(this,arguments)}function Mt(f,u,d){return function Gt(f,u,d){return jt.apply(this,arguments)}(f,u,d)}function jt(){return(jt=(0,C.Z)(function*(f,u,d){const m=(0,ee.m9)(f);Vn(m.auth,u,No),yield m.auth._initializationPromise;const v=Un(m.auth,d);yield Ff(v,m.auth);const w=yield kE(m);return v._openRedirect(m.auth,u,"reauthViaRedirect",w)})).apply(this,arguments)}function pi(f,u,d){return function O_(f,u,d){return Ks.apply(this,arguments)}(f,u,d)}function Ks(){return(Ks=(0,C.Z)(function*(f,u,d){const m=(0,ee.m9)(f);Vn(m.auth,u,No),yield m.auth._initializationPromise;const v=Un(m.auth,d);yield yu(!1,m,u.providerId),yield Ff(v,m.auth);const w=yield kE(m);return v._openRedirect(m.auth,u,"linkViaRedirect",w)})).apply(this,arguments)}function bo(f,u){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,C.Z)(function*(f,u){return yield vn(f)._initializationPromise,Jl(f,u,!1)})).apply(this,arguments)}function Jl(f,u){return Lf.apply(this,arguments)}function Lf(){return(Lf=(0,C.Z)(function*(f,u,d=!1){const m=vn(f),v=Un(m,u),N=yield new a1(m,v,d).execute();return N&&!d&&(delete N.user._redirectEventId,yield m._persistUserIfCurrent(N.user),yield m._setRedirectUser(null,u)),N})).apply(this,arguments)}function kE(f){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,C.Z)(function*(f){const u=Fn(`${f.uid}:::`);return f._redirectEventId=u,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),u})).apply(this,arguments)}class Eo{constructor(u){this.auth=u,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(u){this.consumers.add(u),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,u)&&(this.sendToConsumer(this.queuedRedirectEvent,u),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(u){this.consumers.delete(u)}onEvent(u){if(this.hasEventBeenHandled(u))return!1;let d=!1;return this.consumers.forEach(m=>{this.isEventForConsumer(u,m)&&(d=!0,this.sendToConsumer(u,m),this.saveEventToCache(u))}),this.hasHandledPotentialRedirect||!function Vo(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ys(f);default:return!1}}(u)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=u,d=!0)),d}sendToConsumer(u,d){var m;if(u.error&&!Ys(u)){const v=(null===(m=u.error.code)||void 0===m?void 0:m.split("auth/")[1])||"internal-error";d.onError(zt(this.auth,v))}else d.onAuthEvent(u)}isEventForConsumer(u,d){const m=null===d.eventId||!!u.eventId&&u.eventId===d.eventId;return d.filter.includes(u.type)&&m}hasEventBeenHandled(u){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vf(u))}saveEventToCache(u){this.cachedEventUids.add(Vf(u)),this.lastProcessedEventTime=Date.now()}}function Vf(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(u=>u).join("-")}function Ys({type:f,error:u}){return"unknown"===f&&"auth/no-auth-event"===u?.code}function N_(f){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,C.Z)(function*(f,u={}){return ae(f,"GET","/v1/projects",u)})).apply(this,arguments)}const OE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NE=/^https?/;function ec(){return(ec=(0,C.Z)(function*(f){if(f.config.emulator)return;const{authorizedDomains:u}=yield N_(f);for(const d of u)try{if(F_(d))return}catch{}mt(f,"unauthorized-domain")})).apply(this,arguments)}function F_(f){const u=Tn(),{protocol:d,hostname:m}=new URL(u);if(f.startsWith("chrome-extension://")){const N=new URL(f);return""===N.hostname&&""===m?"chrome-extension:"===d&&f.replace("chrome-extension://","")===u.replace("chrome-extension://",""):"chrome-extension:"===d&&N.hostname===m}if(!NE.test(d))return!1;if(OE.test(f))return m===f;const v=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+v+"|"+v+")$","i").test(m)}const Uf=new sr(3e4,6e4);function L_(){const f=Lt().___jsl;if(f?.H)for(const u of Object.keys(f.H))if(f.H[u].r=f.H[u].r||[],f.H[u].L=f.H[u].L||[],f.H[u].r=[...f.H[u].L],f.CP)for(let d=0;d<f.CP.length;d++)f.CP[d]=null}let ja=null;const U_=new sr(5e3,15e3),j_="__/auth/iframe",z_="emulator/auth/iframe",jf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function LE(f){const u=f.config;he(u.authDomain,f,"auth-domain-config-required");const d=u.emulator?ao(u,z_):`https://${f.config.authDomain}/${j_}`,m={apiKey:u.apiKey,appName:f.name,v:L.SDK_VERSION},v=FE.get(f.config.apiHost);v&&(m.eid=v);const w=f._getFrameworks();return w.length&&(m.fw=w.join(",")),`${d}?${(0,ee.xO)(m).slice(1)}`}function Bo(){return Bo=(0,C.Z)(function*(f){const u=yield function B_(f){return ja=ja||function V_(f){return new Promise((u,d)=>{var m,v,w;function N(){L_(),gapi.load("gapi.iframes",{callback:()=>{u(gapi.iframes.getContext())},ontimeout:()=>{L_(),d(zt(f,"network-request-failed"))},timeout:Uf.get()})}if(null!==(v=null===(m=Lt().gapi)||void 0===m?void 0:m.iframes)&&void 0!==v&&v.Iframe)u(gapi.iframes.getContext());else{if(null===(w=Lt().gapi)||void 0===w||!w.load){const Y=rE("iframefcb");return Lt()[Y]=()=>{gapi.load?N():d(zt(f,"network-request-failed"))},Gg(`https://apis.google.com/js/api.js?onload=${Y}`).catch(ue=>d(ue))}N()}}).catch(u=>{throw ja=null,u})}(f),ja}(f),d=Lt().gapi;return he(d,f,"internal-error"),u.open({where:document.body,url:LE(f),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jf,dontclear:!0},m=>new Promise(function(){var v=(0,C.Z)(function*(w,N){yield m.restyle({setHideOnLeave:!1});const Y=zt(f,"network-request-failed"),ue=Lt().setTimeout(()=>{N(Y)},U_.get());function Se(){Lt().clearTimeout(ue),w(m)}m.ping(Se).then(Se,()=>{N(Y)})});return function(w,N){return v.apply(this,arguments)}}()))}),Bo.apply(this,arguments)}const bn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class zf{constructor(u){this.window=u,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const ls="__/auth/handler",zE="emulator/auth/handler",zu=encodeURIComponent("fac");function za(f,u,d,m,v,w){return $a.apply(this,arguments)}function $a(){return($a=(0,C.Z)(function*(f,u,d,m,v,w){he(f.config.authDomain,f,"auth-domain-config-required"),he(f.config.apiKey,f,"invalid-api-key");const N={apiKey:f.config.apiKey,appName:f.name,authType:d,redirectUrl:m,v:L.SDK_VERSION,eventId:v};if(u instanceof No){u.setDefaultLanguage(f.languageCode),N.providerId=u.providerId||"",(0,ee.xb)(u.getCustomParameters())||(N.customParameters=JSON.stringify(u.getCustomParameters()));for(const[ze,It]of Object.entries(w||{}))N[ze]=It}if(u instanceof Aa){const ze=u.getScopes().filter(It=>""!==It);ze.length>0&&(N.scopes=ze.join(","))}f.tenantId&&(N.tid=f.tenantId);const Y=N;for(const ze of Object.keys(Y))void 0===Y[ze]&&delete Y[ze];const ue=yield f._getAppCheckToken(),Se=ue?`#${zu}=${encodeURIComponent(ue)}`:"";return`${function $f({config:f}){return f.emulator?ao(f,zE):`https://${f.authDomain}/${ls}`}(f)}?${(0,ee.xO)(Y).slice(1)}${Se}`})).apply(this,arguments)}const $u="webStorageSupport",q_=class H_{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yo,this._completeRedirectFn=Jl,this._overrideRedirectResult=M_}_openPopup(u,d,m,v){var w=this;return(0,C.Z)(function*(){var N;rn(null===(N=w.eventManagers[u._key()])||void 0===N?void 0:N.manager,"_initialize() not called before _openPopup()");const Y=yield za(u,d,m,Tn(),v);return function $_(f,u,d,m=500,v=600){const w=Math.max((window.screen.availHeight-v)/2,0).toString(),N=Math.max((window.screen.availWidth-m)/2,0).toString();let Y="";const ue=Object.assign(Object.assign({},bn),{width:m.toString(),height:v.toString(),top:w,left:N}),Se=(0,ee.z$)().toLowerCase();d&&(Y=oi(Se)?"_blank":d),qt(Se)&&(u=u||"http://localhost",ue.scrollbars="yes");const ze=Object.entries(ue).reduce((Li,[Uo,rc])=>`${Li}${Uo}=${rc},`,"");if(function gt(f=(0,ee.z$)()){var u;return De(f)&&!(null===(u=window.navigator)||void 0===u||!u.standalone)}(Se)&&"_self"!==Y)return function ju(f,u){const d=document.createElement("a");d.href=f,d.target=u;const m=document.createEvent("MouseEvent");m.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(m)}(u||"",Y),new zf(null);const It=window.open(u||"",Y,ze);he(It,f,"popup-blocked");try{It.focus()}catch{}return new zf(It)}(u,Y,Fn())})()}_openRedirect(u,d,m,v){var w=this;return(0,C.Z)(function*(){return yield w._originValidation(u),function g_(f){Lt().location.href=f}(yield za(u,d,m,Tn(),v)),new Promise(()=>{})})()}_initialize(u){const d=u._key();if(this.eventManagers[d]){const{manager:v,promise:w}=this.eventManagers[d];return v?Promise.resolve(v):(rn(w,"If manager is not set, promise should be"),w)}const m=this.initAndGetManager(u);return this.eventManagers[d]={promise:m},m.catch(()=>{delete this.eventManagers[d]}),m}initAndGetManager(u){var d=this;return(0,C.Z)(function*(){const m=yield function Fi(f){return Bo.apply(this,arguments)}(u),v=new Eo(u);return m.register("authEvent",w=>(he(w?.authEvent,u,"invalid-auth-event"),{status:v.onEvent(w.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[u._key()]={manager:v},d.iframes[u._key()]=m,v})()}_isIframeWebStorageSupported(u,d){this.iframes[u._key()].send($u,{type:$u},v=>{var w;const N=null===(w=v?.[0])||void 0===w?void 0:w[$u];void 0!==N&&d(!!N),mt(u,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(u){const d=u._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function Bf(f){return ec.apply(this,arguments)}(u)),this.originValidationPromises[d]}get _shouldInitProactively(){return _n()||Le()||De()}};class Ha{constructor(u){this.factorId=u}_process(u,d,m){switch(d.type){case"enroll":return this._finalizeEnroll(u,d.credential,m);case"signin":return this._finalizeSignIn(u,d.credential);default:return xt("unexpected MultiFactorSessionType")}}}class Qs extends Ha{constructor(u){super("phone"),this.credential=u}static _fromCredential(u){return new Qs(u)}_finalizeEnroll(u,d,m){return function ZS(f,u){return ae(f,"POST","/v2/accounts/mfaEnrollment:finalize",K(f,u))}(u,{idToken:d,displayName:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(u,d){return function Sf(f,u){return ae(f,"POST","/v2/accounts/mfaSignIn:finalize",K(f,u))}(u,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let $E=(()=>{class f{constructor(){}static assertion(d){return Qs._fromCredential(d)}}return f.FACTOR_ID="phone",f})();var W_="@firebase/auth";class l1{constructor(u){this.auth=u,this.internalListeners=new Map}getUid(){var u;return this.assertAuthConfigured(),(null===(u=this.auth.currentUser)||void 0===u?void 0:u.uid)||null}getToken(u){var d=this;return(0,C.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(u)}:null})()}addAuthTokenListener(u){if(this.assertAuthConfigured(),this.internalListeners.has(u))return;const d=this.auth.onIdTokenChanged(m=>{u(m?.stsTokenManager.accessToken||null)});this.internalListeners.set(u,d),this.updateProactiveRefresh()}removeAuthTokenListener(u){this.assertAuthConfigured();const d=this.internalListeners.get(u);d&&(this.internalListeners.delete(u),d(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ic=(0,ee.Pz)("authIdTokenMaxAge")||300;let qu=null;const Wu=f=>function(){var u=(0,C.Z)(function*(d){const m=d&&(yield d.getIdTokenResult()),v=m&&((new Date).getTime()-Date.parse(m.issuedAtTime))/1e3;if(v&&v>ic)return;const w=m?.token;qu!==w&&(qu=w,yield fetch(f,{method:w?"POST":"DELETE",headers:w?{Authorization:`Bearer ${w}`}:{}}))});return function(d){return u.apply(this,arguments)}}();function c1(f=(0,L.getApp)()){const u=(0,L._getProvider)(f,"auth");if(u.isInitialized())return u.getImmediate();const d=function zS(f,u){const d=(0,L._getProvider)(f,"auth");if(d.isInitialized()){const v=d.getImmediate(),w=d.getOptions();if((0,ee.vZ)(w,u??{}))return v;mt(v,"already-initialized")}return d.initialize({options:u})}(f,{popupRedirectResolver:q_,persistence:[Mu,gE,yo]}),m=(0,ee.Pz)("authTokenSyncURL");if(m){const w=Wu(m);(function Ws(f,u,d){(0,ee.m9)(f).beforeAuthStateChanged(u,d)})(d,w,()=>w(d.currentUser)),function Ef(f,u,d,m){(0,ee.m9)(f).onIdTokenChanged(u,d,m)}(d,N=>w(N))}const v=(0,ee.q4)("auth");return v&&aE(d,`http://${v}`),d}!function nc(f){(0,L._registerComponent)(new fn.wA("auth",(u,{options:d})=>{const m=u.getProvider("app").getImmediate(),v=u.getProvider("heartbeat"),w=u.getProvider("app-check-internal"),{apiKey:N,authDomain:Y}=m.options;he(N&&!N.includes(":"),"invalid-api-key",{appName:m.name});const ue={apiKey:N,authDomain:Y,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ht(f)},Se=new VS(m,v,w,ue);return function me(f,u){const d=u?.persistence||[],m=(Array.isArray(d)?d:[d]).map(te);u?.errorMap&&f._updateErrorMap(u.errorMap),f._initializeWithPersistence(m,u?.popupRedirectResolver)}(Se,d),Se},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((u,d,m)=>{u.getProvider("auth-internal").initialize()})),(0,L._registerComponent)(new fn.wA("auth-internal",u=>{const d=vn(u.getProvider("auth").getImmediate());return new l1(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,L.registerVersion)(W_,"1.5.1",function Hf(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(f)),(0,L.registerVersion)(W_,"1.5.1","esm2017")}("Browser")},58:(so,Gn,He)=>{He.d(Gn,{BH:()=>or,G6:()=>ao,L:()=>St,LL:()=>se,P0:()=>pn,Pz:()=>zt,Sg:()=>Vn,UG:()=>xt,ZB:()=>Oe,ZR:()=>ae,aH:()=>mt,b$:()=>kn,eu:()=>J,hl:()=>Q,jU:()=>rn,m9:()=>po,ne:()=>ar,pd:()=>qr,q4:()=>Kn,r3:()=>Qn,ru:()=>Tn,tV:()=>oe,uI:()=>he,vZ:()=>lo,w1:()=>zr,xO:()=>uo,xb:()=>Wi,z$:()=>lt,zd:()=>Hr});const Ne=function(P){const D=[];let b=0;for(let I=0;I<P.length;I++){let y=P.charCodeAt(I);y<128?D[b++]=y:y<2048?(D[b++]=y>>6|192,D[b++]=63&y|128):55296==(64512&y)&&I+1<P.length&&56320==(64512&P.charCodeAt(I+1))?(y=65536+((1023&y)<<10)+(1023&P.charCodeAt(++I)),D[b++]=y>>18|240,D[b++]=y>>12&63|128,D[b++]=y>>6&63|128,D[b++]=63&y|128):(D[b++]=y>>12|224,D[b++]=y>>6&63|128,D[b++]=63&y|128)}return D},fn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(P,D){if(!Array.isArray(P))throw Error("encodeByteArray takes an array as a parameter");this.init_();const b=D?this.byteToCharMapWebSafe_:this.byteToCharMap_,I=[];for(let y=0;y<P.length;y+=3){const M=P[y],te=y+1<P.length,Re=te?P[y+1]:0,Ae=y+2<P.length,Ge=Ae?P[y+2]:0;let qt=(15&Re)<<2|Ge>>6,Le=63&Ge;Ae||(Le=64,te||(qt=64)),I.push(b[M>>2],b[(3&M)<<4|Re>>4],b[qt],b[Le])}return I.join("")},encodeString(P,D){return this.HAS_NATIVE_SUPPORT&&!D?btoa(P):this.encodeByteArray(Ne(P),D)},decodeString(P,D){return this.HAS_NATIVE_SUPPORT&&!D?atob(P):function(P){const D=[];let b=0,I=0;for(;b<P.length;){const y=P[b++];if(y<128)D[I++]=String.fromCharCode(y);else if(y>191&&y<224){const M=P[b++];D[I++]=String.fromCharCode((31&y)<<6|63&M)}else if(y>239&&y<365){const Ae=((7&y)<<18|(63&P[b++])<<12|(63&P[b++])<<6|63&P[b++])-65536;D[I++]=String.fromCharCode(55296+(Ae>>10)),D[I++]=String.fromCharCode(56320+(1023&Ae))}else{const M=P[b++],te=P[b++];D[I++]=String.fromCharCode((15&y)<<12|(63&M)<<6|63&te)}}return D.join("")}(this.decodeStringToByteArray(P,D))},decodeStringToByteArray(P,D){this.init_();const b=D?this.charToByteMapWebSafe_:this.charToByteMap_,I=[];for(let y=0;y<P.length;){const M=b[P.charAt(y++)],Re=y<P.length?b[P.charAt(y)]:0;++y;const Ge=y<P.length?b[P.charAt(y)]:64;++y;const Ie=y<P.length?b[P.charAt(y)]:64;if(++y,null==M||null==Re||null==Ge||null==Ie)throw new Pn;I.push(M<<2|Re>>4),64!==Ge&&(I.push(Re<<4&240|Ge>>2),64!==Ie&&I.push(Ge<<6&192|Ie))}return I},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let P=0;P<this.ENCODED_VALS.length;P++)this.byteToCharMap_[P]=this.ENCODED_VALS.charAt(P),this.charToByteMap_[this.byteToCharMap_[P]]=P,this.byteToCharMapWebSafe_[P]=this.ENCODED_VALS_WEBSAFE.charAt(P),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[P]]=P,P>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(P)]=P,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(P)]=P)}}};class Pn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const St=function(P){return function(P){const D=Ne(P);return fn.encodeByteArray(D,!0)}(P).replace(/\./g,"")},oe=function(P){try{return fn.decodeString(P,!0)}catch(D){console.error("base64Decode failed: ",D)}return null};function Oe(P,D){if(!(D instanceof Object))return D;switch(D.constructor){case Date:return new Date(D.getTime());case Object:void 0===P&&(P={});break;case Array:P=[];break;default:return D}for(const b in D)!D.hasOwnProperty(b)||!ot(b)||(P[b]=Oe(P[b],D[b]));return P}function ot(P){return"__proto__"!==P}const Je=()=>{try{return function kt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const P=process.env.__FIREBASE_DEFAULTS__;return P?JSON.parse(P):void 0})()||(()=>{if(typeof document>"u")return;let P;try{P=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const D=P&&oe(P[1]);return D&&JSON.parse(D)})()}catch(P){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${P}`)}},Kn=P=>{var D,b;return null===(b=null===(D=Je())||void 0===D?void 0:D.emulatorHosts)||void 0===b?void 0:b[P]},pn=P=>{const D=Kn(P);if(!D)return;const b=D.lastIndexOf(":");if(b<=0||b+1===D.length)throw new Error(`Invalid host ${D} with no separate hostname and port!`);const I=parseInt(D.substring(b+1),10);return"["===D[0]?[D.substring(1,b-1),I]:[D.substring(0,b),I]},mt=()=>{var P;return null===(P=Je())||void 0===P?void 0:P.config},zt=P=>{var D;return null===(D=Je())||void 0===D?void 0:D[`_${P}`]};class or{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((D,b)=>{this.resolve=D,this.reject=b})}wrapCallback(D){return(b,I)=>{b?this.reject(b):this.resolve(I),"function"==typeof D&&(this.promise.catch(()=>{}),1===D.length?D(b):D(b,I))}}}function Vn(P,D){if(P.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const I=D||"demo-project",y=P.iat||0,M=P.sub||P.user_id;if(!M)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const te=Object.assign({iss:`https://securetoken.google.com/${I}`,aud:I,iat:y,exp:y+3600,auth_time:y,sub:M,user_id:M,firebase:{sign_in_provider:"custom",identities:{}}},P);return[St(JSON.stringify({alg:"none",type:"JWT"})),St(JSON.stringify(te)),""].join(".")}function lt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function he(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lt())}function xt(){var P;const D=null===(P=Je())||void 0===P?void 0:P.forceEnvironment;if("node"===D)return!0;if("browser"===D)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function rn(){return"object"==typeof self&&self.self===self}function Tn(){const P="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof P&&void 0!==P.id}function kn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function zr(){const P=lt();return P.indexOf("MSIE ")>=0||P.indexOf("Trident/")>=0}function ao(){return!xt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Q(){try{return"object"==typeof indexedDB}catch{return!1}}function J(){return new Promise((P,D)=>{try{let b=!0;const I="validate-browser-context-for-indexeddb-analytics-module",y=self.indexedDB.open(I);y.onsuccess=()=>{y.result.close(),b||self.indexedDB.deleteDatabase(I),P(!0)},y.onupgradeneeded=()=>{b=!1},y.onerror=()=>{var M;D((null===(M=y.error)||void 0===M?void 0:M.message)||"")}}catch(b){D(b)}})}class ae extends Error{constructor(D,b,I){super(b),this.code=D,this.customData=I,this.name="FirebaseError",Object.setPrototypeOf(this,ae.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,se.prototype.create)}}class se{constructor(D,b,I){this.service=D,this.serviceName=b,this.errors=I}create(D,...b){const I=b[0]||{},y=`${this.service}/${D}`,M=this.errors[D],te=M?function ye(P,D){return P.replace(pt,(b,I)=>{const y=D[I];return null!=y?String(y):`<${I}?>`})}(M,I):"Error";return new ae(y,`${this.serviceName}: ${te} (${y}).`,I)}}const pt=/\{\$([^}]+)}/g;function Qn(P,D){return Object.prototype.hasOwnProperty.call(P,D)}function Wi(P){for(const D in P)if(Object.prototype.hasOwnProperty.call(P,D))return!1;return!0}function lo(P,D){if(P===D)return!0;const b=Object.keys(P),I=Object.keys(D);for(const y of b){if(!I.includes(y))return!1;const M=P[y],te=D[y];if(Et(M)&&Et(te)){if(!lo(M,te))return!1}else if(M!==te)return!1}for(const y of I)if(!b.includes(y))return!1;return!0}function Et(P){return null!==P&&"object"==typeof P}function uo(P){const D=[];for(const[b,I]of Object.entries(P))Array.isArray(I)?I.forEach(y=>{D.push(encodeURIComponent(b)+"="+encodeURIComponent(y))}):D.push(encodeURIComponent(b)+"="+encodeURIComponent(I));return D.length?"&"+D.join("&"):""}function Hr(P){const D={};return P.replace(/^\?/,"").split("&").forEach(I=>{if(I){const[y,M]=I.split("=");D[decodeURIComponent(y)]=decodeURIComponent(M)}}),D}function qr(P){const D=P.indexOf("?");if(!D)return"";const b=P.indexOf("#",D);return P.substring(D,b>0?b:void 0)}function ar(P,D){const b=new lr(P,D);return b.subscribe.bind(b)}class lr{constructor(D,b){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=b,this.task.then(()=>{D(this)}).catch(I=>{this.error(I)})}next(D){this.forEachObserver(b=>{b.next(D)})}error(D){this.forEachObserver(b=>{b.error(D)}),this.close(D)}complete(){this.forEachObserver(D=>{D.complete()}),this.close()}subscribe(D,b,I){let y;if(void 0===D&&void 0===b&&void 0===I)throw new Error("Missing Observer.");y=function ui(P,D){if("object"!=typeof P||null===P)return!1;for(const b of D)if(b in P&&"function"==typeof P[b])return!0;return!1}(D,["next","error","complete"])?D:{next:D,error:b,complete:I},void 0===y.next&&(y.next=Ut),void 0===y.error&&(y.error=Ut),void 0===y.complete&&(y.complete=Ut);const M=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?y.error(this.finalError):y.complete()}catch{}}),this.observers.push(y),M}unsubscribeOne(D){void 0===this.observers||void 0===this.observers[D]||(delete this.observers[D],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(D){if(!this.finalized)for(let b=0;b<this.observers.length;b++)this.sendOne(b,D)}sendOne(D,b){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[D])try{b(this.observers[D])}catch(I){typeof console<"u"&&console.error&&console.error(I)}})}close(D){this.finalized||(this.finalized=!0,void 0!==D&&(this.finalError=D),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ut(){}function po(P){return P&&P._delegate?P._delegate:P}},401:(so,Gn,He)=>{function C(n){return"function"==typeof n}function ee(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const L=ee(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Ne(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class yt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(C(i))try{i()}catch(o){e=o instanceof L?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{Jt(o)}catch(s){e=e??[],s instanceof L?e=[...e,...s.errors]:e.push(s)}}if(e)throw new L(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Jt(e);else{if(e instanceof yt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ne(t,e)}remove(e){const{_finalizers:t}=this;t&&Ne(t,e),e instanceof yt&&e._removeParent(this)}}yt.EMPTY=(()=>{const n=new yt;return n.closed=!0,n})();const fn=yt.EMPTY;function Pn(n){return n instanceof yt||n&&"closed"in n&&C(n.remove)&&C(n.add)&&C(n.unsubscribe)}function Jt(n){C(n)?n():n.unsubscribe()}const St={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},oe={setTimeout(n,e,...t){const{delegate:i}=oe;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=oe;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function pe(n){oe.setTimeout(()=>{const{onUnhandledError:e}=St;if(!e)throw n;e(n)})}function Oe(){}const ot=bt("C",void 0,void 0);function bt(n,e,t){return{kind:n,value:e,error:t}}let Xe=null;function Je(n){if(St.useDeprecatedSynchronousErrorHandling){const e=!Xe;if(e&&(Xe={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=Xe;if(Xe=null,t)throw i}}else n()}class pn extends yt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Pn(e)&&e.add(this)):this.destination=rn}static create(e,t,i){return new Vn(e,t,i)}next(e){this.isStopped?xt(function Zn(n){return bt("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?xt(function kt(n){return bt("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?xt(ot,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const mt=Function.prototype.bind;function zt(n,e){return mt.call(n,e)}class or{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){lt(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){lt(i)}else lt(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){lt(t)}}}class Vn extends pn{constructor(e,t,i){let r;if(super(),C(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&St.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&zt(e.next,o),error:e.error&&zt(e.error,o),complete:e.complete&&zt(e.complete,o)}):r=e}this.destination=new or(r)}}function lt(n){St.useDeprecatedSynchronousErrorHandling?function Kn(n){St.useDeprecatedSynchronousErrorHandling&&Xe&&(Xe.errorThrown=!0,Xe.error=n)}(n):pe(n)}function xt(n,e){const{onStoppedNotification:t}=St;t&&oe.setTimeout(()=>t(n,e))}const rn={closed:!0,next:Oe,error:function he(n){throw n},complete:Oe},Tn="function"==typeof Symbol&&Symbol.observable||"@@observable";function kn(n){return n}function zr(n){return 0===n.length?kn:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let Ke=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const o=function Q(n){return n&&n instanceof pn||function ao(n){return n&&C(n.next)&&C(n.error)&&C(n.complete)}(n)&&Pn(n)}(t)?t:new Vn(t,i,r);return Je(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=sr(i))((r,o)=>{const s=new Vn({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[Tn](){return this}pipe(...t){return zr(t)(this)}toPromise(t){return new(t=sr(t))((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function sr(n){var e;return null!==(e=n??St.Promise)&&void 0!==e?e:Promise}const J=ee(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let W=(()=>{class n extends Ke{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new K(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new J}next(t){Je(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){Je(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Je(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:o}=this;return i||r?fn:(this.currentObservers=null,o.push(t),new yt(()=>{this.currentObservers=null,Ne(o,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){const t=new Ke;return t.source=this,t}}return n.create=(e,t)=>new K(e,t),n})();class K extends W{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:fn}}function ae(n){return C(n?.lift)}function se(n){return e=>{if(ae(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ye(n,e,t,i,r){return new pt(n,e,t,i,r)}class pt extends pn{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ve(n,e){return se((t,i)=>{let r=0;t.subscribe(ye(i,o=>{i.next(n.call(e,o,r++))}))})}var je=He(582);const Ct=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function sn(n){return C(n?.then)}function Kt(n){return C(n[Tn])}function mn(n){return Symbol.asyncIterator&&C(n?.[Symbol.asyncIterator])}function Yn(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const ci=function Qn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Wi(n){return C(n?.[ci])}function $r(n){return(0,je.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield(0,je.qq)(t.read());if(r)return yield(0,je.qq)(void 0);yield yield(0,je.qq)(i)}}finally{t.releaseLock()}})}function lo(n){return C(n?.getReader)}function Et(n){if(n instanceof Ke)return n;if(null!=n){if(Kt(n))return function co(n){return new Ke(e=>{const t=n[Tn]();if(C(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Ct(n))return function uo(n){return new Ke(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(sn(n))return function Hr(n){return new Ke(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,pe)})}(n);if(mn(n))return bi(n);if(Wi(n))return function qr(n){return new Ke(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(lo(n))return function ar(n){return bi($r(n))}(n)}throw Yn(n)}function bi(n){return new Ke(e=>{(function lr(n,e){var t,i,r,o;return(0,je.mG)(this,void 0,void 0,function*(){try{for(t=(0,je.KL)(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function cr(n,e,t,i=0,r=!1){const o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function Ut(n,e,t=1/0){return C(e)?Ut((i,r)=>ve((o,s)=>e(i,o,r,s))(Et(n(i,r))),t):("number"==typeof e&&(t=e),se((i,r)=>function ui(n,e,t,i,r,o,s,a){const l=[];let c=0,h=0,p=!1;const g=()=>{p&&!l.length&&!c&&e.complete()},_=x=>c<i?E(x):l.push(x),E=x=>{o&&e.next(x),c++;let T=!1;Et(t(x,h++)).subscribe(ye(e,V=>{r?.(V),o?_(V):e.next(V)},()=>{T=!0},void 0,()=>{if(T)try{for(c--;l.length&&c<i;){const V=l.shift();s?cr(e,s,()=>E(V)):E(V)}g()}catch(V){e.error(V)}}))};return n.subscribe(ye(e,_,()=>{p=!0,g()})),()=>{a?.()}}(i,r,n,t)))}function ur(n=1/0){return Ut(kn,n)}const On=new Ke(n=>n.complete());function Dn(n){return n&&C(n.schedule)}function ho(n){return n[n.length-1]}function fo(n){return C(ho(n))?n.pop():void 0}function Wr(n){return Dn(ho(n))?n.pop():void 0}function Bn(n,e=0){return se((t,i)=>{t.subscribe(ye(i,r=>cr(i,n,()=>i.next(r),e),()=>cr(i,n,()=>i.complete(),e),r=>cr(i,n,()=>i.error(r),e)))})}function Ei(n,e=0){return se((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function po(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ke(t=>{cr(t,e,()=>{const i=n[Symbol.asyncIterator]();cr(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function b(n,e){return e?function D(n,e){if(null!=n){if(Kt(n))return function dr(n,e){return Et(n).pipe(Ei(e),Bn(e))}(n,e);if(Ct(n))return function Xo(n,e){return new Ke(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(sn(n))return function xa(n,e){return Et(n).pipe(Ei(e),Bn(e))}(n,e);if(mn(n))return po(n,e);if(Wi(n))return function Fs(n,e){return new Ke(t=>{let i;return cr(t,e,()=>{i=n[ci](),cr(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){return void t.error(s)}o?t.complete():t.next(r)},0,!0)}),()=>C(i?.return)&&i.return()})}(n,e);if(lo(n))return function P(n,e){return po($r(n),e)}(n,e)}throw Yn(n)}(n,e):Et(n)}function I(...n){const e=Wr(n),t=function Xn(n,e){return"number"==typeof ho(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?Et(i[0]):ur(t)(b(i,e)):On}class y extends W{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function M(...n){return b(n,Wr(n))}function te(n={}){const{connector:e=(()=>new W),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,l,c=0,h=!1,p=!1;const g=()=>{a?.unsubscribe(),a=void 0},_=()=>{g(),s=l=void 0,h=p=!1},E=()=>{const x=s;_(),x?.unsubscribe()};return se((x,T)=>{c++,!p&&!h&&g();const V=l=l??e();T.add(()=>{c--,0===c&&!p&&!h&&(a=Re(E,r))}),V.subscribe(T),!s&&c>0&&(s=new Vn({next:k=>V.next(k),error:k=>{p=!0,g(),a=Re(_,t,k),V.error(k)},complete:()=>{h=!0,g(),a=Re(_,i),V.complete()}}),Et(x).subscribe(s))})(o)}}function Re(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new Vn({next:()=>{i.unsubscribe(),n()}});return Et(e(...t)).subscribe(i)}function Ae(n,e){return se((t,i)=>{let r=null,o=0,s=!1;const a=()=>s&&!r&&i.complete();t.subscribe(ye(i,l=>{r?.unsubscribe();let c=0;const h=o++;Et(n(l,h)).subscribe(r=ye(i,p=>i.next(e?e(l,p,h,c++):p),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Ge(n,e=kn){return n=n??Rt,se((t,i)=>{let r,o=!0;t.subscribe(ye(i,s=>{const a=e(s);(o||!n(r,a))&&(o=!1,r=a,i.next(s))}))})}function Rt(n,e){return n===e}function Ie(n){for(let e in n)if(n[e]===Ie)return e;throw Error("Could not find renamed property on target object.")}function qt(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Le(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Le).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function oi(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Ls=Ie({__forward_ref__:Ie});function $(n){return n.__forward_ref__=$,n.toString=function(){return Le(this())},n}function O(n){return de(n)?n():n}function de(n){return"function"==typeof n&&n.hasOwnProperty(Ls)&&n.__forward_ref__===$}function De(n){return n&&!!n.\u0275providers}const gt="https://g.co/ng/security#xss";class B extends Error{constructor(e,t){super(function _n(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function ke(n){return"string"==typeof n?n:null==n?"":String(n)}function Wh(n,e){throw new B(-201,!1)}function wi(n,e){null==n&&function Ze(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function me(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Tt(n){return{providers:n.providers||[],imports:n.imports||[]}}function au(n){return Xg(n,Ta)||Xg(n,lu)}function Xg(n,e){return n.hasOwnProperty(e)?n[e]:null}function Bl(n){return n&&(n.hasOwnProperty(Gh)||n.hasOwnProperty(lE))?n[Gh]:null}const Ta=Ie({\u0275prov:Ie}),Gh=Ie({\u0275inj:Ie}),lu=Ie({ngInjectableDef:Ie}),lE=Ie({ngInjectorDef:Ie});var ft=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ft||{});let Zh;function Gi(n){const e=Zh;return Zh=n,e}function uu(n,e,t){const i=au(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&ft.Optional?null:void 0!==e?e:void Wh(Le(n))}const Wt=globalThis;class re{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=me({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Bs={},ef="__NG_DI_FLAG__",fr="ngTempTokenPath",tf=/\n/gm,fu="__source";let Da;function es(n){const e=Da;return Da=n,e}function dE(n,e=ft.Default){if(void 0===Da)throw new B(-203,!1);return null===Da?uu(n,void 0,e):Da.get(n,e&ft.Optional?null:void 0,e)}function F(n,e=ft.Default){return(function cu(){return Zh}()||dE)(O(n),e)}function xe(n,e=ft.Default){return F(n,pu(e))}function pu(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Us(n){const e=[];for(let t=0;t<n.length;t++){const i=O(n[t]);if(Array.isArray(i)){if(0===i.length)throw new B(900,!1);let r,o=ft.Default;for(let s=0;s<i.length;s++){const a=i[s],l=rf(a);"number"==typeof l?-1===l?r=a.token:o|=l:r=a}e.push(F(r,o))}else e.push(F(i))}return e}function mu(n,e){return n[ef]=e,n.prototype[ef]=e,n}function rf(n){return n[ef]}function pr(n){return{toString:n}.toString()}var gu=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(gu||{}),Ar=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ar||{});const mo={},Ot=[],Fo=Ie({\u0275cmp:Ie}),sf=Ie({\u0275dir:Ie}),Sa=Ie({\u0275pipe:Ie}),n_=Ie({\u0275mod:Ie}),go=Ie({\u0275fac:Ie}),js=Ie({__NG_ELEMENT_ID__:Ie}),mr=Ie({__NG_ENV_ID__:Ie});function af(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}function lf(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const o=t[i++],s=t[i++],a=t[i++];n.setAttribute(e,s,a,o)}else{const o=r,s=t[++i];jl(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function _u(n){return 3===n||4===n||6===n}function jl(n){return 64===n.charCodeAt(0)}function Ra(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||cf(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function cf(n,e,t,i,r){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[o+1]=r));if(i===n[o+1])return void(n[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==i&&n.splice(o++,0,i),null!==r&&n.splice(o++,0,r)}const i_="ng-template";function uf(n,e,t){let i=0,r=!0;for(;i<n.length;){let o=n[i++];if("string"==typeof o&&r){const s=n[i++];if(t&&"class"===o&&-1!==af(s.toLowerCase(),e,0))return!0}else{if(1===o){for(;i<n.length&&"string"==typeof(o=n[i++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(r=!1)}}return!1}function vu(n){return 4===n.type&&n.value!==i_}function df(n,e,t){return e===(4!==n.type||t?n.value:i_)}function yu(n,e,t){let i=4;const r=n.attrs||[],o=function hf(n){for(let e=0;e<n.length;e++)if(_u(n[e]))return e;return n.length}(r);let s=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!s)if(4&i){if(i=2|1&i,""!==l&&!df(n,l,t)||""===l&&1===e.length){if(gr(i))return!1;s=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!uf(n.attrs,c,t)){if(gr(i))return!1;s=!0}continue}const p=r_(8&i?"class":l,r,vu(n),t);if(-1===p){if(gr(i))return!1;s=!0;continue}if(""!==c){let g;g=p>o?"":r[p+1].toLowerCase();const _=8&i?g:null;if(_&&-1!==af(_,c,0)||2&i&&c!==g){if(gr(i))return!1;s=!0}}}}else{if(!s&&!gr(i)&&!gr(l))return!1;if(s&&gr(l))continue;s=!1,i=l|1&i}}return gr(i)||s}function gr(n){return 0==(1&n)}function r_(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){const s=e[r];if(s===n)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function Eu(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function bu(n,e,t=!1){for(let i=0;i<e.length;i++)if(yu(n,e[i],t))return!0;return!1}function pf(n,e){return n?":not("+e.trim()+")":e}function mf(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&i){const a=n[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""!==r&&!gr(s)&&(e+=pf(o,r),r=""),i=s,o=o||!gr(i);t++}return""!==r&&(e+=pf(o,r)),e}function An(n){return pr(()=>{const e=a_(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===gu.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ar.Emulated,styles:n.styles||Ot,_:null,schemas:n.schemas||null,tView:null,id:""};Iu(t);const i=n.dependencies;return t.directiveDefs=zl(i,!1),t.pipeDefs=zl(i,!0),t.id=function fE(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function hE(n){return wt(n)||di(n)}function vf(n){return null!==n}function _t(n){return pr(()=>({type:n.type,bootstrap:n.bootstrap||Ot,declarations:n.declarations||Ot,imports:n.imports||Ot,exports:n.exports||Ot,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function wu(n,e){if(null==n)return mo;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),t[r]=i,e&&(e[r]=o)}return t}function qe(n){return pr(()=>{const e=a_(n);return Iu(e),e})}function wt(n){return n[Fo]||null}function di(n){return n[sf]||null}function hi(n){return n[Sa]||null}function Oi(n,e){const t=n[n_]||null;if(!t&&!0===e)throw new Error(`Type ${Le(n)} does not have '\u0275mod' property.`);return t}function a_(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||mo,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Ot,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:wu(n.inputs,e),outputs:wu(n.outputs)}}function Iu(n){n.features?.forEach(e=>e(n))}function zl(n,e){if(!n)return null;const t=e?hi:hE;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(vf)}const an=0,Ce=1,tt=2,ln=3,Gr=4,zs=5,xi=6,Pa=7,yn=8,ns=9,is=10,nt=11,$s=12,l_=13,rs=14,Nn=15,Hs=16,ka=17,Sr=18,$l=19,xu=20,os=21,Lo=22,Oa=23,qs=24,vt=25,Cu=1,c_=2,_o=7,Na=9,Ci=11;function _r(n){return Array.isArray(n)&&"object"==typeof n[Cu]}function fi(n){return Array.isArray(n)&&!0===n[Cu]}function Ef(n){return 0!=(4&n.flags)}function Ws(n){return n.componentOffset>-1}function wf(n){return 1==(1&n.flags)}function vo(n){return!!n.template}function u_(n){return 0!=(512&n[tt])}function Fa(n,e){return n.hasOwnProperty(go)?n[go]:null}let Fn=null,Du=!1;function Lt(n){const e=Fn;return Fn=n,e}const g_={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function __(n){if(!Gl(n)||n.dirty){if(!n.producerMustRecompute(n)&&!Wl(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function v_(n){n.dirty=!0,function Su(n){if(void 0===n.liveConsumerNode)return;const e=Du;Du=!0;try{for(const t of n.liveConsumerNode)t.dirty||v_(t)}finally{Du=e}}(n),n.consumerMarkedDirty?.(n)}function Ru(n){return n&&(n.nextProducerIndex=0),Lt(n)}function Tf(n,e){if(Lt(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Gl(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Zs(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Wl(n){ss(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(__(t),i!==t.version))return!0}return!1}function Df(n){if(ss(n),Gl(n))for(let e=0;e<n.producerNode.length;e++)Zs(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Zs(n,e){if(function Af(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),ss(n),1===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)Zs(n.producerNode[i],n.producerIndexOfThis[i]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];ss(r),r.producerIndexOfThis[i]=e}}function Gl(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function ss(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let vE=null;const x_=()=>{},xE=(()=>({...g_,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:x_}))();class C_{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Rr(){return T_}function T_(n){return n.type.prototype.ngOnChanges&&(n.setInput=Mf),CE}function CE(){const n=Pu(this),e=n?.current;if(e){const t=n.previous;if(t===mo)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function Mf(n,e,t,i){const r=this.declaredInputs[t],o=Pu(n)||function TE(n,e){return n[D_]=e}(n,{previous:mo,current:null}),s=o.current||(o.current={}),a=o.previous,l=a[r];s[r]=new C_(l&&l.currentValue,e,a===mo),n[i]=e}Rr.ngInherit=!0;const D_="__ngSimpleChanges__";function Pu(n){return n[D_]||null}const Mr=function(n,e,t){};function en(n){for(;Array.isArray(n);)n=n[an];return n}function Ou(n,e){return en(e[n])}function Un(n,e){return en(e[n.index])}function A_(n,e){return n.data[e]}function vr(n,e){const t=e[n];return _r(t)?t:t[an]}function as(n,e){return null==e?null:n[e]}function Nu(n){n[ka]=0}function SE(n){1024&n[tt]||(n[tt]|=1024,R_(n,1))}function Fu(n){1024&n[tt]&&(n[tt]&=-1025,R_(n,-1))}function R_(n,e){let t=n[ln];if(null===t)return;t[zs]+=e;let i=t;for(t=t[ln];null!==t&&(1===e&&1===i[zs]||-1===e&&0===i[zs]);)t[zs]+=e,i=t,t=t[ln]}const Ye={lFrame:U_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Vu(){return Ye.bindingsEnabled}function le(){return Ye.lFrame.lView}function Mt(){return Ye.lFrame.tView}function Gt(n){return Ye.lFrame.contextLView=n,n[yn]}function jt(n){return Ye.lFrame.contextLView=null,n}function pi(){let n=O_();for(;null!==n&&64===n.type;)n=n.parent;return n}function O_(){return Ye.lFrame.currentTNode}function bo(n,e){const t=Ye.lFrame;t.currentTNode=n,t.isParent=e}function Xl(){return Ye.lFrame.isParent}function Jl(){Ye.lFrame.isParent=!1}function Ni(){const n=Ye.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Ys(){return Ye.lFrame.bindingIndex++}function Vo(n){const e=Ye.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function OE(n,e){const t=Ye.lFrame;t.bindingIndex=t.bindingRootIndex=n,Bf(e)}function Bf(n){Ye.lFrame.currentDirectiveIndex=n}function F_(){return Ye.lFrame.currentQueryIndex}function Uf(n){Ye.lFrame.currentQueryIndex=n}function L_(n){const e=n[Ce];return 2===e.type?e.declTNode:1===e.type?n[xi]:null}function V_(n,e,t){if(t&ft.SkipSelf){let r=e,o=n;for(;!(r=r.parent,null!==r||t&ft.Host||(r=L_(o),null===r||(o=o[rs],10&r.type))););if(null===r)return!1;e=r,n=o}const i=Ye.lFrame=B_();return i.currentTNode=e,i.lView=n,!0}function ja(n){const e=B_(),t=n[Ce];Ye.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function B_(){const n=Ye.lFrame,e=null===n?null:n.child;return null===e?U_(n):e}function U_(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function j_(){const n=Ye.lFrame;return Ye.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const z_=j_;function jf(){const n=j_();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Fi(){return Ye.lFrame.selectedIndex}function Bo(n){Ye.lFrame.selectedIndex=n}function bn(){const n=Ye.lFrame;return A_(n.tView,n.selectedIndex)}let $_=!0;function ju(){return $_}function ls(n){$_=n}function zu(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),null!=h&&(n.destroyHooks??=[]).push(t,h)}}function za(n,e,t){$u(n,e,3,t)}function $a(n,e,t,i){(3&n[tt])===t&&$u(n,e,t,i)}function $f(n,e){let t=n[tt];(3&t)===e&&(t&=8191,t+=1,n[tt]=t)}function $u(n,e,t,i){const o=i??-1,s=e.length-1;let a=0;for(let l=void 0!==i?65535&n[ka]:0;l<s;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[ka]+=65536),(a<o||-1==o)&&(q_(n,t,e,l),n[ka]=(4294901760&n[ka])+l+2),l++}function H_(n,e){Mr(4,n,e);const t=Lt(null);try{e.call(n)}finally{Lt(t),Mr(5,n,e)}}function q_(n,e,t,i){const r=t[i]<0,o=t[i+1],a=n[r?-t[i]:t[i]];r?n[tt]>>13<n[ka]>>16&&(3&n[tt])===e&&(n[tt]+=8192,H_(a,o)):H_(a,o)}const Ha=-1;class Qs{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function Hf(n){return n!==Ha}function nc(n){return 32767&n}function ic(n,e){let t=function WE(n){return n>>16}(n),i=e;for(;t>0;)i=i[rs],t--;return i}let qu=!0;function Wu(n){const e=qu;return qu=n,e}const f=255,u=5;let d=0;const m={};function w(n,e){const t=Y(n,e);if(-1!==t)return t;const i=e[Ce];i.firstCreatePass&&(n.injectorIndex=e.length,N(i.data,n),N(e,null),N(i.blueprint,null));const r=ue(n,e),o=n.injectorIndex;if(Hf(r)){const s=nc(r),a=ic(r,e),l=a[Ce].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=r,o}function N(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Y(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function ue(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=u1(r),null===i)return Ha;if(t++,r=r[rs],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return Ha}function Se(n,e,t){!function v(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(js)&&(i=t[js]),null==i&&(i=t[js]=d++);const r=i&f;e.data[n+(r>>u)]|=1<<r}(n,e,t)}function It(n,e,t){if(t&ft.Optional||void 0!==n)return n;Wh()}function Li(n,e,t,i){if(t&ft.Optional&&void 0===i&&(i=null),!(t&(ft.Self|ft.Host))){const r=n[ns],o=Gi(void 0);try{return r?r.get(e,i,t&ft.Optional):uu(e,i,t&ft.Optional)}finally{Gi(o)}}return It(i,0,t)}function Uo(n,e,t,i=ft.Default,r){if(null!==n){if(2048&e[tt]&&!(i&ft.Self)){const s=function T$(n,e,t,i,r){let o=n,s=e;for(;null!==o&&null!==s&&2048&s[tt]&&!(512&s[tt]);){const a=rc(o,s,t,i|ft.Self,m);if(a!==m)return a;let l=o.parent;if(!l){const c=s[xu];if(c){const h=c.get(t,m,i);if(h!==m)return h}l=u1(s),s=s[rs]}o=l}return r}(n,e,t,i,m);if(s!==m)return s}const o=rc(n,e,t,i,m);if(o!==m)return o}return Li(e,t,i,r)}function rc(n,e,t,i,r){const o=function Z_(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(js)?n[js]:void 0;return"number"==typeof e?e>=0?e&f:GE:e}(t);if("function"==typeof o){if(!V_(e,n,i))return i&ft.Host?It(r,0,i):Li(e,t,i,r);try{let s;if(s=o(i),null!=s||i&ft.Optional)return s;Wh()}finally{z_()}}else if("number"==typeof o){let s=null,a=Y(n,e),l=Ha,c=i&ft.Host?e[Nn][xi]:null;for((-1===a||i&ft.SkipSelf)&&(l=-1===a?ue(n,e):e[a+8],l!==Ha&&qf(i,!1)?(s=e[Ce],a=nc(l),e=ic(l,e)):a=-1);-1!==a;){const h=e[Ce];if(Gu(o,a,h.data)){const p=G_(a,e,t,s,i,c);if(p!==m)return p}l=e[a+8],l!==Ha&&qf(i,e[Ce].data[a+8]===c)&&Gu(o,a,e)?(s=h,a=nc(l),e=ic(l,e)):a=-1}}return r}function G_(n,e,t,i,r,o){const s=e[Ce],a=s.data[n+8],h=qa(a,s,t,null==i?Ws(a)&&qu:i!=s&&0!=(3&a.type),r&ft.Host&&o===a);return null!==h?cs(e,s,h,a):m}function qa(n,e,t,i,r){const o=n.providerIndexes,s=e.data,a=1048575&o,l=n.directiveStart,h=o>>20,g=r?a+h:n.directiveEnd;for(let _=i?a:a+h;_<g;_++){const E=s[_];if(_<l&&t===E||_>=l&&E.type===t)return _}if(r){const _=s[l];if(_&&vo(_)&&_.type===t)return l}return null}function cs(n,e,t,i){let r=n[t];const o=e.data;if(function $E(n){return n instanceof Qs}(r)){const s=r;s.resolving&&function Vl(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new B(-200,`Circular dependency in DI detected for ${n}${t}`)}(function ht(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ke(n)}(o[t]));const a=Wu(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?Gi(s.injectImpl):null;V_(n,i,ft.Default);try{r=n[t]=s.factory(void 0,o,n,i),e.firstCreatePass&&t>=i.directiveStart&&function zE(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){const s=T_(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}(t,o[t],e)}finally{null!==c&&Gi(c),Wu(a),s.resolving=!1,z_()}}return r}function Gu(n,e,t){return!!(t[e+(n>>u)]&1<<n)}function qf(n,e){return!(n&ft.Self||n&ft.Host&&e)}class Ti{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return Uo(this._tNode,this._lView,e,pu(i),t)}}function GE(){return new Ti(pi(),le())}function Jn(n){return pr(()=>{const e=n.prototype.constructor,t=e[go]||Gf(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const o=r[go]||Gf(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Gf(n){return de(n)?()=>{const e=Gf(O(n));return e&&e()}:Fa(n)}function u1(n){const e=n[Ce],t=e.type;return 2===t?e.declTNode:1===t?n[xi]:null}const Ku="__parameters__";function Qu(n,e,t){return pr(()=>{const i=function ZE(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;const s=new r(...o);return a.annotation=s,a;function a(l,c,h){const p=l.hasOwnProperty(Ku)?l[Ku]:Object.defineProperty(l,Ku,{value:[]})[Ku];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function Ju(n,e){n.forEach(t=>Array.isArray(t)?Ju(t,e):e(t))}function h1(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Y_(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Zr(n,e,t){let i=ed(n,e);return i>=0?n[1|i]=t:(i=~i,function k$(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function KE(n,e){const t=ed(n,e);if(t>=0)return n[1|t]}function ed(n,e){return function f1(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}(n,e,1)}const Kr=mu(Qu("Optional"),8),X_=mu(Qu("SkipSelf"),4);function iv(n){return 128==(128&n.flags)}var Ga=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ga||{});const eH=/^>|^->|<!--|-->|--!>|<!-$/g,tH=/(<|>)/g,nH="\u200b$1\u200b";const ew=new Map;let iH=0;const nw="__ngContext__";function Zi(n,e){_r(e)?(n[nw]=e[$l],function oH(n){ew.set(n[$l],n)}(e)):n[nw]=e}let iw;function rw(n,e){return iw(n,e)}function Xf(n){const e=n[ln];return fi(e)?e[ln]:e}function k1(n){return N1(n[$s])}function O1(n){return N1(n[Gr])}function N1(n){for(;null!==n&&!fi(n);)n=n[Gr];return n}function id(n,e,t,i,r){if(null!=i){let o,s=!1;fi(i)?o=i:_r(i)&&(s=!0,i=i[an]);const a=en(i);0===n&&null!==t?null==r?B1(e,t,a):oc(e,t,a,r||null,!0):1===n&&null!==t?oc(e,t,a,r||null,!0):2===n?function uv(n,e,t){const i=lv(n,e);i&&function xH(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function DH(n,e,t,i,r){const o=t[_o];o!==en(t)&&id(e,n,i,o,r);for(let a=Ci;a<t.length;a++){const l=t[a];ep(l[Ce],l,n,e,i,o)}}(e,n,o,t,r)}}function ow(n,e){return n.createComment(function C1(n){return n.replace(eH,e=>e.replace(tH,nH))}(e))}function sv(n,e,t){return n.createElement(e,t)}function L1(n,e){const t=n[Na],i=t.indexOf(e);Fu(e),t.splice(i,1)}function av(n,e){if(n.length<=Ci)return;const t=Ci+e,i=n[t];if(i){const r=i[Hs];null!==r&&r!==n&&L1(r,i),e>0&&(n[t-1][Gr]=i[Gr]);const o=Y_(n,Ci+e);!function gH(n,e){ep(n,e,e[nt],2,null,null),e[an]=null,e[xi]=null}(i[Ce],i);const s=o[Sr];null!==s&&s.detachView(o[Ce]),i[ln]=null,i[Gr]=null,i[tt]&=-129}return i}function sw(n,e){if(!(256&e[tt])){const t=e[nt];e[Oa]&&Df(e[Oa]),e[qs]&&Df(e[qs]),t.destroyNode&&ep(n,e,t,3,null,null),function yH(n){let e=n[$s];if(!e)return aw(n[Ce],n);for(;e;){let t=null;if(_r(e))t=e[$s];else{const i=e[Ci];i&&(t=i)}if(!t){for(;e&&!e[Gr]&&e!==n;)_r(e)&&aw(e[Ce],e),e=e[ln];null===e&&(e=n),_r(e)&&aw(e[Ce],e),t=e&&e[Gr]}e=t}}(e)}}function aw(n,e){if(!(256&e[tt])){e[tt]&=-129,e[tt]|=256,function IH(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof Qs)){const o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=r[o[s]],l=o[s+1];Mr(4,a,l);try{l.call(a)}finally{Mr(5,a,l)}}else{Mr(4,r,o);try{o.call(r)}finally{Mr(5,r,o)}}}}}(n,e),function wH(n,e){const t=n.cleanup,i=e[Pa];if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else t[o].call(i[t[o+1]]);null!==i&&(e[Pa]=null);const r=e[os];if(null!==r){e[os]=null;for(let o=0;o<r.length;o++)(0,r[o])()}}(n,e),1===e[Ce].type&&e[nt].destroy();const t=e[Hs];if(null!==t&&fi(e[ln])){t!==e[ln]&&L1(t,e);const i=e[Sr];null!==i&&i.detachView(n)}!function sH(n){ew.delete(n[$l])}(e)}}function lw(n,e,t){return function V1(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[an];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:o}=n.data[i.directiveStart+r];if(o===Ar.None||o===Ar.Emulated)return null}return Un(i,t)}}(n,e.parent,t)}function oc(n,e,t,i,r){n.insertBefore(e,t,i,r)}function B1(n,e,t){n.appendChild(e,t)}function U1(n,e,t,i,r){null!==i?oc(n,e,t,i,r):B1(n,e,t)}function lv(n,e){return n.parentNode(e)}let cw,dv,fw,hv,$1=function z1(n,e,t){return 40&n.type?Un(n,t):null};function cv(n,e,t,i){const r=lw(n,i,e),o=e[nt],a=function j1(n,e,t){return $1(n,e,t)}(i.parent||e[xi],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)U1(o,r,t[l],a,!1);else U1(o,r,t,a,!1);void 0!==cw&&cw(o,i,e,t,r)}function Jf(n,e){if(null!==e){const t=e.type;if(3&t)return Un(e,n);if(4&t)return uw(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return Jf(n,i);{const r=n[e.index];return fi(r)?uw(-1,r):en(r)}}if(32&t)return rw(e,n)()||en(n[e.index]);{const i=q1(n,e);return null!==i?Array.isArray(i)?i[0]:Jf(Xf(n[Nn]),i):Jf(n,e.next)}}return null}function q1(n,e){return null!==e?n[Nn][xi].projection[e.projection]:null}function uw(n,e){const t=Ci+n+1;if(t<e.length){const i=e[t],r=i[Ce].firstChild;if(null!==r)return Jf(i,r)}return e[_o]}function dw(n,e,t,i,r,o,s){for(;null!=t;){const a=i[t.index],l=t.type;if(s&&0===e&&(a&&Zi(en(a),i),t.flags|=2),32!=(32&t.flags))if(8&l)dw(n,e,t.child,i,r,o,!1),id(e,n,r,a,o);else if(32&l){const c=rw(t,i);let h;for(;h=c();)id(e,n,r,h,o);id(e,n,r,a,o)}else 16&l?G1(n,e,i,t,r,o):id(e,n,r,a,o);t=s?t.projectionNext:t.next}}function ep(n,e,t,i,r,o){dw(t,i,n.firstChild,e,r,o,!1)}function G1(n,e,t,i,r,o){const s=t[Nn],l=s[xi].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)id(e,n,r,l[c],o);else{let c=l;const h=s[ln];iv(i)&&(c.flags|=128),dw(n,e,c,h,r,o,!0)}}function Z1(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function K1(n,e,t){const{mergedAttrs:i,classes:r,styles:o}=t;null!==i&&lf(n,e,i),null!==r&&Z1(n,e,r),null!==o&&function SH(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}function rd(n){return function hw(){if(void 0===dv&&(dv=null,Wt.trustedTypes))try{dv=Wt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return dv}()?.createHTML(n)||n}function od(){if(void 0!==fw)return fw;if(typeof document<"u")return document;throw new B(210,!1)}function pw(){if(void 0===hv&&(hv=null,Wt.trustedTypes))try{hv=Wt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return hv}function Y1(n){return pw()?.createHTML(n)||n}function X1(n){return pw()?.createScriptURL(n)||n}class J1{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gt})`}}function Za(n){return n instanceof J1?n.changingThisBreaksApplicationSecurity:n}function tp(n,e){const t=function BH(n){return n instanceof J1&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${gt})`)}return t===e}class UH{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(rd(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class jH{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=rd(e),t}}const $H=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function mw(n){return(n=String(n)).match($H)?n:"unsafe:"+n}function Xs(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function np(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const tR=Xs("area,br,col,hr,img,wbr"),nR=Xs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),iR=Xs("rp,rt"),gw=np(tR,np(nR,Xs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),np(iR,Xs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),np(iR,nR)),_w=Xs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),rR=np(_w,Xs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Xs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),HH=Xs("script,style,template");class qH{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!gw.hasOwnProperty(t))return this.sanitizedSomething=!0,!HH.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const o=i.item(r),s=o.name,a=s.toLowerCase();if(!rR.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;_w[a]&&(l=mw(l)),this.buf.push(" ",s,'="',oR(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();gw.hasOwnProperty(t)&&!tR.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(oR(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const WH=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,GH=/([^\#-~ |!])/g;function oR(n){return n.replace(/&/g,"&amp;").replace(WH,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(GH,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let fv;function vw(n){return"content"in n&&function KH(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var sd=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(sd||{});function Vi(n){const e=ip();return e?Y1(e.sanitize(sd.HTML,n)||""):tp(n,"HTML")?Y1(Za(n)):function ZH(n,e){let t=null;try{fv=fv||function eR(n){const e=new jH(n);return function zH(){try{return!!(new window.DOMParser).parseFromString(rd(""),"text/html")}catch{return!1}}()?new UH(e):e}(n);let i=e?String(e):"";t=fv.getInertBodyElement(i);let r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=t.innerHTML,t=fv.getInertBodyElement(i)}while(i!==o);return rd((new qH).sanitizeChildren(vw(t)||t))}finally{if(t){const i=vw(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}(od(),ke(n))}function kr(n){const e=ip();return e?e.sanitize(sd.URL,n)||"":tp(n,"URL")?Za(n):mw(ke(n))}function sR(n){const e=ip();if(e)return X1(e.sanitize(sd.RESOURCE_URL,n)||"");if(tp(n,"ResourceURL"))return X1(Za(n));throw new B(904,!1)}function ip(){const n=le();return n&&n[is].sanitizer}const rp=new re("ENVIRONMENT_INITIALIZER"),lR=new re("INJECTOR",-1),cR=new re("INJECTOR_DEF_TYPES");class yw{get(e,t=Bs){if(t===Bs){const i=new Error(`NullInjectorError: No provider for ${Le(e)}!`);throw i.name="NullInjectorError",i}return t}}function t3(...n){return{\u0275providers:uR(0,n),\u0275fromNgModule:!0}}function uR(n,...e){const t=[],i=new Set;let r;const o=s=>{t.push(s)};return Ju(e,s=>{const a=s;pv(a,o,[],i)&&(r||=[],r.push(a))}),void 0!==r&&dR(r,o),t}function dR(n,e){for(let t=0;t<n.length;t++){const{ngModule:i,providers:r}=n[t];Ew(r,o=>{e(o,i)})}}function pv(n,e,t,i){if(!(n=O(n)))return!1;let r=null,o=Bl(n);const s=!o&&wt(n);if(o||s){if(s&&!s.standalone)return!1;r=n}else{const l=n.ngModule;if(o=Bl(l),!o)return!1;r=l}const a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of l)pv(c,e,t,i)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let c;i.add(r);try{Ju(o.imports,h=>{pv(h,e,t,i)&&(c||=[],c.push(h))})}finally{}void 0!==c&&dR(c,e)}if(!a){const c=Fa(r)||(()=>new r);e({provide:r,useFactory:c,deps:Ot},r),e({provide:cR,useValue:r,multi:!0},r),e({provide:rp,useValue:()=>F(r),multi:!0},r)}const l=o.providers;if(null!=l&&!a){const c=n;Ew(l,h=>{e(h,c)})}}}return r!==n&&void 0!==n.providers}function Ew(n,e){for(let t of n)De(t)&&(t=t.\u0275providers),Array.isArray(t)?Ew(t,e):e(t)}const n3=Ie({provide:String,useValue:Ie});function ww(n){return null!==n&&"object"==typeof n&&n3 in n}function sc(n){return"function"==typeof n}const Iw=new re("Set Injector scope."),mv={},o3={};let xw;function gv(){return void 0===xw&&(xw=new yw),xw}class Yr{}class ad extends Yr{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Tw(e,s=>this.processProvider(s)),this.records.set(lR,ld(void 0,this)),r.has("environment")&&this.records.set(Yr,ld(void 0,this));const o=this.records.get(Iw);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(cR.multi,Ot,ft.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=es(this),i=Gi(void 0);try{return e()}finally{es(t),Gi(i)}}get(e,t=Bs,i=ft.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(mr))return e[mr](this);i=pu(i);const o=es(this),s=Gi(void 0);try{if(!(i&ft.SkipSelf)){let l=this.records.get(e);if(void 0===l){const c=function u3(n){return"function"==typeof n||"object"==typeof n&&n instanceof re}(e)&&au(e);l=c&&this.injectableDefInScope(c)?ld(Cw(e),mv):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(i&ft.Self?gv():this.parent).get(e,t=i&ft.Optional&&t===Bs?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[fr]=a[fr]||[]).unshift(Le(e)),o)throw a;return function No(n,e,t,i){const r=n[fr];throw e[fu]&&r.unshift(e[fu]),n.message=function Aa(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=Le(e);if(Array.isArray(e))r=e.map(Le).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Le(a)))}r=`{${o.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(tf,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[fr]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Gi(s),es(o)}}resolveInjectorInitializers(){const e=es(this),t=Gi(void 0);try{const r=this.get(rp.multi,Ot,ft.Self);for(const o of r)o()}finally{es(e),Gi(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(Le(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new B(205,!1)}processProvider(e){let t=sc(e=O(e))?e:O(e&&e.provide);const i=function a3(n){return ww(n)?ld(void 0,n.useValue):ld(pR(n),mv)}(e);if(sc(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=ld(void 0,mv,!0),r.factory=()=>Us(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===mv&&(t.value=o3,t.value=t.factory()),"object"==typeof t.value&&t.value&&function c3(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=O(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Cw(n){const e=au(n),t=null!==e?e.factory:Fa(n);if(null!==t)return t;if(n instanceof re)throw new B(204,!1);if(n instanceof Function)return function s3(n){const e=n.length;if(e>0)throw function Kf(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}(e,"?"),new B(204,!1);const t=function Ca(n){return n&&(n[Ta]||n[lu])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new B(204,!1)}function pR(n,e,t){let i;if(sc(n)){const r=O(n);return Fa(r)||Cw(r)}if(ww(n))i=()=>O(n.useValue);else if(function fR(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Us(n.deps||[]));else if(function hR(n){return!(!n||!n.useExisting)}(n))i=()=>F(O(n.useExisting));else{const r=O(n&&(n.useClass||n.provide));if(!function l3(n){return!!n.deps}(n))return Fa(r)||Cw(r);i=()=>new r(...Us(n.deps))}return i}function ld(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Tw(n,e){for(const t of n)Array.isArray(t)?Tw(t,e):t&&De(t)?Tw(t.\u0275providers,e):e(t)}const _v=new re("AppId",{providedIn:"root",factory:()=>d3}),d3="ng",mR=new re("Platform Initializer"),Io=new re("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),op=new re("AnimationModuleType"),Dw=new re("CSP nonce",{providedIn:"root",factory:()=>od().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let gR=(n,e,t)=>null;function Nw(n,e,t=!1){return gR(n,e,t)}class E3{}class yR{}class I3{resolveComponentFactory(e){throw function w3(n){const e=Error(`No component factory found for ${Le(n)}.`);return e.ngComponent=n,e}(e)}}let dd=(()=>{class n{static#e=this.NULL=new I3}return n})();function x3(){return hd(pi(),le())}function hd(n,e){return new ei(Un(n,e))}let ei=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=x3}return n})();function C3(n){return n instanceof ei?n.nativeElement:n}class lp{}let Js=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function T3(){const n=le(),t=vr(pi().index,n);return(_r(t)?t:n)[nt]}()}return n})(),D3=(()=>{class n{static#e=this.\u0275prov=me({token:n,providedIn:"root",factory:()=>null})}return n})();class Ka{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Vw=new Ka("16.2.12"),Bw={};function xR(n,e=null,t=null,i){const r=CR(n,e,t,i);return r.resolveInjectorInitializers(),r}function CR(n,e=null,t=null,i,r=new Set){const o=[t||Ot,t3(n)];return i=i||("object"==typeof n?void 0:Le(n)),new ad(o,e||gv(),i||null,r)}let jn=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=Bs;static#t=this.NULL=new yw;static create(t,i){if(Array.isArray(t))return xR({name:""},i,t,"");{const r=t.name??"";return xR({name:r},t.parent,t.providers,r)}}static#n=this.\u0275prov=me({token:n,providedIn:"any",factory:()=>F(lR)});static#i=this.__NG_ELEMENT_ID__=-1}return n})();function jw(n){return n.ngOriginalError}class ea{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&jw(e);for(;t&&jw(t);)t=jw(t);return t||null}}function $w(n){return e=>{setTimeout(n,void 0,e)}}const En=class O3 extends W{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=$w(o),r&&(r=$w(r)),s&&(s=$w(s)));const a=super.subscribe({next:r,error:o,complete:s});return e instanceof yt&&e.add(a),a}};function DR(...n){}class it{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new En(!1),this.onMicrotaskEmpty=new En(!1),this.onStable=new En(!1),this.onError=new En(!1),typeof Zone>"u")throw new B(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function N3(){const n="function"==typeof Wt.requestAnimationFrame;let e=Wt[n?"requestAnimationFrame":"setTimeout"],t=Wt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function V3(n){const e=()=>{!function L3(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Wt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,qw(n),n.isCheckStableRunning=!0,Hw(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),qw(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,o,s,a)=>{if(function U3(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(r,o,s,a);try{return AR(n),t.invokeTask(r,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),SR(n)}},onInvoke:(t,i,r,o,s,a,l)=>{try{return AR(n),t.invoke(r,o,s,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),SR(n)}},onHasTask:(t,i,r,o)=>{t.hasTask(r,o),i===r&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,qw(n),Hw(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,i,r,o)=>(t.handleError(r,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!it.isInAngularZone())throw new B(909,!1)}static assertNotInAngularZone(){if(it.isInAngularZone())throw new B(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,F3,DR,DR);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const F3={};function Hw(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function qw(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function AR(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function SR(n){n._nesting--,Hw(n)}class B3{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new En,this.onMicrotaskEmpty=new En,this.onStable=new En,this.onError=new En}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const RR=new re("",{providedIn:"root",factory:MR});function MR(){const n=xe(it);let e=!0;return I(new Ke(r=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{r.next(e),r.complete()})}),new Ke(r=>{let o;n.runOutsideAngular(()=>{o=n.onStable.subscribe(()=>{it.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});const s=n.onUnstable.subscribe(()=>{it.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{r.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(te()))}function PR(n){return n.ownerDocument.defaultView}function Ww(n){return n.ownerDocument}function ta(n){return n instanceof Function?n():n}let Gw=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=me({token:n,providedIn:"root",factory:()=>new n})}return n})();function cp(n){for(;n;){n[tt]|=64;const e=Xf(n);if(u_(n)&&!e)return n;n=e}return null}const LR=new re("",{providedIn:"root",factory:()=>!1});let xv=null;function jR(n,e){return n[e]??HR()}function zR(n,e){const t=HR();t.producerNode?.length&&(n[e]=xv,t.lView=n,xv=$R())}const Z3={...g_,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{cp(n.lView)},lView:null};function $R(){return Object.create(Z3)}function HR(){return xv??=$R(),xv}const at={};function z(n){qR(Mt(),le(),Fi()+n,!1)}function qR(n,e,t,i){if(!i)if(3==(3&e[tt])){const o=n.preOrderCheckHooks;null!==o&&za(e,o,t)}else{const o=n.preOrderHooks;null!==o&&$a(e,o,0,t)}Bo(t)}function q(n,e=ft.Default){const t=le();return null===t?F(n,e):Uo(pi(),t,O(n),e)}function Zw(){throw new Error("invalid")}function Cv(n,e,t,i,r,o,s,a,l,c,h){const p=e.blueprint.slice();return p[an]=r,p[tt]=140|i,(null!==c||n&&2048&n[tt])&&(p[tt]|=2048),Nu(p),p[ln]=p[rs]=n,p[yn]=t,p[is]=s||n&&n[is],p[nt]=a||n&&n[nt],p[ns]=l||n&&n[ns]||null,p[xi]=o,p[$l]=function rH(){return iH++}(),p[Lo]=h,p[xu]=c,p[Nn]=2==e.type?n[Nn]:p,p}function md(n,e,t,i,r){let o=n.data[e];if(null===o)o=function Kw(n,e,t,i,r){const o=O_(),s=Xl(),l=n.data[e]=function n5(n,e,t,i,r,o){let s=e?e.injectorIndex:-1,a=0;return function Ua(){return null!==Ye.skipHydrationRootTNode}()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==o&&(s?null==o.child&&null!==l.parent&&(o.child=l):null===o.next&&(o.next=l,l.prev=o)),l}(n,e,t,i,r),function N_(){return Ye.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=i,o.attrs=r;const s=function Ks(){const n=Ye.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return bo(o,!0),o}function up(n,e,t,i){if(0===t)return-1;const r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function WR(n,e,t,i,r){const o=jR(e,Oa),s=Fi(),a=2&i;try{Bo(-1),a&&e.length>vt&&qR(n,e,vt,!1),Mr(a?2:0,r);const c=a?o:null,h=Ru(c);try{null!==c&&(c.dirty=!1),t(i,r)}finally{Tf(c,h)}}finally{a&&null===e[Oa]&&zR(e,Oa),Bo(s),Mr(a?3:1,r)}}function Yw(n,e,t){if(Ef(e)){const i=Lt(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}finally{Lt(i)}}}function Qw(n,e,t){Vu()&&(function u5(n,e,t,i){const r=t.directiveStart,o=t.directiveEnd;Ws(t)&&function _5(n,e,t){const i=Un(e,n),r=GR(t);let s=16;t.signals?s=4096:t.onPush&&(s=64);const a=Tv(n,Cv(n,r,null,s,i,e,null,n[is].rendererFactory.createRenderer(i,t),null,null,null));n[e.index]=a}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||w(t,e),Zi(i,e);const s=t.initialInputs;for(let a=r;a<o;a++){const l=n.data[a],c=cs(e,n,a,t);Zi(c,e),null!==s&&v5(0,a-r,c,l,0,s),vo(l)&&(vr(t.index,e)[yn]=cs(e,n,a,t))}}(n,e,t,Un(t,e)),64==(64&t.flags)&&XR(n,e,t))}function Xw(n,e,t=Un){const i=e.localNames;if(null!==i){let r=e.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?t(e,n):n[s];n[r++]=a}}}function GR(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Jw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Jw(n,e,t,i,r,o,s,a,l,c,h){const p=vt+i,g=p+r,_=function Y3(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:at);return t}(p,g),E="function"==typeof c?c():c;return _[Ce]={type:n,blueprint:_,template:t,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:E,incompleteFirstPass:!1,ssrId:h}}let ZR=n=>null;function KR(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const o=n[r];null===i?YR(t,e,r,o):i.hasOwnProperty(r)&&YR(t,e,i[r],o)}return t}function YR(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function Qr(n,e,t,i,r,o,s,a){const l=Un(e,t);let h,c=e.inputs;!a&&null!=c&&(h=c[i])?(rI(n,t,h,i,r),Ws(e)&&function s5(n,e){const t=vr(e,n);16&t[tt]||(t[tt]|=64)}(t,e.index)):3&e.type&&(i=function o5(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=s?s(r,e.value||"",i):r,o.setProperty(l,i,r))}function eI(n,e,t,i){if(Vu()){const r=null===i?null:{"":-1},o=function h5(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(bu(e,s.selectors,!1))if(i||(i=[]),vo(s))if(null!==s.findHostDirectiveDefs){const a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s),tI(n,e,a.length)}else i.unshift(s),tI(n,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return null===i?null:[i,r]}(n,t);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&QR(n,e,t,s,r,a),r&&function f5(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const o=t[e[r+1]];if(null==o)throw new B(-301,!1);i.push(e[r],o)}}}(t,i,r)}t.mergedAttrs=Ra(t.mergedAttrs,t.attrs)}function QR(n,e,t,i,r,o){for(let c=0;c<i.length;c++)Se(w(t,e),n,i[c].type);!function m5(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let c=0;c<i.length;c++){const h=i[c];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,l=up(n,e,i.length,null);for(let c=0;c<i.length;c++){const h=i[c];t.mergedAttrs=Ra(t.mergedAttrs,h.hostAttrs),g5(n,t,e,l,h),p5(l,h,r),null!==h.contentQueries&&(t.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(t.flags|=64);const p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}!function r5(n,e,t){const r=e.directiveEnd,o=n.data,s=e.attrs,a=[];let l=null,c=null;for(let h=e.directiveStart;h<r;h++){const p=o[h],g=t?t.get(p):null,E=g?g.outputs:null;l=KR(p.inputs,h,l,g?g.inputs:null),c=KR(p.outputs,h,c,E);const x=null===l||null===s||vu(e)?null:y5(l,h,s);a.push(x)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t,o)}function XR(n,e,t){const i=t.directiveStart,r=t.directiveEnd,o=t.index,s=function NE(){return Ye.lFrame.currentDirectiveIndex}();try{Bo(o);for(let a=i;a<r;a++){const l=n.data[a],c=e[a];Bf(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&d5(l,c)}}finally{Bo(-1),Bf(s)}}function d5(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function tI(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function p5(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;vo(e)&&(t[""]=n)}}function g5(n,e,t,i,r){n.data[i]=r;const o=r.factory||(r.factory=Fa(r.type)),s=new Qs(o,vo(r),q);n.blueprint[i]=s,t[i]=s,function l5(n,e,t,i,r){const o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function c5(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,i,o)}}(n,e,i,up(n,t,r.hostVars,at),r)}function us(n,e,t,i,r,o){const s=Un(n,e);!function nI(n,e,t,i,r,o,s){if(null==o)n.removeAttribute(e,r,t);else{const a=null==s?ke(o):s(o,i||"",r);n.setAttribute(e,r,a,t)}}(e[nt],s,o,n.value,t,i,r)}function v5(n,e,t,i,r,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)JR(i,t,s[a++],s[a++],s[a++])}function JR(n,e,t,i,r){const o=Lt(null);try{const s=n.inputTransforms;null!==s&&s.hasOwnProperty(i)&&(r=s[i].call(e,r)),null!==n.setInput?n.setInput(e,r,t,i):e[i]=r}finally{Lt(o)}}function y5(n,e,t){let i=null,r=0;for(;r<t.length;){const o=t[r];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===i&&(i=[]);const s=n[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){i.push(o,s[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function eM(n,e,t,i){return[n,!0,!1,e,null,0,i,t,null,null,null]}function tM(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const o=t[i+1];if(-1!==o){const s=n.data[o];Uf(t[i]),s.contentQueries(2,e[o],o)}}}function Tv(n,e){return n[$s]?n[l_][Gr]=e:n[$s]=e,n[l_]=e,e}function iI(n,e,t){Uf(0);const i=Lt(null);try{e(n,t)}finally{Lt(i)}}function nM(n){return n[Pa]||(n[Pa]=[])}function iM(n){return n.cleanup||(n.cleanup=[])}function oM(n,e){const t=n[ns],i=t?t.get(ea,null):null;i&&i.handleError(e)}function rI(n,e,t,i,r){for(let o=0;o<t.length;){const s=t[o++],a=t[o++];JR(n.data[s],e[s],i,a,r)}}function b5(n,e){const t=vr(e,n),i=t[Ce];!function E5(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const r=t[an];null!==r&&null===t[Lo]&&(t[Lo]=Nw(r,t[ns])),oI(i,t,t[yn])}function oI(n,e,t){ja(e);try{const i=n.viewQuery;null!==i&&iI(1,i,t);const r=n.template;null!==r&&WR(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&tM(n,e),n.staticViewQueries&&iI(2,n.viewQuery,t);const o=n.components;null!==o&&function w5(n,e){for(let t=0;t<e.length;t++)b5(n,e[t])}(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[tt]&=-5,jf()}}let sM=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,i,r){const o=typeof Zone>"u"?null:Zone.current,s=function IE(n,e,t){const i=Object.create(xE);t&&(i.consumerAllowSignalWrites=!0),i.fn=n,i.schedule=e;const r=s=>{i.cleanupFn=s};return i.ref={notify:()=>v_(i),run:()=>{if(i.dirty=!1,i.hasRun&&!Wl(i))return;i.hasRun=!0;const s=Ru(i);try{i.cleanupFn(),i.cleanupFn=x_,i.fn(r)}finally{Tf(i,s)}},cleanup:()=>i.cleanupFn()},i.ref}(t,c=>{this.all.has(c)&&this.queue.set(c,o)},r);let a;this.all.add(s),s.notify();const l=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=i?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[t,i]of this.queue)this.queue.delete(t),i?i.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=me({token:n,providedIn:"root",factory:()=>new n})}return n})();function Dv(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?r=oi(r,a):2==o&&(i=oi(i,a+": "+e[++s]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function dp(n,e,t,i,r=!1){for(;null!==t;){const o=e[t.index];null!==o&&i.push(en(o)),fi(o)&&aM(o,i);const s=t.type;if(8&s)dp(n,e,t.child,i);else if(32&s){const a=rw(t,e);let l;for(;l=a();)i.push(l)}else if(16&s){const a=q1(e,t);if(Array.isArray(a))i.push(...a);else{const l=Xf(e[Nn]);dp(l[Ce],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function aM(n,e){for(let t=Ci;t<n.length;t++){const i=n[t],r=i[Ce].firstChild;null!==r&&dp(i[Ce],i,r,e)}n[_o]!==n[an]&&e.push(n[_o])}function Av(n,e,t,i=!0){const r=e[is],o=r.rendererFactory,s=r.afterRenderEventManager;o.begin?.(),s?.begin();try{lM(n,e,n.template,t)}catch(l){throw i&&oM(e,l),l}finally{o.end?.(),r.effectManager?.flush(),s?.end()}}function lM(n,e,t,i){const r=e[tt];if(256!=(256&r)){e[is].effectManager?.flush(),ja(e);try{Nu(e),function Vf(n){return Ye.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&WR(n,e,t,2,i);const s=3==(3&r);if(s){const c=n.preOrderCheckHooks;null!==c&&za(e,c,null)}else{const c=n.preOrderHooks;null!==c&&$a(e,c,0,null),$f(e,0)}if(function C5(n){for(let e=k1(n);null!==e;e=O1(e)){if(!e[c_])continue;const t=e[Na];for(let i=0;i<t.length;i++){SE(t[i])}}}(e),cM(e,2),null!==n.contentQueries&&tM(n,e),s){const c=n.contentCheckHooks;null!==c&&za(e,c)}else{const c=n.contentHooks;null!==c&&$a(e,c,1),$f(e,1)}!function K3(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const i=jR(e,qs);try{for(let r=0;r<t.length;r++){const o=t[r];if(o<0)Bo(~o);else{const s=o,a=t[++r],l=t[++r];OE(a,s),i.dirty=!1;const c=Ru(i);try{l(2,e[s])}finally{Tf(i,c)}}}}finally{null===e[qs]&&zR(e,qs),Bo(-1)}}(n,e);const a=n.components;null!==a&&dM(e,a,0);const l=n.viewQuery;if(null!==l&&iI(2,l,i),s){const c=n.viewCheckHooks;null!==c&&za(e,c)}else{const c=n.viewHooks;null!==c&&$a(e,c,2),$f(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[tt]&=-73,Fu(e)}finally{jf()}}}function cM(n,e){for(let t=k1(n);null!==t;t=O1(t))for(let i=Ci;i<t.length;i++)uM(t[i],e)}function T5(n,e,t){uM(vr(e,n),t)}function uM(n,e){if(!function S_(n){return 128==(128&n[tt])}(n))return;const t=n[Ce],i=n[tt];if(80&i&&0===e||1024&i||2===e)lM(t,n,t.template,n[yn]);else if(n[zs]>0){cM(n,1);const r=t.components;null!==r&&dM(n,r,1)}}function dM(n,e,t){for(let i=0;i<e.length;i++)T5(n,e[i],t)}class hp{get rootNodes(){const e=this._lView,t=e[Ce];return dp(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[yn]}set context(e){this._lView[yn]=e}get destroyed(){return 256==(256&this._lView[tt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[ln];if(fi(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(av(e,i),Y_(t,i))}this._attachedToViewContainer=!1}sw(this._lView[Ce],this._lView)}onDestroy(e){!function Lu(n,e){if(256==(256&n[tt]))throw new B(911,!1);null===n[os]&&(n[os]=[]),n[os].push(e)}(this._lView,e)}markForCheck(){cp(this._cdRefInjectingView||this._lView)}detach(){this._lView[tt]&=-129}reattach(){this._lView[tt]|=128}detectChanges(){Av(this._lView[Ce],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new B(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function vH(n,e){ep(n,e,e[nt],2,null,null)}(this._lView[Ce],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new B(902,!1);this._appRef=e}}class D5 extends hp{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Av(e[Ce],e,e[yn],!1)}checkNoChanges(){}get context(){return null}}class hM extends dd{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=wt(e);return new fp(t,this.ngModule)}}function fM(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class S5{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=pu(i);const r=this.injector.get(e,Bw,i);return r!==Bw||t===Bw?r:this.parentInjector.get(e,t,i)}}class fp extends yR{get inputs(){const e=this.componentDef,t=e.inputTransforms,i=fM(e.inputs);if(null!==t)for(const r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return fM(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function s_(n){return n.map(mf).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let o=(r=r||this.ngModule)instanceof Yr?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new S5(e,o):e,a=s.get(lp,null);if(null===a)throw new B(407,!1);const p={rendererFactory:a,sanitizer:s.get(D3,null),effectManager:s.get(sM,null),afterRenderEventManager:s.get(Gw,null)},g=a.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",E=i?function Q3(n,e,t,i){const o=i.get(LR,!1)||t===Ar.ShadowDom,s=n.selectRootElement(e,o);return function X3(n){ZR(n)}(s),s}(g,i,this.componentDef.encapsulation,s):sv(g,_,function A5(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(_)),V=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let k=null;null!==E&&(k=Nw(E,s,!0));const j=Jw(0,null,null,1,0,null,null,null,null,null,null),ie=Cv(null,j,null,V,null,null,p,g,s,null,k);let _e,Be;ja(ie);try{const et=this.componentDef;let Zt,Dr=null;et.findHostDirectiveDefs?(Zt=[],Dr=new Map,et.findHostDirectiveDefs(et,Zt,Dr),Zt.push(et)):Zt=[et];const Ur=function M5(n,e){const t=n[Ce],i=vt;return n[i]=e,md(t,i,2,"#host",null)}(ie,E),tE=function P5(n,e,t,i,r,o,s){const a=r[Ce];!function k5(n,e,t,i){for(const r of n)e.mergedAttrs=Ra(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(Dv(e,e.mergedAttrs,!0),null!==t&&K1(i,t,e))}(i,n,e,s);let l=null;null!==e&&(l=Nw(e,r[ns]));const c=o.rendererFactory.createRenderer(e,t);let h=16;t.signals?h=4096:t.onPush&&(h=64);const p=Cv(r,GR(t),null,h,r[n.index],n,o,c,null,null,l);return a.firstCreatePass&&tI(a,n,i.length-1),Tv(r,p),r[n.index]=p}(Ur,E,et,Zt,ie,p,g);Be=A_(j,vt),E&&function N5(n,e,t,i){if(i)lf(n,t,["ng-version",Vw.full]);else{const{attrs:r,classes:o}=function gf(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let o=n[i];if("string"==typeof o)2===r?""!==o&&e.push(o,n[++i]):8===r&&t.push(o);else{if(!gr(r))break;r=o}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&lf(n,t,r),o&&o.length>0&&Z1(n,t,o.join(" "))}}(g,et,E,i),void 0!==t&&function F5(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const o=t[r];i.push(null!=o?Array.from(o):null)}}(Be,this.ngContentSelectors,t),_e=function O5(n,e,t,i,r,o){const s=pi(),a=r[Ce],l=Un(s,r);QR(a,r,s,t,null,i);for(let h=0;h<t.length;h++)Zi(cs(r,a,s.directiveStart+h,s),r);XR(a,r,s),l&&Zi(l,r);const c=cs(r,a,s.directiveStart+s.componentOffset,s);if(n[yn]=r[yn]=c,null!==o)for(const h of o)h(c,e);return Yw(a,s,n),c}(tE,et,Zt,Dr,ie,[L5]),oI(j,ie,null)}finally{jf()}return new R5(this.componentType,_e,hd(Be,ie),ie,Be)}}class R5 extends E3{constructor(e,t,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new D5(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const o=this._rootLView;rI(o[Ce],o,r,e,t),this.previousInputValues.set(e,t),cp(vr(this._tNode.index,o))}}get injector(){return new Ti(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function L5(){const n=pi();zu(le()[Ce],n)}function Vt(n){let e=function pM(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(vo(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new B(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const s=n;s.inputs=Sv(n.inputs),s.inputTransforms=Sv(n.inputTransforms),s.declaredInputs=Sv(n.declaredInputs),s.outputs=Sv(n.outputs);const a=r.hostBindings;a&&j5(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&B5(n,l),c&&U5(n,c),qt(n.inputs,r.inputs),qt(n.declaredInputs,r.declaredInputs),qt(n.outputs,r.outputs),null!==r.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),qt(s.inputTransforms,r.inputTransforms)),vo(r)&&r.data.animation){const h=n.data;h.animation=(h.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===Vt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function V5(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Ra(r.hostAttrs,t=Ra(t,r.hostAttrs))}}(i)}function Sv(n){return n===mo?{}:n===Ot?[]:n}function B5(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function U5(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,o)=>{e(i,r,o),t(i,r,o)}:e}function j5(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function vM(n){const e=n.inputConfig,t={};for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];Array.isArray(r)&&r[2]&&(t[i]=r[2])}n.inputTransforms=t}function Rv(n){return!!sI(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function sI(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ds(n,e,t){return n[e]=t}function Ki(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Co(n,e,t,i){const r=le();return Ki(r,Ys(),e)&&(Mt(),us(bn(),r,n,e,t,i)),Co}function _d(n,e,t,i){return Ki(n,Ys(),t)?e+ke(t)+i:at}function ge(n,e,t,i,r,o,s,a){const l=le(),c=Mt(),h=n+vt,p=c.firstCreatePass?function hq(n,e,t,i,r,o,s,a,l){const c=e.consts,h=md(e,n,4,s||null,as(c,a));eI(e,t,h,as(c,l)),zu(e,h);const p=h.tView=Jw(2,h,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}(h,c,l,e,t,i,r,o,s):c.data[h];bo(p,!1);const g=MM(c,l,p,n);ju()&&cv(c,l,g,p),Zi(g,l),Tv(l,l[h]=eM(g,l,g,p)),wf(p)&&Qw(c,l,p),null!=s&&Xw(l,p,a)}let MM=function PM(n,e,t,i){return ls(!0),e[nt].createComment("")};function H(n,e,t){const i=le();return Ki(i,Ys(),e)&&Qr(Mt(),bn(),i,n,e,i[nt],t,!1),H}function hI(n,e,t,i,r){const s=r?"class":"style";rI(n,t,e.inputs[s],s,i)}function R(n,e,t,i){const r=le(),o=Mt(),s=vt+n,a=r[nt],l=o.firstCreatePass?function gq(n,e,t,i,r,o){const s=e.consts,l=md(e,n,2,i,as(s,r));return eI(e,t,l,as(s,o)),null!==l.attrs&&Dv(l,l.attrs,!1),null!==l.mergedAttrs&&Dv(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(s,o,r,e,t,i):o.data[s],c=OM(o,r,l,a,e,n);r[s]=c;const h=wf(l);return bo(l,!0),K1(a,c,l),32!=(32&l.flags)&&ju()&&cv(o,r,c,l),0===function RE(){return Ye.lFrame.elementDepthCount}()&&Zi(c,r),function Nf(){Ye.lFrame.elementDepthCount++}(),h&&(Qw(o,r,l),Yw(o,l,r)),null!==i&&Xw(r,l),R}function S(){let n=pi();Xl()?Jl():(n=n.parent,bo(n,!1));const e=n;(function M_(n){return Ye.skipHydrationRootTNode===n})(e)&&function PE(){Ye.skipHydrationRootTNode=null}(),function Ff(){Ye.lFrame.elementDepthCount--}();const t=Mt();return t.firstCreatePass&&(zu(t,n),Ef(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function Hu(n){return 0!=(8&n.flags)}(e)&&hI(t,e,le(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function W_(n){return 0!=(16&n.flags)}(e)&&hI(t,e,le(),e.stylesWithoutHost,!1),S}function $e(n,e,t,i){return R(n,e,t,i),S(),$e}let OM=(n,e,t,i,r,o)=>(ls(!0),sv(i,r,function zf(){return Ye.lFrame.currentNamespace}()));function vp(n,e,t){const i=le(),r=Mt(),o=n+vt,s=r.firstCreatePass?function yq(n,e,t,i,r){const o=e.consts,s=as(o,i),a=md(e,n,8,"ng-container",s);return null!==s&&Dv(a,s,!0),eI(e,t,a,as(o,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,r,i,e,t):r.data[o];bo(s,!0);const a=FM(r,i,s,n);return i[o]=a,ju()&&cv(r,i,a,s),Zi(a,i),wf(s)&&(Qw(r,i,s),Yw(r,s,i)),null!=t&&Xw(i,s),vp}function yp(){let n=pi();const e=Mt();return Xl()?Jl():(n=n.parent,bo(n,!1)),e.firstCreatePass&&(zu(e,n),Ef(n)&&e.queries.elementEnd(n)),yp}let FM=(n,e,t,i)=>(ls(!0),ow(e[nt],""));function zn(){return le()}function bp(n){return!!n&&"function"==typeof n.then}function LM(n){return!!n&&"function"==typeof n.subscribe}function Me(n,e,t,i){const r=le(),o=Mt(),s=pi();return function BM(n,e,t,i,r,o,s){const a=wf(i),c=n.firstCreatePass&&iM(n),h=e[yn],p=nM(e);let g=!0;if(3&i.type||s){const x=Un(i,e),T=s?s(x):x,V=p.length,k=s?ie=>s(en(ie[i.index])):i.index;let j=null;if(!s&&a&&(j=function wq(n,e,t,i){const r=n.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const s=r[o];if(s===t&&r[o+1]===i){const a=e[Pa],l=r[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(n,e,r,i.index)),null!==j)(j.__ngLastListenerFn__||j).__ngNextListenerFn__=o,j.__ngLastListenerFn__=o,g=!1;else{o=jM(i,e,h,o,!1);const ie=t.listen(T,r,o);p.push(o,ie),c&&c.push(r,k,V,V+1)}}else o=jM(i,e,h,o,!1);const _=i.outputs;let E;if(g&&null!==_&&(E=_[r])){const x=E.length;if(x)for(let T=0;T<x;T+=2){const _e=e[E[T]][E[T+1]].subscribe(o),Be=p.length;p.push(o,_e),c&&c.push(r,i.index,Be,-(Be+1))}}}(o,r,r[nt],s,n,e,i),Me}function UM(n,e,t,i){try{return Mr(6,e,t),!1!==t(i)}catch(r){return oM(n,r),!1}finally{Mr(7,e,t)}}function jM(n,e,t,i,r){return function o(s){if(s===Function)return i;cp(n.componentOffset>-1?vr(n.index,e):e);let l=UM(e,t,i,s),c=o.__ngNextListenerFn__;for(;c;)l=UM(e,t,c,s)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&s.preventDefault(),l}}function be(n=1){return function FE(n){return(Ye.lFrame.contextLView=function LE(n,e){for(;n>0;)e=e[rs],n--;return e}(n,Ye.lFrame.contextLView))[yn]}(n)}function lc(n,e,t,i,r){const o=le(),s=_d(o,e,t,i);return s!==at&&Qr(Mt(),bn(),o,n,s,o[nt],r,!1),lc}function Nv(n,e){return n<<17|e<<2}function Ya(n){return n>>17&32767}function fI(n){return 2|n}function cc(n){return(131068&n)>>2}function pI(n,e){return-131069&n|e<<2}function mI(n){return 1|n}function QM(n,e,t,i,r){const o=n[t+1],s=null===e;let a=i?Ya(o):cc(o),l=!1;for(;0!==a&&(!1===l||s);){const h=n[a+1];Mq(n[a],e)&&(l=!0,n[a+1]=i?mI(h):fI(h)),a=i?Ya(h):cc(h)}l&&(n[t+1]=i?fI(o):mI(o))}function Mq(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&ed(n,e)>=0}const gi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function XM(n){return n.substring(gi.key,gi.keyEnd)}function JM(n,e){const t=gi.textEnd;return t===e?-1:(e=gi.keyEnd=function Nq(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,gi.key=e,t),Cd(n,e,t))}function Cd(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function uc(n,e){return function jo(n,e,t,i){const r=le(),o=Mt(),s=Vo(2);o.firstUpdatePass&&sP(o,n,s,i),e!==at&&Ki(r,s,e)&&lP(o,o.data[Fi()],r,r[nt],n,r[s+1]=function Wq(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Le(Za(n)))),n}(e,t),i,s)}(n,e,null,!0),uc}function Fv(n){!function zo(n,e,t,i){const r=Mt(),o=Vo(2);r.firstUpdatePass&&sP(r,null,o,i);const s=le();if(t!==at&&Ki(s,o,t)){const a=r.data[Fi()];if(uP(a,i)&&!oP(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=oi(l,t||"")),hI(r,a,s,t,i)}else!function qq(n,e,t,i,r,o,s,a){r===at&&(r=Ot);let l=0,c=0,h=0<r.length?r[0]:null,p=0<o.length?o[0]:null;for(;null!==h||null!==p;){const g=l<r.length?r[l+1]:void 0,_=c<o.length?o[c+1]:void 0;let x,E=null;h===p?(l+=2,c+=2,g!==_&&(E=p,x=_)):null===p||null!==h&&h<p?(l+=2,E=h):(c+=2,E=p,x=_),null!==E&&lP(n,e,t,i,E,x,s,a),h=l<r.length?r[l]:null,p=c<o.length?o[c]:null}}(r,a,s,s[nt],s[o+1],s[o+1]=function $q(n,e,t){if(null==t||""===t)return Ot;const i=[],r=Za(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,o)}}(Hq,fs,n,!0)}function fs(n,e){for(let t=function kq(n){return function tP(n){gi.key=0,gi.keyEnd=0,gi.value=0,gi.valueEnd=0,gi.textEnd=n.length}(n),JM(n,Cd(n,0,gi.textEnd))}(e);t>=0;t=JM(e,t))Zr(n,XM(e),!0)}function oP(n,e){return e>=n.expandoStartIndex}function sP(n,e,t,i){const r=n.data;if(null===r[t+1]){const o=r[Fi()],s=oP(n,t);uP(o,i)&&null===e&&!s&&(e=!1),e=function Bq(n,e,t,i){const r=function ec(n){const e=Ye.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Ep(t=gI(null,n,e,t,i),e.attrs,i),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==r)if(t=gI(r,n,e,t,i),null===o){let l=function Uq(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==cc(i))return n[Ya(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=gI(null,n,e,l[1],i),l=Ep(l,e.attrs,i),function jq(n,e,t,i){n[Ya(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else o=function zq(n,e,t){let i;const r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++)i=Ep(i,n[o].hostAttrs,t);return Ep(i,e.attrs,t)}(n,e,i)}return void 0!==o&&(i?e.residualClasses=o:e.residualStyles=o),t}(r,o,e,i),function Sq(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,a=Ya(s),l=cc(s);n[i]=t;let h,c=!1;if(Array.isArray(t)?(h=t[1],(null===h||ed(t,h)>0)&&(c=!0)):h=t,r)if(0!==l){const g=Ya(n[a+1]);n[i+1]=Nv(g,a),0!==g&&(n[g+1]=pI(n[g+1],i)),n[a+1]=function Dq(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=Nv(a,0),0!==a&&(n[a+1]=pI(n[a+1],i)),a=i;else n[i+1]=Nv(l,0),0===a?a=i:n[l+1]=pI(n[l+1],i),l=i;c&&(n[i+1]=fI(n[i+1])),QM(n,h,i,!0),QM(n,h,i,!1),function Rq(n,e,t,i,r){const o=r?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&ed(o,e)>=0&&(t[i+1]=mI(t[i+1]))}(e,h,n,i,o),s=Nv(a,l),o?e.classBindings=s:e.styleBindings=s}(r,o,e,t,s,i)}}function gI(n,e,t,i,r){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],i=Ep(i,o.hostAttrs,r),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function Ep(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?r=s:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Zr(n,s,!!t||e[++o]))}return void 0===n?null:n}function Hq(n,e,t){const i=String(e);""!==i&&!i.includes(" ")&&Zr(n,i,t)}function lP(n,e,t,i,r,o,s,a){if(!(3&e.type))return;const l=n.data,c=l[a+1],h=function Aq(n){return 1==(1&n)}(c)?cP(l,e,t,r,cc(c),s):void 0;Lv(h)||(Lv(o)||function Tq(n){return 2==(2&n)}(c)&&(o=cP(l,null,t,r,a,s)),function AH(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=-1===i.indexOf("-")?void 0:Ga.DashCase;null==r?n.removeStyle(t,i,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Ga.Important),n.setStyle(t,i,r,o))}}(i,s,Ou(Fi(),t),r,o))}function cP(n,e,t,i,r,o){const s=null===e;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),h=c?l[1]:l,p=null===h;let g=t[r+1];g===at&&(g=p?Ot:void 0);let _=p?KE(g,i):h===i?g:void 0;if(c&&!Lv(_)&&(_=KE(l,i)),Lv(_)&&(a=_,s))return a;const E=n[r+1];r=s?Ya(E):cc(E)}if(null!==e){let l=o?e.residualClasses:e.residualStyles;null!=l&&(a=KE(l,i))}return a}function Lv(n){return void 0!==n}function uP(n,e){return 0!=(n.flags&(e?8:16))}function G(n,e=""){const t=le(),i=Mt(),r=n+vt,o=i.firstCreatePass?md(i,r,1,e,null):i.data[r],s=dP(i,t,o,e,n);t[r]=s,ju()&&cv(i,t,s,o),bo(o,!1)}let dP=(n,e,t,i,r)=>(ls(!0),function ov(n,e){return n.createText(e)}(e[nt],i));function ps(n){return Yi("",n,""),ps}function Yi(n,e,t){const i=le(),r=_d(i,n,e,t);return r!==at&&function na(n,e,t){const i=Ou(e,n);!function F1(n,e,t){n.setValue(e,t)}(n[nt],i,t)}(i,Fi(),r),Yi}function _I(n,e,t){const i=le();return Ki(i,Ys(),e)&&Qr(Mt(),bn(),i,n,e,i[nt],t,!0),_I}const Dd="en-US";let PP=Dd;function bI(n,e,t,i,r){if(n=O(n),Array.isArray(n))for(let o=0;o<n.length;o++)bI(n[o],e,t,i,r);else{const o=Mt(),s=le(),a=pi();let l=sc(n)?n:O(n.provide);const c=pR(n),h=1048575&a.providerIndexes,p=a.directiveStart,g=a.providerIndexes>>20;if(sc(n)||!n.multi){const _=new Qs(c,r,q),E=wI(l,e,r?h:h+g,p);-1===E?(Se(w(a,s),o,l),EI(o,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(_),s.push(_)):(t[E]=_,s[E]=_)}else{const _=wI(l,e,h+g,p),E=wI(l,e,h,h+g),T=E>=0&&t[E];if(r&&!T||!r&&!(_>=0&&t[_])){Se(w(a,s),o,l);const V=function fW(n,e,t,i,r){const o=new Qs(n,t,q);return o.multi=[],o.index=e,o.componentProviders=0,ik(o,r,i&&!t),o}(r?hW:dW,t.length,r,i,c);!r&&T&&(t[E].providerFactory=V),EI(o,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(V),s.push(V)}else EI(o,n,_>-1?_:E,ik(t[r?E:_],c,!r&&i));!r&&i&&T&&t[E].componentProviders++}}}function EI(n,e,t,i){const r=sc(e),o=function r3(n){return!!n.useClass}(e);if(r||o){const l=(o?O(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const h=c.indexOf(t);-1===h?c.push(t,[i,l]):c[h+1].push(i,l)}else c.push(t,l)}}}function ik(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function wI(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function dW(n,e,t,i){return II(this.multi,[])}function hW(n,e,t,i){const r=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=cs(t,t[Ce],this.providerFactory.index,i);o=a.slice(0,s),II(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],II(r,o);return o}function II(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Sn(n,e=[]){return t=>{t.providersResolver=(i,r)=>function uW(n,e,t){const i=Mt();if(i.firstCreatePass){const r=vo(n);bI(t,i.data,i.blueprint,r,!0),bI(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class hc{}class rk{}class xI extends hc{constructor(e,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new hM(this);const r=Oi(e);this._bootstrapComponents=ta(r.bootstrap),this._r3Injector=CR(e,t,[{provide:hc,useValue:this},{provide:dd,useValue:this.componentFactoryResolver},...i],Le(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class CI extends rk{constructor(e){super(),this.moduleType=e}create(e){return new xI(this.moduleType,e,[])}}class ok extends hc{constructor(e){super(),this.componentFactoryResolver=new hM(this),this.instance=null;const t=new ad([...e.providers,{provide:hc,useValue:this},{provide:dd,useValue:this.componentFactoryResolver}],e.parent||gv(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function TI(n,e,t=null){return new ok({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let gW=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=uR(0,t.type),r=i.length>0?TI([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=me({token:n,providedIn:"environment",factory:()=>new n(F(Yr))})}return n})();function sk(n){n.getStandaloneInjector=e=>e.get(gW).getOrCreateStandaloneInjector(n)}function $o(n,e,t,i){return function fk(n,e,t,i,r,o){const s=e+t;return Ki(n,s,r)?ds(n,s+1,o?i.call(o,r):i(r)):Ap(n,s+1)}(le(),Ni(),n,e,t,i)}function Dp(n,e,t,i,r){return function pk(n,e,t,i,r,o,s){const a=e+t;return function ac(n,e,t,i){const r=Ki(n,e,t);return Ki(n,e+1,i)||r}(n,a,r,o)?ds(n,a+2,s?i.call(s,r,o):i(r,o)):Ap(n,a+2)}(le(),Ni(),n,e,t,i,r)}function Ap(n,e){const t=n[e];return t===at?void 0:t}function UW(){return this._results[Symbol.iterator]()}class AI{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new En)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=AI.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=UW)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=function wo(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function M$(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function zW(n,e,t,i=!0){const r=e[Ce];if(function bH(n,e,t,i){const r=Ci+i,o=t.length;i>0&&(t[r-1][Gr]=e),i<o-Ci?(e[Gr]=t[r],h1(t,Ci+i,e)):(t.push(e),e[Gr]=null),e[ln]=t;const s=e[Hs];null!==s&&t!==s&&function EH(n,e){const t=n[Na];e[Nn]!==e[ln][ln][Nn]&&(n[c_]=!0),null===t?n[Na]=[e]:t.push(e)}(s,e);const a=e[Sr];null!==a&&a.insertView(n),e[tt]|=128}(r,e,n,t),i){const o=uw(t,n),s=e[nt],a=lv(s,n[_o]);null!==a&&function _H(n,e,t,i,r,o){i[an]=r,i[xi]=e,ep(n,i,t,1,r,o)}(r,n[xi],s,e,a,o)}}let ms=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=qW}return n})();const $W=ms,HW=class extends $W{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){const r=function jW(n,e,t,i){const r=e.tView,a=Cv(n,r,t,4096&n[tt]?4096:16,null,e,null,null,null,i?.injector??null,i?.hydrationInfo??null);a[Hs]=n[e.index];const c=n[Sr];return null!==c&&(a[Sr]=c.createEmbeddedView(r)),oI(r,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:i});return new hp(r)}};function qW(){return zv(pi(),le())}function zv(n,e){return 4&n.type?new HW(e,n,hd(n,e)):null}let To=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=QW}return n})();function QW(){return xk(pi(),le())}const XW=To,wk=class extends XW{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return hd(this._hostTNode,this._hostLView)}get injector(){return new Ti(this._hostTNode,this._hostLView)}get parentInjector(){const e=ue(this._hostTNode,this._hostLView);if(Hf(e)){const t=ic(e,this._hostLView),i=nc(e);return new Ti(t[Ce].data[i+8],t)}return new Ti(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Ik(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Ci}createEmbeddedView(e,t,i){let r,o;"number"==typeof i?r=i:null!=i&&(r=i.index,o=i.injector);const a=e.createEmbeddedViewImpl(t||{},o,null);return this.insertImpl(a,r,false),a}createComponent(e,t,i,r,o){const s=e&&!function Zf(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const x=t||{};a=x.index,i=x.injector,r=x.projectableNodes,o=x.environmentInjector||x.ngModuleRef}const l=s?e:new fp(wt(e)),c=i||this.parentInjector;if(!o&&null==l.ngModule){const T=(s?c:this.parentInjector).get(Yr,null);T&&(o=T)}wt(l.componentType??{});const _=l.create(c,r,null,o);return this.insertImpl(_.hostView,a,false),_}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,i){const r=e._lView;if(function AE(n){return fi(n[ln])}(r)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const c=r[ln],h=new wk(c,c[xi],c[ln]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(t),a=this._lContainer;return zW(a,r,s,!i),e.attachToViewContainerRef(),h1(SI(a),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Ik(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=av(this._lContainer,t);i&&(Y_(SI(this._lContainer),t),sw(i[Ce],i))}detach(e){const t=this._adjustIndex(e,-1),i=av(this._lContainer,t);return i&&null!=Y_(SI(this._lContainer),t)?new hp(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function Ik(n){return n[8]}function SI(n){return n[8]||(n[8]=[])}function xk(n,e){let t;const i=e[n.index];return fi(i)?t=i:(t=eM(i,e,null,n),e[n.index]=t,Tv(e,t)),Ck(t,e,n,i),new wk(t,n,e)}let Ck=function Tk(n,e,t,i){if(n[_o])return;let r;r=8&t.type?en(i):function JW(n,e){const t=n[nt],i=t.createComment(""),r=Un(e,n);return oc(t,lv(t,r),i,function CH(n,e){return n.nextSibling(e)}(t,r),!1),i}(e,t),n[_o]=r};class RI{constructor(e){this.queryList=e,this.matches=null}clone(){return new RI(this.queryList)}setDirty(){this.queryList.setDirty()}}class MI{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){const s=t.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new MI(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==kk(e,t).matches&&this.queries[t].setDirty()}}class Dk{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class PI{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,null!==t?t.push(o):t=[o])}return null!==t?new PI(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class kI{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new kI(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(e,t,n8(t,o)),this.matchTNodeWithReadOption(e,t,qa(t,e,o,!1,!1))}else i===ms?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,qa(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===ei||r===To||r===ms&&4&t.type)this.addMatch(t.index,-2);else{const o=qa(t,e,r,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function n8(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function r8(n,e,t,i){return-1===t?function i8(n,e){return 11&n.type?hd(n,e):4&n.type?zv(n,e):null}(e,n):-2===t?function o8(n,e,t){return t===ei?hd(e,n):t===ms?zv(e,n):t===To?xk(e,n):void 0}(n,e,i):cs(n,n[Ce],t,e)}function Ak(n,e,t,i){const r=e[Sr].queries[i];if(null===r.matches){const o=n.data,s=t.matches,a=[];for(let l=0;l<s.length;l+=2){const c=s[l];a.push(c<0?null:r8(e,o[c],s[l+1],t.metadata.read))}r.matches=a}return r.matches}function OI(n,e,t,i){const r=n.queries.getByIndex(t),o=r.matches;if(null!==o){const s=Ak(n,e,r,t);for(let a=0;a<o.length;a+=2){const l=o[a];if(l>0)i.push(s[a/2]);else{const c=o[a+1],h=e[-l];for(let p=Ci;p<h.length;p++){const g=h[p];g[Hs]===g[ln]&&OI(g[Ce],g,c,i)}if(null!==h[Na]){const p=h[Na];for(let g=0;g<p.length;g++){const _=p[g];OI(_[Ce],_,c,i)}}}}}return i}function NI(n){const e=le(),t=Mt(),i=F_();Uf(i+1);const r=kk(t,i);if(n.dirty&&function kf(n){return 4==(4&n[tt])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const o=r.crossesNgTemplate?OI(t,e,i,[]):Ak(t,e,r,i);n.reset(o,C3),n.notifyOnChanges()}return!0}return!1}function Sk(n,e,t){const i=Mt();i.firstCreatePass&&(function Pk(n,e,t){null===n.queries&&(n.queries=new PI),n.queries.track(new kI(e,t))}(i,new Dk(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),function Mk(n,e,t){const i=new AI(4==(4&t));(function t5(n,e,t,i){const r=nM(e);r.push(t),n.firstCreatePass&&iM(n).push(i,r.length-1)})(n,e,i,i.destroy),null===e[Sr]&&(e[Sr]=new MI),e[Sr].queries.push(new RI(i))}(i,le(),e)}function kk(n,e){return n.queries.getByIndex(e)}function Ok(n,e){return zv(n,e)}const zI=new re("Application Initializer");let $I=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=xe(zI,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const o=r();if(bp(o))t.push(o);else if(LM(o)){const s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Qk=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const gs=new re("LocaleId",{providedIn:"root",factory:()=>xe(gs,ft.Optional|ft.SkipSelf)||function A8(){return typeof $localize<"u"&&$localize.locale||Dd}()});let qv=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new y(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class M8{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let Xk=(()=>{class n{compileModuleSync(t){return new CI(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),o=ta(Oi(t).declarations).reduce((s,a)=>{const l=wt(a);return l&&s.push(new fp(l)),s},[]);return new M8(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const nO=new re(""),Gv=new re("");let ZI,WI=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ZI||(function J8(n){ZI=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{it.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||n)(F(it),F(GI),F(Gv))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})(),GI=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return ZI?.findTestabilityInTree(this,t,i)??null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Qa=null;const iO=new re("AllowMultipleToken"),KI=new re("PlatformDestroyListeners"),YI=new re("appBootstrapListener");class oO{constructor(e,t){this.name=e,this.token=t}}function aO(n,e,t=[]){const i=`Platform: ${e}`,r=new re(i);return(o=[])=>{let s=QI();if(!s||s.injector.get(iO,!1)){const a=[...t,...o,{provide:r,useValue:!0}];n?n(a):function n9(n){if(Qa&&!Qa.get(iO,!1))throw new B(400,!1);(function rO(){!function yE(n){vE=n}(()=>{throw new B(600,!1)})})(),Qa=n;const e=n.get(cO);(function sO(n){n.get(mR,null)?.forEach(t=>t())})(n)}(function lO(n=[],e){return jn.create({name:e,providers:[{provide:Iw,useValue:"platform"},{provide:KI,useValue:new Set([()=>Qa=null])},...n]})}(a,i))}return function r9(n){const e=QI();if(!e)throw new B(401,!1);return e}()}}function QI(){return Qa?.get(cO)??null}let cO=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function o9(n="zone.js",e){return"noop"===n?new B3:"zone.js"===n?new it(e):n}(i?.ngZone,function uO(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const o=function mW(n,e,t){return new xI(n,e,t)}(t.moduleType,this.injector,function mO(n){return[{provide:it,useFactory:n},{provide:rp,multi:!0,useFactory:()=>{const e=xe(a9,{optional:!0});return()=>e.initialize()}},{provide:pO,useFactory:s9},{provide:RR,useFactory:MR}]}(()=>r)),s=o.injector.get(ea,null);return r.runOutsideAngular(()=>{const a=r.onError.subscribe({next:l=>{s.handleError(l)}});o.onDestroy(()=>{Zv(this._modules,o),a.unsubscribe()})}),function dO(n,e,t){try{const i=t();return bp(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(s,r,()=>{const a=o.injector.get($I);return a.runInitializers(),a.donePromise.then(()=>(function kP(n){wi(n,"Expected localeId to be defined"),"string"==typeof n&&(PP=n.toLowerCase().replace(/_/g,"-"))}(o.injector.get(gs,Dd)||Dd),this._moduleDoBootstrap(o),o))})})}bootstrapModule(t,i=[]){const r=hO({},i);return function e9(n,e,t){const i=new CI(t);return Promise.resolve(i)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,r))}_moduleDoBootstrap(t){const i=t.injector.get(Xa);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new B(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new B(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(KI,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||n)(F(jn))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function hO(n,e){return Array.isArray(e)?e.reduce(hO,n):{...n,...e}}let Xa=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=xe(pO),this.zoneIsStable=xe(RR),this.componentTypes=[],this.components=[],this.isStable=xe(qv).hasPendingTasks.pipe(Ae(t=>t?M(!1):this.zoneIsStable),Ge(),te()),this._injector=xe(Yr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof yR;if(!this._injector.get($I).done)throw!r&&function Ma(n){const e=wt(n)||di(n)||hi(n);return null!==e&&e.standalone}(t),new B(405,!1);let s;s=r?t:this._injector.get(dd).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function t9(n){return n.isBoundToModule}(s)?void 0:this._injector.get(hc),c=s.create(jn.NULL,[],i||s.selector,a),h=c.location.nativeElement,p=c.injector.get(nO,null);return p?.registerApplication(h),c.onDestroy(()=>{this.detachView(c.hostView),Zv(this.components,c),p?.unregisterApplication(h)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new B(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;Zv(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(YI,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Zv(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new B(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zv(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const pO=new re("",{providedIn:"root",factory:()=>xe(ea).handleError.bind(void 0)});function s9(){const n=xe(it),e=xe(ea);return t=>n.runOutsideAngular(()=>e.handleError(t))}let a9=(()=>{class n{constructor(){this.zone=xe(it),this.applicationRef=xe(Xa)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let Kv=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=c9}return n})();function c9(n){return function u9(n,e,t){if(Ws(n)&&!t){const i=vr(n.index,e);return new hp(i,i)}return 47&n.type?new hp(e[Nn],e):null}(pi(),le(),16==(16&n))}class bO{constructor(){}supports(e){return Rv(e)}create(e){return new g9(e)}}const m9=(n,e)=>e;class g9{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||m9}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){const s=!i||t&&t.currentIndex<wO(i,r,o)?t:i,a=wO(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{o||(o=[]);const c=a-r,h=l-r;if(c!=h){for(let g=0;g<c;g++){const _=g<o.length?o[g]:o[g]=0,E=_+g;h<=E&&E<c&&(o[g]=_+1)}o[s.previousIndex]=h-c}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Rv(e))throw new B(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,o,s,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(i&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),i=!0),t=t._next}else r=0,function Z5(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{s=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,s)?(i&&(t=this._verifyReinsertion(t,a,s,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new _9(t,i),o,r),e}_verifyReinsertion(e,t,i,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,o=e._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new EO),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new EO),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class _9{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class v9{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class EO{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new v9,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function wO(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class IO{constructor(){}supports(e){return e instanceof Map||sI(e)}create(){return new y9}}class y9{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||sI(e)))throw new B(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const o=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}const i=new b9(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class b9{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function xO(){return new Xv([new bO])}let Xv=(()=>{class n{static#e=this.\u0275prov=me({token:n,providedIn:"root",factory:xO});constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||xO()),deps:[[n,new X_,new Kr]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new B(901,!1)}}return n})();function CO(){return new Pp([new IO])}let Pp=(()=>{class n{static#e=this.\u0275prov=me({token:n,providedIn:"root",factory:CO});constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||CO()),deps:[[n,new X_,new Kr]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new B(901,!1)}}return n})();const I9=aO(null,"core",[]);let x9=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(i){return new(i||n)(F(Xa))};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({})}return n})();function Rd(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let ix=null;function Ja(){return ix}class V9{}const Dt=new re("DocumentToken");let rx=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:function(){return xe(U9)},providedIn:"platform"})}return n})();const B9=new re("Location Initialized");let U9=(()=>{class n extends rx{constructor(){super(),this._doc=xe(Dt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ja().getBaseHref(this._doc)}onPopState(t){const i=Ja().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Ja().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function ox(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function OO(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ia(n){return n&&"?"!==n[0]?"?"+n:n}let pc=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:function(){return xe(NO)},providedIn:"root"})}return n})();const sx=new re("appBaseHref");let NO=(()=>{class n extends pc{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??xe(Dt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ox(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+ia(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){const s=this.prepareExternalUrl(r+ia(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){const s=this.prepareExternalUrl(r+ia(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(F(rx),F(sx,8))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),j9=(()=>{class n extends pc{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=ox(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+ia(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+ia(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(F(rx),F(sx,8))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})(),kp=(()=>{class n{constructor(t){this._subject=new En,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function H9(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(OO(FO(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+ia(i))}normalize(t){return n.stripTrailingSlash(function $9(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,FO(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ia(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ia(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static#e=this.normalizeQueryParams=ia;static#t=this.joinWithSlash=ox;static#n=this.stripTrailingSlash=OO;static#i=this.\u0275fac=function(i){return new(i||n)(F(pc))};static#r=this.\u0275prov=me({token:n,factory:function(){return function z9(){return new kp(F(pc))}()},providedIn:"root"})}return n})();function FO(n){return n.replace(/\/index.html$/,"")}function qO(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,o]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}const gx=/\s+/,WO=[];let uy=(()=>{class n{constructor(t,i,r,o){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=o,this.initialClasses=WO,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(gx):WO}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(gx):t}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const i of t)this._updateState(i,!0);else if(null!=t)for(const i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){const r=this.stateMap.get(t);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){(t=t.trim()).length>0&&t.split(gx).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static#e=this.\u0275fac=function(i){return new(i||n)(q(Xv),q(Pp),q(ei),q(Js))};static#t=this.\u0275dir=qe({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class SG{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let el=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,o,s)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new SG(r.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)i.remove(null===o?void 0:o);else if(null!==o){const a=i.get(o);i.move(a,s),ZO(a,r)}});for(let r=0,o=i.length;r<o;r++){const a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{ZO(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(q(To),q(ms),q(Xv))};static#t=this.\u0275dir=qe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function ZO(n,e){n.context.$implicit=e.item}let So=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new RG,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){KO("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){KO("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(q(To),q(ms))};static#t=this.\u0275dir=qe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class RG{constructor(){this.$implicit=null,this.ngIf=null}}function KO(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Le(e)}'.`)}let XO=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({})}return n})();const JO="browser";function dy(n){return"server"===n}let o7=(()=>{class n{static#e=this.\u0275prov=me({token:n,providedIn:"root",factory:()=>new s7(F(Dt),window)})}return n})();class s7{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function a7(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const o=r.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class eN{}class R7 extends V9{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ix extends R7{static makeCurrent(){!function L9(n){ix||(ix=n)}(new Ix)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function M7(){return Lp=Lp||document.querySelector("base"),Lp?Lp.getAttribute("href"):null}();return null==t?null:function P7(n){py=py||document.createElement("a"),py.setAttribute("href",n);const e=py.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Lp=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return qO(document.cookie,e)}}let py,Lp=null,O7=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();const xx=new re("EventManagerPlugins");let oN=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new B(5101,!1);return this._eventNameToPlugin.set(t,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(F(xx),F(it))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();class sN{constructor(e){this._doc=e}}const Cx="ng-app-id";let aN=(()=>{class n{constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=dy(o),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Cx}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const o=r.get(t);return o.usage+=i,o.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===t)return r.delete(i),o.removeAttribute(Cx),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(Cx,this.appId),s}}addStyleToHost(t,i){const r=this.getStyleElement(t,i);t.appendChild(r);const o=this.styleRef,s=o.get(i)?.elements;s?s.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(F(Dt),F(_v),F(Dw,8),F(Io))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();const Tx={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Dx=/%COMP%/g,V7=new re("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function cN(n,e){return e.map(t=>t.replace(Dx,n))}let Ax=(()=>{class n{constructor(t,i,r,o,s,a,l,c=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=dy(a),this.defaultRenderer=new Sx(t,s,l,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Ar.ShadowDom&&(i={...i,encapsulation:Ar.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof dN?r.applyToHost(t):r instanceof Rx&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let o=r.get(i.id);if(!o){const s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(i.encapsulation){case Ar.Emulated:o=new dN(l,c,i,this.appId,h,s,a,p);break;case Ar.ShadowDom:return new z7(l,c,t,i,s,a,this.nonce,p);default:o=new Rx(l,c,i,h,s,a,p)}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(F(oN),F(aN),F(_v),F(V7),F(Dt),F(Io),F(it),F(Dw))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();class Sx{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Tx[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(uN(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(uN(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new B(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const o=Tx[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=Tx[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Ga.DashCase|Ga.Important)?e.style.setProperty(t,i,r&Ga.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Ga.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=Ja().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function uN(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class z7 extends Sx{constructor(e,t,i,r,o,s,a,l){super(e,o,s,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=cN(r.id,r.styles);for(const h of c){const p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Rx extends Sx{constructor(e,t,i,r,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?cN(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class dN extends Rx{constructor(e,t,i,r,o,s,a,l){const c=r+"-"+i.id;super(e,t,i,o,s,a,l,c),this.contentAttr=function B7(n){return"_ngcontent-%COMP%".replace(Dx,n)}(c),this.hostAttr=function U7(n){return"_nghost-%COMP%".replace(Dx,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let $7=(()=>{class n extends sN{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(F(Dt))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();const hN=["alt","control","meta","shift"],H7={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},q7={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let W7=(()=>{class n extends sN{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const o=n.parseEventName(i),s=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ja().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=n._normalizeKey(i.pop());let s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),hN.forEach(c=>{const h=i.indexOf(c);h>-1&&(i.splice(h,1),s+=c+".")}),s+=o,0!=i.length||0===o.length)return null;const l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(t,i){let r=H7[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),hN.forEach(s=>{s!==r&&(0,q7[s])(t)&&(o+=s+".")}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(i){return new(i||n)(F(Dt))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();const pN=[{provide:Io,useValue:JO},{provide:mR,useValue:function G7(){Ix.makeCurrent()},multi:!0},{provide:Dt,useFactory:function K7(){return function kH(n){fw=n}(document),document},deps:[]}],Y7=aO(I9,"browser",pN),Q7=new re(""),mN=[{provide:Gv,useClass:class k7{addToWindow(e){Wt.getAngularTestability=(i,r=!0)=>{const o=e.findTestabilityInTree(i,r);if(null==o)throw new B(5103,!1);return o},Wt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Wt.getAllAngularRootElements=()=>e.getAllRootElements(),Wt.frameworkStabilizers||(Wt.frameworkStabilizers=[]),Wt.frameworkStabilizers.push(i=>{const r=Wt.getAllAngularTestabilities();let o=r.length,s=!1;const a=function(l){s=s||l,o--,0==o&&i(s)};r.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?Ja().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:nO,useClass:WI,deps:[it,GI,Gv]},{provide:WI,useClass:WI,deps:[it,GI,Gv]}],gN=[{provide:Iw,useValue:"root"},{provide:ea,useFactory:function Z7(){return new ea},deps:[]},{provide:xx,useClass:$7,multi:!0,deps:[Dt,it,Io]},{provide:xx,useClass:W7,multi:!0,deps:[Dt]},Ax,aN,oN,{provide:lp,useExisting:Ax},{provide:eN,useClass:O7,deps:[]},[]];let _N=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:_v,useValue:t.appId}]}}static#e=this.\u0275fac=function(i){return new(i||n)(F(Q7,12))};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({providers:[...gN,...mN],imports:[XO,x9]})}return n})(),vN=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(i){return new(i||n)(F(Dt))};static#t=this.\u0275prov=me({token:n,factory:function(i){let r=null;return r=i?new i:function J7(){return new vN(F(Dt))}(),r},providedIn:"root"})}return n})();typeof window<"u"&&window;var ne=He(861),mc=He(217),tn=He(58),Fr=He(534),_s=He(879),wN=He(537);He(365),(0,Fr.registerVersion)("firebase","10.7.1","app");class sZ extends yt{constructor(e,t){super()}schedule(e,t=0){return this}}const my={setInterval(n,e,...t){const{delegate:i}=my;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=my;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class gy extends sZ{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return my.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&my.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ne(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const Px={now:()=>(Px.delegate||Date).now(),delegate:void 0};class Vp{constructor(e,t=Vp.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}Vp.now=Px.now;class _y extends Vp{constructor(e,t=Vp.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const cZ=new class lZ extends _y{}(class aZ extends gy{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return null!=i&&i>0||null==i&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}}),Bp=new _y(gy),uZ=Bp;function Bi(n,e,t){const i=C(n)||e||t?{next:n,error:e,complete:t}:n;return i?se((r,o)=>{var s;null===(s=i.subscribe)||void 0===s||s.call(i);let a=!0;r.subscribe(ye(o,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),o.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),o.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),o.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):kn}const Pd=new Ka("ANGULARFIRE2_VERSION");const kx=(n,e)=>{const t=e?[e]:(0,Fr.getApps)(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(s=>{i.includes(s)||i.push(s)})}),i};class Ox{constructor(){return kx(dZ)}}const dZ="app-check";function kd(){}class xN{zone;delegate;constructor(e,t=cZ){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){const r=this.zone;return this.delegate.schedule(function(s){r.runGuarded(()=>{e.apply(this,[s])})},t,i)}}class hZ{zone;task=null;constructor(e){this.zone=e}call(e,t){const i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",kd,{},kd,kd)),t.pipe(Bi({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let vy=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new xN(Zone.current)),this.insideAngular=t.run(()=>new xN(Zone.current,Bp)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(F(it))};static \u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Od(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function gc(n){return Od().ngZone.run(()=>n())}function Jr(n){return function pZ(n){return function(t){return(t=t.lift(new hZ(n.ngZone))).pipe(Ei(n.outsideAngular),Bn(n.insideAngular))}}(Od())(n)}const mZ=(n,e)=>function(){const i=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),gc(()=>n.apply(void 0,i))},_c=(n,e)=>function(){let t;const i=arguments;for(let o=0;o<arguments.length;o++)"function"==typeof i[o]&&(e&&(t||=gc(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",kd,{},kd,kd))),i[o]=mZ(i[o],t));const r=function fZ(n){return Od().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,i));if(!e){if(r instanceof Ke){const o=Od();return r.pipe(Ei(o.outsideAngular),Bn(o.insideAngular))}return gc(()=>r)}return r instanceof Ke?r.pipe(Jr):r instanceof Promise?gc(()=>new Promise((o,s)=>r.then(a=>gc(()=>o(a)),a=>gc(()=>s(a))))):"function"==typeof r&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),r.apply(this,arguments)}:gc(()=>r)};var sa=He(106);sa.Z.registerVersion("firebase","10.7.1","app-compat");const vZ=["ngOnDestroy"];class CN{constructor(e){return e}}const yy=new re("angularfire2.app.options"),by=new re("angularfire2.app.name");function Nx(n,e,t){const r="object"==typeof t&&t||{};r.name=r.name||"string"==typeof t&&t||"[DEFAULT]";const s=sa.Z.apps.filter(a=>a&&a.name===r.name)[0]||e.runOutsideAngular(()=>sa.Z.initializeApp(n,r));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){const a=!!module.hot;EZ("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new CN(s)}const EZ=(n,...e)=>{},wZ={provide:CN,useFactory:Nx,deps:[yy,it,[new Kr,by]]};let IZ=(()=>{class n{static initializeApp(t,i){return{ngModule:n,providers:[{provide:yy,useValue:t},{provide:by,useValue:i}]}}constructor(t){sa.Z.registerVersion("angularfire",Pd.full,"core"),sa.Z.registerVersion("angularfire",Pd.full,"app-compat"),sa.Z.registerVersion("angular",Vw.full,t.toString())}static \u0275fac=function(i){return new(i||n)(F(Io))};static \u0275mod=_t({type:n});static \u0275inj=Tt({providers:[wZ]})}return n})();function TN(n,e,t,i,r){const[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return function xZ(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(r,s)||(DN("error",`${e} was already initialized on the ${t} Firebase App with different settings.${CZ?" You may need to reload as Firebase is not HMR aware.":""}`),DN("warn",{is:r,was:s})),o;{const a=i();return globalThis.\u0275AngularfireInstanceCache.push([n,a,r]),a}}const CZ=typeof module<"u"&&!!module.hot,DN=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[];class TZ extends W{constructor(e=1/0,t=1/0,i=Px){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;t||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){const s=t.now();let a=0;for(let l=1;l<i.length&&i[l]<=s;l+=2)a=l;a&&i.splice(0,a+1)}}}function AN(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=n??1/0,te({connector:()=>new TZ(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}const Ey=ee(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function _i(n,e){return se((t,i)=>{let r=0;t.subscribe(ye(i,o=>n.call(e,o,r++)&&i.next(o)))})}function Ro(n){return n<=0?()=>On:se((e,t)=>{let i=0;e.subscribe(ye(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function wy(n){return se((e,t)=>{let i=!1;e.subscribe(ye(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function SN(n=DZ){return se((e,t)=>{let i=!1;e.subscribe(ye(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function DZ(){return new Ey}function nl(n,e){const t=arguments.length>=2;return i=>i.pipe(n?_i((r,o)=>n(r,o,i)):kn,Ro(1),t?wy(e):SN(()=>new Ey))}function RN(n,e){return C(e)?Ae(()=>n,e):Ae(()=>n)}const MN=new re("angularfire2.auth.use-emulator"),PN=new re("angularfire2.auth.settings"),kN=new re("angularfire2.auth.tenant-id"),ON=new re("angularfire2.auth.langugage-code"),NN=new re("angularfire2.auth.use-device-language"),FN=new re("angularfire.auth.persistence"),LN=(n,e,t,i,r,o,s,a)=>TN(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),i&&(l.tenantId=i),l.languageCode=r,o&&l.useDeviceLanguage(),s)for(const[c,h]of Object.entries(s))l.settings[c]=h;return a&&l.setPersistence(a),l},[t,i,r,o,s,a]);let Iy=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,i,r,o,s,a,l,c,h,p,g,_){const E=new W,x=M(void 0).pipe(Bn(s.outsideAngular),Ae(()=>o.runOutsideAngular(()=>Promise.resolve().then(He.bind(He,365)))),ve(()=>Nx(t,o,i)),ve(T=>LN(T,o,a,c,h,p,l,g)),AN({bufferSize:1,refCount:!1}));if(dy(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=M(null);else{x.pipe(nl()).subscribe();const T=x.pipe(Ae(j=>j.getRedirectResult().then(ie=>ie,()=>null)),Jr,AN({bufferSize:1,refCount:!1})),V=x.pipe(Ae(j=>new Ke(ie=>({unsubscribe:o.runOutsideAngular(()=>j.onAuthStateChanged(_e=>ie.next(_e),_e=>ie.error(_e),()=>ie.complete()))})))),k=x.pipe(Ae(j=>new Ke(ie=>({unsubscribe:o.runOutsideAngular(()=>j.onIdTokenChanged(_e=>ie.next(_e),_e=>ie.error(_e),()=>ie.complete()))}))));this.authState=T.pipe(RN(V),Ei(s.outsideAngular),Bn(s.insideAngular)),this.user=T.pipe(RN(k),Ei(s.outsideAngular),Bn(s.insideAngular)),this.idToken=this.user.pipe(Ae(j=>j?b(j.getIdToken()):M(null))),this.idTokenResult=this.user.pipe(Ae(j=>j?b(j.getIdTokenResult()):M(null))),this.credential=I(T,E,this.authState.pipe(_i(j=>!j))).pipe(ve(j=>j?.user?j:null),Ei(s.outsideAngular),Bn(s.insideAngular))}return((n,e,t,i={})=>new Proxy(n,{get:(r,o)=>t.runOutsideAngular(()=>{if(n[o])return i?.spy?.get&&i.spy.get(o,n[o]),n[o];if(vZ.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(a=>{const l=a?.[o];return"function"==typeof l?l.bind(a):l?.then?l.then(c=>t.run(()=>c)):t.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>s[l],apply:(a,l,c)=>s.then(h=>{const p=h?.(...c);return i?.spy?.apply&&i.spy.apply(o,c,p),p})})})}))(this,x,o,{spy:{apply:(T,V,k)=>{(T.startsWith("signIn")||T.startsWith("createUser"))&&k.then(j=>E.next(j))}}})}static \u0275fac=function(i){return new(i||n)(F(yy),F(by,8),F(Io),F(it),F(vy),F(MN,8),F(PN,8),F(kN,8),F(ON,8),F(NN,8),F(FN,8),F(Ox,8))};static \u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),SZ=(()=>{class n{constructor(){sa.Z.registerVersion("angularfire",Pd.full,"auth-compat")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=_t({type:n});static \u0275inj=Tt({providers:[Iy]})}return n})();const VN=new re("COOKIE_OPTIONS"),Fx=new re("COOKIE_WRITER");function Up(n){return null==n}function il(n){return!Up(n)}function UN(n,e){return e?{path:il(e.path)?e.path:n.path,domain:il(e.domain)?e.domain:n.domain,expires:il(e.expires)?e.expires:n.expires,secure:il(e.secure)?e.secure:n.secure,sameSite:il(e.sameSite)?e.sameSite:n.sameSite,httpOnly:il(e.httpOnly)?e.httpOnly:n.httpOnly,storeUnencoded:il(e.storeUnencoded)?e.storeUnencoded:n.storeUnencoded}:n}function jN(n){try{return decodeURIComponent(n)}catch{return n}}let xy=(()=>{class n{constructor(t={},i){this.injector=i,this.defaultOptions={path:this.injector.get(sx,"/"),domain:void 0,expires:void 0,secure:!1,httpOnly:!1},this.options=UN(this.defaultOptions,t)}}return n.\u0275fac=function(t){return new(t||n)(F(VN),F(jn))},n.\u0275prov=me({token:n,factory:n.\u0275fac}),n})(),vc=(()=>{class n{constructor(t,i,r){this.document=t,this.optionsProvider=i,this.cookieWriterService=r,this.options=this.optionsProvider.options}hasKey(t){return il(this.get(t))}get(t){return this.getAll()?.[t]}getObject(t){const i=this.get(t);if(!Up(i))return""===i?{}:JSON.parse(i)}getAll(){return function RZ(n){let i,r,o,s,a,e={},t="";if(n!==t)for(t=n,i=t.split(";"),e={},o=0;o<i.length;o++)r=i[o],s=r.indexOf("="),s>0&&(a=jN(r.substring(0,s).trim()),Up(e[a])&&(e[a]=jN(r.substring(s+1).trim())));return e}(this.cookieWriterService.readAllAsString())}put(t,i,r){const o=UN(this.options,r);this.cookieWriterService.write(t,i,o)}putObject(t,i,r){this.put(t,JSON.stringify(i),r)}remove(t,i){this.put(t,void 0,i)}removeAll(t){const i=this.getAll();Object.keys(i).forEach(r=>this.remove(r,t))}}return n.\u0275fac=function(t){return new(t||n)(F(Dt),F(xy),F(Fx))},n.\u0275prov=me({token:n,factory:n.\u0275fac}),n})(),PZ=(()=>{class n{constructor(t){this.document=t}readAllAsString(){return this.document.cookie||""}write(t,i,r){this.document.cookie=function MZ(n,e,t){let r,i=t?.expires;Up(e)?(i="Thu, 01 Jan 1970 00:00:00 GMT",r=""):r=e,function BN(n){return"string"==typeof n}(i)&&(i=new Date(i));const o=t?.storeUnencoded?e:encodeURIComponent(r);let s=encodeURIComponent(n)+"="+o;s+=t?.path?";path="+t.path:"",s+=t?.domain?";domain="+t.domain:"",s+=i?";expires="+i.toUTCString():"",s+=t?.sameSite?"; SameSite="+t.sameSite:"",s+=t?.secure?";secure":"",s+=t?.httpOnly?"; HttpOnly":"";const a=s.length+1;return a>4096&&console.log("Cookie '"+n+"' possibly not set or overflowed because it was too large ("+a+" > 4096 bytes)!"),s}(t,i,r)}}return n.\u0275fac=function(t){return new(t||n)(F(Dt))},n.\u0275prov=me({token:n,factory:n.\u0275fac}),n})();function kZ(n,e,t){return new vc(n,e,t)}let OZ=(()=>{class n{static withOptions(t={}){return{ngModule:n,providers:[{provide:VN,useValue:t},{provide:Fx,useClass:PZ},{provide:vc,useFactory:kZ,deps:[Dt,xy,Fx]}]}}static forRoot(t={}){return this.withOptions(t)}static forChild(t={}){return this.withOptions(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_t({type:n}),n.\u0275inj=Tt({providers:[xy]}),n})();function Cy(...n){return function NZ(){return ur(1)}()(b(n,Wr(n)))}function yc(...n){const e=Wr(n);return se((t,i)=>{(e?Cy(n,t,e):Cy(n,t)).subscribe(i)})}function Lx(){return se((n,e)=>{let t,i=!1;n.subscribe(ye(e,r=>{const o=t;t=r,i&&e.next([o,r]),i=!0}))})}function Ty(n,e){return se(function FZ(n,e,t,i,r){return(o,s)=>{let a=t,l=e,c=0;o.subscribe(ye(s,h=>{const p=c++;l=a?n(l,h,p):(a=!0,h),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}(n,e,arguments.length>=2,!0))}var Te,LZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wo={},Vx=Vx||{},st=LZ||self;function Dy(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function jp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Bx="closure_uid_"+(1e9*Math.random()>>>0),BZ=0;function UZ(n,e,t){return n.call.apply(n.bind,arguments)}function jZ(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function Qi(n,e,t){return(Qi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?UZ:jZ).apply(null,arguments)}function Ay(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Di(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(i,r,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[r].apply(i,s)}}function rl(){this.s=this.s,this.o=this.o}rl.prototype.s=!1,rl.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function VZ(n){Object.prototype.hasOwnProperty.call(n,Bx)&&n[Bx]||(n[Bx]=++BZ)}(this)},rl.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const zN=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Ux(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function $N(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(Dy(i)){const r=n.length||0,o=i.length||0;n.length=r+o;for(let s=0;s<o;s++)n[r+s]=i[s]}else n.push(i)}}function Xi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Xi.prototype.h=function(){this.defaultPrevented=!0};var $Z=function(){if(!st.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{const t=()=>{};st.addEventListener("test",t,e),st.removeEventListener("test",t,e)}catch{}return n}();function zp(n){return/^[\s\xa0]*$/.test(n)}function Sy(){var n=st.navigator;return n&&(n=n.userAgent)?n:""}function vs(n){return-1!=Sy().indexOf(n)}function jx(n){return jx[" "](n),n}jx[" "]=function(){};var $x,n,qZ=vs("Opera"),Nd=vs("Trident")||vs("MSIE"),HN=vs("Edge"),zx=HN||Nd,qN=vs("Gecko")&&!(-1!=Sy().toLowerCase().indexOf("webkit")&&!vs("Edge"))&&!(vs("Trident")||vs("MSIE"))&&!vs("Edge"),WZ=-1!=Sy().toLowerCase().indexOf("webkit")&&!vs("Edge");function WN(){var n=st.document;return n?n.documentMode:void 0}e:{var Hx="",qx=(n=Sy(),qN?/rv:([^\);]+)(\)|;)/.exec(n):HN?/Edge\/([\d\.]+)/.exec(n):Nd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):WZ?/WebKit\/(\S+)/.exec(n):qZ?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(qx&&(Hx=qx?qx[1]:""),Nd){var Wx=WN();if(null!=Wx&&Wx>parseFloat(Hx)){$x=String(Wx);break e}}$x=Hx}var GZ=st.document&&Nd&&(WN()||parseInt($x,10))||void 0;function $p(n,e){if(Xi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(qN){e:{try{jx(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:ZZ[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&$p.$.h.call(this)}}Di($p,Xi);var ZZ={2:"touch",3:"pen",4:"mouse"};$p.prototype.h=function(){$p.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Hp="closure_listenable_"+(1e6*Math.random()|0),KZ=0;function YZ(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.la=r,this.key=++KZ,this.fa=this.ia=!1}function Ry(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Zx(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function ZN(n){const e={};for(const t in n)e[t]=n[t];return e}const KN="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function YN(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let o=0;o<KN.length;o++)t=KN[o],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function My(n){this.src=n,this.g={},this.h=0}function Kx(n,e){var t=e.type;if(t in n.g){var o,i=n.g[t],r=zN(i,e);(o=0<=r)&&Array.prototype.splice.call(i,r,1),o&&(Ry(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Yx(n,e,t,i){for(var r=0;r<n.length;++r){var o=n[r];if(!o.fa&&o.listener==e&&o.capture==!!t&&o.la==i)return r}return-1}My.prototype.add=function(n,e,t,i,r){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var s=Yx(n,e,i,r);return-1<s?(e=n[s],t||(e.ia=!1)):((e=new YZ(e,this.src,o,!!i,r)).ia=t,n.push(e)),e};var Qx="closure_lm_"+(1e6*Math.random()|0),Xx={};function QN(n,e,t,i,r){if(i&&i.once)return JN(n,e,t,i,r);if(Array.isArray(e)){for(var o=0;o<e.length;o++)QN(n,e[o],t,i,r);return null}return t=nC(t),n&&n[Hp]?n.O(e,t,jp(i)?!!i.capture:!!i,r):XN(n,e,t,!1,i,r)}function XN(n,e,t,i,r,o){if(!e)throw Error("Invalid event type");var s=jp(r)?!!r.capture:!!r,a=eC(n);if(a||(n[Qx]=a=new My(n)),(t=a.add(e,t,i,s,o)).proxy)return t;if(i=function XZ(){const e=JZ;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)$Z||(r=s),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(tF(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function JN(n,e,t,i,r){if(Array.isArray(e)){for(var o=0;o<e.length;o++)JN(n,e[o],t,i,r);return null}return t=nC(t),n&&n[Hp]?n.P(e,t,jp(i)?!!i.capture:!!i,r):XN(n,e,t,!0,i,r)}function eF(n,e,t,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)eF(n,e[o],t,i,r);else i=jp(i)?!!i.capture:!!i,t=nC(t),n&&n[Hp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Yx(o=n.g[e],t,i,r))&&(Ry(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=eC(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Yx(e,t,i,r)),(t=-1<n?e[n]:null)&&Jx(t))}function Jx(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Hp])Kx(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(tF(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=eC(e))?(Kx(t,n),0==t.h&&(t.src=null,e[Qx]=null)):Ry(n)}}}function tF(n){return n in Xx?Xx[n]:Xx[n]="on"+n}function JZ(n,e){if(n.fa)n=!0;else{e=new $p(e,this);var t=n.listener,i=n.la||n.src;n.ia&&Jx(n),n=t.call(i,e)}return n}function eC(n){return(n=n[Qx])instanceof My?n:null}var tC="__closure_events_fn_"+(1e9*Math.random()>>>0);function nC(n){return"function"==typeof n?n:(n[tC]||(n[tC]=function(e){return n.handleEvent(e)}),n[tC])}function Ai(){rl.call(this),this.i=new My(this),this.S=this,this.J=null}function Ui(n,e){var t,i=n.J;if(i)for(t=[];i;i=i.J)t.push(i);if(n=n.S,i=e.type||e,"string"==typeof e)e=new Xi(e,n);else if(e instanceof Xi)e.target=e.target||n;else{var r=e;YN(e=new Xi(i,n),r)}if(r=!0,t)for(var o=t.length-1;0<=o;o--){var s=e.g=t[o];r=Py(s,i,!0,e)&&r}if(r=Py(s=e.g=n,i,!0,e)&&r,r=Py(s,i,!1,e)&&r,t)for(o=0;o<t.length;o++)r=Py(s=e.g=t[o],i,!1,e)&&r}function Py(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==t){var a=s.listener,l=s.la||s.src;s.ia&&Kx(n.i,s),r=!1!==a.call(l,i)&&r}}return r&&!i.defaultPrevented}Di(Ai,rl),Ai.prototype[Hp]=!0,Ai.prototype.removeEventListener=function(n,e,t,i){eF(this,n,e,t,i)},Ai.prototype.N=function(){if(Ai.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)Ry(t[i]);delete n.g[e],n.h--}}this.J=null},Ai.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},Ai.prototype.P=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var iC=st.JSON.stringify;function tK(){var n=rC;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var nF=new class eK{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new iK,n=>n.reset());class iK{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function rK(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function oK(n){st.setTimeout(()=>{throw n},0)}let qp,Wp=!1,rC=new class nK{constructor(){this.h=this.g=null}add(e,t){const i=nF.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}},iF=()=>{const n=st.Promise.resolve(void 0);qp=()=>{n.then(sK)}};var sK=()=>{for(var n;n=tK();){try{n.h.call(n.g)}catch(t){oK(t)}var e=nF;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Wp=!1};function ky(n,e){Ai.call(this),this.h=n||1,this.g=e||st,this.j=Qi(this.qb,this),this.l=Date.now()}function oC(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function sC(n,e,t){if("function"==typeof n)t&&(n=Qi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Qi(n.handleEvent,n)}return 2147483647<Number(e)?-1:st.setTimeout(n,e||0)}function rF(n){n.g=sC(()=>{n.g=null,n.i&&(n.i=!1,rF(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Di(ky,Ai),(Te=ky.prototype).ga=!1,Te.T=null,Te.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ui(this,"tick"),this.ga&&(oC(this),this.start()))}},Te.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Te.N=function(){ky.$.N.call(this),oC(this),delete this.g};class aK extends rl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:rF(this)}N(){super.N(),this.g&&(st.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gp(n){rl.call(this),this.h=n,this.g={}}Di(Gp,rl);var oF=[];function sF(n,e,t,i){Array.isArray(t)||(t&&(oF[0]=t.toString()),t=oF);for(var r=0;r<t.length;r++){var o=QN(e,t[r],i||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function aF(n){Zx(n.g,function(e,t){this.g.hasOwnProperty(t)&&Jx(e)},n),n.g={}}function Oy(){this.g=!0}function Fd(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function dK(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<r.length;s++)r[s]=""}}}return iC(t)}catch{return e}}(n,t)+(i?" "+i:"")})}Gp.prototype.N=function(){Gp.$.N.call(this),aF(this)},Gp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Oy.prototype.Ea=function(){this.g=!1},Oy.prototype.info=function(){};var bc={},lF=null;function Ny(){return lF=lF||new Ai}function cF(n){Xi.call(this,bc.Ta,n)}function Zp(n){const e=Ny();Ui(e,new cF(e))}function uF(n,e){Xi.call(this,bc.STAT_EVENT,n),this.stat=e}function wr(n){const e=Ny();Ui(e,new uF(e,n))}function dF(n,e){Xi.call(this,bc.Ua,n),this.size=e}function Kp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return st.setTimeout(function(){n()},e)}bc.Ta="serverreachability",Di(cF,Xi),bc.STAT_EVENT="statevent",Di(uF,Xi),bc.Ua="timingevent",Di(dF,Xi);var Fy={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},hF={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function aC(){}function pF(){}aC.prototype.h=null;var uC,Yp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function lC(){Xi.call(this,"d")}function cC(){Xi.call(this,"c")}function Ly(){}function Qp(n,e,t,i){this.l=n,this.j=e,this.m=t,this.W=i||1,this.U=new Gp(this),this.P=hK,this.V=new ky(n=zx?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new mF}function mF(){this.i=null,this.g="",this.h=!1}Di(lC,Xi),Di(cC,Xi),Di(Ly,aC),Ly.prototype.g=function(){return new XMLHttpRequest},Ly.prototype.i=function(){return{}},uC=new Ly;var hK=45e3,gF={},dC={};function hC(n,e,t){n.L=1,n.A=jy(aa(e)),n.u=t,n.S=!0,_F(n,null)}function _F(n,e){n.G=Date.now(),Xp(n),n.B=aa(n.A);var t=n.B,i=n.W;Array.isArray(i)||(i=[String(i)]),DF(t.i,"t",i),n.o=0,t=n.l.J,n.h=new mF,n.g=QF(n.l,t?e:null,!n.u),0<n.O&&(n.M=new aK(Qi(n.Pa,n,n.g),n.O)),sF(n.U,n.g,"readystatechange",n.nb),e=n.I?ZN(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),Zp(),function lK(n,e,t,i,r,o){n.info(function(){if(n.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var h=c[0];c=c[1];var p=h.split("_");s=2<=p.length&&"type"==p[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+s})}(n.j,n.v,n.B,n.m,n.W,n.u)}function vF(n){return!!n.g&&"GET"==n.v&&2!=n.L&&n.l.Ha}function yF(n,e,t){let r,i=!0;for(;!n.J&&n.o<t.length;){if(r=fK(n,t),r==dC){4==e&&(n.s=4,wr(14),i=!1),Fd(n.j,n.m,null,"[Incomplete Response]");break}if(r==gF){n.s=4,wr(15),Fd(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}Fd(n.j,n.m,r,null),fC(n,r)}vF(n)&&0!=n.o&&(n.h.g=n.h.g.slice(n.o),n.o=0),4!=e||0!=t.length||n.h.h||(n.s=1,wr(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),bC(e),e.M=!0,wr(11))):(Fd(n.j,n.m,t,"[Invalid Chunked Response]"),Ec(n),Jp(n))}function fK(n,e){var t=n.o,i=e.indexOf("\n",t);return-1==i?dC:(t=Number(e.substring(t,i)),isNaN(t)?gF:(i+=1)+t>e.length?dC:(e=e.slice(i,i+t),n.o=i+t,e))}function Xp(n){n.Y=Date.now()+n.P,bF(n,n.P)}function bF(n,e){if(null!=n.C)throw Error("WatchDog timer not null");n.C=Kp(Qi(n.lb,n),e)}function Vy(n){n.C&&(st.clearTimeout(n.C),n.C=null)}function Jp(n){0==n.l.H||n.J||GF(n.l,n)}function Ec(n){Vy(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,oC(n.V),aF(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function fC(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||pC(t.i,n)))if(!n.K&&pC(t.i,n)&&3==t.H){try{var i=t.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Gy(t),qy(t)}yC(t),wr(18)}}else t.Fa=r[1],0<t.Fa-t.V&&37500>r[2]&&t.G&&0==t.A&&!t.v&&(t.v=Kp(Qi(t.ib,t),6e3));if(1>=RF(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Ic(t,11)}else if((n.K||t.g==n)&&Gy(t),!zp(e))for(r=t.Ja.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(t.V=c[0],c=c[1],2==t.H)if("c"==c[0]){t.K=c[1],t.pa=c[2];const h=c[3];null!=h&&(t.ra=h,t.l.info("VER="+t.ra));const p=c[4];null!=p&&(t.Ga=p,t.l.info("SVER="+t.Ga));const g=c[5];null!=g&&"number"==typeof g&&0<g&&(t.L=i=1.5*g,t.l.info("backChannelRequestTimeoutMs_="+i)),i=t;const _=n.g;if(_){const E=_.g?_.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var o=i.i;o.g||-1==E.indexOf("spdy")&&-1==E.indexOf("quic")&&-1==E.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(mC(o,o.h),o.h=null))}if(i.F){const x=_.g?_.g.getResponseHeader("X-HTTP-Session-Id"):null;x&&(i.Da=x,wn(i.I,i.F,x))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var s=n;if((i=t).wa=YF(i,i.J?i.pa:null,i.Y),s.K){MF(i.i,s);var a=s,l=i.L;l&&a.setTimeout(l),a.C&&(Vy(a),Xp(a)),i.g=s}else qF(i);0<t.j.length&&Wy(t)}else"stop"!=c[0]&&"close"!=c[0]||Ic(t,7);else 3==t.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Ic(t,7):vC(t):"noop"!=c[0]&&t.h&&t.h.Aa(c),t.A=0)}Zp()}catch{}}function EF(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Dy(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function mK(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Dy(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function pK(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Dy(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],t&&t[o],n)}(Te=Qp.prototype).setTimeout=function(n){this.P=n},Te.nb=function(n){n=n.target;const e=this.M;e&&3==ys(n)?e.l():this.Pa(n)},Te.Pa=function(n){try{if(n==this.g)e:{const h=ys(this.g);var e=this.g.Ia();if(this.g.da(),!(3>h)&&(3!=h||zx||this.g&&(this.h.h||this.g.ja()||BF(this.g)))){this.J||4!=h||7==e||Zp(),Vy(this);var t=this.g.da();this.ca=t;t:if(vF(this)){var i=BF(this.g);n="";var r=i.length,o=4==ys(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ec(this),Jp(this);var s="";break t}this.h.i=new st.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:o&&e==r-1});i.length=0,this.h.g+=n,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==t,function cK(n,e,t,i,r,o,s){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+o+" "+s})}(this.j,this.v,this.B,this.m,this.W,h,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zp(a)){var c=a;break t}}c=null}if(!(t=c)){this.i=!1,this.s=3,wr(12),Ec(this),Jp(this);break e}Fd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fC(this,t)}this.S?(yF(this,h,s),zx&&this.i&&3==h&&(sF(this.U,this.V,"tick",this.mb),this.V.start())):(Fd(this.j,this.m,s,null),fC(this,s)),4==h&&Ec(this),this.i&&!this.J&&(4==h?GF(this.l,this):(this.i=!1,Xp(this)))}else(function kK(n){const e={};n=(n.g&&2<=ys(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<n.length;i++){if(zp(n[i]))continue;var t=rK(n[i]);const r=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const o=e[r]||[];e[r]=o,o.push(t)}!function QZ(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(i){return i.join(", ")})})(this.g),400==t&&0<s.indexOf("Unknown SID")?(this.s=3,wr(12)):(this.s=0,wr(13)),Ec(this),Jp(this)}}}catch{}},Te.mb=function(){if(this.g){var n=ys(this.g),e=this.g.ja();this.o<e.length&&(Vy(this),yF(this,n,e),this.i&&4!=n&&Xp(this))}},Te.cancel=function(){this.J=!0,Ec(this)},Te.lb=function(){this.C=null;const n=Date.now();0<=n-this.Y?(function uK(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(Zp(),wr(17)),Ec(this),this.s=2,Jp(this)):bF(this,this.Y-n)};var wF=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wc(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof wc){this.h=n.h,By(this,n.j),this.s=n.s,this.g=n.g,Uy(this,n.m),this.l=n.l;var e=n.i,t=new nm;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),IF(this,t),this.o=n.o}else n&&(e=String(n).match(wF))?(this.h=!1,By(this,e[1]||"",!0),this.s=em(e[2]||""),this.g=em(e[3]||"",!0),Uy(this,e[4]),this.l=em(e[5]||"",!0),IF(this,e[6]||"",!0),this.o=em(e[7]||"")):(this.h=!1,this.i=new nm(null,this.h))}function aa(n){return new wc(n)}function By(n,e,t){n.j=t?em(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Uy(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function IF(n,e,t){e instanceof nm?(n.i=e,function wK(n,e){e&&!n.j&&(ol(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(CF(this,i),DF(this,r,t))},n)),n.j=e}(n.i,n.h)):(t||(e=tm(e,bK)),n.i=new nm(e,n.h))}function wn(n,e,t){n.i.set(e,t)}function jy(n){return wn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function em(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function tm(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,_K),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function _K(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}wc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(tm(e,xF,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(tm(e,xF,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(tm(t,"/"==t.charAt(0)?yK:vK,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",tm(t,EK)),n.join("")};var xF=/[#\/\?@]/g,vK=/[#\?:]/g,yK=/[#\?]/g,bK=/[#\?@]/g,EK=/#/g;function nm(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ol(n){n.g||(n.g=new Map,n.h=0,n.i&&function gK(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var o=n[t].substring(0,i);r=n[t].substring(i+1)}else o=n[t];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function CF(n,e){ol(n),e=Ld(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function TF(n,e){return ol(n),e=Ld(n,e),n.g.has(e)}function DF(n,e,t){CF(n,e),0<t.length&&(n.i=null,n.g.set(Ld(n,e),Ux(t)),n.h+=t.length)}function Ld(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function AF(n){this.l=n||xK,n=st.PerformanceNavigationTiming?0<(n=st.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(st.g&&st.g.Ka&&st.g.Ka()&&st.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Te=nm.prototype).add=function(n,e){ol(this),this.i=null,n=Ld(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Te.forEach=function(n,e){ol(this),this.g.forEach(function(t,i){t.forEach(function(r){n.call(e,r,i,this)},this)},this)},Te.ta=function(){ol(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const r=n[i];for(let o=0;o<r.length;o++)t.push(e[i])}return t},Te.Z=function(n){ol(this);let e=[];if("string"==typeof n)TF(this,n)&&(e=e.concat(this.g.get(Ld(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Te.set=function(n,e){return ol(this),this.i=null,TF(this,n=Ld(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Te.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Te.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const o=encodeURIComponent(String(i)),s=this.Z(i);for(i=0;i<s.length;i++){var r=o;""!==s[i]&&(r+="="+encodeURIComponent(String(s[i]))),n.push(r)}}return this.i=n.join("&")};var xK=10;function SF(n){return!!n.h||!!n.g&&n.g.size>=n.j}function RF(n){return n.h?1:n.g?n.g.size:0}function pC(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function mC(n,e){n.g?n.g.add(e):n.h=e}function MF(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function PF(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Ux(n.i)}AF.prototype.cancel=function(){if(this.i=PF(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var CK=class{stringify(n){return st.JSON.stringify(n,void 0)}parse(n){return st.JSON.parse(n,void 0)}};function TK(){this.g=new CK}function DK(n,e,t){const i=t||"";try{EF(n,function(r,o){let s=r;jp(r)&&(s=iC(r)),e.push(i+o+"="+encodeURIComponent(s))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function zy(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function im(n){this.l=n.ec||null,this.j=n.ob||!1}function $y(n,e){Ai.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=gC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Di(im,aC),im.prototype.g=function(){return new $y(this.l,this.j)},im.prototype.i=function(n){return function(){return n}}({}),Di($y,Ai);var gC=0;function kF(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function rm(n){n.readyState=4,n.l=null,n.j=null,n.A=null,om(n)}function om(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Te=$y.prototype).open=function(n,e){if(this.readyState!=gC)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,om(this)},Te.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||st).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Te.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,rm(this)),this.readyState=gC},Te.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,om(this)),this.g&&(this.readyState=3,om(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof st.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;kF(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Te.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?rm(this):om(this),3==this.readyState&&kF(this)}},Te.Za=function(n){this.g&&(this.response=this.responseText=n,rm(this))},Te.Ya=function(n){this.g&&(this.response=n,rm(this))},Te.ka=function(){this.g&&rm(this)},Te.setRequestHeader=function(n,e){this.v.append(n,e)},Te.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Te.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty($y.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var SK=st.JSON.parse;function Hn(n){Ai.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=OF,this.L=this.M=!1}Di(Hn,Ai);var OF="",RK=/^https?$/i,MK=["POST","PUT"];function NF(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,FF(n),Hy(n)}function FF(n){n.F||(n.F=!0,Ui(n,"complete"),Ui(n,"error"))}function LF(n){if(n.h&&typeof Vx<"u"&&(!n.C[1]||4!=ys(n)||2!=n.da()))if(n.v&&4==ys(n))sC(n.La,0,n);else if(Ui(n,"readystatechange"),4==ys(n)){n.h=!1;try{const s=n.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===s){var r=String(n.I).match(wF)[1]||null;!r&&st.self&&st.self.location&&(r=st.self.location.protocol.slice(0,-1)),i=!RK.test(r?r.toLowerCase():"")}t=i}if(t)Ui(n,"complete"),Ui(n,"success");else{n.m=6;try{var o=2<ys(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.da()+"]",FF(n)}}finally{Hy(n)}}}function Hy(n,e){if(n.g){VF(n);const t=n.g,i=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Ui(n,"ready");try{t.onreadystatechange=i}catch{}}}function VF(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(st.clearTimeout(n.A),n.A=null)}function ys(n){return n.g?n.g.readyState:0}function BF(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case OF:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function UF(n){let e="";return Zx(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function _C(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=UF(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):wn(n,e,t))}function sm(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function jF(n){this.Ga=0,this.j=[],this.l=new Oy,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=sm("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=sm("baseRetryDelayMs",5e3,n),this.hb=sm("retryDelaySeedMs",1e4,n),this.eb=sm("forwardChannelMaxRetries",2,n),this.xa=sm("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new AF(n&&n.concurrentRequestLimit),this.Ja=new TK,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function vC(n){if(zF(n),3==n.H){var e=n.W++,t=aa(n.I);if(wn(t,"SID",n.K),wn(t,"RID",e),wn(t,"TYPE","terminate"),am(n,t),(e=new Qp(n,n.l,e)).L=2,e.A=jy(aa(t)),t=!1,st.navigator&&st.navigator.sendBeacon)try{t=st.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&st.Image&&((new Image).src=e.A,t=!0),t||(e.g=QF(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Xp(e)}KF(n)}function qy(n){n.g&&(bC(n),n.g.cancel(),n.g=null)}function zF(n){qy(n),n.u&&(st.clearTimeout(n.u),n.u=null),Gy(n),n.i.cancel(),n.m&&("number"==typeof n.m&&st.clearTimeout(n.m),n.m=null)}function Wy(n){if(!SF(n.i)&&!n.m){n.m=!0;var e=n.Na;qp||iF(),Wp||(qp(),Wp=!0),rC.add(e,n),n.C=0}}function $F(n,e){var t;t=e?e.m:n.W++;const i=aa(n.I);wn(i,"SID",n.K),wn(i,"RID",t),wn(i,"AID",n.V),am(n,i),n.o&&n.s&&_C(i,n.o,n.s),t=new Qp(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=HF(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),mC(n.i,t),hC(t,i,e)}function am(n,e){n.na&&Zx(n.na,function(t,i){wn(e,i,t)}),n.h&&EF({},function(t,i){wn(e,i,t)})}function HF(n,e,t){t=Math.min(n.j.length,t);var i=n.h?Qi(n.h.Va,n.h,n):null;e:{var r=n.j;let o=-1;for(;;){const s=["count="+t];-1==o?0<t?(o=r[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let l=0;l<t;l++){let c=r[l].g;const h=r[l].map;if(c-=o,0>c)o=Math.max(0,r[l].g-100),a=!1;else try{DK(h,s,"req"+c+"_")}catch{i&&i(h)}}if(a){i=s.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,i}function qF(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;qp||iF(),Wp||(qp(),Wp=!0),rC.add(e,n),n.A=0}}function yC(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Kp(Qi(n.Ma,n),ZF(n,n.A)),n.A++,0))}function bC(n){null!=n.B&&(st.clearTimeout(n.B),n.B=null)}function WF(n){n.g=new Qp(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=aa(n.wa);wn(e,"RID","rpc"),wn(e,"SID",n.K),wn(e,"AID",n.V),wn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&wn(e,"TO",n.qa),wn(e,"TYPE","xmlhttp"),am(n,e),n.o&&n.s&&_C(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=jy(aa(e)),t.u=null,t.S=!0,_F(t,n)}function Gy(n){null!=n.v&&(st.clearTimeout(n.v),n.v=null)}function GF(n,e){var t=null;if(n.g==e){Gy(n),bC(n),n.g=null;var i=2}else{if(!pC(n.i,e))return;t=e.F,MF(n.i,e),i=1}if(0!=n.H)if(e.i)if(1==i){t=e.u?e.u.length:0,e=Date.now()-e.G;var r=n.C;Ui(i=Ny(),new dF(i,t)),Wy(n)}else qF(n);else if(3==(r=e.s)||0==r&&0<e.ca||!(1==i&&function OK(n,e){return!(RF(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Kp(Qi(n.Na,n,e),ZF(n,n.C)),n.C++,0)))}(n,e)||2==i&&yC(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),r){case 1:Ic(n,5);break;case 4:Ic(n,10);break;case 3:Ic(n,6);break;default:Ic(n,2)}}function ZF(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Ic(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var i=Qi(n.pb,n);t||(t=new wc("//www.google.com/images/cleardot.gif"),st.location&&"http"==st.location.protocol||By(t,"https"),jy(t)),function AK(n,e){const t=new Oy;if(st.Image){const i=new Image;i.onload=Ay(zy,t,i,"TestLoadImage: loaded",!0,e),i.onerror=Ay(zy,t,i,"TestLoadImage: error",!1,e),i.onabort=Ay(zy,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=Ay(zy,t,i,"TestLoadImage: timeout",!1,e),st.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else wr(2);n.H=0,n.h&&n.h.za(e),KF(n),zF(n)}function KF(n){if(n.H=0,n.ma=[],n.h){const e=PF(n.i);(0!=e.length||0!=n.j.length)&&($N(n.ma,e),$N(n.ma,n.j),n.i.i.length=0,Ux(n.j),n.j.length=0),n.h.ya()}}function YF(n,e,t){var i=t instanceof wc?aa(t):new wc(t);if(""!=i.g)e&&(i.g=e+"."+i.g),Uy(i,i.m);else{var r=st.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var o=new wc(null);i&&By(o,i),e&&(o.g=e),r&&Uy(o,r),t&&(o.l=t),i=o}return e=n.Da,(t=n.F)&&e&&wn(i,t,e),wn(i,"VER",n.ra),am(n,i),i}function QF(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Hn(n.Ha&&!n.va?new im({ob:t}):n.va)).Oa(n.J),e}function XF(){}function Zy(){if(Nd&&!(10<=Number(GZ)))throw Error("Environmental error: no available transport.")}function eo(n,e){Ai.call(this),this.g=new jF(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!zp(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!zp(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Vd(this)}function JF(n){lC.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function eL(){cC.call(this),this.status=1}function Vd(n){this.g=n}function Go(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function EC(n,e,t){t||(t=0);var i=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(r=0;16>r;++r)i[r]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var o=n.g[3],s=(e=n.g[0])+(o^(t=n.g[1])&((r=n.g[2])^o))+i[0]+3614090360&4294967295;s=(t=(r=(o=(e=(t=(r=(o=(e=(t=(r=(o=(e=(t=(r=(o=(e=(t=(r=(o=(e=(t=(r=(o=(e=(t=(r=(o=(e=(t=(r=(o=(e=(t=(r=(o=(e=(t=(r=(o=(e=(t=(r=(o=(e=(t=(r=(o=(e=(t=(r=(o=(e=(t=(r=(o=(e=(t=(r=(o=(e=t+(s<<7&4294967295|s>>>25))+((s=o+(r^e&(t^r))+i[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=r+(t^o&(e^t))+i[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=t+(e^r&(o^e))+i[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^t&(r^o))+i[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(r^e&(t^r))+i[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=r+(t^o&(e^t))+i[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=t+(e^r&(o^e))+i[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^t&(r^o))+i[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(r^e&(t^r))+i[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=r+(t^o&(e^t))+i[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=t+(e^r&(o^e))+i[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^t&(r^o))+i[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(r^e&(t^r))+i[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=r+(t^o&(e^t))+i[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=t+(e^r&(o^e))+i[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=e+(r^o&(t^r))+i[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(t^r&(e^t))+i[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=r+(e^t&(o^e))+i[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=t+(o^e&(r^o))+i[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=e+(r^o&(t^r))+i[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(t^r&(e^t))+i[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=r+(e^t&(o^e))+i[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=t+(o^e&(r^o))+i[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=e+(r^o&(t^r))+i[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(t^r&(e^t))+i[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=r+(e^t&(o^e))+i[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=t+(o^e&(r^o))+i[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=e+(r^o&(t^r))+i[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(t^r&(e^t))+i[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=r+(e^t&(o^e))+i[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=t+(o^e&(r^o))+i[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=e+(t^r^o)+i[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^t^r)+i[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=r+(o^e^t)+i[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=t+(r^o^e)+i[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=e+(t^r^o)+i[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^t^r)+i[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=r+(o^e^t)+i[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=t+(r^o^e)+i[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=e+(t^r^o)+i[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^t^r)+i[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=r+(o^e^t)+i[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=t+(r^o^e)+i[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=e+(t^r^o)+i[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^t^r)+i[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=r+(o^e^t)+i[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=t+(r^o^e)+i[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=e+(r^(t|~o))+i[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(t^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=r+(e^(o|~t))+i[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=t+(o^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=e+(r^(t|~o))+i[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(t^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=r+(e^(o|~t))+i[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=t+(o^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=e+(r^(t|~o))+i[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(t^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=r+(e^(o|~t))+i[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=t+(o^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(e=t+((s=e+(r^(t|~o))+i[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(t^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((r=o+((s=r+(e^(o|~t))+i[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~e))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(r+(s<<21&4294967295|s>>>11))&4294967295,n.g[2]=n.g[2]+r&4294967295,n.g[3]=n.g[3]+o&4294967295}function Yt(n,e){this.h=e;for(var t=[],i=!0,r=n.length-1;0<=r;r--){var o=0|n[r];i&&o==e||(t[r]=o,i=!1)}this.g=t}(Te=Hn.prototype).Oa=function(n){this.M=n},Te.ha=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():uC.g(),this.C=function fF(n){return n.h||(n.h=n.i())}(this.u?this.u:uC),this.g.onreadystatechange=Qi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(o){return void NF(this,o)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)t.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const o of i.keys())t.set(o,i.get(o))}i=Array.from(t.keys()).find(o=>"content-type"==o.toLowerCase()),r=st.FormData&&n instanceof st.FormData,!(0<=zN(MK,e))||i||r||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of t)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{VF(this),0<this.B&&((this.L=function PK(n){return Nd&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Qi(this.ua,this)):this.A=sC(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){NF(this,o)}},Te.ua=function(){typeof Vx<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ui(this,"timeout"),this.abort(8))},Te.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ui(this,"complete"),Ui(this,"abort"),Hy(this))},Te.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hy(this,!0)),Hn.$.N.call(this)},Te.La=function(){this.s||(this.G||this.v||this.l?LF(this):this.kb())},Te.kb=function(){LF(this)},Te.isActive=function(){return!!this.g},Te.da=function(){try{return 2<ys(this)?this.g.status:-1}catch{return-1}},Te.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Te.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),SK(e)}},Te.Ia=function(){return this.m},Te.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Te=jF.prototype).ra=8,Te.H=1,Te.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const r=new Qp(this,this.l,n);let o=this.s;if(this.U&&(o?(o=ZN(o),YN(o,this.U)):o=this.U),null!==this.o||this.O||(r.I=o,o=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var i=this.j[t];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=HF(this,r,e),wn(t=aa(this.I),"RID",n),wn(t,"CVER",22),this.F&&wn(t,"X-HTTP-Session-Id",this.F),am(this,t),o&&(this.O?e="headers="+encodeURIComponent(String(UF(o)))+"&"+e:this.o&&_C(t,this.o,o)),mC(this.i,r),this.bb&&wn(t,"TYPE","init"),this.P?(wn(t,"$req",e),wn(t,"SID","null"),r.aa=!0,hC(r,t,null)):hC(r,t,e),this.H=2}}else 3==this.H&&(n?$F(this,n):0==this.j.length||SF(this.i)||$F(this))},Te.Ma=function(){if(this.u=null,WF(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Kp(Qi(this.jb,this),n)}},Te.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,wr(10),qy(this),WF(this))},Te.ib=function(){null!=this.v&&(this.v=null,qy(this),yC(this),wr(19))},Te.pb=function(n){n?(this.l.info("Successfully pinged google.com"),wr(2)):(this.l.info("Failed to ping google.com"),wr(1))},Te.isActive=function(){return!!this.h&&this.h.isActive(this)},(Te=XF.prototype).Ba=function(){},Te.Aa=function(){},Te.za=function(){},Te.ya=function(){},Te.isActive=function(){return!0},Te.Va=function(){},Zy.prototype.g=function(n,e){return new eo(n,e)},Di(eo,Ai),eo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;wr(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=YF(n,null,n.Y),Wy(n)},eo.prototype.close=function(){vC(this.g)},eo.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=iC(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Wy(e)},eo.prototype.N=function(){this.g.h=null,delete this.j,vC(this.g),delete this.g,eo.$.N.call(this)},Di(JF,lC),Di(eL,cC),Di(Vd,XF),Vd.prototype.Ba=function(){Ui(this.g,"a")},Vd.prototype.Aa=function(n){Ui(this.g,new JF(n))},Vd.prototype.za=function(n){Ui(this.g,new eL)},Vd.prototype.ya=function(){Ui(this.g,"b")},Di(Go,function NK(){this.blockSize=-1}),Go.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Go.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,i=this.m,r=this.h,o=0;o<e;){if(0==r)for(;o<=t;)EC(this,n,o),o+=this.blockSize;if("string"==typeof n){for(;o<e;)if(i[r++]=n.charCodeAt(o++),r==this.blockSize){EC(this,i),r=0;break}}else for(;o<e;)if(i[r++]=n[o++],r==this.blockSize){EC(this,i),r=0;break}}this.h=r,this.i+=e},Go.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var i=0;32>i;i+=8)n[t++]=this.g[e]>>>i&255;return n};var FK={};function wC(n){return-128<=n&&128>n?function HZ(n,e){var t=FK;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Yt([0|e],0>e?-1:0)}):new Yt([0|n],0>n?-1:0)}function bs(n){if(isNaN(n)||!isFinite(n))return Bd;if(0>n)return ji(bs(-n));for(var e=[],t=1,i=0;n>=t;i++)e[i]=n/t|0,t*=IC;return new Yt(e,0)}var IC=4294967296,Bd=wC(0),xC=wC(1),nL=wC(16777216);function la(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Mo(n){return-1==n.h}function ji(n){for(var e=n.g.length,t=[],i=0;i<e;i++)t[i]=~n.g[i];return new Yt(t,~n.h).add(xC)}function Ky(n,e){return n.add(ji(e))}function Yy(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function lm(n,e){this.g=n,this.h=e}function Qy(n,e){if(la(e))throw Error("division by zero");if(la(n))return new lm(Bd,Bd);if(Mo(n))return e=Qy(ji(n),e),new lm(ji(e.g),ji(e.h));if(Mo(e))return e=Qy(n,ji(e)),new lm(ji(e.g),e.h);if(30<n.g.length){if(Mo(n)||Mo(e))throw Error("slowDivide_ only works with positive integers.");for(var t=xC,i=e;0>=i.X(n);)t=iL(t),i=iL(i);var r=Ud(t,1),o=Ud(i,1);for(i=Ud(i,2),t=Ud(t,2);!la(i);){var s=o.add(i);0>=s.X(n)&&(r=r.add(t),o=s),i=Ud(i,1),t=Ud(t,1)}return e=Ky(n,r.R(e)),new lm(r,e)}for(r=Bd;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),i=48>=(i=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,i-48),s=(o=bs(t)).R(e);Mo(s)||0<s.X(n);)s=(o=bs(t-=i)).R(e);la(o)&&(o=xC),r=r.add(o),n=Ky(n,s)}return new lm(r,n)}function iL(n){for(var e=n.g.length+1,t=[],i=0;i<e;i++)t[i]=n.D(i)<<1|n.D(i-1)>>>31;return new Yt(t,n.h)}function Ud(n,e){var t=e>>5;e%=32;for(var i=n.g.length-t,r=[],o=0;o<i;o++)r[o]=0<e?n.D(o+t)>>>e|n.D(o+t+1)<<32-e:n.D(o+t);return new Yt(r,n.h)}(Te=Yt.prototype).ea=function(){if(Mo(this))return-ji(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var i=this.D(t);n+=(0<=i?i:IC+i)*e,e*=IC}return n},Te.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(la(this))return"0";if(Mo(this))return"-"+ji(this).toString(n);for(var e=bs(Math.pow(n,6)),t=this,i="";;){var r=Qy(t,e).g,o=((0<(t=Ky(t,r.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(la(t=r))return o+i;for(;6>o.length;)o="0"+o;i=o+i}},Te.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Te.X=function(n){return Mo(n=Ky(this,n))?-1:la(n)?0:1},Te.abs=function(){return Mo(this)?ji(this):this},Te.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0,r=0;r<=e;r++){var o=i+(65535&this.D(r))+(65535&n.D(r)),s=(o>>>16)+(this.D(r)>>>16)+(n.D(r)>>>16);i=s>>>16,t[r]=(s&=65535)<<16|(o&=65535)}return new Yt(t,-2147483648&t[t.length-1]?-1:0)},Te.R=function(n){if(la(this)||la(n))return Bd;if(Mo(this))return Mo(n)?ji(this).R(ji(n)):ji(ji(this).R(n));if(Mo(n))return ji(this.R(ji(n)));if(0>this.X(nL)&&0>n.X(nL))return bs(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],i=0;i<2*e;i++)t[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<n.g.length;r++){var o=this.D(i)>>>16,s=65535&this.D(i),a=n.D(r)>>>16,l=65535&n.D(r);t[2*i+2*r]+=s*l,Yy(t,2*i+2*r),t[2*i+2*r+1]+=o*l,Yy(t,2*i+2*r+1),t[2*i+2*r+1]+=s*a,Yy(t,2*i+2*r+1),t[2*i+2*r+2]+=o*a,Yy(t,2*i+2*r+2)}for(i=0;i<e;i++)t[i]=t[2*i+1]<<16|t[2*i];for(i=e;i<2*e;i++)t[i]=0;return new Yt(t,0)},Te.gb=function(n){return Qy(this,n).h},Te.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)&n.D(i);return new Yt(t,this.h&n.h)},Te.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)|n.D(i);return new Yt(t,this.h|n.h)},Te.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)^n.D(i);return new Yt(t,this.h^n.h)},Zy.prototype.createWebChannel=Zy.prototype.g,eo.prototype.send=eo.prototype.u,eo.prototype.open=eo.prototype.m,eo.prototype.close=eo.prototype.close,Fy.NO_ERROR=0,Fy.TIMEOUT=8,Fy.HTTP_ERROR=6,hF.COMPLETE="complete",pF.EventType=Yp,Yp.OPEN="a",Yp.CLOSE="b",Yp.ERROR="c",Yp.MESSAGE="d",Ai.prototype.listen=Ai.prototype.O,Hn.prototype.listenOnce=Hn.prototype.P,Hn.prototype.getLastError=Hn.prototype.Sa,Hn.prototype.getLastErrorCode=Hn.prototype.Ia,Hn.prototype.getStatus=Hn.prototype.da,Hn.prototype.getResponseJson=Hn.prototype.Wa,Hn.prototype.getResponseText=Hn.prototype.ja,Hn.prototype.send=Hn.prototype.ha,Hn.prototype.setWithCredentials=Hn.prototype.Oa,Go.prototype.digest=Go.prototype.l,Go.prototype.reset=Go.prototype.reset,Go.prototype.update=Go.prototype.j,Yt.prototype.add=Yt.prototype.add,Yt.prototype.multiply=Yt.prototype.R,Yt.prototype.modulo=Yt.prototype.gb,Yt.prototype.compare=Yt.prototype.X,Yt.prototype.toNumber=Yt.prototype.ea,Yt.prototype.toString=Yt.prototype.toString,Yt.prototype.getBits=Yt.prototype.D,Yt.fromNumber=bs,Yt.fromString=function tL(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return ji(tL(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=bs(Math.pow(e,8)),i=Bd,r=0;r<n.length;r+=8){var o=Math.min(8,n.length-r),s=parseInt(n.substring(r,r+o),e);8>o?(o=bs(Math.pow(e,o)),i=i.R(o).add(bs(s))):i=(i=i.R(t)).add(bs(s))}return i};var LK=Wo.createWebChannelTransport=function(){return new Zy},VK=Wo.getStatEventTarget=function(){return Ny()},CC=Wo.ErrorCode=Fy,BK=Wo.EventType=hF,UK=Wo.Event=bc,rL=Wo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Xy=(Wo.FetchXmlHttpFactory=im,Wo.WebChannel=pF),jK=Wo.XhrIo=Hn,zK=Wo.Md5=Go,jd=Wo.Integer=Yt;const oL="@firebase/firestore";class Si{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Si.UNAUTHENTICATED=new Si(null),Si.GOOGLE_CREDENTIALS=new Si("google-credentials-uid"),Si.FIRST_PARTY=new Si("first-party-uid"),Si.MOCK_USER=new Si("mock-user");let zd="10.7.0";const sl=new _s.Yd("@firebase/firestore");function $d(){return sl.logLevel}function fe(n,...e){if(sl.logLevel<=_s.in.DEBUG){const t=e.map(TC);sl.debug(`Firestore (${zd}): ${n}`,...t)}}function ni(n,...e){if(sl.logLevel<=_s.in.ERROR){const t=e.map(TC);sl.error(`Firestore (${zd}): ${n}`,...t)}}function Lr(n,...e){if(sl.logLevel<=_s.in.WARN){const t=e.map(TC);sl.warn(`Firestore (${zd}): ${n}`,...t)}}function TC(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Pe(n="Unexpected state"){const e=`FIRESTORE (${zd}) INTERNAL ASSERTION FAILED: `+n;throw ni(e),new Error(e)}function Ve(n,e){n||Pe()}function Ee(n,e){return n}const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends tn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class vi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class sL{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Si.UNAUTHENTICATED))}shutdown(){}}class WK{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class GK{constructor(e){this.t=e,this.currentUser=Si.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const o=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let s=new vi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new vi,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable((0,ne.Z)(function*(){yield c.promise,yield o(i.currentUser)}))},l=c=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new vi)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ve("string"==typeof i.accessToken),new sL(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ve(null===e||"string"==typeof e),new Si(e)}}class ZK{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Si.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class KK{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new ZK(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Si.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class aL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YK{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const i=o=>{null!=o.error&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,fe("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?r(o):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ve("string"==typeof t.token),this.R=t.token,new aL(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function QK(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class lL{static newId(){const t=62*Math.floor(256/62);let i="";for(;i.length<20;){const r=QK(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<t&&(i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r[o]%62))}return i}}function rt(n,e){return n<e?-1:n>e?1:0}function Hd(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function cL(n){return n+"\0"}class Rn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ce(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Rn.fromMillis(Date.now())}static fromDate(e){return Rn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Rn(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new Rn(0,0))}static max(){return new Ue(new Rn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class cm{constructor(e,t,i){void 0===t?t=0:t>e.length&&Pe(),void 0===i?i=e.length-t:i>e.length-t&&Pe(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===cm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof cm?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const o=e.get(r),s=t.get(r);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Nt extends cm{construct(e,t,i){return new Nt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ce(X.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new Nt(t)}static emptyPath(){return new Nt([])}}const XK=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class In extends cm{construct(e,t,i){return new In(e,t,i)}static isValidIdentifier(e){return XK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),In.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new In(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const o=()=>{if(0===i.length)throw new ce(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let s=!1;for(;r<e.length;){const a=e[r];if("\\"===a){if(r+1===e.length)throw new ce(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new ce(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else"`"===a?(s=!s,r++):"."!==a||s?(i+=a,r++):(o(),r++)}if(o(),s)throw new ce(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new In(t)}static emptyPath(){return new In([])}}class we{constructor(e){this.path=e}static fromPath(e){return new we(Nt.fromString(e))}static fromName(e){return new we(Nt.fromString(e).popFirst(5))}static empty(){return new we(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Nt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new Nt(e.slice()))}}class qd{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function DC(n){return n.fields.find(e=>2===e.kind)}function xc(n){return n.fields.filter(e=>2!==e.kind)}qd.UNKNOWN_ID=-1;class Cc{constructor(e,t){this.fieldPath=e,this.kind=t}}class Wd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Wd(0,to.min())}}function uL(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Ue.fromTimestamp(1e9===i?new Rn(t+1,0):new Rn(t,i));return new to(r,we.empty(),e)}function dL(n){return new to(n.readTime,n.key,-1)}class to{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new to(Ue.min(),we.empty(),-1)}static max(){return new to(Ue.max(),we.empty(),-1)}}function AC(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=we.comparator(n.documentKey,e.documentKey),0!==t?t:rt(n.largestBatchId,e.largestBatchId))}const hL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function al(n){return SC.apply(this,arguments)}function SC(){return SC=(0,ne.Z)(function*(n){if(n.code!==X.FAILED_PRECONDITION||n.message!==hL)throw n;fe("LocalStore","Unexpectedly lost primary lease")}),SC.apply(this,arguments)}class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new U((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof U?t:U.resolve(t)}catch(t){return U.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):U.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):U.reject(t)}static resolve(e){return new U((t,i)=>{t(e)})}static reject(e){return new U((t,i)=>{i(e)})}static waitFor(e){return new U((t,i)=>{let r=0,o=0,s=!1;e.forEach(a=>{++r,a.next(()=>{++o,s&&o===r&&t()},l=>i(l))}),s=!0,o===r&&t()})}static or(e){let t=U.resolve(!1);for(const i of e)t=t.next(r=>r?U.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,o)=>{i.push(t.call(this,r,o))}),this.waitFor(i)}static mapArray(e,t){return new U((i,r)=>{const o=e.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const c=l;t(e[c]).next(h=>{s[c]=h,++a,a===o&&i(s)},h=>r(h))}})}static doWhile(e,t){return new U((i,r)=>{const o=()=>{!0===e()?t().next(()=>{o()},r):i()};o()})}}class Jy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new vi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new um(e,t.error)):this.V.resolve()},this.transaction.onerror=i=>{const r=RC(i.target.error);this.V.reject(new um(e,r))}}static open(e,t,i,r){try{return new Jy(t,e.transaction(r,i))}catch(o){throw new um(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new nY(t)}}class Zo{constructor(e,t,i){this.name=e,this.version=t,this.p=i,12.2===Zo.S((0,tn.z$)())&&ni("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return fe("SimpleDb","Removing database:",e),Tc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,tn.hl)())return!1;if(Zo.C())return!0;const e=(0,tn.z$)(),t=Zo.S(e),i=0<t&&t<10,r=Zo.v(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static v(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}O(e){var t=this;return(0,ne.Z)(function*(){return t.db||(fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=s=>{i(s.target.result)},o.onblocked=()=>{r(new um(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;r("VersionError"===a.name?new ce(X.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new ce(X.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new um(e,a))},o.onupgradeneeded=s=>{fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',s.oldVersion),t.p.N(s.target.result,o.transaction,s.oldVersion,t.version).next(()=>{fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=i=>t.B(i)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var o=this;return(0,ne.Z)(function*(){const s="readonly"===t;let a=0;for(;;){++a;try{o.db=yield o.O(e);const l=Jy.open(o.db,e,s?"readonly":"readwrite",i),c=r(l).next(h=>(l.g(),h)).catch(h=>(l.abort(h),U.reject(h))).toPromise();return c.catch(()=>{}),yield l.m,c}catch(l){const c=l,h="FirebaseError"!==c.name&&a<3;if(fe("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),o.close(),!h)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class tY{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Tc(this.k.delete())}}class um extends ce{constructor(e,t){super(X.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ll(n){return"IndexedDbTransactionError"===n.name}class nY{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(fe("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Tc(i)}add(e){return fe("SimpleDb","ADD",this.store.name,e,e),Tc(this.store.add(e))}get(e){return Tc(this.store.get(e)).next(t=>(void 0===t&&(t=null),fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return fe("SimpleDb","DELETE",this.store.name,e),Tc(this.store.delete(e))}count(){return fe("SimpleDb","COUNT",this.store.name),Tc(this.store.count())}W(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),o=[];return this.G(r,(s,a)=>{o.push(a)}).next(()=>o)}{const r=this.store.getAll(i.range);return new U((o,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{o(a.target.result)}})}}j(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new U((r,o)=>{i.onerror=s=>{o(s.target.error)},i.onsuccess=s=>{r(s.target.result)}})}H(e,t){fe("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.J=!1;const r=this.cursor(i);return this.G(r,(o,s,a)=>a.delete())}Y(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.G(r,t)}Z(e){const t=this.cursor({});return new U((i,r)=>{t.onerror=o=>{const s=RC(o.target.error);r(s)},t.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():i()}):i()}})}G(e,t){const i=[];return new U((r,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void r();const l=new tY(a),c=t(a.primaryKey,a.value,l);if(c instanceof U){const h=c.catch(p=>(l.done(),U.reject(p)));i.push(h)}l.isDone?r():null===l.$?a.continue():a.continue(l.$)}}).next(()=>U.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.J?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Tc(n){return new U((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=RC(i.target.error);t(r)}})}let pL=!1;function RC(n){const e=Zo.S((0,tn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new ce("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return pL||(pL=!0,setTimeout(()=>{throw i},0)),i}}return n}class iY{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var t=this;fe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ne.Z)(function*(){t.task=null;try{fe("IndexBackiller",`Documents written: ${yield t.X.te()}`)}catch(i){ll(i)?fe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield al(i)}yield t.ee(6e4)}))}}class rY{constructor(e,t){this.localStore=e,this.persistence=t}te(e=50){var t=this;return(0,ne.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.ne(i,e))})()}ne(e,t){const i=new Set;let r=t,o=!0;return U.doWhile(()=>!0===o&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(null!==s&&!i.has(s))return fe("IndexBackiller",`Processing collection: ${s}`),this.re(e,s,r).next(a=>{r-=a,i.add(s)});o=!1})).next(()=>t-r)}re(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(r,o)).next(a=>(fe("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}ie(e,t){let i=e;return t.changes.forEach((r,o)=>{const s=dL(o);AC(s,i)>0&&(i=s)}),new to(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}let no=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.se(r),this.oe=r=>i.writeSequenceNumber(r))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}return n._e=-1,n})();function dm(n){return null==n}function hm(n){return 0===n&&1/n==-1/0}function mL(n){return"number"==typeof n&&Number.isInteger(n)&&!hm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Ji(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=gL(e)),e=oY(n.get(t),e);return gL(e)}function oY(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const o=n.charAt(r);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function gL(n){return n+"\x01\x01"}function Es(n){const e=n.length;if(Ve(e>=2),2===e)return Ve("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Nt.emptyPath();const t=e-2,i=[];let r="";for(let o=0;o<e;){const s=n.indexOf("\x01",o);switch((s<0||s>t)&&Pe(),n.charAt(s+1)){case"\x01":const a=n.substring(o,s);let l;0===r.length?l=a:(r+=a,l=r,r=""),i.push(l);break;case"\x10":r+=n.substring(o,s),r+="\0";break;case"\x11":r+=n.substring(o,s+1);break;default:Pe()}o=s+2}return new Nt(i)}const _L=["userId","batchId"];function eb(n,e){return[n,Ji(e)]}function vL(n,e,t){return[n,Ji(e),t]}const sY={},aY=["prefixPath","collectionGroup","readTime","documentId"],lY=["prefixPath","collectionGroup","documentId"],cY=["collectionGroup","readTime","prefixPath","documentId"],uY=["canonicalId","targetId"],dY=["targetId","path"],hY=["path","targetId"],fY=["collectionId","parent"],pY=["indexId","uid"],mY=["uid","sequenceNumber"],gY=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],_Y=["indexId","uid","orderedDocumentKey"],vY=["userId","collectionPath","documentId"],yY=["userId","collectionPath","largestBatchId"],bY=["userId","collectionGroup","largestBatchId"],yL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],EY=[...yL,"documentOverlays"],bL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],EL=bL,wY=[...EL,"indexConfiguration","indexState","indexEntries"];class MC extends fL{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function Ri(n,e){const t=Ee(n);return Zo.M(t.ae,e)}function wL(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function cl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function IL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class dn{constructor(e,t){this.comparator=e,this.root=t||zi.EMPTY}insert(e,t){return new dn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zi.BLACK,null,null))}remove(e){return new dn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tb(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tb(this.root,e,this.comparator,!1)}getReverseIterator(){return new tb(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tb(this.root,e,this.comparator,!0)}}class tb{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zi{constructor(e,t,i,r,o){this.key=e,this.value=t,this.color=i??zi.RED,this.left=r??zi.EMPTY,this.right=o??zi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,o){return new zi(e??this.key,t??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===o?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return zi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return zi.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Pe();const e=this.left.check();if(e!==this.right.check())throw Pe();return e+(this.isRed()?0:1)}}zi.EMPTY=null,zi.RED=!0,zi.BLACK=!1,zi.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe()}get value(){throw Pe()}get color(){throw Pe()}get left(){throw Pe()}get right(){throw Pe()}copy(e,t,i,r,o){return this}insert(e,t,i){return new zi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class nn{constructor(e){this.comparator=e,this.data=new dn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new xL(this.data.getIterator())}getIteratorFrom(e){return new xL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof nn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=i.getNext().key;if(0!==this.comparator(r,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new nn(this.comparator);return t.data=e,t}}class xL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Gd(n){return n.hasNext()?n.getNext():void 0}class Vr{constructor(e){this.fields=e,e.sort(In.comparator)}static empty(){return new Vr([])}unionWith(e){let t=new nn(In.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Vr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Hd(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class CL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class yi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new CL("Invalid base64 string: "+o):o}}(e);return new yi(t)}static fromUint8Array(e){const t=function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o}(e);return new yi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yi.EMPTY_BYTE_STRING=new yi("");const xY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ul(n){if(Ve(!!n),"string"==typeof n){let e=0;const t=xY.exec(n);if(Ve(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:qn(n.seconds),nanos:qn(n.nanos)}}function qn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ca(n){return"string"==typeof n?yi.fromBase64String(n):yi.fromUint8Array(n)}function nb(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ib(n){const e=n.mapValue.fields.__previous_value__;return nb(e)?ib(e):e}function fm(n){const e=ul(n.mapValue.fields.__local_write_time__.timestampValue);return new Rn(e.seconds,e.nanos)}class CY{constructor(e,t,i,r,o,s,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class dl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new dl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof dl&&e.projectId===this.projectId&&e.database===this.database}}const hl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},rb={nullValue:"NULL_VALUE"};function fl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?nb(n)?4:SL(n)?9007199254740991:10:Pe()}function ws(n,e){if(n===e)return!0;const t=fl(n);if(t!==fl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return fm(n).isEqual(fm(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const s=ul(r.timestampValue),a=ul(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,ca(n.bytesValue).isEqual(ca(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return qn(r.geoPointValue.latitude)===qn(o.geoPointValue.latitude)&&qn(r.geoPointValue.longitude)===qn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return qn(r.integerValue)===qn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const s=qn(r.doubleValue),a=qn(o.doubleValue);return s===a?hm(s)===hm(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Hd(n.arrayValue.values||[],e.arrayValue.values||[],ws);case 10:return function(r,o){const s=r.mapValue.fields||{},a=o.mapValue.fields||{};if(wL(s)!==wL(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(void 0===a[l]||!ws(s[l],a[l])))return!1;return!0}(n,e);default:return Pe()}var o}function pm(n,e){return void 0!==(n.values||[]).find(t=>ws(t,e))}function pl(n,e){if(n===e)return 0;const t=fl(n),i=fl(e);if(t!==i)return rt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return rt(n.booleanValue,e.booleanValue);case 2:return function(o,s){const a=qn(o.integerValue||o.doubleValue),l=qn(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return TL(n.timestampValue,e.timestampValue);case 4:return TL(fm(n),fm(e));case 5:return rt(n.stringValue,e.stringValue);case 6:return function(o,s){const a=ca(o),l=ca(s);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),l=s.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=rt(a[c],l[c]);if(0!==h)return h}return rt(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){const a=rt(qn(o.latitude),qn(s.latitude));return 0!==a?a:rt(qn(o.longitude),qn(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,s){const a=o.values||[],l=s.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=pl(a[c],l[c]);if(h)return h}return rt(a.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===hl.mapValue&&s===hl.mapValue)return 0;if(o===hl.mapValue)return 1;if(s===hl.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),c=s.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){const g=rt(l[p],h[p]);if(0!==g)return g;const _=pl(a[l[p]],c[h[p]]);if(0!==_)return _}return rt(l.length,h.length)}(n.mapValue,e.mapValue);default:throw Pe()}}function TL(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return rt(n,e);const t=ul(n),i=ul(e),r=rt(t.seconds,i.seconds);return 0!==r?r:rt(t.nanos,i.nanos)}function Zd(n){return PC(n)}function PC(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=ul(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ca(n.bytesValue).toBase64():"referenceValue"in n?we.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(const o of t.values||[])r?r=!1:i+=",",i+=PC(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let r="{",o=!0;for(const s of i)o?o=!1:r+=",",r+=`${s}:${PC(t.fields[s])}`;return r+"}"}(n.mapValue):Pe()}function Dc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function kC(n){return!!n&&"integerValue"in n}function mm(n){return!!n&&"arrayValue"in n}function DL(n){return!!n&&"nullValue"in n}function AL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function sb(n){return!!n&&"mapValue"in n}function gm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return cl(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=gm(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gm(n.arrayValue.values[t]);return e}return Object.assign({},n)}function SL(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function TY(n){return"nullValue"in n?rb:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Dc(dl.empty(),we.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Pe()}function DY(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Dc(dl.empty(),we.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?hl:Pe()}function RL(n,e){const t=pl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ML(n,e){const t=pl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class $i{constructor(e){this.value=e}static empty(){return new $i({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!sb(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gm(t)}setAll(e){let t=In.emptyPath(),i={},r=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=a.popLast()}s?i[a.lastSegment()]=gm(s):r.push(a.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,i,r)}delete(e){const t=this.field(e.popLast());sb(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ws(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];sb(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){cl(t,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new $i(gm(this.value))}}function PL(n){const e=[];return cl(n.fields,(t,i)=>{const r=new In([t]);if(sb(i)){const o=PL(i.mapValue).fields;if(0===o.length)e.push(r);else for(const s of o)e.push(r.child(s))}else e.push(r)}),new Vr(e)}class xn{constructor(e,t,i,r,o,s,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new xn(e,0,Ue.min(),Ue.min(),Ue.min(),$i.empty(),0)}static newFoundDocument(e,t,i,r){return new xn(e,1,t,Ue.min(),i,r,0)}static newNoDocument(e,t){return new xn(e,2,t,Ue.min(),Ue.min(),$i.empty(),0)}static newUnknownDocument(e,t){return new xn(e,3,t,Ue.min(),Ue.min(),$i.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ue.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$i.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$i.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ml{constructor(e,t){this.position=e,this.inclusive=t}}function kL(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const o=e[r],s=n.position[r];if(i=o.field.isKeyField()?we.comparator(we.fromName(s.referenceValue),t.key):pl(s,t.data.field(o.field)),"desc"===o.dir&&(i*=-1),0!==i)break}return i}function OL(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ws(n.position[t],e.position[t]))return!1;return!0}class _m{constructor(e,t="asc"){this.field=e,this.dir=t}}function AY(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class NL{}class Pt extends NL{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new SY(e,t,i):"array-contains"===t?new PY(e,i):"in"===t?new jL(e,i):"not-in"===t?new kY(e,i):"array-contains-any"===t?new OY(e,i):new Pt(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new RY(e,i):new MY(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(pl(t,this.value)):null!==t&&fl(this.value)===fl(t)&&this.matchesComparison(pl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qt extends NL{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Qt(e,t)}matches(e){return Kd(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Kd(n){return"and"===n.op}function OC(n){return"or"===n.op}function NC(n){return FL(n)&&Kd(n)}function FL(n){for(const e of n.filters)if(e instanceof Qt)return!1;return!0}function FC(n){if(n instanceof Pt)return n.field.canonicalString()+n.op.toString()+Zd(n.value);if(NC(n))return n.filters.map(e=>FC(e)).join(",");{const e=n.filters.map(t=>FC(t)).join(",");return`${n.op}(${e})`}}function LL(n,e){return n instanceof Pt?(i=n,(r=e)instanceof Pt&&i.op===r.op&&i.field.isEqual(r.field)&&ws(i.value,r.value)):n instanceof Qt?function(i,r){return r instanceof Qt&&i.op===r.op&&i.filters.length===r.filters.length&&i.filters.reduce((o,s,a)=>o&&LL(s,r.filters[a]),!0)}(n,e):void Pe();var i,r}function VL(n,e){const t=n.filters.concat(e);return Qt.create(t,n.op)}function BL(n){return n instanceof Pt?`${(t=n).field.canonicalString()} ${t.op} ${Zd(t.value)}`:n instanceof Qt?function(t){return t.op.toString()+" {"+t.getFilters().map(BL).join(" ,")+"}"}(n):"Filter";var t}class SY extends Pt{constructor(e,t,i){super(e,t,i),this.key=we.fromName(i.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class RY extends Pt{constructor(e,t){super(e,"in",t),this.keys=UL(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class MY extends Pt{constructor(e,t){super(e,"not-in",t),this.keys=UL(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function UL(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>we.fromName(i.referenceValue))}class PY extends Pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return mm(t)&&pm(t.arrayValue,this.value)}}class jL extends Pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&pm(this.value.arrayValue,t)}}class kY extends Pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(pm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!pm(this.value.arrayValue,t)}}class OY extends Pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!mm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>pm(this.value.arrayValue,i))}}class NY{constructor(e,t=null,i=[],r=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}}function LC(n,e=null,t=[],i=[],r=null,o=null,s=null){return new NY(n,e,t,i,r,o,s)}function Ac(n){const e=Ee(n);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>FC(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(o=i).field.canonicalString()+o.dir;var o}).join(","),dm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Zd(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Zd(i)).join(",")),e.ce=t}return e.ce}function vm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!AY(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!LL(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!OL(n.startAt,e.startAt)&&OL(n.endAt,e.endAt)}function ab(n){return we.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function lb(n,e){return n.filters.filter(t=>t instanceof Pt&&t.field.isEqual(e))}function zL(n,e,t){let i=rb,r=!0;for(const o of lb(n,e)){let s=rb,a=!0;switch(o.op){case"<":case"<=":s=TY(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=rb}RL({value:i,inclusive:r},{value:s,inclusive:a})<0&&(i=s,r=a)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const s=t.position[o];RL({value:i,inclusive:r},{value:s,inclusive:t.inclusive})<0&&(i=s,r=t.inclusive);break}return{value:i,inclusive:r}}function $L(n,e,t){let i=hl,r=!0;for(const o of lb(n,e)){let s=hl,a=!0;switch(o.op){case">=":case">":s=DY(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=hl}ML({value:i,inclusive:r},{value:s,inclusive:a})>0&&(i=s,r=a)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const s=t.position[o];ML({value:i,inclusive:r},{value:s,inclusive:t.inclusive})>0&&(i=s,r=t.inclusive);break}return{value:i,inclusive:r}}class ua{constructor(e,t=null,i=[],r=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null}}function HL(n,e,t,i,r,o,s,a){return new ua(n,e,t,i,r,o,s,a)}function Yd(n){return new ua(n)}function qL(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function VC(n){return null!==n.collectionGroup}function Qd(n){const e=Ee(n);if(null===e.le){e.le=[];const t=new Set;for(const o of e.explicitOrderBy)e.le.push(o),t.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new nn(In.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.le.push(new _m(o,i))}),t.has(In.keyField().canonicalString())||e.le.push(new _m(In.keyField(),i))}return e.le}function Ir(n){const e=Ee(n);return e.he||(e.he=function WL(n,e){if("F"===n.limitType)return LC(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>new _m(r.field,"desc"===r.dir?"asc":"desc"));const t=n.endAt?new ml(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new ml(n.startAt.position,n.startAt.inclusive):null;return LC(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}(e,Qd(n))),e.he}function BC(n,e){const t=n.filters.concat([e]);return new ua(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function cb(n,e,t){return new ua(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ym(n,e){return vm(Ir(n),Ir(e))&&n.limitType===e.limitType}function GL(n){return`${Ac(Ir(n))}|lt:${n.limitType}`}function Xd(n){return`Query(target=${function(t){let i=t.path.canonicalString();return null!==t.collectionGroup&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>BL(r)).join(", ")}]`),dm(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Zd(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Zd(r)).join(",")),`Target(${i})`}(Ir(n))}; limitType=${n.limitType})`}function bm(n,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return null!==i.collectionGroup?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):we.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,e)&&function(i,r){for(const o of Qd(i))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((i=n).startAt&&!function(s,a,l){const c=kL(s,a,l);return s.inclusive?c<=0:c<0}(i.startAt,Qd(i),r)||i.endAt&&!function(s,a,l){const c=kL(s,a,l);return s.inclusive?c>=0:c>0}(i.endAt,Qd(i),r)));var i,r}function ZL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function KL(n){return(e,t)=>{let i=!1;for(const r of Qd(n)){const o=FY(r,e,t);if(0!==o)return o;i=i||r.field.isKeyField()}return 0}}function FY(n,e,t){const i=n.field.isKeyField()?we.comparator(e.key,t.key):function(o,s,a){const l=s.data.field(o),c=a.data.field(o);return null!==l&&null!==c?pl(l,c):Pe()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Pe()}}class da{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,o]of i)if(this.equalsFn(r,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){cl(this.inner,(t,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return IL(this.inner)}size(){return this.innerSize}}const LY=new dn(we.comparator);function Br(){return LY}const YL=new dn(we.comparator);function Em(...n){let e=YL;for(const t of n)e=e.insert(t.key,t);return e}function QL(n){let e=YL;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Is(){return wm()}function XL(){return wm()}function wm(){return new da(n=>n.toString(),(n,e)=>n.isEqual(e))}const VY=new dn(we.comparator),BY=new nn(we.comparator);function ct(...n){let e=BY;for(const t of n)e=e.add(t);return e}const UY=new nn(rt);function UC(){return UY}function JL(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hm(e)?"-0":e}}function e2(n){return{integerValue:""+n}}function t2(n,e){return mL(e)?e2(e):JL(n,e)}class ub{constructor(){this._=void 0}}function jY(n,e,t){return n instanceof Jd?function(r,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&nb(o)&&(o=ib(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Sc?r2(n,e):n instanceof Rc?o2(n,e):function(r,o){const s=n2(r,o),a=s2(s)+s2(r.Ie);return kC(s)&&kC(r.Ie)?e2(a):JL(r.serializer,a)}(n,e)}function zY(n,e,t){return n instanceof Sc?r2(n,e):n instanceof Rc?o2(n,e):t}function n2(n,e){return n instanceof eh?kC(i=e)||(o=i)&&"doubleValue"in o?e:{integerValue:0}:null;var i,o}class Jd extends ub{}class Sc extends ub{constructor(e){super(),this.elements=e}}function r2(n,e){const t=a2(e);for(const i of n.elements)t.some(r=>ws(r,i))||t.push(i);return{arrayValue:{values:t}}}class Rc extends ub{constructor(e){super(),this.elements=e}}function o2(n,e){let t=a2(e);for(const i of n.elements)t=t.filter(r=>!ws(r,i));return{arrayValue:{values:t}}}class eh extends ub{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function s2(n){return qn(n.integerValue||n.doubleValue)}function a2(n){return mm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Im{constructor(e,t){this.field=e,this.transform=t}}class HY{constructor(e,t){this.version=e,this.transformResults=t}}class Mn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mn}static exists(e){return new Mn(void 0,e)}static updateTime(e){return new Mn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function db(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class hb{}function l2(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new nh(n.key,Mn.none()):new th(n.key,n.data,Mn.none());{const t=n.data,i=$i.empty();let r=new nn(In.comparator);for(let o of e.fields)if(!r.has(o)){let s=t.field(o);null===s&&o.length>1&&(o=o.popLast(),s=t.field(o)),null===s?i.delete(o):i.set(o,s),r=r.add(o)}return new ha(n.key,i,new Vr(r.toArray()),Mn.none())}}function qY(n,e,t){n instanceof th?function(r,o,s){const a=r.value.clone(),l=d2(r.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof ha?function(r,o,s){if(!db(r.precondition,o))return void o.convertToUnknownDocument(s.version);const a=d2(r.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(u2(r)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function xm(n,e,t,i){return n instanceof th?function(o,s,a,l){if(!db(o.precondition,s))return a;const c=o.value.clone(),h=h2(o.fieldTransforms,l,s);return c.setAll(h),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(n,e,t,i):n instanceof ha?function(o,s,a,l){if(!db(o.precondition,s))return a;const c=h2(o.fieldTransforms,l,s),h=s.data;return h.setAll(u2(o)),h.setAll(c),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,i):(a=t,db(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function WY(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),o=n2(i.transform,r||null);null!=o&&(null===t&&(t=$i.empty()),t.set(i.field,o))}return t||null}function c2(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(i=n.fieldTransforms)&&void 0===r||i&&r&&Hd(i,r,(o,s)=>function $Y(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(i=n.transform)instanceof Sc&&r instanceof Sc||i instanceof Rc&&r instanceof Rc?Hd(i.elements,r.elements,ws):i instanceof eh&&r instanceof eh?ws(i.Ie,r.Ie):i instanceof Jd&&r instanceof Jd);var i,r}(o,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var i,r}class th extends hb{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ha extends hb{constructor(e,t,i,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function u2(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function d2(n,e,t){const i=new Map;Ve(n.length===t.length);for(let r=0;r<t.length;r++){const o=n[r],s=o.transform,a=e.data.field(o.field);i.set(o.field,zY(s,a,t[r]))}return i}function h2(n,e,t){const i=new Map;for(const r of n){const o=r.transform,s=t.data.field(r.field);i.set(r.field,jY(o,s,e))}return i}class nh extends hb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jC extends hb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zC{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&qY(o,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=xm(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=xm(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=XL();return this.mutations.forEach(r=>{const o=e.get(r.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=t.has(r.key)?null:a;const l=l2(s,a);null!==l&&i.set(r.key,l),s.isValidDocument()||s.convertToNoDocument(Ue.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ct())}isEqual(e){return this.batchId===e.batchId&&Hd(this.mutations,e.mutations,(t,i)=>c2(t,i))&&Hd(this.baseMutations,e.baseMutations,(t,i)=>c2(t,i))}}class $C{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Ve(e.mutations.length===i.length);let r=VY;const o=e.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,i[s].version);return new $C(e,t,i,r)}}class HC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ZY{constructor(e,t){this.count=e,this.unchangedNames=t}}var ai,Ft;function f2(n){switch(n){default:return Pe();case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0}}function p2(n){if(void 0===n)return ni("GRPC error has no .code"),X.UNKNOWN;switch(n){case ai.OK:return X.OK;case ai.CANCELLED:return X.CANCELLED;case ai.UNKNOWN:return X.UNKNOWN;case ai.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case ai.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case ai.INTERNAL:return X.INTERNAL;case ai.UNAVAILABLE:return X.UNAVAILABLE;case ai.UNAUTHENTICATED:return X.UNAUTHENTICATED;case ai.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case ai.NOT_FOUND:return X.NOT_FOUND;case ai.ALREADY_EXISTS:return X.ALREADY_EXISTS;case ai.PERMISSION_DENIED:return X.PERMISSION_DENIED;case ai.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case ai.ABORTED:return X.ABORTED;case ai.OUT_OF_RANGE:return X.OUT_OF_RANGE;case ai.UNIMPLEMENTED:return X.UNIMPLEMENTED;case ai.DATA_LOSS:return X.DATA_LOSS;default:return Pe()}}(Ft=ai||(ai={}))[Ft.OK=0]="OK",Ft[Ft.CANCELLED=1]="CANCELLED",Ft[Ft.UNKNOWN=2]="UNKNOWN",Ft[Ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ft[Ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ft[Ft.NOT_FOUND=5]="NOT_FOUND",Ft[Ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ft[Ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ft[Ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ft[Ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ft[Ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ft[Ft.ABORTED=10]="ABORTED",Ft[Ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ft[Ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ft[Ft.INTERNAL=13]="INTERNAL",Ft[Ft.UNAVAILABLE=14]="UNAVAILABLE",Ft[Ft.DATA_LOSS=15]="DATA_LOSS";function m2(){return new TextEncoder}const KY=new jd([4294967295,4294967295],0);function g2(n){const e=m2().encode(n),t=new zK;return t.update(e),new Uint8Array(t.digest())}function _2(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new jd([t,i],0),new jd([r,o],0)]}class qC{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Cm(`Invalid padding: ${t}`);if(i<0)throw new Cm(`Invalid hash count: ${i}`);if(e.length>0&&0===this.hashCount)throw new Cm(`Invalid hash count: ${i}`);if(0===e.length&&0!==t)throw new Cm(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=jd.fromNumber(this.Te)}de(e,t,i){let r=e.add(t.multiply(jd.fromNumber(i)));return 1===r.compare(KY)&&(r=new jd([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=g2(e),[i,r]=_2(t);for(let o=0;o<this.hashCount;o++){const s=this.de(i,r,o);if(!this.Ae(s))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new qC(o,r,t);return i.forEach(a=>s.insert(a)),s}insert(e){if(0===this.Te)return;const t=g2(e),[i,r]=_2(t);for(let o=0;o<this.hashCount;o++){const s=this.de(i,r,o);this.Re(s)}}Re(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Cm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Tm{constructor(e,t,i,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Dm.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Tm(Ue.min(),r,new dn(rt),Br(),ct())}}class Dm{constructor(e,t,i,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Dm(i,t,ct(),ct(),ct())}}class pb{constructor(e,t,i,r){this.Ve=e,this.removedTargetIds=t,this.key=i,this.me=r}}class v2{constructor(e,t){this.targetId=e,this.fe=t}}class y2{constructor(e,t,i=yi.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class b2{constructor(){this.ge=0,this.pe=w2(),this.ye=yi.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=ct(),t=ct(),i=ct();return this.pe.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Pe()}}),new Dm(this.ye,this.we,e,t,i)}Fe(){this.Se=!1,this.pe=w2()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ve(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class YY{constructor(e){this.Le=e,this.ke=new Map,this.qe=Br(),this.Qe=E2(),this.Ke=new dn(rt)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{const i=this.ze(t);switch(e.state){case 0:this.je(t)&&i.Ce(e.resumeToken);break;case 1:i.Ne(),i.be||i.Fe(),i.Ce(e.resumeToken);break;case 2:i.Ne(),i.be||this.removeTarget(t);break;case 3:this.je(t)&&(i.Be(),i.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),i.Ce(e.resumeToken));break;default:Pe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((i,r)=>{this.je(r)&&t(r)})}Je(e){const t=e.targetId,i=e.fe.count,r=this.Ye(t);if(r){const o=r.target;if(ab(o))if(0===i){const s=new we(o.path);this.We(t,s,xn.newNoDocument(s,Ue.min()))}else Ve(1===i);else{const s=this.Ze(t);if(s!==i){const a=this.Xe(e),l=a?this.et(a,e,s):1;0!==l&&(this.He(t),this.Ke=this.Ke.insert(t,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=t;let s,a;try{s=ca(i).toUint8Array()}catch(l){if(l instanceof CL)return Lr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new qC(s,r,o)}catch(l){return Lr(l instanceof Cm?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return 0===a.Te?null:a}et(e,t,i){return t.fe.count===i-this.rt(e,t.targetId)?0:2}rt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let r=0;return i.forEach(o=>{const s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(t,o,null),r++)}),r}it(e){const t=new Map;this.ke.forEach((o,s)=>{const a=this.Ye(s);if(a){if(o.current&&ab(a.target)){const l=new we(a.target.path);null!==this.qe.get(l)||this.st(s,l)||this.We(s,l,xn.newNoDocument(l,e))}o.De&&(t.set(s,o.ve()),o.Fe())}});let i=ct();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const c=this.Ye(l);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(i=i.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));const r=new Tm(e,t,this.Ke,this.qe,i);return this.qe=Br(),this.Qe=E2(),this.Ke=new dn(rt),r}Ue(e,t){if(!this.je(e))return;const i=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,i),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,i){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),i&&(this.qe=this.qe.insert(t,i))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new b2,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new nn(rt),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||fe("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new b2),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function E2(){return new dn(we.comparator)}function w2(){return new dn(we.comparator)}const QY={asc:"ASCENDING",desc:"DESCENDING"},XY={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JY={and:"AND",or:"OR"};class eQ{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function WC(n,e){return n.useProto3Json||dm(e)?e:{value:e}}function ih(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function I2(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function tQ(n,e){return ih(n,e.toTimestamp())}function ii(n){return Ve(!!n),Ue.fromTimestamp(function(t){const i=ul(t);return new Rn(i.seconds,i.nanos)}(n))}function GC(n,e){return(i=n,new Nt(["projects",i.projectId,"databases",i.database])).child("documents").child(e).canonicalString();var i}function x2(n){const e=Nt.fromString(n);return Ve(k2(e)),e}function Am(n,e){return GC(n.databaseId,e.path)}function xs(n,e){const t=x2(e);if(t.get(1)!==n.databaseId.projectId)throw new ce(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ce(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new we(T2(t))}function ZC(n,e){return GC(n.databaseId,e)}function C2(n){const e=x2(n);return 4===e.length?Nt.emptyPath():T2(e)}function Sm(n){return new Nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function T2(n){return Ve(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function D2(n,e,t){return{name:Am(n,e),fields:t.value.mapValue.fields}}function A2(n,e,t){const i=xs(n,e.name),r=ii(e.updateTime),o=e.createTime?ii(e.createTime):Ue.min(),s=new $i({mapValue:{fields:e.fields}}),a=xn.newFoundDocument(i,r,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Rm(n,e){let t;if(e instanceof th)t={update:D2(n,e.key,e.value)};else if(e instanceof nh)t={delete:Am(n,e.key)};else if(e instanceof ha)t={update:D2(n,e.key,e.data),updateMask:cQ(e.fieldMask)};else{if(!(e instanceof jC))return Pe();t={verify:Am(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(o,s){const a=s.transform;if(a instanceof Jd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Sc)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Rc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof eh)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw Pe()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:tQ(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Pe()),t;var o}function KC(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Mn.updateTime(ii(o.updateTime)):void 0!==o.exists?Mn.exists(o.exists):Mn.none():Mn.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,a){let l=null;"setToServerValue"in a?(Ve("REQUEST_TIME"===a.setToServerValue),l=new Jd):"appendMissingElements"in a?l=new Sc(a.appendMissingElements.values||[]):"removeAllFromArray"in a?l=new Rc(a.removeAllFromArray.values||[]):"increment"in a?l=new eh(s,a.increment):Pe();const c=In.fromServerFormat(a.fieldPath);return new Im(c,l)}(n,r)):[];var o;if(e.update){const r=xs(n,e.update.name),o=new $i({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=new Vr((e.updateMask.fieldPaths||[]).map(h=>In.fromServerFormat(h)));return new ha(r,o,s,t,i)}return new th(r,o,t,i)}if(e.delete){const r=xs(n,e.delete);return new nh(r,t)}if(e.verify){const r=xs(n,e.verify);return new jC(r,t)}return Pe()}function S2(n,e){return{documents:[ZC(n,e.path)]}}function YC(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=ZC(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=ZC(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(l){if(0!==l.length)return P2(Qt.create(l,"and"))}(e.filters);r&&(t.structuredQuery.where=r);const o=function(l){if(0!==l.length)return l.map(c=>{return{field:gl((p=c).field),direction:sQ(p.dir)};var p})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const s=WC(n,e.limit);return null!==s&&(t.structuredQuery.limit=s),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),t;var l}function R2(n){let e=C2(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Ve(1===i);const h=t.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){const g=M2(p);return g instanceof Qt&&NC(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=t.orderBy.map(g=>{return new _m(rh((E=g).field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let a=null;t.limit&&(a=function(p){let g;return g="object"==typeof p?p.value:p,dm(g)?null:g}(t.limit));let l=null;var p;t.startAt&&(l=new ml((p=t.startAt).values||[],!!p.before));let c=null;return t.endAt&&(c=function(p){return new ml(p.values||[],!p.before)}(t.endAt)),HL(e,r,s,o,a,"F",l,c)}function M2(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=rh(t.unaryFilter.field);return Pt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=rh(t.unaryFilter.field);return Pt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=rh(t.unaryFilter.field);return Pt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=rh(t.unaryFilter.field);return Pt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Pe()}}(n):void 0!==n.fieldFilter?Pt.create(rh((t=n).fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pe()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Qt.create(t.compositeFilter.filters.map(i=>M2(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Pe()}}(t.compositeFilter.op))}(n):Pe();var t}function sQ(n){return QY[n]}function aQ(n){return XY[n]}function lQ(n){return JY[n]}function gl(n){return{fieldPath:n.canonicalString()}}function rh(n){return In.fromServerFormat(n.fieldPath)}function P2(n){return n instanceof Pt?function(t){if("=="===t.op){if(AL(t.value))return{unaryFilter:{field:gl(t.field),op:"IS_NAN"}};if(DL(t.value))return{unaryFilter:{field:gl(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(AL(t.value))return{unaryFilter:{field:gl(t.field),op:"IS_NOT_NAN"}};if(DL(t.value))return{unaryFilter:{field:gl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gl(t.field),op:aQ(t.op),value:t.value}}}(n):n instanceof Qt?function(t){const i=t.getFilters().map(r=>P2(r));return 1===i.length?i[0]:{compositeFilter:{op:lQ(t.op),filters:i}}}(n):Pe()}function cQ(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function k2(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class fa{constructor(e,t,i,r,o=Ue.min(),s=Ue.min(),a=yi.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new fa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class O2{constructor(e){this.ut=e}}function N2(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:mb(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:Am(o=n.ut,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:ih(o,s.version.toTimestamp()),createTime:ih(o,s.createTime.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Mc(e.version)};else{if(!e.isUnknownDocument())return Pe();i.unknownDocument={path:t.path.toArray(),version:Mc(e.version)}}var o,s;return i}function mb(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Mc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Pc(n){const e=new Rn(n.seconds,n.nanoseconds);return Ue.fromTimestamp(e)}function kc(n,e){const t=(e.baseMutations||[]).map(o=>KC(n.ut,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const i=e.mutations.map(o=>KC(n.ut,o)),r=Rn.fromMillis(e.localWriteTimeMs);return new zC(e.batchId,r,t,i)}function Mm(n){const e=Pc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Pc(n.lastLimboFreeSnapshotVersion):Ue.min();let i;return i=void 0!==n.query.documents?(Ve(1===(o=n.query).documents.length),Ir(Yd(C2(o.documents[0])))):function(o){return Ir(R2(o))}(n.query),new fa(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,yi.fromBase64String(n.resumeToken));var o}function F2(n,e){const t=Mc(e.snapshotVersion),i=Mc(e.lastLimboFreeSnapshotVersion);let r;r=ab(e.target)?S2(n.ut,e.target):YC(n.ut,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ac(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function QC(n){const e=R2({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?cb(e,e.limit,"L"):e}function XC(n,e){return new HC(e.largestBatchId,KC(n.ut,e.overlayMutation))}function L2(n,e){const t=e.path.lastSegment();return[n,Ji(e.path.popLast()),t]}function V2(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Mc(i.readTime),documentKey:Ji(i.documentKey.path),largestBatchId:i.largestBatchId}}class dQ{getBundleMetadata(e,t){return B2(e).get(t).next(i=>{if(i)return{id:(o=i).bundleId,createTime:Pc(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return B2(e).put({bundleId:(r=t).id,createTime:Mc(ii(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return U2(e).get(t).next(i=>{if(i)return{name:(o=i).name,query:QC(o.bundledQuery),readTime:Pc(o.readTime)};var o})}saveNamedQuery(e,t){return U2(e).put({name:(r=t).name,readTime:Mc(ii(r.readTime)),bundledQuery:r.bundledQuery});var r}}function B2(n){return Ri(n,"bundles")}function U2(n){return Ri(n,"namedQueries")}class gb{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){return new gb(e,t.uid||"")}getOverlay(e,t){return Pm(e).get(L2(this.userId,t)).next(i=>i?XC(this.serializer,i):null)}getOverlays(e,t){const i=Is();return U.forEach(t,r=>this.getOverlay(e,r).next(o=>{null!==o&&i.set(r,o)})).next(()=>i)}saveOverlays(e,t,i){const r=[];return i.forEach((o,s)=>{const a=new HC(t,s);r.push(this.lt(e,a))}),U.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(s=>r.add(Ji(s.getCollectionPath())));const o=[];return r.forEach(s=>{const a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,i+1],!1,!0);o.push(Pm(e).H("collectionPathOverlayIndex",a))}),U.waitFor(o)}getOverlaysForCollection(e,t,i){const r=Is(),o=Ji(t),s=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Pm(e).W("collectionPathOverlayIndex",s).next(a=>{for(const l of a){const c=XC(this.serializer,l);r.set(c.getKey(),c)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const o=Is();let s;const a=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Pm(e).Y({index:"collectionGroupOverlayIndex",range:a},(l,c,h)=>{const p=XC(this.serializer,c);o.size()<r||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}lt(e,t){return Pm(e).put(function(r,o,s){const[a,l,c]=L2(o,s.mutation.key);return{userId:o,collectionPath:l,documentId:c,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Rm(r.ut,s.mutation)}}(this.serializer,this.userId,t))}}function Pm(n){return Ri(n,"documentOverlays")}class Oc{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(qn(e.integerValue));else if("doubleValue"in e){const i=qn(e.doubleValue);isNaN(i)?this.Tt(t,13):(this.Tt(t,15),hm(i)?t.Et(0):t.Et(i))}else if("timestampValue"in e){const i=e.timestampValue;this.Tt(t,20),"string"==typeof i?t.dt(i):(t.dt(`${i.seconds||""}`),t.Et(i.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(ca(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Tt(t,45),t.Et(i.latitude||0),t.Et(i.longitude||0)}else"mapValue"in e?SL(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):Pe()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const i=e.fields||{};this.Tt(t,55);for(const r of Object.keys(i))this.At(r,t),this.Pt(i[r],t)}yt(e,t){const i=e.values||[];this.Tt(t,50);for(const r of i)this.Pt(r,t)}ft(e,t){this.Tt(t,37),we.fromName(e).path.forEach(i=>{this.Tt(t,60),this.wt(i,t)})}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}function hQ(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function j2(n){const e=64-function(i){let r=0;for(let o=0;o<8;++o){const s=hQ(255&i[o]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}Oc.St=new Oc;class fQ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Dt(i.value),i=t.next();this.Ct()}vt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ft(i.value),i=t.next();this.Mt()}xt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Dt(i);else if(i<2048)this.Dt(960|i>>>6),this.Dt(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Dt(480|i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i);else{const r=t.codePointAt(0);this.Dt(240|r>>>18),this.Dt(128|63&r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r)}}this.Ct()}Ot(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{const r=t.codePointAt(0);this.Ft(240|r>>>18),this.Ft(128|63&r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r)}}this.Mt()}Nt(e){const t=this.Bt(e),i=j2(t);this.Lt(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}kt(e){const t=this.Bt(e),i=j2(t);this.Lt(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Dt(e){const t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class pQ{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class mQ{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class km{constructor(){this.Wt=new fQ,this.Gt=new pQ(this.Wt),this.zt=new mQ(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Nc{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Ht(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new Nc(this.indexId,this.documentKey,this.arrayValue,i)}}function _l(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=z2(n.arrayValue,e.arrayValue),0!==t?t:(t=z2(n.directionalValue,e.directionalValue),0!==t?t:we.comparator(n.documentKey,e.documentKey)))}function z2(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class $2{constructor(e){this.Jt=new nn((t,i)=>In.comparator(t.field,i.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const i=t;i.isInequality()?this.Jt=this.Jt.add(i):this.Zt.push(i)}}get Xt(){return this.Jt.size>1}en(e){if(Ve(e.collectionGroup===this.collectionId),this.Xt)return!1;const t=DC(e);if(void 0!==t&&!this.tn(t))return!1;const i=xc(e);let r=new Set,o=0,s=0;for(;o<i.length&&this.tn(i[o]);++o)r=r.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Jt.size>0){const a=this.Jt.getIterator().getNext();if(!r.has(a.field.canonicalString())){const l=i[o];if(!this.nn(a,l)||!this.rn(this.Yt[s++],l))return!1}++o}for(;o<i.length;++o)if(s>=this.Yt.length||!this.rn(this.Yt[s++],i[o]))return!1;return!0}sn(){if(this.Xt)return null;let e=new nn(In.comparator);const t=[];for(const i of this.Zt)if(!i.field.isKeyField())if("array-contains"===i.op||"array-contains-any"===i.op)t.push(new Cc(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new Cc(i.field,0))}for(const i of this.Yt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new Cc(i.field,"asc"===i.dir?0:1)));return new qd(qd.UNKNOWN_ID,this.collectionId,t,Wd.empty())}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function H2(n){var e,t;if(Ve(n instanceof Pt||n instanceof Qt),n instanceof Pt){if(n instanceof jL){const r=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(o=>Pt.create(n.field,"==",o)))||[];return Qt.create(r,"or")}return n}const i=n.filters.map(r=>H2(r));return Qt.create(i,n.op)}function gQ(n){if(0===n.getFilters().length)return[];const e=tT(H2(n));return Ve(q2(e)),JC(e)||eT(e)?[e]:e.getFilters()}function JC(n){return n instanceof Pt}function eT(n){return n instanceof Qt&&NC(n)}function q2(n){return JC(n)||eT(n)||function(t){if(t instanceof Qt&&OC(t)){for(const i of t.getFilters())if(!JC(i)&&!eT(i))return!1;return!0}return!1}(n)}function tT(n){if(Ve(n instanceof Pt||n instanceof Qt),n instanceof Pt)return n;if(1===n.filters.length)return tT(n.filters[0]);const e=n.filters.map(i=>tT(i));let t=Qt.create(e,n.op);return t=_b(t),q2(t)?t:(Ve(t instanceof Qt),Ve(Kd(t)),Ve(t.filters.length>1),t.filters.reduce((i,r)=>nT(i,r)))}function nT(n,e){let t;return Ve(n instanceof Pt||n instanceof Qt),Ve(e instanceof Pt||e instanceof Qt),t=n instanceof Pt?e instanceof Pt?Qt.create([n,e],"and"):W2(n,e):e instanceof Pt?W2(e,n):function(r,o){if(Ve(r.filters.length>0&&o.filters.length>0),Kd(r)&&Kd(o))return VL(r,o.getFilters());const s=OC(r)?r:o,a=OC(r)?o:r,l=s.filters.map(c=>nT(c,a));return Qt.create(l,"or")}(n,e),_b(t)}function W2(n,e){if(Kd(e))return VL(e,n.getFilters());{const t=e.filters.map(i=>nT(n,i));return Qt.create(t,"or")}}function _b(n){if(Ve(n instanceof Pt||n instanceof Qt),n instanceof Pt)return n;const e=n.getFilters();if(1===e.length)return _b(e[0]);if(FL(n))return n;const t=e.map(r=>_b(r)),i=[];return t.forEach(r=>{r instanceof Pt?i.push(r):r instanceof Qt&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:Qt.create(i,n.op)}class _Q{constructor(){this.on=new iT}addToCollectionParentIndex(e,t){return this.on.add(t),U.resolve()}getCollectionParents(e,t){return U.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return U.resolve()}deleteFieldIndex(e,t){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,t){return U.resolve()}getDocumentsMatchingTarget(e,t){return U.resolve(null)}getIndexType(e,t){return U.resolve(0)}getFieldIndexes(e,t){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,t){return U.resolve(to.min())}getMinOffsetFromCollectionGroup(e,t){return U.resolve(to.min())}updateCollectionGroup(e,t,i){return U.resolve()}updateIndexEntries(e,t){return U.resolve()}}class iT{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new nn(Nt.comparator),o=!r.has(i);return this.index[t]=r.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new nn(Nt.comparator)).toArray()}}const vb=new Uint8Array(0);class vQ{constructor(e,t){this.user=e,this.databaseId=t,this._n=new iT,this.an=new da(i=>Ac(i),(i,r)=>vm(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this._n.add(t)});const o={collectionId:i,parent:Ji(r)};return G2(e).put(o)}return U.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[cL(t),""],!1,!0);return G2(e).W(r).next(o=>{for(const s of o){if(s.collectionId!==t)break;i.push(Es(s.parent))}return i})}addFieldIndex(e,t){const i=Om(e),r={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;delete r.indexId;const o=i.add(r);if(t.indexState){const s=sh(e);return o.next(a=>{s.put(V2(a,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const i=Om(e),r=sh(e),o=oh(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Om(e),i=oh(e),r=sh(e);return t.H().next(()=>i.H()).next(()=>r.H())}createTargetIndexes(e,t){return U.forEach(this.un(t),i=>this.getIndexType(e,i).next(r=>{if(0===r||1===r){const o=new $2(i).sn();if(null!=o)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){const i=oh(e);let r=!0;const o=new Map;return U.forEach(this.un(t),s=>this.cn(e,s).next(a=>{r&&(r=!!a),o.set(s,a)})).next(()=>{if(r){let s=ct();const a=[];return U.forEach(o,(l,c)=>{var j;fe("IndexedDbIndexManager",`Using index ${j=l,`id=${j.indexId}|cg=${j.collectionGroup}|f=${j.fields.map(ie=>`${ie.fieldPath}:${ie.kind}`).join(",")}`} to execute ${Ac(t)}`);const h=function(j,ie){const _e=DC(ie);if(void 0===_e)return null;for(const Be of lb(j,_e.fieldPath))switch(Be.op){case"array-contains-any":return Be.value.arrayValue.values||[];case"array-contains":return[Be.value]}return null}(c,l),p=function(j,ie){const _e=new Map;for(const Be of xc(ie))for(const et of lb(j,Be.fieldPath))switch(et.op){case"==":case"in":_e.set(Be.fieldPath.canonicalString(),et.value);break;case"not-in":case"!=":return _e.set(Be.fieldPath.canonicalString(),et.value),Array.from(_e.values())}return null}(c,l),g=function(j,ie){const _e=[];let Be=!0;for(const et of xc(ie)){const Zt=0===et.kind?zL(j,et.fieldPath,j.startAt):$L(j,et.fieldPath,j.startAt);_e.push(Zt.value),Be&&(Be=Zt.inclusive)}return new ml(_e,Be)}(c,l),_=function(j,ie){const _e=[];let Be=!0;for(const et of xc(ie)){const Zt=0===et.kind?$L(j,et.fieldPath,j.endAt):zL(j,et.fieldPath,j.endAt);_e.push(Zt.value),Be&&(Be=Zt.inclusive)}return new ml(_e,Be)}(c,l),E=this.ln(l,c,g),x=this.ln(l,c,_),T=this.hn(l,c,p),V=this.Pn(l.indexId,h,E,g.inclusive,x,_.inclusive,T);return U.forEach(V,k=>i.j(k,t.limit).next(j=>{j.forEach(ie=>{const _e=we.fromSegments(ie.documentKey);s.has(_e)||(s=s.add(_e),a.push(_e))})}))}).next(()=>a)}return U.resolve(null)})}un(e){let t=this.an.get(e);return t||(t=0===e.filters.length?[e]:gQ(Qt.create(e.filters,"and")).map(i=>LC(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,t),t)}Pn(e,t,i,r,o,s,a){const l=(null!=t?t.length:1)*Math.max(i.length,o.length),c=l/(null!=t?t.length:1),h=[];for(let p=0;p<l;++p){const g=t?this.In(t[p/c]):vb,_=this.Tn(e,g,i[p%c],r),E=this.En(e,g,o[p%c],s),x=a.map(T=>this.Tn(e,g,T,!0));h.push(...this.createRange(_,E,x))}return h}Tn(e,t,i,r){const o=new Nc(e,we.empty(),t,i);return r?o:o.Ht()}En(e,t,i,r){const o=new Nc(e,we.empty(),t,i);return r?o.Ht():o}cn(e,t){const i=new $2(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(o=>{let s=null;for(const a of o)i.en(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let i=2;const r=this.un(t);return U.forEach(r,o=>this.cn(e,o).next(s=>{s?0!==i&&s.fields.length<function(l){let c=new nn(In.comparator),h=!1;for(const p of l.filters)for(const g of p.getFlattenedFilters())g.field.isKeyField()||("array-contains"===g.op||"array-contains-any"===g.op?h=!0:c=c.add(g.field));for(const p of l.orderBy)p.field.isKeyField()||(c=c.add(p.field));return c.size+(h?1:0)}(o)&&(i=1):i=0})).next(()=>null!==t.limit&&r.length>1&&2===i?1:i)}dn(e,t){const i=new km;for(const r of xc(e)){const o=t.data.field(r.fieldPath);if(null==o)return null;const s=i.jt(r.kind);Oc.St.ht(o,s)}return i.Ut()}In(e){const t=new km;return Oc.St.ht(e,t.jt(0)),t.Ut()}An(e,t){const i=new km;return Oc.St.ht(Dc(this.databaseId,t),i.jt(function(o){const s=xc(o);return 0===s.length?0:s[s.length-1].kind}(e))),i.Ut()}hn(e,t,i){if(null===i)return[];let r=[];r.push(new km);let o=0;for(const s of xc(e)){const a=i[o++];for(const l of r)if(this.Rn(t,s.fieldPath)&&mm(a))r=this.Vn(r,s,a);else{const c=l.jt(s.kind);Oc.St.ht(a,c)}}return this.mn(r)}ln(e,t,i){return this.hn(e,t,i.position)}mn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Ut();return t}Vn(e,t,i){const r=[...e],o=[];for(const s of i.arrayValue.values||[])for(const a of r){const l=new km;l.seed(a.Ut()),Oc.St.ht(s,l.jt(t.kind)),o.push(l)}return o}Rn(e,t){return!!e.filters.find(i=>i instanceof Pt&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=Om(e),r=sh(e);return(t?i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.W()).next(o=>{const s=[];return U.forEach(o,a=>r.get([a.indexId,this.uid]).next(l=>{s.push(function(h,p){const g=p?new Wd(p.sequenceNumber,new to(Pc(p.readTime),new we(Es(p.documentKey)),p.largestBatchId)):Wd.empty(),_=h.fields.map(([E,x])=>new Cc(In.fromServerFormat(E),x));return new qd(h.indexId,h.collectionGroup,_,g)}(a,l))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>{const o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==o?o:rt(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=Om(e),o=sh(e);return this.fn(e).next(s=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>U.forEach(a,l=>o.put(V2(l.indexId,this.user,s,i)))))}updateIndexEntries(e,t){const i=new Map;return U.forEach(t,(r,o)=>{const s=i.get(r.collectionGroup);return(s?U.resolve(s):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),U.forEach(a,l=>this.gn(e,r,l).next(c=>{const h=this.pn(o,l);return c.isEqual(h)?U.resolve():this.yn(e,o,l,c,h)}))))})}wn(e,t,i,r){return oh(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(i,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,i,r){return oh(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(i,t.key),t.key.path.toArray()])}gn(e,t,i){const r=oh(e);let o=new nn(_l);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.An(i,t)])},(s,a)=>{o=o.add(new Nc(i.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}pn(e,t){let i=new nn(_l);const r=this.dn(t,e);if(null==r)return i;const o=DC(t);if(null!=o){const s=e.data.field(o.fieldPath);if(mm(s))for(const a of s.arrayValue.values||[])i=i.add(new Nc(t.indexId,e.key,this.In(a),r))}else i=i.add(new Nc(t.indexId,e.key,vb,r));return i}yn(e,t,i,r,o){fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(l,c,h,p,g){const _=l.getIterator(),E=c.getIterator();let x=Gd(_),T=Gd(E);for(;x||T;){let V=!1,k=!1;if(x&&T){const j=h(x,T);j<0?k=!0:j>0&&(V=!0)}else null!=x?k=!0:V=!0;V?(p(T),T=Gd(E)):k?(g(x),x=Gd(_)):(x=Gd(_),T=Gd(E))}}(r,o,_l,a=>{s.push(this.wn(e,t,i,a))},a=>{s.push(this.Sn(e,t,i,a))}),U.waitFor(s)}fn(e){let t=1;return sh(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((s,a)=>_l(s,a)).filter((s,a,l)=>!a||0!==_l(s,l[a-1]));const r=[];r.push(e);for(const s of i){const a=_l(s,e),l=_l(s,t);if(0===a)r[0]=e.Ht();else if(a>0&&l<0)r.push(s),r.push(s.Ht());else if(l>0)break}r.push(t);const o=[];for(let s=0;s<r.length;s+=2){if(this.bn(r[s],r[s+1]))return[];o.push(IDBKeyRange.bound([r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,vb,[]],[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,vb,[]]))}return o}bn(e,t){return _l(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Z2)}getMinOffset(e,t){return U.mapArray(this.un(t),i=>this.cn(e,i).next(r=>r||Pe())).next(Z2)}}function G2(n){return Ri(n,"collectionParents")}function oh(n){return Ri(n,"indexEntries")}function Om(n){return Ri(n,"indexConfiguration")}function sh(n){return Ri(n,"indexState")}function Z2(n){Ve(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;AC(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new to(e.readTime,e.documentKey,t)}const K2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class er{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new er(e,er.DEFAULT_COLLECTION_PERCENTILE,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Y2(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId);let a=0;const l=i.Y({range:s},(h,p,g)=>(a++,g.delete()));o.push(l.next(()=>{Ve(1===a)}));const c=[];for(const h of t.mutations){const p=vL(e,h.key.path,t.batchId);o.push(r.delete(p)),c.push(h.key)}return U.waitFor(o).next(()=>c)}function yb(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Pe();e=n.noDocument}return JSON.stringify(e).length}er.DEFAULT_COLLECTION_PERCENTILE=10,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,er.DEFAULT=new er(41943040,er.DEFAULT_COLLECTION_PERCENTILE,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),er.DISABLED=new er(-1,0,0);class bb{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.Dn={}}static ct(e,t,i,r){Ve(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new bb(o,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vl(e).Y({index:"userMutationsIndex",range:i},(r,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const o=ah(e),s=vl(e);return s.add({}).next(a=>{Ve("number"==typeof a);const l=new zC(a,t,i,r),c=function(_,E,x){const T=x.baseMutations.map(k=>Rm(_.ut,k)),V=x.mutations.map(k=>Rm(_.ut,k));return{userId:E,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:T,mutations:V}}(this.serializer,this.userId,l),h=[];let p=new nn((g,_)=>rt(g.canonicalString(),_.canonicalString()));for(const g of r){const _=vL(this.userId,g.key.path,a);p=p.add(g.key.path.popLast()),h.push(s.put(c)),h.push(o.put(_,sY))}return p.forEach(g=>{h.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Dn[a]=l.keys()}),U.waitFor(h).next(()=>l)})}lookupMutationBatch(e,t){return vl(e).get(t).next(i=>i?(Ve(i.userId===this.userId),kc(this.serializer,i)):null)}Cn(e,t){return this.Dn[t]?U.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.Dn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return vl(e).Y({index:"userMutationsIndex",range:r},(s,a,l)=>{a.userId===this.userId&&(Ve(a.batchId>=i),o=kc(this.serializer,a)),l.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return vl(e).Y({index:"userMutationsIndex",range:t,reverse:!0},(r,o,s)=>{i=o.batchId,s.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vl(e).W("userMutationsIndex",t).next(i=>i.map(r=>kc(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=eb(this.userId,t.path),r=IDBKeyRange.lowerBound(i),o=[];return ah(e).Y({range:r},(s,a,l)=>{const[c,h,p]=s,g=Es(h);if(c===this.userId&&t.path.isEqual(g))return vl(e).get(p).next(_=>{if(!_)throw Pe();Ve(_.userId===this.userId),o.push(kc(this.serializer,_))});l.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new nn(rt);const r=[];return t.forEach(o=>{const s=eb(this.userId,o.path),a=IDBKeyRange.lowerBound(s),l=ah(e).Y({range:a},(c,h,p)=>{const[g,_,E]=c,x=Es(_);g===this.userId&&o.path.isEqual(x)?i=i.add(E):p.done()});r.push(l)}),U.waitFor(r).next(()=>this.vn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,o=eb(this.userId,i),s=IDBKeyRange.lowerBound(o);let a=new nn(rt);return ah(e).Y({range:s},(l,c,h)=>{const[p,g,_]=l,E=Es(g);p===this.userId&&i.isPrefixOf(E)?E.length===r&&(a=a.add(_)):h.done()}).next(()=>this.vn(e,a))}vn(e,t){const i=[],r=[];return t.forEach(o=>{r.push(vl(e).get(o).next(s=>{if(null===s)throw Pe();Ve(s.userId===this.userId),i.push(kc(this.serializer,s))}))}),U.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return Y2(e.ae,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.Fn(t.batchId)}),U.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return U.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return ah(e).Y({range:i},(o,s,a)=>{if(o[0]===this.userId){const l=Es(o[1]);r.push(l)}else a.done()}).next(()=>{Ve(0===r.length)})})}containsKey(e,t){return Q2(e,this.userId,t)}Mn(e){return X2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Q2(n,e,t){const i=eb(e,t.path),r=i[1],o=IDBKeyRange.lowerBound(i);let s=!1;return ah(n).Y({range:o,J:!0},(a,l,c)=>{const[h,p,g]=a;h===e&&p===r&&(s=!0),c.done()}).next(()=>s)}function vl(n){return Ri(n,"mutations")}function ah(n){return Ri(n,"documentMutations")}function X2(n){return Ri(n,"mutationQueues")}class Fc{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Fc(0)}static Nn(){return new Fc(-1)}}class yQ{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const i=new Fc(t.highestTargetId);return t.highestTargetId=i.next(),this.Ln(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>Ue.fromTimestamp(new Rn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Bn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Ln(e,r)))}addTargetData(e,t){return this.kn(e,t).next(()=>this.Bn(e).next(i=>(i.targetCount+=1,this.qn(t,i),this.Ln(e,i))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>lh(e).delete(t.targetId)).next(()=>this.Bn(e)).next(i=>(Ve(i.targetCount>0),i.targetCount-=1,this.Ln(e,i)))}removeTargets(e,t,i){let r=0;const o=[];return lh(e).Y((s,a)=>{const l=Mm(a);l.sequenceNumber<=t&&null===i.get(l.targetId)&&(r++,o.push(this.removeTargetData(e,l)))}).next(()=>U.waitFor(o)).next(()=>r)}forEachTarget(e,t){return lh(e).Y((i,r)=>{const o=Mm(r);t(o)})}Bn(e){return J2(e).get("targetGlobalKey").next(t=>(Ve(null!==t),t))}Ln(e,t){return J2(e).put("targetGlobalKey",t)}kn(e,t){return lh(e).put(F2(this.serializer,t))}qn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=Ac(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return lh(e).Y({range:r,index:"queryTargetsIndex"},(s,a,l)=>{const c=Mm(a);vm(t,c.target)&&(o=c,l.done())}).next(()=>o)}addMatchingKeys(e,t,i){const r=[],o=yl(e);return t.forEach(s=>{const a=Ji(s.path);r.push(o.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,s))}),U.waitFor(r)}removeMatchingKeys(e,t,i){const r=yl(e);return U.forEach(t,o=>{const s=Ji(o.path);return U.waitFor([r.delete([i,s]),this.referenceDelegate.removeReference(e,i,o)])})}removeMatchingKeysForTargetId(e,t){const i=yl(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=yl(e);let o=ct();return r.Y({range:i,J:!0},(s,a,l)=>{const c=Es(s[1]),h=new we(c);o=o.add(h)}).next(()=>o)}containsKey(e,t){const i=Ji(t.path),r=IDBKeyRange.bound([i],[cL(i)],!1,!0);let o=0;return yl(e).Y({index:"documentTargetsIndex",J:!0,range:r},([s,a],l,c)=>{0!==s&&(o++,c.done())}).next(()=>o>0)}_t(e,t){return lh(e).get(t).next(i=>i?Mm(i):null)}}function lh(n){return Ri(n,"targets")}function J2(n){return Ri(n,"targetGlobal")}function yl(n){return Ri(n,"targetDocuments")}function eV([n,e],[t,i]){const r=rt(n,t);return 0===r?rt(e,i):r}class bQ{constructor(e){this.Qn=e,this.buffer=new nn(eV),this.Kn=0}$n(){return++this.Kn}Un(e){const t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();eV(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class tV{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var t=this;fe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ne.Z)(function*(){t.Wn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){ll(i)?fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield al(i)}yield t.Gn(3e5)}))}}class EQ{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return U.resolve(no._e);const i=new bQ(t);return this.zn.forEachTarget(e,r=>i.Un(r.sequenceNumber)).next(()=>this.zn.Hn(e,r=>i.Un(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.zn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(K2)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),K2):this.Jn(e,t))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let i,r,o,s,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,s=Date.now(),this.nthSequenceNumber(e,r))).next(p=>(i=p,a=Date.now(),this.removeTargets(e,i,t))).next(p=>(o=p,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(p=>(c=Date.now(),$d()<=_s.in.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-h}ms\n\tDetermined least recently used ${r} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(l-a)+`ms\n\tRemoved ${p} documents in `+(c-l)+`ms\nTotal Duration: ${c-h}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:p})))}}class wQ{constructor(e,t){this.db=e,this.garbageCollector=function nV(n,e){return new EQ(n,e)}(this,t)}jn(e){const t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}Yn(e){let t=0;return this.Hn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,(i,r)=>t(r))}addReference(e,t,i){return Eb(e,i)}removeReference(e,t,i){return Eb(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Eb(e,t)}Xn(e,t){return function(r,o){let s=!1;return X2(r).Z(a=>Q2(r,a,o).next(l=>(l&&(s=!0),U.resolve(!l)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let o=0;return this.Zn(e,(s,a)=>{if(a<=t){const l=this.Xn(e,s).next(c=>{if(!c)return o++,i.getEntry(e,s).next(()=>(i.removeEntry(s,Ue.min()),yl(e).delete([0,Ji(s.path)])))});r.push(l)}}).next(()=>U.waitFor(r)).next(()=>i.apply(e)).next(()=>o)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Eb(e,t)}Zn(e,t){const i=yl(e);let r,o=no._e;return i.Y({index:"documentTargetsIndex"},([s,a],{path:l,sequenceNumber:c})=>{0===s?(o!==no._e&&t(new we(Es(r)),o),o=c,r=l):o=no._e}).next(()=>{o!==no._e&&t(new we(Es(r)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Eb(n,e){return yl(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ji(e.path),sequenceNumber:r}));var r}class iV{constructor(){this.changes=new da(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?U.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class IQ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Lc(e).put(i)}removeEntry(e,t,i){return Lc(e).delete(function(o,s){const a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],mb(s),a[a.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.er(e,i)))}getEntry(e,t){let i=xn.newInvalidDocument(t);return Lc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Nm(t))},(r,o)=>{i=this.tr(t,o)}).next(()=>i)}nr(e,t){let i={size:0,document:xn.newInvalidDocument(t)};return Lc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Nm(t))},(r,o)=>{i={document:this.tr(t,o),size:yb(o)}}).next(()=>i)}getEntries(e,t){let i=Br();return this.rr(e,t,(r,o)=>{const s=this.tr(r,o);i=i.insert(r,s)}).next(()=>i)}ir(e,t){let i=Br(),r=new dn(we.comparator);return this.rr(e,t,(o,s)=>{const a=this.tr(o,s);i=i.insert(o,a),r=r.insert(o,yb(s))}).next(()=>({documents:i,sr:r}))}rr(e,t,i){if(t.isEmpty())return U.resolve();let r=new nn(aV);t.forEach(l=>r=r.add(l));const o=IDBKeyRange.bound(Nm(r.first()),Nm(r.last())),s=r.getIterator();let a=s.getNext();return Lc(e).Y({index:"documentKeyIndex",range:o},(l,c,h)=>{const p=we.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&aV(a,p)<0;)i(a,null),a=s.getNext();a&&a.isEqual(p)&&(i(a,c),a=s.hasNext()?s.getNext():null),a?h.U(Nm(a)):h.done()}).next(()=>{for(;a;)i(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,i,r,o){const s=t.path,a=[s.popLast().toArray(),s.lastSegment(),mb(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Lc(e).W(IDBKeyRange.bound(a,l,!0)).next(c=>{o?.incrementDocumentReadCount(c.length);let h=Br();for(const p of c){const g=this.tr(we.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);g.isFoundDocument()&&(bm(t,g)||r.has(g.key))&&(h=h.insert(g.key,g))}return h})}getAllFromCollectionGroup(e,t,i,r){let o=Br();const s=sV(t,i),a=sV(t,to.max());return Lc(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(l,c,h)=>{const p=this.tr(we.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);o=o.insert(p.key,p),o.size===r&&h.done()}).next(()=>o)}newChangeBuffer(e){return new xQ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return oV(e).get("remoteDocumentGlobalKey").next(t=>(Ve(!!t),t))}er(e,t){return oV(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){const i=function uQ(n,e){let t;if(e.document)t=A2(n.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=we.fromSegments(e.noDocument.path),r=Pc(e.noDocument.readTime);t=xn.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Pe();{const i=we.fromSegments(e.unknownDocument.path),r=Pc(e.unknownDocument.version);t=xn.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(r){const o=new Rn(r[0],r[1]);return Ue.fromTimestamp(o)}(e.readTime)),t}(this.serializer,t);if(!i.isNoDocument()||!i.version.isEqual(Ue.min()))return i}return xn.newInvalidDocument(e)}}function rV(n){return new IQ(n)}class xQ extends iV{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new da(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new nn((o,s)=>rt(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{const a=this.ar.get(o);if(t.push(this._r.removeEntry(e,o,a.readTime)),s.isValidDocument()){const l=N2(this._r.serializer,s);r=r.add(o.path.popLast());const c=yb(l);i+=c-a.size,t.push(this._r.addEntry(e,o,l))}else if(i-=a.size,this.trackRemovals){const l=N2(this._r.serializer,s.convertToNoDocument(Ue.min()));t.push(this._r.addEntry(e,o,l))}}),r.forEach(o=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,o))}),t.push(this._r.updateMetadata(e,i)),U.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next(i=>(this.ar.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this._r.ir(e,t).next(({documents:i,sr:r})=>(r.forEach((o,s)=>{this.ar.set(o,{size:s,readTime:i.get(o).readTime})}),i))}}function oV(n){return Ri(n,"remoteDocumentGlobal")}function Lc(n){return Ri(n,"remoteDocumentsV14")}function Nm(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function sV(n,e){const t=e.documentKey.path.toArray();return[n,mb(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function aV(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let o=0;o<t.length-2&&o<i.length-2;++o)if(r=rt(t[o],i[o]),r)return r;return r=rt(t.length,i.length),r||(r=rt(t[t.length-2],i[i.length-2]),r||rt(t[t.length-1],i[i.length-1]))}class CQ{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class lV{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(null!==i&&xm(i.mutation,r,Vr.empty(),Rn.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,ct()).next(()=>i))}getLocalViewOfDocuments(e,t,i=ct()){const r=Is();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(o=>{let s=Em();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){const i=Is();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,ct()))}populateOverlays(e,t,i){const r=[];return i.forEach(o=>{t.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,i,r){let o=Br();const s=wm(),a=wm();return t.forEach((l,c)=>{const h=i.get(c.key);r.has(c.key)&&(void 0===h||h.mutation instanceof ha)?o=o.insert(c.key,c):void 0!==h?(s.set(c.key,h.mutation.getFieldMask()),xm(h.mutation,c,h.mutation.getFieldMask(),Rn.now())):s.set(c.key,Vr.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((c,h)=>s.set(c,h)),t.forEach((c,h)=>{var p;return a.set(c,new CQ(h,null!==(p=s.get(c))&&void 0!==p?p:null))}),a))}recalculateAndSaveOverlays(e,t){const i=wm();let r=new dn((s,a)=>s-a),o=ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(const a of s)a.keys().forEach(l=>{const c=t.get(l);if(null===c)return;let h=i.get(l)||Vr.empty();h=a.applyToLocalView(c,h),i.set(l,h);const p=(r.get(a.batchId)||ct()).add(l);r=r.insert(a.batchId,p)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,p=XL();h.forEach(g=>{if(!o.has(g)){const _=l2(t.get(g),i.get(g));null!==_&&p.set(g,_),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,p))}return U.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return we.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):VC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r);var s}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(o=>{const s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-o.size):U.resolve(Is());let a=-1,l=o;return s.next(c=>U.forEach(c,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{l=l.insert(h,g)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,l,c,ct())).next(h=>({batchId:a,changes:QL(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next(i=>{let r=Em();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const o=t.collectionGroup;let s=Em();return this.indexManager.getCollectionParents(e,o).next(a=>U.forEach(a,l=>{const c=(p=t,g=l.child(o),new ua(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt));var p,g;return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,r))).next(s=>{o.forEach((l,c)=>{const h=c.getKey();null===s.get(h)&&(s=s.insert(h,xn.newInvalidDocument(h)))});let a=Em();return s.forEach((l,c)=>{const h=o.get(l);void 0!==h&&xm(h.mutation,c,Vr.empty(),Rn.now()),bm(t,c)&&(a=a.insert(l,c))}),a})}}class TQ{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return U.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,{id:(r=t).id,version:r.version,createTime:ii(r.createTime)}),U.resolve();var r}getNamedQuery(e,t){return U.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,{name:(r=t).name,query:QC(r.bundledQuery),readTime:ii(r.readTime)}),U.resolve();var r}}class DQ{constructor(){this.overlays=new dn(we.comparator),this.lr=new Map}getOverlay(e,t){return U.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Is();return U.forEach(t,r=>this.getOverlay(e,r).next(o=>{null!==o&&i.set(r,o)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,o)=>{this.lt(e,t,o)}),U.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.lr.get(i);return void 0!==r&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.lr.delete(i)),U.resolve()}getOverlaysForCollection(e,t,i){const r=Is(),o=t.length+1,s=new we(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>i&&r.set(l.getKey(),l)}return U.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let o=new dn((c,h)=>c-h);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>i){let h=o.get(c.largestBatchId);null===h&&(h=Is(),o=o.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Is(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=r)););return U.resolve(a)}lt(e,t,i){const r=this.overlays.get(i.key);if(null!==r){const s=this.lr.get(r.largestBatchId).delete(i.key);this.lr.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new HC(t,i));let o=this.lr.get(t);void 0===o&&(o=ct(),this.lr.set(t,o)),this.lr.set(t,o.add(i.key))}}class rT{constructor(){this.hr=new nn(Mi.Pr),this.Ir=new nn(Mi.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const i=new Mi(e,t);this.hr=this.hr.add(i),this.Ir=this.Ir.add(i)}Er(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.dr(new Mi(e,t))}Ar(e,t){e.forEach(i=>this.removeReference(i,t))}Rr(e){const t=new we(new Nt([])),i=new Mi(t,e),r=new Mi(t,e+1),o=[];return this.Ir.forEachInRange([i,r],s=>{this.dr(s),o.push(s.key)}),o}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new we(new Nt([])),i=new Mi(t,e),r=new Mi(t,e+1);let o=ct();return this.Ir.forEachInRange([i,r],s=>{o=o.add(s.key)}),o}containsKey(e){const t=new Mi(e,0),i=this.hr.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class Mi{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return we.comparator(e.key,t.key)||rt(e.gr,t.gr)}static Tr(e,t){return rt(e.gr,t.gr)||we.comparator(e.key,t.key)}}class AQ{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new nn(Mi.Pr)}checkEmpty(e){return U.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){const o=this.pr;this.pr++;const s=new zC(o,t,i,r);this.mutationQueue.push(s);for(const a of r)this.yr=this.yr.add(new Mi(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(s)}lookupMutationBatch(e,t){return U.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.Sr(t+1),o=r<0?0:r;return U.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Mi(t,0),r=new Mi(t,Number.POSITIVE_INFINITY),o=[];return this.yr.forEachInRange([i,r],s=>{const a=this.wr(s.gr);o.push(a)}),U.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new nn(rt);return t.forEach(r=>{const o=new Mi(r,0),s=new Mi(r,Number.POSITIVE_INFINITY);this.yr.forEachInRange([o,s],a=>{i=i.add(a.gr)})}),U.resolve(this.br(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let o=i;we.isDocumentKey(o)||(o=o.child(""));const s=new Mi(new we(o),0);let a=new nn(rt);return this.yr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.gr)),!0)},s),U.resolve(this.br(a))}br(e){const t=[];return e.forEach(i=>{const r=this.wr(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){Ve(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let i=this.yr;return U.forEach(t.mutations,r=>{const o=new Mi(r.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.yr=i})}Fn(e){}containsKey(e,t){const i=new Mi(t,0),r=this.yr.firstAfterOrEqual(i);return U.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return U.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class SQ{constructor(e){this.Cr=e,this.docs=new dn(we.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),o=r?r.size:0,s=this.Cr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return U.resolve(i?i.document.mutableCopy():xn.newInvalidDocument(t))}getEntries(e,t){let i=Br();return t.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():xn.newInvalidDocument(r))}),U.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let o=Br();const s=t.path,a=new we(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||AC(dL(h),i)<=0||(r.has(h.key)||bm(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return U.resolve(o)}getAllFromCollectionGroup(e,t,i,r){Pe()}vr(e,t){return U.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new RQ(this)}getSize(e){return U.resolve(this.size)}}class RQ extends iV{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(i)}),U.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class MQ{constructor(e){this.persistence=e,this.Fr=new da(t=>Ac(t),vm),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.Mr=0,this.Or=new rT,this.targetCount=0,this.Nr=Fc.On()}forEachTarget(e,t){return this.Fr.forEach((i,r)=>t(r)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Mr&&(this.Mr=t),U.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new Fc(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,U.resolve()}updateTargetData(e,t){return this.kn(t),U.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,t,i){let r=0;const o=[];return this.Fr.forEach((s,a)=>{a.sequenceNumber<=t&&null===i.get(a.targetId)&&(this.Fr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),U.waitFor(o).next(()=>r)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,t){const i=this.Fr.get(t)||null;return U.resolve(i)}addMatchingKeys(e,t,i){return this.Or.Er(t,i),U.resolve()}removeMatchingKeys(e,t,i){this.Or.Ar(t,i);const r=this.persistence.referenceDelegate,o=[];return r&&t.forEach(s=>{o.push(r.markPotentiallyOrphaned(e,s))}),U.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),U.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Or.mr(t);return U.resolve(i)}containsKey(e,t){return U.resolve(this.Or.containsKey(t))}}class oT{constructor(e,t){this.Br={},this.overlays={},this.Lr=new no(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new MQ(this),this.indexManager=new _Q,this.remoteDocumentCache=new SQ(i=>this.referenceDelegate.Qr(i)),this.serializer=new O2(t),this.Kr=new TQ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new DQ,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Br[e.toKey()];return i||(i=new AQ(t,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,i){fe("MemoryPersistence","Starting transaction:",e);const r=new PQ(this.Lr.next());return this.referenceDelegate.$r(),i(r).next(o=>this.referenceDelegate.Ur(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Wr(e,t){return U.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,t)))}}class PQ extends fL{constructor(e){super(),this.currentSequenceNumber=e}}class wb{constructor(e){this.persistence=e,this.Gr=new rT,this.zr=null}static jr(e){return new wb(e)}get Hr(){if(this.zr)return this.zr;throw Pe()}addReference(e,t,i){return this.Gr.addReference(i,t),this.Hr.delete(i.toString()),U.resolve()}removeReference(e,t,i){return this.Gr.removeReference(i,t),this.Hr.add(i.toString()),U.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),U.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach(r=>this.Hr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(o=>this.Hr.add(o.toString()))}).next(()=>i.removeTargetData(e,t))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Hr,i=>{const r=we.fromPath(i);return this.Jr(e,r).next(o=>{o||t.removeEntry(r,Ue.min())})}).next(()=>(this.zr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Jr(e,t).next(i=>{i?this.Hr.delete(t.toString()):this.Hr.add(t.toString())})}Qr(e){return 0}Jr(e,t){return U.or([()=>U.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class kQ{constructor(e){this.serializer=e}N(e,t,i,r){const o=new Jy("createOrUpgrade",t);var l;i<1&&r>=1&&(e.createObjectStore("owner"),(l=e).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_L,{unique:!0}),l.createObjectStore("documentMutations"),cV(e),function(l){l.createObjectStore("remoteDocuments")}(e));let s=U.resolve();return i<3&&r>=3&&(0!==i&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),cV(e)),s=s.next(()=>function(l){const c=l.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ue.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",h)}(o))),i<4&&r>=4&&(0!==i&&(s=s.next(()=>function(l,c){return c.store("mutations").W().next(h=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_L,{unique:!0});const p=c.store("mutations"),g=h.map(_=>p.put(_));return U.waitFor(g)})}(e,o))),s=s.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(s=s.next(()=>this.Zr(o))),i<6&&r>=6&&(s=s.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(o)))),i<7&&r>=7&&(s=s.next(()=>this.ei(o))),i<8&&r>=8&&(s=s.next(()=>this.ti(e,o))),i<9&&r>=9&&(s=s.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(s=s.next(()=>this.ni(o))),i<11&&r>=11&&(s=s.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(s=s.next(()=>{!function(l){const c=l.createObjectStore("documentOverlays",{keyPath:vY});c.createIndex("collectionPathOverlayIndex",yY,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",bY,{unique:!1})}(e)})),i<13&&r>=13&&(s=s.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:aY});c.createIndex("documentKeyIndex",lY),c.createIndex("collectionGroupIndex",cY)}(e)).next(()=>this.ri(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(s=s.next(()=>this.ii(e,o))),i<15&&r>=15&&(s=s.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:pY}).createIndex("sequenceNumberIndex",mY,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:gY}).createIndex("documentKeyIndex",_Y,{unique:!1})}(e))),s}Xr(e){let t=0;return e.store("remoteDocuments").Y((i,r)=>{t+=yb(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Zr(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.W().next(r=>U.forEach(r,o=>{const s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",s).next(a=>U.forEach(a,l=>{Ve(l.userId===o.userId);const c=kc(this.serializer,l);return Y2(e,o.userId,c).next(()=>{})}))}))}ei(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const o=[];return i.Y((s,a)=>{const l=new Nt(s),c=[0,Ji(l)];o.push(t.get(c).next(h=>h?U.resolve():t.put({targetId:0,path:Ji(l),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>U.waitFor(o))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:fY});const i=t.store("collectionParents"),r=new iT,o=s=>{if(r.add(s)){const a=s.lastSegment(),l=s.popLast();return i.put({collectionId:a,parent:Ji(l)})}};return t.store("remoteDocuments").Y({J:!0},(s,a)=>{const l=new Nt(s);return o(l.popLast())}).next(()=>t.store("documentMutations").Y({J:!0},([s,a,l],c)=>{const h=Es(a);return o(h.popLast())}))}ni(e){const t=e.store("targets");return t.Y((i,r)=>{const o=Mm(r),s=F2(this.serializer,o);return t.put(s)})}ri(e,t){const i=t.store("remoteDocuments"),r=[];return i.Y((o,s)=>{const a=t.store("remoteDocumentsV14"),l=(p=s,p.document?new we(Nt.fromString(p.document.name).popFirst(5)):p.noDocument?we.fromSegments(p.noDocument.path):p.unknownDocument?we.fromSegments(p.unknownDocument.path):Pe()).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};var p;r.push(a.put(c))}).next(()=>U.waitFor(r))}ii(e,t){const i=t.store("mutations"),r=rV(this.serializer),o=new oT(wb.jr,this.serializer.ut);return i.W().next(s=>{const a=new Map;return s.forEach(l=>{var c;let h=null!==(c=a.get(l.userId))&&void 0!==c?c:ct();kc(this.serializer,l).keys().forEach(p=>h=h.add(p)),a.set(l.userId,h)}),U.forEach(a,(l,c)=>{const h=new Si(c),p=gb.ct(this.serializer,h),g=o.getIndexManager(h),_=bb.ct(h,this.serializer,g,o.referenceDelegate);return new lV(r,_,p,g).recalculateAndSaveOverlaysForDocumentKeys(new MC(t,no._e),l).next()})})}}function cV(n){n.createObjectStore("targetDocuments",{keyPath:dY}).createIndex("documentTargetsIndex",hY,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",uY,{unique:!0}),n.createObjectStore("targetGlobal")}const sT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class aT{constructor(e,t,i,r,o,s,a,l,c,h,p=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.si=o,this.window=s,this.document=a,this.oi=c,this._i=h,this.ai=p,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=g=>Promise.resolve(),!aT.D())throw new ce(X.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new wQ(this,r),this.Ii=t+"main",this.serializer=new O2(l),this.Ti=new Zo(this.Ii,this.ai,new kQ(this.serializer)),this.qr=new yQ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=rV(this.serializer),this.Kr=new dQ,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===h&&ni("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ce(X.FAILED_PRECONDITION,sT);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new no(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var t=this;return this.Pi=function(){var i=(0,ne.Z)(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var t=(0,ne.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,ne.Z)(function*(){t.started&&(yield t.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>xb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(t=>this.isPrimary&&!t?this.pi(e).next(()=>!1):!!t&&this.yi(e).next(()=>!0))).catch(e=>{if(ll(e))return fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Fm(e).get("owner").next(t=>U.resolve(this.wi(t)))}Si(e){return xb(e).delete(this.clientId)}bi(){var e=this;return(0,ne.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Ri(i,"clientMetadata");return r.W().next(o=>{const s=e.Ci(o,18e5),a=o.filter(l=>-1===s.indexOf(l));return U.forEach(a,l=>r.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Ei)for(const i of t)e.Ei.removeItem(e.vi(i.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?U.resolve(!0):Fm(e).get("owner").next(t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new ce(X.FAILED_PRECONDITION,sT);return!1}}return!(!this.networkEnabled||!this.inForeground)||xb(e).W().next(i=>void 0===this.Ci(i,5e3).find(r=>!(this.clientId===r.clientId||!(!this.networkEnabled&&r.networkEnabled||!this.inForeground&&r.inForeground&&this.networkEnabled===r.networkEnabled))))}).next(t=>(this.isPrimary!==t&&fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ne.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new MC(t,no._e);return e.pi(i).next(()=>e.Si(i))}),e.Ti.close(),e.Ni()})()}Ci(e,t){return e.filter(i=>this.Di(i.updateTimeMs,t)&&!this.Fi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>xb(e).W().next(t=>this.Ci(t,18e5).map(i=>i.clientId)))}get started(){return this.kr}getMutationQueue(e,t){return bb.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new vQ(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return gb.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,i){fe("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",o=15===(l=this.ai)?wY:14===l?EL:13===l?bL:12===l?EY:11===l?yL:void Pe();var l;let s;return this.Ti.runTransaction(e,r,o,a=>(s=new MC(a,this.Lr?this.Lr.next():no._e),"readwrite-primary"===t?this.fi(s).next(l=>!!l||this.gi(s)).next(l=>{if(!l)throw ni(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new ce(X.FAILED_PRECONDITION,hL);return i(s)}).next(l=>this.yi(s).next(()=>l)):this.Li(s).next(()=>i(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Li(e){return Fm(e).get("owner").next(t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)&&!this.wi(t)&&!(this._i||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ce(X.FAILED_PRECONDITION,sT)})}yi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fm(e).put("owner",t)}static D(){return Zo.D()}pi(e){const t=Fm(e);return t.get("owner").next(i=>this.wi(i)?(fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):U.resolve())}Di(e,t){const i=Date.now();return!(e<i-t||e>i&&(ni(`Detected an update time that is in the future: ${e} > ${i}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const t=/(?:Version|Mobile)\/1[456]/;(0,tn.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{const i=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return fe("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return ni("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){ni("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Fm(n){return Ri(n,"owner")}function xb(n){return Ri(n,"clientMetadata")}function lT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class cT{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.ki=i,this.qi=r}static Qi(e,t){let i=ct(),r=ct();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new cT(e,t.fromCache,i,r)}}class OQ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class uV{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,i,r){const o={result:null};return this.zi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ji(e,t,r,i).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new OQ;return this.Hi(e,t,s).next(a=>{if(o.result=a,this.$i)return this.Ji(e,t,s,a.size)})}).next(()=>o.result)}Ji(e,t,i,r){return i.documentReadCount<this.Ui?($d()<=_s.in.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",Xd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),U.resolve()):($d()<=_s.in.DEBUG&&fe("QueryEngine","Query:",Xd(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Wi*r?($d()<=_s.in.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",Xd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ir(t))):U.resolve())}zi(e,t){if(qL(t))return U.resolve(null);let i=Ir(t);return this.indexManager.getIndexType(e,i).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=cb(t,null,"F"),i=Ir(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const s=ct(...o);return this.Gi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.Yi(t,a);return this.Zi(t,c,s,l.readTime)?this.zi(e,cb(t,null,"F")):this.Xi(e,c,t,l)}))})))}ji(e,t,i,r){return qL(t)||r.isEqual(Ue.min())?U.resolve(null):this.Gi.getDocuments(e,i).next(o=>{const s=this.Yi(t,o);return this.Zi(t,s,i,r)?U.resolve(null):($d()<=_s.in.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Xd(t)),this.Xi(e,s,t,uL(r,-1)).next(a=>a))})}Yi(e,t){let i=new nn(KL(e));return t.forEach((r,o)=>{bm(e,o)&&(i=i.add(o))}),i}Zi(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Hi(e,t,i){return $d()<=_s.in.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",Xd(t)),this.Gi.getDocumentsMatchingQuery(e,t,to.min(),i)}Xi(e,t,i,r){return this.Gi.getDocumentsMatchingQuery(e,i,r).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}}class NQ{constructor(e,t,i,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new dn(rt),this.ns=new da(o=>Ac(o),vm),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(i)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lV(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ts))}}function dV(n,e,t,i){return new NQ(n,e,t,i)}function hV(n,e){return uT.apply(this,arguments)}function uT(){return uT=(0,ne.Z)(function*(n,e){const t=Ee(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,t.os(e),t.mutationQueue.getAllMutationBatches(i))).next(o=>{const s=[],a=[];let l=ct();for(const c of r){s.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of o){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(i,l).next(c=>({_s:c,removedBatchIds:s,addedBatchIds:a}))})})}),uT.apply(this,arguments)}function fV(n){const e=Ee(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.qr.getLastRemoteSnapshotVersion(t))}function pV(n,e,t){let i=ct(),r=ct();return t.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let s=Br();return t.forEach((a,l)=>{const c=o.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Ue.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):fe("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{us:s,cs:r}})}function VQ(n,e){const t=Ee(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function ch(n,e){const t=Ee(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.qr.getTargetData(i,e).next(o=>o?(r=o,U.resolve(r)):t.qr.allocateTargetId(i).next(s=>(r=new fa(e,s,"TargetPurposeListen",i.currentSequenceNumber),t.qr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.ts.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.ts=t.ts.insert(i.targetId,i),t.ns.set(e,i.targetId)),i})}function uh(n,e,t){return dT.apply(this,arguments)}function dT(){return dT=(0,ne.Z)(function*(n,e,t){const i=Ee(n),r=i.ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",o,s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!ll(s))throw s;fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}i.ts=i.ts.remove(e),i.ns.delete(r.target)}),dT.apply(this,arguments)}function Cb(n,e,t){const i=Ee(n);let r=Ue.min(),o=ct();return i.persistence.runTransaction("Execute query","readwrite",s=>function(l,c,h){const p=Ee(l),g=p.ns.get(h);return void 0!==g?U.resolve(p.ts.get(g)):p.qr.getTargetData(c,h)}(i,s,Ir(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.qr.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>i.es.getDocumentsMatchingQuery(s,e,t?r:Ue.min(),t?o:ct())).next(a=>(_V(i,ZL(e),a),{documents:a,ls:o})))}function mV(n,e){const t=Ee(n),i=Ee(t.qr),r=t.ts.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",o=>i._t(o,e).next(s=>s?s.target:null))}function gV(n,e){const t=Ee(n),i=t.rs.get(e)||Ue.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.ss.getAllFromCollectionGroup(r,e,uL(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(_V(t,e,r),r))}function _V(n,e,t){let i=n.rs.get(e)||Ue.min();t.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.rs.set(e,i)}function hT(){return hT=(0,ne.Z)(function*(n,e,t,i){const r=Ee(n);let o=ct(),s=Br();for(const c of t){const h=e.hs(c.metadata.name);c.document&&(o=o.add(h));const p=e.Ps(c);p.setReadTime(e.Is(c.metadata.readTime)),s=s.insert(h,p)}const a=r.ss.newChangeBuffer({trackRemovals:!0}),l=yield ch(r,(h=i,Ir(Yd(Nt.fromString(`__bundle__/docs/${h}`)))));var h;return r.persistence.runTransaction("Apply bundle documents","readwrite",c=>pV(c,a,s).next(h=>(a.apply(c),h)).next(h=>r.qr.removeMatchingKeysForTargetId(c,l.targetId).next(()=>r.qr.addMatchingKeys(c,o,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(c,h.us,h.cs)).next(()=>h.us)))}),hT.apply(this,arguments)}function UQ(n,e){return fT.apply(this,arguments)}function fT(){return fT=(0,ne.Z)(function*(n,e,t=ct()){const i=yield ch(n,Ir(QC(e.bundledQuery))),r=Ee(n);return r.persistence.runTransaction("Save named query","readwrite",o=>{const s=ii(e.readTime);if(i.snapshotVersion.compareTo(s)>=0)return r.Kr.saveNamedQuery(o,e);const a=i.withResumeToken(yi.EMPTY_BYTE_STRING,s);return r.ts=r.ts.insert(a.targetId,a),r.qr.updateTargetData(o,a).next(()=>r.qr.removeMatchingKeysForTargetId(o,i.targetId)).next(()=>r.qr.addMatchingKeys(o,t,i.targetId)).next(()=>r.Kr.saveNamedQuery(o,e))})}),fT.apply(this,arguments)}function vV(n,e){return`firestore_clients_${n}_${e}`}function yV(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function pT(n,e){return`firestore_targets_${n}_${e}`}class Tb{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Ts(e,t,i){const r=JSON.parse(i);let o,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(o=new ce(r.error.code,r.error.message))),s?new Tb(e,t,r.state,o):(ni("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Lm{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Ts(e,t){const i=JSON.parse(t);let r,o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(r=new ce(i.error.code,i.error.message))),o?new Lm(e,i.state,r):(ni("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Db{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,o=UC();for(let s=0;r&&s<i.activeTargetIds.length;++s)r=mL(i.activeTargetIds[s]),o=o.add(i.activeTargetIds[s]);return r?new Db(e,o):(ni("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class mT{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new mT(t.clientId,t.onlineState):(ni("SharedClientState",`Failed to parse online state: ${e}`),null)}}class gT{constructor(){this.activeTargetIds=UC()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _T{constructor(e,t,i,r,o){this.window=e,this.si=t,this.persistenceKey=i,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new dn(rt),this.started=!1,this.ps=[];const s=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ys=vV(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new gT),this.Ss=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ne.Z)(function*(){const t=yield e.syncEngine.Bi();for(const r of t){if(r===e.Rs)continue;const o=e.getItem(vV(e.persistenceKey,r));if(o){const s=Db.Ts(r,o);s&&(e.gs=e.gs.insert(s.clientId,s))}}e.Fs();const i=e.storage.getItem(e.Cs);if(i){const r=e.Ms(i);r&&e.xs(r)}for(const r of e.ps)e.fs(r);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,i){this.Ns(e,t,i),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(pT(this.persistenceKey,e));if(i){const r=Lm.Ts(e,i);r&&(t=r.state)}}return this.Ls.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(pT(this.persistenceKey,e))}updateQueryState(e,t,i){this.ks(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Bs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return fe("SharedClientState","READ",e,t),t}setItem(e,t){fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var t=this;const i=e;if(i.storageArea===this.storage){if(fe("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ys)return void ni("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,ne.Z)(function*(){if(t.started){if(null!==i.key)if(t.Ss.test(i.key)){if(null==i.newValue){const r=t.Ks(i.key);return t.$s(r,null)}{const r=t.Us(i.key,i.newValue);if(r)return t.$s(r.clientId,r)}}else if(t.bs.test(i.key)){if(null!==i.newValue){const r=t.Ws(i.key,i.newValue);if(r)return t.Gs(r)}}else if(t.Ds.test(i.key)){if(null!==i.newValue){const r=t.zs(i.key,i.newValue);if(r)return t.js(r)}}else if(i.key===t.Cs){if(null!==i.newValue){const r=t.Ms(i.newValue);if(r)return t.xs(r)}}else if(i.key===t.ws){const r=function(s){let a=no._e;if(null!=s)try{const l=JSON.parse(s);Ve("number"==typeof l),a=l}catch(l){ni("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(i.newValue);r!==no._e&&t.sequenceNumberHandler(r)}else if(i.key===t.vs){const r=t.Hs(i.newValue);yield Promise.all(r.map(o=>t.syncEngine.Js(o)))}}else t.ps.push(i)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,t,i){const r=new Tb(this.currentUser,e,t,i),o=yV(this.persistenceKey,this.currentUser,e);this.setItem(o,r.Es())}Bs(e){const t=yV(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,t,i){const r=pT(this.persistenceKey,e),o=new Lm(e,t,i);this.setItem(r,o.Es())}Qs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){const t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){const i=this.Ks(e);return Db.Ts(i,t)}Ws(e,t){const i=this.bs.exec(e),r=Number(i[1]);return Tb.Ts(new Si(void 0!==i[2]?i[2]:null),r,t)}zs(e,t){const i=this.Ds.exec(e),r=Number(i[1]);return Lm.Ts(r,t)}Ms(e){return mT.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var t=this;return(0,ne.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Ys(e.batchId,e.state,e.error);fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){const i=t?this.gs.insert(e,t):this.gs.remove(e),r=this.Os(this.gs),o=this.Os(i),s=[],a=[];return o.forEach(l=>{r.has(l)||s.push(l)}),r.forEach(l=>{o.has(l)||a.push(l)}),this.syncEngine.Xs(s,a).then(()=>{this.gs=i})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=UC();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class bV{constructor(){this.eo=new gT,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,i){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new gT,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class jQ{ro(e){}shutdown(){}}class EV{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ab=null;function vT(){return null===Ab?Ab=268435456+Math.round(2147483648*Math.random()):Ab++,"0x"+Ab.toString(16)}const zQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $Q{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const tr="WebChannelConnection";class HQ extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.mo=i+"://"+t.host,this.fo=`projects/${r}/databases/${o}`,this.po="(default)"===this.databaseId.database?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get yo(){return!1}wo(t,i,r,o,s){const a=vT(),l=this.So(t,i);fe("RestConnection",`Sending RPC '${t}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(c,o,s),this.Do(t,l,c,r).then(h=>(fe("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Lr("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}Co(t,i,r,o,s,a){return this.wo(t,i,r,o,s)}bo(t,i,r){t["X-Goog-Api-Client"]="gl-js/ fire/"+zd,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,s)=>t[s]=o),r&&r.headers.forEach((o,s)=>t[s]=o)}So(t,i){return`${this.mo}/v1/${i}:${zQ[t]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,i,r){const o=vT();return new Promise((s,a)=>{const l=new jK;l.setWithCredentials(!0),l.listenOnce(BK.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case CC.NO_ERROR:const h=l.getResponseJson();fe(tr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case CC.TIMEOUT:fe(tr,`RPC '${e}' ${o} timed out`),a(new ce(X.DEADLINE_EXCEEDED,"Request time out"));break;case CC.HTTP_ERROR:const p=l.getStatus();if(fe(tr,`RPC '${e}' ${o} failed with status:`,p,"response text:",l.getResponseText()),p>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g?.error;if(_&&_.status&&_.message){const E=function(T){const V=T.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(V)>=0?V:X.UNKNOWN}(_.status);a(new ce(E,_.message))}else a(new ce(X.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ce(X.UNAVAILABLE,"Connection failed."));break;default:Pe()}}finally{fe(tr,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(r);fe(tr,`RPC '${e}' ${o} sending request:`,r),l.send(t,"POST",c,i,15)})}vo(e,t,i){const r=vT(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=LK(),a=VK(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.bo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;const h=o.join("");fe(tr,`Creating RPC '${e}' stream ${r}: ${h}`,l);const p=s.createWebChannel(h,l);let g=!1,_=!1;const E=new $Q({co:T=>{_?fe(tr,`Not sending because RPC '${e}' stream ${r} is closed:`,T):(g||(fe(tr,`Opening RPC '${e}' stream ${r} transport.`),p.open(),g=!0),fe(tr,`RPC '${e}' stream ${r} sending:`,T),p.send(T))},lo:()=>p.close()}),x=(T,V,k)=>{T.listen(V,j=>{try{k(j)}catch(ie){setTimeout(()=>{throw ie},0)}})};return x(p,Xy.EventType.OPEN,()=>{_||fe(tr,`RPC '${e}' stream ${r} transport opened.`)}),x(p,Xy.EventType.CLOSE,()=>{_||(_=!0,fe(tr,`RPC '${e}' stream ${r} transport closed`),E.Ro())}),x(p,Xy.EventType.ERROR,T=>{_||(_=!0,Lr(tr,`RPC '${e}' stream ${r} transport errored:`,T),E.Ro(new ce(X.UNAVAILABLE,"The operation could not be completed")))}),x(p,Xy.EventType.MESSAGE,T=>{var V;if(!_){const k=T.data[0];Ve(!!k);const ie=k.error||(null===(V=k[0])||void 0===V?void 0:V.error);if(ie){fe(tr,`RPC '${e}' stream ${r} received error:`,ie);const _e=ie.status;let Be=function(Dr){const Ur=ai[Dr];if(void 0!==Ur)return p2(Ur)}(_e),et=ie.message;void 0===Be&&(Be=X.INTERNAL,et="Unknown error status: "+_e+" with message "+ie.message),_=!0,E.Ro(new ce(Be,et)),p.close()}else fe(tr,`RPC '${e}' stream ${r} received:`,k),E.Vo(k)}}),x(a,UK.STAT_EVENT,T=>{T.stat===rL.PROXY?fe(tr,`RPC '${e}' stream ${r} detected buffering proxy`):T.stat===rL.NOPROXY&&fe(tr,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{E.Ao()},0),E}}function wV(){return typeof window<"u"?window:null}function Sb(){return typeof document<"u"?document:null}function Vm(n){return new eQ(n,!0)}class yT{constructor(e,t,i=1e3,r=1.5,o=6e4){this.si=e,this.timerId=t,this.Fo=i,this.Mo=r,this.xo=o,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),i=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-i);r>0&&fe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Oo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,r,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class IV{constructor(e,t,i,r,o,s,a,l){this.si=e,this.Ko=i,this.$o=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new yT(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,ne.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,ne.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,t){var i=this;return(0,ne.Z)(function*(){i.t_(),i.n_(),i.zo.cancel(),i.Uo++,4!==e?i.zo.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(ni(t.toString()),ni("Using maximum backoff delay to prevent overloading the backend."),i.zo.Lo()):t&&t.code===X.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.r_(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.Io(t)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Uo===t&&this.s_(i,r)},i=>{e(()=>{const r=new ce(X.UNKNOWN,"Fetching auth token failed: "+i.message);return this.o_(r)})})}s_(e,t){const i=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho(()=>{i(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(r=>{i(()=>this.o_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Jo(){var e=this;this.state=5,this.zo.ko((0,ne.Z)(function*(){e.state=0,e.start()}))}o_(e){return fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget(()=>this.Uo===e?t():(fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qQ extends IV{constructor(e,t,i,r,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,s),this.serializer=o}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function iQ(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:Pe(),r=e.targetChange.targetIds||[],o=function(c,h){return c.useProto3Json?(Ve(void 0===h||"string"==typeof h),yi.fromBase64String(h||"")):(Ve(void 0===h||h instanceof Uint8Array),yi.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){const h=void 0===c.code?X.UNKNOWN:p2(c.code);return new ce(h,c.message||"")}(s);t=new y2(i,r,o,a||null)}else if("documentChange"in e){const i=e.documentChange,r=xs(n,i.document.name),o=ii(i.document.updateTime),s=i.document.createTime?ii(i.document.createTime):Ue.min(),a=new $i({mapValue:{fields:i.document.fields}}),l=xn.newFoundDocument(r,o,s,a);t=new pb(i.targetIds||[],i.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const i=e.documentDelete,r=xs(n,i.document),o=i.readTime?ii(i.readTime):Ue.min(),s=xn.newNoDocument(r,o);t=new pb([],i.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const i=e.documentRemove,r=xs(n,i.document);t=new pb([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return Pe();{const i=e.filter,{count:r=0,unchangedNames:o}=i,s=new ZY(r,o);t=new v2(i.targetId,s)}}var c;return t}(this.serializer,e),i=function(o){if(!("targetChange"in o))return Ue.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Ue.min():s.readTime?ii(s.readTime):Ue.min()}(e);return this.listener.a_(t,i)}u_(e){const t={};t.database=Sm(this.serializer),t.addTarget=function(o,s){let a;const l=s.target;if(a=ab(l)?{documents:S2(o,l)}:{query:YC(o,l)},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=I2(o,s.resumeToken);const c=WC(o,s.expectedCount);null!==c&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(Ue.min())>0){a.readTime=ih(o,s.snapshotVersion.toTimestamp());const c=WC(o,s.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const i=function oQ(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.e_(t)}c_(e){const t={};t.database=Sm(this.serializer),t.removeTarget=e,this.e_(t)}}class WQ extends IV{constructor(e,t,i,r,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,s),this.serializer=o,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(Ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function rQ(n,e){return n&&n.length>0?(Ve(void 0!==e),n.map(t=>function(r,o){let s=ii(r.updateTime?r.updateTime:o);return s.isEqual(Ue.min())&&(s=ii(o)),new HY(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=ii(e.commitTime);return this.listener.I_(i,t)}return Ve(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Sm(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Rm(this.serializer,i))};this.e_(t)}}class GQ extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new ce(X.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.wo(e,t,i,r,o)).catch(r=>{throw"FirebaseError"===r.name?(r.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new ce(X.UNKNOWN,r.toString())})}Co(e,t,i,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,t,i,o,s,r)).catch(o=>{throw"FirebaseError"===o.name?(o.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(X.UNKNOWN,o.toString())})}terminate(){this.d_=!0}}class KQ{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(ni(t),this.f_=!1):fe("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class YQ{constructor(e,t,i,r,o){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=o,this.F_.ro(a=>{i.enqueueAndForget((0,ne.Z)(function*(){var l;bl(s)&&(fe("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,ne.Z)(function*(h){const p=Ee(h);p.C_.add(4),yield dh(p),p.M_.set("Unknown"),p.C_.delete(4),yield Bm(p)}),function c(h){return l.apply(this,arguments)})(s))}))}),this.M_=new KQ(i,r)}}function Bm(n){return ET.apply(this,arguments)}function ET(){return ET=(0,ne.Z)(function*(n){if(bl(n))for(const e of n.v_)yield e(!0)}),ET.apply(this,arguments)}function dh(n){return wT.apply(this,arguments)}function wT(){return wT=(0,ne.Z)(function*(n){for(const e of n.v_)yield e(!1)}),wT.apply(this,arguments)}function Rb(n,e){const t=Ee(n);t.D_.has(e.targetId)||(t.D_.set(e.targetId,e),CT(t)?xT(t):fh(t).Ho()&&IT(t,e))}function Um(n,e){const t=Ee(n),i=fh(t);t.D_.delete(e),i.Ho()&&xV(t,e),0===t.D_.size&&(i.Ho()?i.Zo():bl(t)&&t.M_.set("Unknown"))}function IT(n,e){if(n.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fh(n).u_(e)}function xV(n,e){n.x_.Oe(e),fh(n).c_(e)}function xT(n){n.x_=new YY({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.D_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),fh(n).start(),n.M_.g_()}function CT(n){return bl(n)&&!fh(n).jo()&&n.D_.size>0}function bl(n){return 0===Ee(n).C_.size}function CV(n){n.x_=void 0}function QQ(n){return TT.apply(this,arguments)}function TT(){return TT=(0,ne.Z)(function*(n){n.D_.forEach((e,t)=>{IT(n,e)})}),TT.apply(this,arguments)}function XQ(n,e){return DT.apply(this,arguments)}function DT(){return DT=(0,ne.Z)(function*(n,e){CV(n),CT(n)?(n.M_.w_(e),xT(n)):n.M_.set("Unknown")}),DT.apply(this,arguments)}function JQ(n,e,t){return AT.apply(this,arguments)}function AT(){return AT=(0,ne.Z)(function*(n,e,t){if(n.M_.set("Online"),e instanceof y2&&2===e.state&&e.cause)try{yield(i=(0,ne.Z)(function*(o,s){const a=s.cause;for(const l of s.targetIds)o.D_.has(l)&&(yield o.remoteSyncer.rejectListen(l,a),o.D_.delete(l),o.x_.removeTarget(l))}),function r(o,s){return i.apply(this,arguments)})(n,e)}catch(i){fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Mb(n,i)}else if(e instanceof pb?n.x_.$e(e):e instanceof v2?n.x_.Je(e):n.x_.Ge(e),!t.isEqual(Ue.min()))try{const i=yield fV(n.localStore);t.compareTo(i)>=0&&(yield function(o,s){const a=o.x_.it(s);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=o.D_.get(c);h&&o.D_.set(c,h.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,c)=>{const h=o.D_.get(l);if(!h)return;o.D_.set(l,h.withResumeToken(yi.EMPTY_BYTE_STRING,h.snapshotVersion)),xV(o,l);const p=new fa(h.target,l,c,h.sequenceNumber);IT(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(i){fe("RemoteStore","Failed to raise snapshot:",i),yield Mb(n,i)}var i}),AT.apply(this,arguments)}function Mb(n,e,t){return ST.apply(this,arguments)}function ST(){return ST=(0,ne.Z)(function*(n,e,t){if(!ll(e))throw e;n.C_.add(1),yield dh(n),n.M_.set("Offline"),t||(t=()=>fV(n.localStore)),n.asyncQueue.enqueueRetryable((0,ne.Z)(function*(){fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.C_.delete(1),yield Bm(n)}))}),ST.apply(this,arguments)}function TV(n,e){return e().catch(t=>Mb(n,t,e))}function hh(n){return RT.apply(this,arguments)}function RT(){return RT=(0,ne.Z)(function*(n){const e=Ee(n),t=El(e);let i=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;eX(e);)try{const r=yield VQ(e.localStore,i);if(null===r){0===e.b_.length&&t.Zo();break}i=r.batchId,tX(e,r)}catch(r){yield Mb(e,r)}DV(e)&&AV(e)}),RT.apply(this,arguments)}function eX(n){return bl(n)&&n.b_.length<10}function tX(n,e){n.b_.push(e);const t=El(n);t.Ho()&&t.h_&&t.P_(e.mutations)}function DV(n){return bl(n)&&!El(n).jo()&&n.b_.length>0}function AV(n){El(n).start()}function nX(n){return MT.apply(this,arguments)}function MT(){return MT=(0,ne.Z)(function*(n){El(n).E_()}),MT.apply(this,arguments)}function iX(n){return PT.apply(this,arguments)}function PT(){return PT=(0,ne.Z)(function*(n){const e=El(n);for(const t of n.b_)e.P_(t.mutations)}),PT.apply(this,arguments)}function rX(n,e,t){return kT.apply(this,arguments)}function kT(){return kT=(0,ne.Z)(function*(n,e,t){const i=n.b_.shift(),r=$C.from(i,e,t);yield TV(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield hh(n)}),kT.apply(this,arguments)}function oX(n,e){return OT.apply(this,arguments)}function OT(){return OT=(0,ne.Z)(function*(n,e){var t;e&&El(n).h_&&(yield(t=(0,ne.Z)(function*(r,o){if(f2(a=o.code)&&a!==X.ABORTED){const s=r.b_.shift();El(r).Yo(),yield TV(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield hh(r)}var a}),function i(r,o){return t.apply(this,arguments)})(n,e)),DV(n)&&AV(n)}),OT.apply(this,arguments)}function SV(n,e){return NT.apply(this,arguments)}function NT(){return NT=(0,ne.Z)(function*(n,e){const t=Ee(n);t.asyncQueue.verifyOperationInProgress(),fe("RemoteStore","RemoteStore received new credentials");const i=bl(t);t.C_.add(3),yield dh(t),i&&t.M_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.C_.delete(3),yield Bm(t)}),NT.apply(this,arguments)}function FT(n,e){return LT.apply(this,arguments)}function LT(){return LT=(0,ne.Z)(function*(n,e){const t=Ee(n);e?(t.C_.delete(2),yield Bm(t)):e||(t.C_.add(2),yield dh(t),t.M_.set("Unknown"))}),LT.apply(this,arguments)}function fh(n){return n.O_||(n.O_=function(t,i,r){const o=Ee(t);return o.A_(),new qQ(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{ho:QQ.bind(null,n),Io:XQ.bind(null,n),a_:JQ.bind(null,n)}),n.v_.push(function(){var e=(0,ne.Z)(function*(t){t?(n.O_.Yo(),CT(n)?xT(n):n.M_.set("Unknown")):(yield n.O_.stop(),CV(n))});return function(t){return e.apply(this,arguments)}}())),n.O_}function El(n){return n.N_||(n.N_=function(t,i,r){const o=Ee(t);return o.A_(),new WQ(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{ho:nX.bind(null,n),Io:oX.bind(null,n),T_:iX.bind(null,n),I_:rX.bind(null,n)}),n.v_.push(function(){var e=(0,ne.Z)(function*(t){t?(n.N_.Yo(),yield hh(n)):(yield n.N_.stop(),n.b_.length>0&&(fe("RemoteStore",`Stopping write stream with ${n.b_.length} pending writes`),n.b_=[]))});return function(t){return e.apply(this,arguments)}}())),n.N_}class VT{constructor(e,t,i,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,o){const s=Date.now()+i,a=new VT(e,t,s,r,o);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ce(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ph(n,e){if(ni("AsyncQueue",`${e}: ${n}`),ll(n))return new ce(X.UNAVAILABLE,`${e}: ${n}`);throw n}class mh{constructor(e){this.comparator=e?(t,i)=>e(t,i)||we.comparator(t.key,i.key):(t,i)=>we.comparator(t.key,i.key),this.keyedMap=Em(),this.sortedSet=new dn(this.comparator)}static emptySet(e){return new mh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof mh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new mh;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class RV{constructor(){this.B_=new dn(we.comparator)}track(e){const t=e.doc.key,i=this.B_.get(t);i?0!==e.type&&3===i.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==i.type?this.B_=this.B_.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.B_=this.B_.remove(t):1===e.type&&2===i.type?this.B_=this.B_.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):Pe():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal((t,i)=>{e.push(i)}),e}}class gh{constructor(e,t,i,r,o,s,a,l,c){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,i,r,o){const s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new gh(e,t,mh.emptySet(t),s,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ym(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class sX{constructor(){this.k_=void 0,this.listeners=[]}}class aX{constructor(){this.queries=new da(e=>GL(e),ym),this.onlineState="Unknown",this.q_=new Set}}function BT(n,e){return UT.apply(this,arguments)}function UT(){return UT=(0,ne.Z)(function*(n,e){const t=Ee(n),i=e.query;let r=!1,o=t.queries.get(i);if(o||(r=!0,o=new sX),r)try{o.k_=yield t.onListen(i)}catch(s){const a=ph(s,`Initialization of query '${Xd(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.listeners.push(e),e.Q_(t.onlineState),o.k_&&e.K_(o.k_)&&$T(t)}),UT.apply(this,arguments)}function jT(n,e){return zT.apply(this,arguments)}function zT(){return zT=(0,ne.Z)(function*(n,e){const t=Ee(n),i=e.query;let r=!1;const o=t.queries.get(i);if(o){const s=o.listeners.indexOf(e);s>=0&&(o.listeners.splice(s,1),r=0===o.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),zT.apply(this,arguments)}function lX(n,e){const t=Ee(n);let i=!1;for(const r of e){const s=t.queries.get(r.query);if(s){for(const a of s.listeners)a.K_(r)&&(i=!0);s.k_=r}}i&&$T(t)}function cX(n,e,t){const i=Ee(n),r=i.queries.get(e);if(r)for(const o of r.listeners)o.onError(t);i.queries.delete(e)}function $T(n){n.q_.forEach(e=>{e.next()})}class HT{constructor(e,t,i){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=i||{}}K_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new gh(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){return!e.fromCache||(!this.options.J_||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=gh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class uX{constructor(e,t){this.Y_=e,this.byteLength=t}Z_(){return"metadata"in this.Y_}}class MV{constructor(e){this.serializer=e}hs(e){return xs(this.serializer,e)}Ps(e){return e.metadata.exists?A2(this.serializer,e.document,!1):xn.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return ii(e)}}class dX{constructor(e,t,i){this.X_=e,this.localStore=t,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=PV(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++t;const i=Nt.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ta(e){const t=new Map,i=new MV(this.serializer);for(const r of e)if(r.metadata.queries){const o=i.hs(r.metadata.name);for(const s of r.metadata.queries){const a=(t.get(s)||ct()).add(o);t.set(s,a)}}return t}complete(){var e=this;return(0,ne.Z)(function*(){const t=yield function BQ(n,e,t,i){return hT.apply(this,arguments)}(e.localStore,new MV(e.serializer),e.documents,e.X_.id),i=e.ta(e.documents);for(const r of e.queries)yield UQ(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:t}})()}}function PV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class kV{constructor(e){this.key=e}}class OV{constructor(e){this.key=e}}class NV{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=ct(),this.mutatedKeys=ct(),this._a=KL(e),this.aa=new mh(this._a)}get ua(){return this.ia}ca(e,t){const i=t?t.la:new RV,r=t?t.aa:this.aa;let o=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const l="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,p)=>{const g=r.get(h),_=bm(this.query,p)?p:null,E=!!g&&this.mutatedKeys.has(g.key),x=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let T=!1;g&&_?g.data.isEqual(_.data)?E!==x&&(i.track({type:3,doc:_}),T=!0):this.ha(g,_)||(i.track({type:2,doc:_}),T=!0,(l&&this._a(_,l)>0||c&&this._a(_,c)<0)&&(a=!0)):!g&&_?(i.track({type:0,doc:_}),T=!0):g&&!_&&(i.track({type:1,doc:g}),T=!0,(l||c)&&(a=!0)),T&&(_?(s=s.add(_),o=x?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const h="F"===this.query.limitType?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),i.track({type:1,doc:h})}return{aa:s,la:i,Zi:a,mutatedKeys:o}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const o=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const s=e.la.L_();s.sort((h,p)=>function(_,E){const x=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe()}};return x(_)-x(E)}(h.type,p.type)||this._a(h.doc,p.doc)),this.Pa(i),r=null!=r&&r;const a=t&&!r?this.Ia():[],l=0===this.oa.size&&this.current&&!r?1:0,c=l!==this.sa;return this.sa=l,0!==s.length||c?{snapshot:new gh(this.query,e.aa,o,s,e.mutatedKeys,0===l,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new RV,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(t=>this.ia=this.ia.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.ia=this.ia.delete(t)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=ct(),this.aa.forEach(i=>{this.Ea(i.key)&&(this.oa=this.oa.add(i.key))});const t=[];return e.forEach(i=>{this.oa.has(i)||t.push(new OV(i))}),this.oa.forEach(i=>{e.has(i)||t.push(new kV(i))}),t}da(e){this.ia=e.ls,this.oa=ct();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return gh.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class hX{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class fX{constructor(e){this.key=e,this.Ra=!1}}class pX{constructor(e,t,i,r,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new da(a=>GL(a),ym),this.fa=new Map,this.ga=new Set,this.pa=new dn(we.comparator),this.ya=new Map,this.wa=new rT,this.Sa={},this.ba=new Map,this.Da=Fc.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function mX(n,e){return qT.apply(this,arguments)}function qT(){return qT=(0,ne.Z)(function*(n,e){const t=pD(n);let i,r;const o=t.ma.get(e);if(o)i=o.targetId,t.sharedClientState.addLocalQueryTarget(i),r=o.view.Aa();else{const s=yield ch(t.localStore,Ir(e)),a=t.sharedClientState.addLocalQueryTarget(s.targetId);i=s.targetId,r=yield WT(t,e,i,"current"===a,s.resumeToken),t.isPrimaryClient&&Rb(t.remoteStore,s)}return r}),qT.apply(this,arguments)}function WT(n,e,t,i,r){return GT.apply(this,arguments)}function GT(){return GT=(0,ne.Z)(function*(n,e,t,i,r){n.va=(p,g,_)=>{return(E=(0,ne.Z)(function*(T,V,k,j){let ie=V.view.ca(k);ie.Zi&&(ie=yield Cb(T.localStore,V.query,!1).then(({documents:Zt})=>V.view.ca(Zt,ie)));const _e=j&&j.targetChanges.get(V.targetId),Be=j&&null!=j.targetMismatches.get(V.targetId),et=V.view.applyChanges(ie,T.isPrimaryClient,_e,Be);return iD(T,V.targetId,et.Ta),et.snapshot}),function x(T,V,k,j){return E.apply(this,arguments)})(n,p,g,_);var E};const o=yield Cb(n.localStore,e,!0),s=new NV(e,o.ls),a=s.ca(o.documents),l=Dm.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,r),c=s.applyChanges(a,n.isPrimaryClient,l);iD(n,t,c.Ta);const h=new hX(e,t,s);return n.ma.set(e,h),n.fa.has(t)?n.fa.get(t).push(e):n.fa.set(t,[e]),c.snapshot}),GT.apply(this,arguments)}function gX(n,e){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,ne.Z)(function*(n,e){const t=Ee(n),i=t.ma.get(e),r=t.fa.get(i.targetId);if(r.length>1)return t.fa.set(i.targetId,r.filter(o=>!ym(o,e))),void t.ma.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield uh(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),Um(t.remoteStore,i.targetId),_h(t,i.targetId)}).catch(al))):(_h(t,i.targetId),yield uh(t.localStore,i.targetId,!0))}),ZT.apply(this,arguments)}function KT(){return KT=(0,ne.Z)(function*(n,e,t){const i=mD(n);try{const r=yield function(s,a){const l=Ee(s),c=Rn.now(),h=a.reduce((_,E)=>_.add(E.key),ct());let p,g;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let E=Br(),x=ct();return l.ss.getEntries(_,h).next(T=>{E=T,E.forEach((V,k)=>{k.isValidDocument()||(x=x.add(V))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,E)).next(T=>{p=T;const V=[];for(const k of a){const j=WY(k,p.get(k.key).overlayedDocument);null!=j&&V.push(new ha(k.key,j,PL(j.value.mapValue),Mn.exists(!0)))}return l.mutationQueue.addMutationBatch(_,c,V,a)}).next(T=>{g=T;const V=T.applyToLocalDocumentSet(p,x);return l.documentOverlayCache.saveOverlays(_,T.batchId,V)})}).then(()=>({batchId:g.batchId,changes:QL(p)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,a,l){let c=s.Sa[s.currentUser.toKey()];c||(c=new dn(rt)),c=c.insert(a,l),s.Sa[s.currentUser.toKey()]=c}(i,r.batchId,t),yield pa(i,r.changes),yield hh(i.remoteStore)}catch(r){const o=ph(r,"Failed to persist write");t.reject(o)}}),KT.apply(this,arguments)}function FV(n,e){return YT.apply(this,arguments)}function YT(){return YT=(0,ne.Z)(function*(n,e){const t=Ee(n);try{const i=yield function LQ(n,e){const t=Ee(n),i=e.snapshotVersion;let r=t.ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=t.ss.newChangeBuffer({trackRemovals:!0});r=t.ts;const a=[];e.targetChanges.forEach((h,p)=>{const g=r.get(p);if(!g)return;a.push(t.qr.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.qr.addMatchingKeys(o,h.addedDocuments,p)));let _=g.withSequenceNumber(o.currentSequenceNumber);var x,T,V;null!==e.targetMismatches.get(p)?_=_.withResumeToken(yi.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,i)),r=r.insert(p,_),T=_,V=h,(0===(x=g).resumeToken.approximateByteSize()||T.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8||V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0)&&a.push(t.qr.updateTargetData(o,_))});let l=Br(),c=ct();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(pV(o,s,e.documentUpdates).next(h=>{l=h.us,c=h.cs})),!i.isEqual(Ue.min())){const h=t.qr.getLastRemoteSnapshotVersion(o).next(p=>t.qr.setTargetsMetadata(o,o.currentSequenceNumber,i));a.push(h)}return U.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(t.ts=r,o))}(t.localStore,e);e.targetChanges.forEach((r,o)=>{const s=t.ya.get(o);s&&(Ve(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?s.Ra=!0:r.modifiedDocuments.size>0?Ve(s.Ra):r.removedDocuments.size>0&&(Ve(s.Ra),s.Ra=!1))}),yield pa(t,i,e)}catch(i){yield al(i)}}),YT.apply(this,arguments)}function LV(n,e,t){const i=Ee(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.ma.forEach((o,s)=>{const a=s.view.Q_(e);a.snapshot&&r.push(a.snapshot)}),function(s,a){const l=Ee(s);l.onlineState=a;let c=!1;l.queries.forEach((h,p)=>{for(const g of p.listeners)g.Q_(a)&&(c=!0)}),c&&$T(l)}(i.eventManager,e),r.length&&i.Va.a_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function vX(n,e,t){return QT.apply(this,arguments)}function QT(){return QT=(0,ne.Z)(function*(n,e,t){const i=Ee(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.ya.get(e),o=r&&r.key;if(o){let s=new dn(we.comparator);s=s.insert(o,xn.newNoDocument(o,Ue.min()));const a=ct().add(o),l=new Tm(Ue.min(),new Map,new dn(rt),s,a);yield FV(i,l),i.pa=i.pa.remove(o),i.ya.delete(e),rD(i)}else yield uh(i.localStore,e,!1).then(()=>_h(i,e,t)).catch(al)}),QT.apply(this,arguments)}function yX(n,e){return XT.apply(this,arguments)}function XT(){return XT=(0,ne.Z)(function*(n,e){const t=Ee(n),i=e.batch.batchId;try{const r=yield function FQ(n,e){const t=Ee(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=t.ss.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const p=c.batch,g=p.keys();let _=U.resolve();return g.forEach(E=>{_=_.next(()=>h.getEntry(l,E)).next(x=>{const T=c.docVersions.get(E);Ve(null!==T),x.version.compareTo(T)<0&&(p.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),h.addEntry(x)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(t,i,e,o).next(()=>o.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=ct();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}(t.localStore,e);nD(t,i,null),tD(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield pa(t,r)}catch(r){yield al(r)}}),XT.apply(this,arguments)}function bX(n,e,t){return JT.apply(this,arguments)}function JT(){return JT=(0,ne.Z)(function*(n,e,t){const i=Ee(n);try{const r=yield function(s,a){const l=Ee(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(p=>(Ve(null!==p),h=p.keys(),l.mutationQueue.removeMutationBatch(c,p))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(i.localStore,e);nD(i,e,t),tD(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield pa(i,r)}catch(r){yield al(r)}}),JT.apply(this,arguments)}function eD(){return eD=(0,ne.Z)(function*(n,e){const t=Ee(n);bl(t.remoteStore)||fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const a=Ee(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(-1===i)return void e.resolve();const r=t.ba.get(i)||[];r.push(e),t.ba.set(i,r)}catch(i){const r=ph(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}),eD.apply(this,arguments)}function tD(n,e){(n.ba.get(e)||[]).forEach(t=>{t.resolve()}),n.ba.delete(e)}function nD(n,e,t){const i=Ee(n);let r=i.Sa[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),i.Sa[i.currentUser.toKey()]=r}}function _h(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.fa.get(e))n.ma.delete(i),t&&n.Va.Fa(i,t);n.fa.delete(e),n.isPrimaryClient&&n.wa.Rr(e).forEach(i=>{n.wa.containsKey(i)||VV(n,i)})}function VV(n,e){n.ga.delete(e.path.canonicalString());const t=n.pa.get(e);null!==t&&(Um(n.remoteStore,t),n.pa=n.pa.remove(e),n.ya.delete(t),rD(n))}function iD(n,e,t){for(const i of t)i instanceof kV?(n.wa.addReference(i.key,e),wX(n,i)):i instanceof OV?(fe("SyncEngine","Document no longer in limbo: "+i.key),n.wa.removeReference(i.key,e),n.wa.containsKey(i.key)||VV(n,i.key)):Pe()}function wX(n,e){const t=e.key,i=t.path.canonicalString();n.pa.get(t)||n.ga.has(i)||(fe("SyncEngine","New document in limbo: "+t),n.ga.add(i),rD(n))}function rD(n){for(;n.ga.size>0&&n.pa.size<n.maxConcurrentLimboResolutions;){const e=n.ga.values().next().value;n.ga.delete(e);const t=new we(Nt.fromString(e)),i=n.Da.next();n.ya.set(i,new fX(t)),n.pa=n.pa.insert(t,i),Rb(n.remoteStore,new fa(Ir(Yd(t.path)),i,"TargetPurposeLimboResolution",no._e))}}function pa(n,e,t){return oD.apply(this,arguments)}function oD(){return oD=(0,ne.Z)(function*(n,e,t){const i=Ee(n),r=[],o=[],s=[];var a;i.ma.isEmpty()||(i.ma.forEach((a,l)=>{s.push(i.va(l,e,t).then(c=>{if((c||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,c?.fromCache?"not-current":"current"),c){r.push(c);const h=cT.Qi(l.targetId,c);o.push(h)}}))}),yield Promise.all(s),i.Va.a_(r),yield(a=(0,ne.Z)(function*(c,h){const p=Ee(c);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>U.forEach(h,_=>U.forEach(_.ki,E=>p.persistence.referenceDelegate.addReference(g,_.targetId,E)).next(()=>U.forEach(_.qi,E=>p.persistence.referenceDelegate.removeReference(g,_.targetId,E)))))}catch(g){if(!ll(g))throw g;fe("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const _=g.targetId;if(!g.fromCache){const E=p.ts.get(_),T=E.withLastLimboFreeSnapshotVersion(E.snapshotVersion);p.ts=p.ts.insert(_,T)}}}),function l(c,h){return a.apply(this,arguments)})(i.localStore,o))}),oD.apply(this,arguments)}function IX(n,e){return sD.apply(this,arguments)}function sD(){return sD=(0,ne.Z)(function*(n,e){const t=Ee(n);if(!t.currentUser.isEqual(e)){fe("SyncEngine","User change. New user:",e.toKey());const i=yield hV(t.localStore,e);t.currentUser=e,(o=t).ba.forEach(a=>{a.forEach(l=>{l.reject(new ce(X.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ba.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield pa(t,i._s)}var o}),sD.apply(this,arguments)}function xX(n,e){const t=Ee(n),i=t.ya.get(e);if(i&&i.Ra)return ct().add(i.key);{let r=ct();const o=t.fa.get(e);if(!o)return r;for(const s of o){const a=t.ma.get(s);r=r.unionWith(a.view.ua)}return r}}function CX(n,e){return aD.apply(this,arguments)}function aD(){return aD=(0,ne.Z)(function*(n,e){const t=Ee(n),i=yield Cb(t.localStore,e.query,!0),r=e.view.da(i);return t.isPrimaryClient&&iD(t,e.targetId,r.Ta),r}),aD.apply(this,arguments)}function TX(n,e){return lD.apply(this,arguments)}function lD(){return lD=(0,ne.Z)(function*(n,e){const t=Ee(n);return gV(t.localStore,e).then(i=>pa(t,i))}),lD.apply(this,arguments)}function DX(n,e,t,i){return cD.apply(this,arguments)}function cD(){return cD=(0,ne.Z)(function*(n,e,t,i){const r=Ee(n),o=yield function(a,l){const c=Ee(a),h=Ee(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Cn(p,l).next(g=>g?c.localDocuments.getDocuments(p,g):U.resolve(null)))}(r.localStore,e);var l;null!==o?("pending"===t?yield hh(r.remoteStore):"acknowledged"===t||"rejected"===t?(nD(r,e,i||null),tD(r,e),l=e,Ee(Ee(r.localStore).mutationQueue).Fn(l)):Pe(),yield pa(r,o)):fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),cD.apply(this,arguments)}function uD(){return uD=(0,ne.Z)(function*(n,e){const t=Ee(n);if(pD(t),mD(t),!0===e&&!0!==t.Ca){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield BV(t,i.toArray());t.Ca=!0,yield FT(t.remoteStore,!0);for(const o of r)Rb(t.remoteStore,o)}else if(!1===e&&!1!==t.Ca){const i=[];let r=Promise.resolve();t.fa.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?i.push(s):r=r.then(()=>(_h(t,s),uh(t.localStore,s,!0))),Um(t.remoteStore,s)}),yield r,yield BV(t,i),function(s){const a=Ee(s);a.ya.forEach((l,c)=>{Um(a.remoteStore,c)}),a.wa.Vr(),a.ya=new Map,a.pa=new dn(we.comparator)}(t),t.Ca=!1,yield FT(t.remoteStore,!1)}}),uD.apply(this,arguments)}function BV(n,e,t){return dD.apply(this,arguments)}function dD(){return dD=(0,ne.Z)(function*(n,e,t){const i=Ee(n),r=[],o=[];for(const s of e){let a;const l=i.fa.get(s);if(l&&0!==l.length){a=yield ch(i.localStore,Ir(l[0]));for(const c of l){const h=i.ma.get(c),p=yield CX(i,h);p.snapshot&&o.push(p.snapshot)}}else{const c=yield mV(i.localStore,s);a=yield ch(i.localStore,c),yield WT(i,UV(c),s,!1,a.resumeToken)}r.push(a)}return i.Va.a_(o),r}),dD.apply(this,arguments)}function UV(n){return HL(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function SX(n){return t=Ee(n).localStore,Ee(Ee(t).persistence).Bi();var t}function RX(n,e,t,i){return hD.apply(this,arguments)}function hD(){return hD=(0,ne.Z)(function*(n,e,t,i){const r=Ee(n);if(r.Ca)return void fe("SyncEngine","Ignoring unexpected query state notification.");const o=r.fa.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const s=yield gV(r.localStore,ZL(o[0])),a=Tm.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,yi.EMPTY_BYTE_STRING);yield pa(r,s,a);break}case"rejected":yield uh(r.localStore,e,!0),_h(r,e,i);break;default:Pe()}}),hD.apply(this,arguments)}function MX(n,e,t){return fD.apply(this,arguments)}function fD(){return fD=(0,ne.Z)(function*(n,e,t){const i=pD(n);if(i.Ca){for(const r of e){if(i.fa.has(r)){fe("SyncEngine","Adding an already active target "+r);continue}const o=yield mV(i.localStore,r),s=yield ch(i.localStore,o);yield WT(i,UV(o),s.targetId,!1,s.resumeToken),Rb(i.remoteStore,s)}for(const r of t)i.fa.has(r)&&(yield uh(i.localStore,r,!1).then(()=>{Um(i.remoteStore,r),_h(i,r)}).catch(al))}}),fD.apply(this,arguments)}function pD(n){const e=Ee(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=FV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xX.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vX.bind(null,e),e.Va.a_=lX.bind(null,e.eventManager),e.Va.Fa=cX.bind(null,e.eventManager),e}function mD(n){const e=Ee(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yX.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bX.bind(null,e),e}class jm{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ne.Z)(function*(){t.serializer=Vm(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return dV(this.persistence,new uV,e.initialUser,this.serializer)}createPersistence(e){return new oT(wb.jr,this.serializer)}createSharedClientState(e){return new bV}terminate(){var e=this;return(0,ne.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class gD extends jm{constructor(e,t,i){super(),this.xa=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,ne.Z)(function*(){yield t().call(i,e),yield i.xa.initialize(i,e),yield mD(i.xa.syncEngine),yield hh(i.xa.remoteStore),yield i.persistence.mi(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return dV(this.persistence,new uV,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new tV(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const i=new rY(t,this.persistence);return new iY(e.asyncQueue,i)}createPersistence(e){const t=lT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?er.withCacheSize(this.cacheSizeBytes):er.DEFAULT;return new aT(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,wV(),Sb(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new bV}}class jV extends gD{constructor(e,t){super(e,t,!1),this.xa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,ne.Z)(function*(){yield t().call(i,e);const r=i.xa.syncEngine;i.sharedClientState instanceof _T&&(i.sharedClientState.syncEngine={Ys:DX.bind(null,r),Zs:RX.bind(null,r),Xs:MX.bind(null,r),Bi:SX.bind(null,r),Js:TX.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.mi(function(){var o=(0,ne.Z)(function*(s){yield function AX(n,e){return uD.apply(this,arguments)}(i.xa.syncEngine,s),i.gcScheduler&&(s&&!i.gcScheduler.started?i.gcScheduler.start():s||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(s&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():s||i.indexBackfillerScheduler.stop())});return function(s){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const t=wV();if(!_T.D(t))throw new ce(X.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=lT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _T(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class vh{initialize(e,t){var i=this;return(0,ne.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>LV(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=IX.bind(null,i.syncEngine),yield FT(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new aX}createDatastore(e){const t=Vm(e.databaseInfo.databaseId),i=new HQ(e.databaseInfo);return new GQ(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return i=this.localStore,r=this.datastore,o=e.asyncQueue,s=t=>LV(this.syncEngine,t,0),a=EV.D()?new EV:new jQ,new YQ(i,r,o,s,a);var i,r,o,s,a}createSyncEngine(e,t){return function(r,o,s,a,l,c,h){const p=new pX(r,o,s,a,l,c);return h&&(p.Ca=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ne.Z)(function*(i){const r=Ee(i);fe("RemoteStore","RemoteStore shutting down."),r.C_.add(5),yield dh(r),r.F_.shutdown(),r.M_.set("Unknown")}),function t(i){return e.apply(this,arguments)})(this.remoteStore);var e}}function zV(n,e=10240){let t=0;return{read:()=>(0,ne.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,ne.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Pb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):ni("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class OX{constructor(e,t){this.Ba=e,this.serializer=t,this.metadata=new vi,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(i=>{i&&i.Z_()?this.metadata.resolve(i.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.Y_)}`))},i=>this.metadata.reject(i))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,ne.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,ne.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,ne.Z)(function*(){const t=yield e.qa();if(null===t)return null;const i=e.La.decode(t),r=Number(i);isNaN(r)&&e.Qa(`length string (${i}) is not valid number`);const o=yield e.Ka(r);return new uX(JSON.parse(o),t.length+r)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,ne.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const t=e.$a();t<0&&e.Qa("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}Ka(e){var t=this;return(0,ne.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ua())&&t.Qa("Reached the end of bundle when more is expected.");const i=t.La.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,ne.Z)(function*(){const t=yield e.Ba.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class NX{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ne.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ce(X.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,ne.Z)(function*(s,a){const l=Ee(s),c=Sm(l.serializer)+"/documents",h={documents:a.map(E=>Am(l.serializer,E))},p=yield l.Co("BatchGetDocuments",c,h,a.length),g=new Map;p.forEach(E=>{const x=function nQ(n,e){return"found"in e?function(i,r){Ve(!!r.found);const o=xs(i,r.found.name),s=ii(r.found.updateTime),a=r.found.createTime?ii(r.found.createTime):Ue.min(),l=new $i({mapValue:{fields:r.found.fields}});return xn.newFoundDocument(o,s,a,l)}(n,e):"missing"in e?function(i,r){Ve(!!r.missing),Ve(!!r.readTime);const o=xs(i,r.missing),s=ii(r.readTime);return xn.newNoDocument(o,s)}(n,e):Pe()}(l.serializer,E);g.set(x.key.toString(),x)});const _=[];return a.forEach(E=>{const x=g.get(E.toString());Ve(!!x),_.push(x)}),_}),function o(s,a){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new nh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ne.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const o=we.fromPath(r);e.mutations.push(new jC(o,e.precondition(o)))}),yield(i=(0,ne.Z)(function*(o,s){const a=Ee(o),l=Sm(a.serializer)+"/documents",c={writes:s.map(h=>Rm(a.serializer,h))};yield a.wo("Commit",l,c)}),function r(o,s){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Pe();t=Ue.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new ce(X.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ue.min())?Mn.exists(!1):Mn.updateTime(t):Mn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ue.min()))throw new ce(X.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mn.updateTime(t)}return Mn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class FX{constructor(e,t,i,r,o){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=o,this.Wa=i.maxAttempts,this.zo=new yT(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,ne.Z)(function*(){const t=new NX(e.datastore),i=e.za(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(o=>{e.ja(o)}))}).catch(r=>{e.ja(r)})}))}za(e){try{const t=this.updateFunction(e);return!dm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!f2(t)}return!1}}class LX{constructor(e,t,i,r){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Si.UNAUTHENTICATED,this.clientId=lL.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var s=(0,ne.Z)(function*(a){fe("FirestoreClient","Received user=",a.uid),yield o.authCredentialListener(a),o.user=a});return function(a){return s.apply(this,arguments)}}()),this.appCheckCredentials.start(i,s=>(fe("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}getConfiguration(){var e=this;return(0,ne.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ce(X.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ne.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=ph(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function kb(n,e){return _D.apply(this,arguments)}function _D(){return _D=(0,ne.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=(0,ne.Z)(function*(o){i.isEqual(o)||(yield hV(e.localStore,o),i=o)});return function(o){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),_D.apply(this,arguments)}function vD(n,e){return yD.apply(this,arguments)}function yD(){return yD=(0,ne.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield bD(n);fe("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>SV(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,o)=>SV(e.remoteStore,o)),n._onlineComponents=e}),yD.apply(this,arguments)}function $V(n){return"FirebaseError"===n.name?n.code===X.FAILED_PRECONDITION||n.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function bD(n){return ED.apply(this,arguments)}function ED(){return ED=(0,ne.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){fe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield kb(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!$V(t))throw t;Lr("Error using user provided cache. Falling back to memory cache: "+t),yield kb(n,new jm)}}else fe("FirestoreClient","Using default OfflineComponentProvider"),yield kb(n,new jm);return n._offlineComponents}),ED.apply(this,arguments)}function Ob(n){return wD.apply(this,arguments)}function wD(){return wD=(0,ne.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(fe("FirestoreClient","Using user provided OnlineComponentProvider"),yield vD(n,n._uninitializedComponentsProvider._online)):(fe("FirestoreClient","Using default OnlineComponentProvider"),yield vD(n,new vh))),n._onlineComponents}),wD.apply(this,arguments)}function HV(n){return bD(n).then(e=>e.persistence)}function yh(n){return bD(n).then(e=>e.localStore)}function qV(n){return Ob(n).then(e=>e.remoteStore)}function ID(n){return Ob(n).then(e=>e.syncEngine)}function bh(n){return xD.apply(this,arguments)}function xD(){return xD=(0,ne.Z)(function*(n){const e=yield Ob(n),t=e.eventManager;return t.onListen=mX.bind(null,e.syncEngine),t.onUnlisten=gX.bind(null,e.syncEngine),t}),xD.apply(this,arguments)}function GV(n,e,t={}){const i=new vi;return n.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function(o,s,a,l,c){const h=new Pb({next:g=>{s.enqueueAndForget(()=>jT(o,p));const _=g.docs.has(a);!_&&g.fromCache?c.reject(new ce(X.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&l&&"server"===l.source?c.reject(new ce(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new HT(Yd(a.path),h,{includeMetadataChanges:!0,J_:!0});return BT(o,p)}(yield bh(n),n.asyncQueue,e,t,i)})),i.promise}function ZV(n,e,t={}){const i=new vi;return n.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function(o,s,a,l,c){const h=new Pb({next:g=>{s.enqueueAndForget(()=>jT(o,p)),g.fromCache&&"server"===l.source?c.reject(new ce(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new HT(a,h,{includeMetadataChanges:!0,J_:!0});return BT(o,p)}(yield bh(n),n.asyncQueue,e,t,i)})),i.promise}function KV(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const YV=new Map;function CD(n,e,t){if(!t)throw new ce(X.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function QV(n,e,t,i){if(!0===e&&!0===i)throw new ce(X.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function XV(n){if(!we.isDocumentKey(n))throw new ce(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function JV(n){if(we.isDocumentKey(n))throw new ce(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Nb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(i=n).constructor?i.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var i;return"function"==typeof n?"a function":Pe()}function At(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ce(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Nb(n);throw new ce(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function eB(n,e){if(e<=0)throw new ce(X.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class tB{constructor(e){var t,i;if(void 0===e.host){if(void 0!==e.ssl)throw new ce(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ce(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=KV(null!==(i=e.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new ce(X.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ce(X.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ce(X.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zm{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tB({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ce(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ce(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tB(e),void 0!==e.credentials&&(this._authCredentials=function(i){if(!i)return new qK;switch(i.type){case"firstParty":return new KK(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ce(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=YV.get(t);i&&(fe("ComponentProvider","Removing Datastore"),YV.delete(t),i.terminate())}(this),Promise.resolve()}}function nB(n,e,t,i={}){var r;const o=(n=At(n,zm))._getSettings(),s=`${e}:${t}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&Lr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),i.mockUserToken){let a,l;if("string"==typeof i.mockUserToken)a=i.mockUserToken,l=Si.MOCK_USER;else{a=(0,tn.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new ce(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Si(c)}n._authCredentials=new WK(new sL(a,l))}}class Hi{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Hi(this.firestore,e,this._query)}}class Cn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Cn(this.firestore,e,this._key)}}class Cs extends Hi{constructor(e,t,i){super(e,t,Yd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Cn(this.firestore,null,new we(e))}withConverter(e){return new Cs(this.firestore,e,this._path)}}function TD(n,e,...t){if(n=(0,tn.m9)(n),CD("collection","path",e),n instanceof zm){const i=Nt.fromString(e,...t);return JV(i),new Cs(n,null,i)}{if(!(n instanceof Cn||n instanceof Cs))throw new ce(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Nt.fromString(e,...t));return JV(i),new Cs(n.firestore,null,i)}}function $m(n,e,...t){if(n=(0,tn.m9)(n),1===arguments.length&&(e=lL.newId()),CD("doc","path",e),n instanceof zm){const i=Nt.fromString(e,...t);return XV(i),new Cn(n,null,new we(i))}{if(!(n instanceof Cn||n instanceof Cs))throw new ce(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Nt.fromString(e,...t));return XV(i),new Cn(n.firestore,n instanceof Cs?n.converter:null,new we(i))}}function iB(n,e){return n=(0,tn.m9)(n),e=(0,tn.m9)(e),(n instanceof Cn||n instanceof Cs)&&(e instanceof Cn||e instanceof Cs)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function DD(n,e){return n=(0,tn.m9)(n),e=(0,tn.m9)(e),n instanceof Hi&&e instanceof Hi&&n.firestore===e.firestore&&ym(n._query,e._query)&&n.converter===e.converter}class KX{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new yT(this,"async_queue_retry"),this.iu=()=>{const t=Sb();t&&fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.zo.Qo()};const e=Sb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=Sb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const t=new vi;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,ne.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(t){if(!ll(t))throw t;fe("AsyncQueue","Operation failed with retryable error: "+t)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const t=this.Ja.then(()=>(this.tu=!0,e().catch(i=>{throw this.eu=i,this.tu=!1,ni("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(i)),i}).then(i=>(this.tu=!1,i))));return this.Ja=t,t}enqueueAfterDelay(e,t,i){this.su(),this.ru.indexOf(e)>-1&&(t=0);const r=VT.createAndSchedule(this,e,t,i,o=>this.au(o));return this.Xa.push(r),r}su(){this.eu&&Pe()}verifyOperationInProgress(){}uu(){var e=this;return(0,ne.Z)(function*(){let t;do{t=e.Ja,yield t}while(t!==e.Ja)})()}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}function AD(n){return function(t,i){if("object"!=typeof t||null===t)return!1;const r=t;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class YX{constructor(){this._progressObserver={},this._taskCompletionResolver=new vi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class hn extends zm{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new KX,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||rB(this),this._firestoreClient.terminate()}}function XX(n,e){const t="object"==typeof n?n:(0,Fr.getApp)(),i="string"==typeof n?n:e||"(default)",r=(0,Fr._getProvider)(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=(0,tn.P0)("firestore");o&&nB(r,...o)}return r}function Wn(n){return n._firestoreClient||rB(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function rB(n){var e,t,i;const r=n._freezeSettings(),o=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new CY(n._databaseId,l,n._persistenceKey,(h=r).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,KV(h.experimentalLongPollingOptions),h.useFetchStreams));var l,h;n._firestoreClient=new LX(n._authCredentials,n._appCheckCredentials,n._queue,o),null!==(t=r.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(i=r.localCache)&&void 0!==i&&i._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function oB(n,e,t){const i=new vi;return n.asyncQueue.enqueue((0,ne.Z)(function*(){try{yield kb(n,t),yield vD(n,e),i.resolve()}catch(r){const o=r;if(!$V(o))throw o;Lr("Error enabling indexeddb cache. Falling back to memory cache: "+o),i.reject(o)}})).then(()=>i.promise)}function sB(n){if(n._initialized||n._terminated)throw new ce(X.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ts{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ts(yi.fromBase64String(e))}catch(t){throw new ce(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ts(yi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ma{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ce(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new In(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Vc{constructor(e){this._methodName=e}}class Fb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}}const lJ=/^__.*__$/;class cJ{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new ha(e,this.data,this.fieldMask,t,this.fieldTransforms):new th(e,this.data,t,this.fieldTransforms)}}class aB{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ha(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function lB(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe()}}class Lb{constructor(e,t,i,r,o,s){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===o&&this.Pu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new Lb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:i,du:!1});return r.Au(e),r}Ru(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:i,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Ub(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(lB(this.Iu)&&lJ.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class uJ{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Vm(e)}pu(e,t,i,r=!1){return new Lb({Iu:e,methodName:t,gu:i,path:In.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bc(n){const e=n._freezeSettings(),t=Vm(n._databaseId);return new uJ(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Vb(n,e,t,i,r,o={}){const s=n.pu(o.merge||o.mergeFields?2:0,e,t,r);PD("Data must be an object, but it was:",s,i);const a=dB(i,s);let l,c;if(o.merge)l=new Vr(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const p of o.mergeFields){const g=Wm(e,p,t);if(!s.contains(g))throw new ce(X.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);fB(h,g)||h.push(g)}l=new Vr(h),c=s.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,c=s.fieldTransforms;return new cJ(new $i(a),l,c)}class qm extends Vc{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qm}}function cB(n,e,t){return new Lb({Iu:3,gu:e.settings.gu,methodName:n._methodName,du:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class SD extends Vc{_toFieldTransform(e){return new Im(e.path,new Jd)}isEqual(e){return e instanceof SD}}class dJ extends Vc{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=cB(this,e,!0),i=this.yu.map(o=>Uc(o,t)),r=new Sc(i);return new Im(e.path,r)}isEqual(e){return this===e}}class hJ extends Vc{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=cB(this,e,!0),i=this.yu.map(o=>Uc(o,t)),r=new Rc(i);return new Im(e.path,r)}isEqual(e){return this===e}}class fJ extends Vc{constructor(e,t){super(e),this.wu=t}_toFieldTransform(e){const t=new eh(e.serializer,t2(e.serializer,this.wu));return new Im(e.path,t)}isEqual(e){return this===e}}function RD(n,e,t,i){const r=n.pu(1,e,t);PD("Data must be an object, but it was:",r,i);const o=[],s=$i.empty();cl(i,(l,c)=>{const h=Bb(e,l,t);c=(0,tn.m9)(c);const p=r.Ru(h);if(c instanceof qm)o.push(h);else{const g=Uc(c,p);null!=g&&(o.push(h),s.set(h,g))}});const a=new Vr(o);return new aB(s,a,r.fieldTransforms)}function MD(n,e,t,i,r,o){const s=n.pu(1,e,t),a=[Wm(e,i,t)],l=[r];if(o.length%2!=0)throw new ce(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(Wm(e,o[g])),l.push(o[g+1]);const c=[],h=$i.empty();for(let g=a.length-1;g>=0;--g)if(!fB(c,a[g])){const _=a[g];let E=l[g];E=(0,tn.m9)(E);const x=s.Ru(_);if(E instanceof qm)c.push(_);else{const T=Uc(E,x);null!=T&&(c.push(_),h.set(_,T))}}const p=new Vr(c);return new aB(h,p,s.fieldTransforms)}function uB(n,e,t,i=!1){return Uc(t,n.pu(i?4:3,e))}function Uc(n,e){if(hB(n=(0,tn.m9)(n)))return PD("Unsupported field value:",e,n),dB(n,e);if(n instanceof Vc)return function(i,r){if(!lB(r.Iu))throw r.mu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.mu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(i,r){const o=[];let s=0;for(const a of i){let l=Uc(a,r.Vu(s));null==l&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(n,e)}return function(i,r){if(null===(i=(0,tn.m9)(i)))return{nullValue:"NULL_VALUE"};if("number"==typeof i)return t2(r.serializer,i);if("boolean"==typeof i)return{booleanValue:i};if("string"==typeof i)return{stringValue:i};if(i instanceof Date){const o=Rn.fromDate(i);return{timestampValue:ih(r.serializer,o)}}if(i instanceof Rn){const o=new Rn(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ih(r.serializer,o)}}if(i instanceof Fb)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ts)return{bytesValue:I2(r.serializer,i._byteString)};if(i instanceof Cn){const o=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(o))throw r.mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:GC(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.mu(`Unsupported field value: ${Nb(i)}`)}(n,e)}function dB(n,e){const t={};return IL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cl(n,(i,r)=>{const o=Uc(r,e.Eu(i));null!=o&&(t[i]=o)}),{mapValue:{fields:t}}}function hB(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Rn||n instanceof Fb||n instanceof Ts||n instanceof Cn||n instanceof Vc)}function PD(n,e,t){if(!hB(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const i=Nb(t);throw e.mu("an object"===i?n+" a custom object":n+" "+i)}var r}function Wm(n,e,t){if((e=(0,tn.m9)(e))instanceof ma)return e._internalPath;if("string"==typeof e)return Bb(n,e);throw Ub("Field path arguments must be of type string or ",n,!1,void 0,t)}const pJ=new RegExp("[~\\*/\\[\\]]");function Bb(n,e,t){if(e.search(pJ)>=0)throw Ub(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ma(...e.split("."))._internalPath}catch{throw Ub(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ub(n,e,t,i,r){const o=i&&!i.isEmpty(),s=void 0!==r;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${i}`),s&&(l+=` in document ${r}`),l+=")"),new ce(X.INVALID_ARGUMENT,a+n+l)}function fB(n,e){return n.some(t=>t.isEqual(e))}class Gm{constructor(e,t,i,r,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Cn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new mJ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class mJ extends Gm{data(){return super.data()}}function jb(n,e){return"string"==typeof e?Bb(n,e):e instanceof ma?e._internalPath:e._delegate._internalPath}function pB(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ce(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kD{}class Zm extends kD{}function wl(n,e,...t){let i=[];e instanceof kD&&i.push(e),i=i.concat(t),function(o){const s=o.filter(l=>l instanceof Eh).length,a=o.filter(l=>l instanceof Km).length;if(s>1||s>0&&a>0)throw new ce(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class Km extends Zm{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Km(e,t,i)}_apply(e){const t=this._parse(e);return vB(e._query,t),new Hi(e.firestore,e.converter,BC(e._query,t))}_parse(e){const t=Bc(e.firestore);return function(o,s,a,l,c,h,p){let g;if(c.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new ce(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){_B(p,h);const _=[];for(const E of p)_.push(gB(l,o,E));g={arrayValue:{values:_}}}else g=gB(l,o,p)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||_B(p,h),g=uB(a,"where",p,"in"===h||"not-in"===h);return Pt.create(c,h,g)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Eh extends kD{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Eh(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return 1===t.length?t[0]:Qt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,o){let s=r;const a=o.getFlattenedFilters();for(const l of a)vB(s,l),s=BC(s,l)}(e._query,t),new Hi(e.firestore,e.converter,BC(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class OD extends Zm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new OD(e,t)}_apply(e){const t=function(r,o,s){if(null!==r.startAt)throw new ce(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ce(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _m(o,s)}(e._query,this._field,this._direction);return new Hi(e.firestore,e.converter,function(r,o){const s=r.explicitOrderBy.concat([o]);return new ua(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class zb extends Zm{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new zb(e,t,i)}_apply(e){return new Hi(e.firestore,e.converter,cb(e._query,this._limit,this._limitType))}}class $b extends Zm{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new $b(e,t,i)}_apply(e){const t=mB(e,this.type,this._docOrFields,this._inclusive);return new Hi(e.firestore,e.converter,(o=t,new ua((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class Hb extends Zm{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new Hb(e,t,i)}_apply(e){const t=mB(e,this.type,this._docOrFields,this._inclusive);return new Hi(e.firestore,e.converter,(o=t,new ua((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function mB(n,e,t,i){if(t[0]=(0,tn.m9)(t[0]),t[0]instanceof Gm)return function(o,s,a,l,c){if(!l)throw new ce(X.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const p of Qd(o))if(p.field.isKeyField())h.push(Dc(s,l.key));else{const g=l.data.field(p.field);if(nb(g))throw new ce(X.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===g){const _=p.field.canonicalString();throw new ce(X.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}h.push(g)}return new ml(h,c)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=Bc(n.firestore);return function(s,a,l,c,h,p){const g=s.explicitOrderBy;if(h.length>g.length)throw new ce(X.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let E=0;E<h.length;E++){const x=h[E];if(g[E].field.isKeyField()){if("string"!=typeof x)throw new ce(X.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof x}`);if(!VC(s)&&-1!==x.indexOf("/"))throw new ce(X.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${x}' contains a slash.`);const T=s.path.child(Nt.fromString(x));if(!we.isDocumentKey(T))throw new ce(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);const V=new we(T);_.push(Dc(a,V))}else{const T=uB(l,c,x);_.push(T)}}return new ml(_,p)}(n._query,n.firestore._databaseId,r,e,t,i)}}function gB(n,e,t){if("string"==typeof(t=(0,tn.m9)(t))){if(""===t)throw new ce(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VC(e)&&-1!==t.indexOf("/"))throw new ce(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Nt.fromString(t));if(!we.isDocumentKey(i))throw new ce(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Dc(n,new we(i))}if(t instanceof Cn)return Dc(n,t._key);throw new ce(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nb(t)}.`)}function _B(n,e){if(!Array.isArray(n)||0===n.length)throw new ce(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vB(n,e){const t=function(r,o){for(const s of r)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ce(X.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class ND{convertValue(e,t="none"){switch(fl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ca(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Pe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return cl(e,(r,o)=>{i[r]=this.convertValue(o,t)}),i}convertGeoPoint(e){return new Fb(qn(e.latitude),qn(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=ib(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(fm(e));default:return null}}convertTimestamp(e){const t=ul(e);return new Rn(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Nt.fromString(e);Ve(k2(i));const r=new dl(i.get(1),i.get(3)),o=new we(i.popFirst(5));return r.isEqual(t)||ni(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function qb(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class xJ extends ND{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ts(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Cn(this.firestore,null,t)}}class jc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ga extends Gm{constructor(e,t,i,r,o,s){super(e,t,i,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ym(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(jb("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Ym extends ga{data(e={}){return super.data(e)}}class Il{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new jc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Ym(this._firestore,this._userDataWriter,i.key,i,new jc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(a=>({type:"added",doc:new Ym(r._firestore,r._userDataWriter,a.doc.key,a.doc,new jc(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const l=new Ym(r._firestore,r._userDataWriter,a.doc.key,a.doc,new jc(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return 0!==a.type&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:TJ(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function TJ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe()}}function bB(n,e){return n instanceof ga&&e instanceof ga?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Il&&e instanceof Il&&n._firestore===e._firestore&&DD(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function EB(n){n=At(n,Cn);const e=At(n.firestore,hn);return GV(Wn(e),n._key).then(t=>LD(e,n,t))}class xl extends ND{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ts(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Cn(this.firestore,null,t)}}function wB(n){n=At(n,Hi);const e=At(n.firestore,hn),t=Wn(e),i=new xl(e);return pB(n._query),ZV(t,n._query).then(r=>new Il(e,i,n,r))}function FD(n,e,t){n=At(n,Cn);const i=At(n.firestore,hn),r=qb(n.converter,e,t);return wh(i,[Vb(Bc(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,Mn.none())])}function IB(n,e,t,...i){n=At(n,Cn);const r=At(n.firestore,hn),o=Bc(r);let s;return s="string"==typeof(e=(0,tn.m9)(e))||e instanceof ma?MD(o,"updateDoc",n._key,e,t,i):RD(o,"updateDoc",n._key,e),wh(r,[s.toMutation(n._key,Mn.exists(!0))])}function xB(n){return wh(At(n.firestore,hn),[new nh(n._key,Mn.none())])}function CB(n,...e){var t,i,r;n=(0,tn.m9)(n);let o={includeMetadataChanges:!1},s=0;"object"!=typeof e[s]||AD(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges};if(AD(e[s])){const p=e[s];e[s]=null===(t=p.next)||void 0===t?void 0:t.bind(p),e[s+1]=null===(i=p.error)||void 0===i?void 0:i.bind(p),e[s+2]=null===(r=p.complete)||void 0===r?void 0:r.bind(p)}let l,c,h;if(n instanceof Cn)c=At(n.firestore,hn),h=Yd(n._key.path),l={next:p=>{e[s]&&e[s](LD(c,n,p))},error:e[s+1],complete:e[s+2]};else{const p=At(n,Hi);c=At(p.firestore,hn),h=p._query;const g=new xl(c);l={next:_=>{e[s]&&e[s](new Il(c,g,p,_))},error:e[s+1],complete:e[s+2]},pB(n._query)}return function(g,_,E,x){const T=new Pb(x),V=new HT(_,T,E);return g.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return BT(yield bh(g),V)})),()=>{T.Na(),g.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return jT(yield bh(g),V)}))}}(Wn(c),h,a,l)}function wh(n,e){return function(i,r){const o=new vi;return i.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function _X(n,e,t){return KT.apply(this,arguments)}(yield ID(i),r,o)})),o.promise}(Wn(n),e)}function LD(n,e,t){const i=t.docs.get(e._key),r=new xl(n);return new ga(n,r,e._key,i,new jc(t.hasPendingWrites,t.fromCache),e.converter)}const jJ={maxAttempts:5};class TB{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Bc(e)}set(e,t,i){this._verifyNotCommitted();const r=Cl(e,this._firestore),o=qb(r.converter,t,i),s=Vb(this._dataReader,"WriteBatch.set",r._key,o,null!==r.converter,i);return this._mutations.push(s.toMutation(r._key,Mn.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const o=Cl(e,this._firestore);let s;return s="string"==typeof(t=(0,tn.m9)(t))||t instanceof ma?MD(this._dataReader,"WriteBatch.update",o._key,t,i,r):RD(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Mn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Cl(e,this._firestore);return this._mutations=this._mutations.concat(new nh(t._key,Mn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ce(X.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Cl(n,e){if((n=(0,tn.m9)(n)).firestore!==e)throw new ce(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class zJ extends class{constructor(t,i){this._firestore=t,this._transaction=i,this._dataReader=Bc(t)}get(t){const i=Cl(t,this._firestore),r=new xJ(this._firestore);return this._transaction.lookup([i._key]).then(o=>{if(!o||1!==o.length)return Pe();const s=o[0];if(s.isFoundDocument())return new Gm(this._firestore,r,s.key,s,i.converter);if(s.isNoDocument())return new Gm(this._firestore,r,i._key,null,i.converter);throw Pe()})}set(t,i,r){const o=Cl(t,this._firestore),s=qb(o.converter,i,r),a=Vb(this._dataReader,"Transaction.set",o._key,s,null!==o.converter,r);return this._transaction.set(o._key,a),this}update(t,i,r,...o){const s=Cl(t,this._firestore);let a;return a="string"==typeof(i=(0,tn.m9)(i))||i instanceof ma?MD(this._dataReader,"Transaction.update",s._key,i,r,o):RD(this._dataReader,"Transaction.update",s._key,i),this._transaction.update(s._key,a),this}delete(t){const i=Cl(t,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Cl(e,this._firestore),i=new xl(this._firestore);return super.get(e).then(r=>new ga(this._firestore,i,t._key,r._document,new jc(!1,!1),t.converter))}}function BD(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ce("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function RB(){if(typeof Uint8Array>"u")throw new ce("unimplemented","Uint8Arrays are not available in this environment.")}function MB(){if(!function IY(){return typeof atob<"u"}())throw new ce("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){zd=Fr.SDK_VERSION,(0,Fr._registerComponent)(new wN.wA("firestore",(i,{instanceIdentifier:r,options:o})=>{const s=i.getProvider("app").getImmediate(),a=new hn(new GK(i.getProvider("auth-internal")),new YK(i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ce(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dl(c.options.projectId,h)}(s,r),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),(0,Fr.registerVersion)(oL,"4.4.0",e),(0,Fr.registerVersion)(oL,"4.4.0","esm2017")}();class Qm{constructor(e){this._delegate=e}static fromBase64String(e){return MB(),new Qm(Ts.fromBase64String(e))}static fromUint8Array(e){return RB(),new Qm(Ts.fromUint8Array(e))}toBase64(){return MB(),this._delegate.toBase64()}toUint8Array(){return RB(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function UD(n){return function XJ(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class JJ{enableIndexedDbPersistence(e,t){return function JX(n,e){sB(n=At(n,hn));const t=Wn(n);if(t._uninitializedComponentsProvider)throw new ce(X.FAILED_PRECONDITION,"SDK cache is already specified.");Lr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=n._freezeSettings(),r=new vh;return oB(t,r,new gD(r,i.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function eJ(n){sB(n=At(n,hn));const e=Wn(n);if(e._uninitializedComponentsProvider)throw new ce(X.FAILED_PRECONDITION,"SDK cache is already specified.");Lr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),i=new vh;return oB(e,i,new jV(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function tJ(n){if(n._initialized&&!n._terminated)throw new ce(X.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new vi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ne.Z)(function*(){try{yield(t=(0,ne.Z)(function*(r){if(!Zo.D())return Promise.resolve();const o=r+"main";yield Zo.delete(o)}),function i(r){return t.apply(this,arguments)})(lT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class PB{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof dl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Lr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){nB(this._delegate,e,t,i)}enableNetwork(){return function iJ(n){return function VX(n){return n.asyncQueue.enqueue((0,ne.Z)(function*(){const e=yield HV(n),t=yield qV(n);return e.setNetworkEnabled(!0),function(r){const o=Ee(r);return o.C_.delete(0),Bm(o)}(t)}))}(Wn(n=At(n,hn)))}(this._delegate)}disableNetwork(){return function rJ(n){return function BX(n){return n.asyncQueue.enqueue((0,ne.Z)(function*(){const e=yield HV(n),t=yield qV(n);return e.setNetworkEnabled(!1),(i=(0,ne.Z)(function*(o){const s=Ee(o);s.C_.add(0),yield dh(s),s.M_.set("Offline")}),function r(o){return i.apply(this,arguments)})(t);var i}))}(Wn(n=At(n,hn)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,QV("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function nJ(n){return function(t){const i=new vi;return t.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function EX(n,e){return eD.apply(this,arguments)}(yield ID(t),i)})),i.promise}(Wn(n=At(n,hn)))}(this._delegate)}onSnapshotsInSync(e){return function PJ(n,e){return function zX(n,e){const t=new Pb(e);return n.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return r=yield bh(n),o=t,Ee(r).q_.add(o),void o.next();var r,o})),()=>{t.Na(),n.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return r=yield bh(n),o=t,void Ee(r).q_.delete(o);var r,o}))}}(Wn(n=At(n,hn)),AD(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ce("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ih(this,TD(this._delegate,e))}catch(t){throw xr(t,"collection()","Firestore.collection()")}}doc(e){try{return new Po(this,$m(this._delegate,e))}catch(t){throw xr(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Cr(this,function ZX(n,e){if(n=At(n,zm),CD("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ce(X.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Hi(n,null,(i=e,new ua(Nt.emptyPath(),i)));var i}(this._delegate,e))}catch(t){throw xr(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function $J(n,e,t){n=At(n,hn);const i=Object.assign(Object.assign({},jJ),t);return function(o){if(o.maxAttempts<1)throw new ce(X.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(o,s,a){const l=new vi;return o.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){const c=yield function WV(n){return Ob(n).then(e=>e.datastore)}(o);new FX(o.asyncQueue,c,a,s,l).run()})),l.promise}(Wn(n),r=>e(new zJ(n,r)),i)}(this._delegate,t=>e(new kB(this,t)))}batch(){return Wn(this._delegate),new OB(new TB(this._delegate,e=>wh(this._delegate,e)))}loadBundle(e){return function oJ(n,e){const t=Wn(n=At(n,hn)),i=new YX;return function $X(n,e,t,i){const r=function(s,a){let l;return l="string"==typeof s?m2().encode(s):s,h=function(h,p){if(h instanceof Uint8Array)return zV(h,p);if(h instanceof ArrayBuffer)return zV(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new OX(h,a);var h}(t,Vm(e));n.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){!function PX(n,e,t){const i=Ee(n);var r;(r=(0,ne.Z)(function*(s,a,l){try{const c=yield a.getMetadata();if(yield function(E,x){const T=Ee(E),V=ii(x.createTime);return T.persistence.runTransaction("hasNewerBundle","readonly",k=>T.Kr.getBundleMetadata(k,x.id)).then(k=>!!k&&k.createTime.compareTo(V)>=0)}(s.localStore,c))return yield a.close(),l._completeWith({taskState:"Success",documentsLoaded:(E=c).totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}),Promise.resolve(new Set);l._updateProgress(PV(c));const h=new dX(c,s.localStore,a.serializer);let p=yield a.Ma();for(;p;){const _=yield h.ea(p);_&&l._updateProgress(_),p=yield a.Ma()}const g=yield h.complete();return yield pa(s,g.ra,void 0),yield function(E,x){const T=Ee(E);return T.persistence.runTransaction("Save bundle","readwrite",V=>T.Kr.saveBundleMetadata(V,x))}(s.localStore,c),l._completeWith(g.progress),Promise.resolve(g.na)}catch(c){return Lr("SyncEngine",`Loading bundle failed with ${c}`),l._failWith(c),Promise.resolve(new Set)}var E}),function o(s,a,l){return r.apply(this,arguments)})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield ID(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function sJ(n,e){return function HX(n,e){return n.asyncQueue.enqueue((0,ne.Z)(function*(){return function(i,r){const o=Ee(i);return o.persistence.runTransaction("Get named query","readonly",s=>o.Kr.getNamedQuery(s,r))}(yield yh(n),e)}))}(Wn(n=At(n,hn)),e).then(t=>t?new Hi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Cr(this,t):null)}}class Gb extends ND{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qm(new Ts(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Po.forKey(t,this.firestore,null)}}class kB{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Gb(e)}get(e){const t=$c(e);return this._delegate.get(t).then(i=>new Xm(this._firestore,new ga(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=$c(e);return i?(BD("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const o=$c(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,i,...r),this}delete(e){const t=$c(e);return this._delegate.delete(t),this}}class OB{constructor(e){this._delegate=e}set(e,t,i){const r=$c(e);return i?(BD("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const o=$c(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,i,...r),this}delete(e){const t=$c(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class zc{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new Ym(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Jm(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=zc.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let o=r.get(t);return o||(o=new zc(e,new Gb(e),t),r.set(t,o)),o}}zc.INSTANCES=new WeakMap;class Po{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Gb(e)}static forPath(e,t,i){if(e.length%2!=0)throw new ce("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Po(t,new Cn(t._delegate,i,new we(e)))}static forKey(e,t,i){return new Po(t,new Cn(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Ih(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ih(this.firestore,TD(this._delegate,e))}catch(t){throw xr(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,tn.m9)(e))instanceof Cn&&iB(this._delegate,e)}set(e,t){t=BD("DocumentReference.set",t);try{return t?FD(this._delegate,e,t):FD(this._delegate,e)}catch(i){throw xr(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?IB(this._delegate,e):IB(this._delegate,e,t,...i)}catch(r){throw xr(r,"updateDoc()","DocumentReference.update()")}}delete(){return xB(this._delegate)}onSnapshot(...e){const t=NB(e),i=FB(e,r=>new Xm(this.firestore,new ga(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return CB(this._delegate,t,i)}get(e){let t;return t="cache"===e?.source?function DJ(n){n=At(n,Cn);const e=At(n.firestore,hn),t=Wn(e),i=new xl(e);return function UX(n,e){const t=new vi;return n.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return(i=(0,ne.Z)(function*(o,s,a){try{const l=yield function(h,p){const g=Ee(h);return g.persistence.runTransaction("read document","readonly",_=>g.localDocuments.getDocument(_,p))}(o,s);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new ce(X.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const c=ph(l,`Failed to get document '${s} from cache`);a.reject(c)}}),function r(o,s,a){return i.apply(this,arguments)})(yield yh(n),e,t);var i})),t.promise}(t,n._key).then(r=>new ga(e,i,n._key,r,new jc(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function AJ(n){n=At(n,Cn);const e=At(n.firestore,hn);return GV(Wn(e),n._key,{source:"server"}).then(t=>LD(e,n,t))}(this._delegate):EB(this._delegate),t.then(i=>new Xm(this.firestore,new ga(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Po(this.firestore,this._delegate.withConverter(e?zc.getInstance(this.firestore,e):null))}}function xr(n,e,t){return n.message=n.message.replace(e,t),n}function NB(n){for(const e of n)if("object"==typeof e&&!UD(e))return e;return{}}function FB(n,e){var t,i;let r;return r=UD(n[0])?n[0]:UD(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{r.next&&r.next(e(o))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class Xm{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Po(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return bB(this._delegate,e._delegate)}}class Jm extends Xm{data(e){const t=this._delegate.data(e);return this._delegate._converter||function HK(n,e){n||Pe()}(void 0!==t),t}}class Cr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Gb(e)}where(e,t,i){try{return new Cr(this.firestore,wl(this._delegate,function gJ(n,e,t){const i=e,r=jb("where",n);return Km._create(r,i,t)}(e,t,i)))}catch(r){throw xr(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Cr(this.firestore,wl(this._delegate,function _J(n,e="asc"){const t=e,i=jb("orderBy",n);return OD._create(i,t)}(e,t)))}catch(i){throw xr(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Cr(this.firestore,wl(this._delegate,function vJ(n){return eB("limit",n),zb._create("limit",n,"F")}(e)))}catch(t){throw xr(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Cr(this.firestore,wl(this._delegate,function yJ(n){return eB("limitToLast",n),zb._create("limitToLast",n,"L")}(e)))}catch(t){throw xr(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Cr(this.firestore,wl(this._delegate,function bJ(...n){return $b._create("startAt",n,!0)}(...e)))}catch(t){throw xr(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Cr(this.firestore,wl(this._delegate,function EJ(...n){return $b._create("startAfter",n,!1)}(...e)))}catch(t){throw xr(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Cr(this.firestore,wl(this._delegate,function wJ(...n){return Hb._create("endBefore",n,!1)}(...e)))}catch(t){throw xr(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Cr(this.firestore,wl(this._delegate,function IJ(...n){return Hb._create("endAt",n,!0)}(...e)))}catch(t){throw xr(t,"endAt()","Query.endAt()")}}isEqual(e){return DD(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function SJ(n){n=At(n,Hi);const e=At(n.firestore,hn),t=Wn(e),i=new xl(e);return function jX(n,e){const t=new vi;return n.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return(i=(0,ne.Z)(function*(o,s,a){try{const l=yield Cb(o,s,!0),c=new NV(s,l.ls),h=c.ca(l.documents),p=c.applyChanges(h,!1);a.resolve(p.snapshot)}catch(l){const c=ph(l,`Failed to execute query '${s} against cache`);a.reject(c)}}),function r(o,s,a){return i.apply(this,arguments)})(yield yh(n),e,t);var i})),t.promise}(t,n._query).then(r=>new Il(e,i,n,r))}(this._delegate):"server"===e?.source?function RJ(n){n=At(n,Hi);const e=At(n.firestore,hn),t=Wn(e),i=new xl(e);return ZV(t,n._query,{source:"server"}).then(r=>new Il(e,i,n,r))}(this._delegate):wB(this._delegate),t.then(i=>new jD(this.firestore,new Il(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=NB(e),i=FB(e,r=>new jD(this.firestore,new Il(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return CB(this._delegate,t,i)}withConverter(e){return new Cr(this.firestore,this._delegate.withConverter(e?zc.getInstance(this.firestore,e):null))}}class tee{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Jm(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class jD{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Cr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Jm(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new tee(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new Jm(this._firestore,i))})}isEqual(e){return bB(this._delegate,e._delegate)}}class Ih extends Cr{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Po(this.firestore,e):null}doc(e){try{return new Po(this.firestore,void 0===e?$m(this._delegate):$m(this._delegate,e))}catch(t){throw xr(t,"doc()","CollectionReference.doc()")}}add(e){return function MJ(n,e){const t=At(n.firestore,hn),i=$m(n),r=qb(n.converter,e);return wh(t,[Vb(Bc(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Mn.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new Po(this.firestore,t))}isEqual(e){return iB(this._delegate,e._delegate)}withConverter(e){return new Ih(this.firestore,this._delegate.withConverter(e?zc.getInstance(this.firestore,e):null))}}function $c(n){return At(n,Cn)}class zD{constructor(...e){this._delegate=new ma(...e)}static documentId(){return new zD(In.keyField().canonicalString())}isEqual(e){return(e=(0,tn.m9)(e))instanceof ma&&this._delegate._internalPath.isEqual(e._internalPath)}}class Hc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function qJ(){return new SD("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Hc(e)}static delete(){const e=function HJ(){return new qm("deleteField")}();return e._methodName="FieldValue.delete",new Hc(e)}static arrayUnion(...e){const t=function WJ(...n){return new dJ("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Hc(t)}static arrayRemove(...e){const t=function GJ(...n){return new hJ("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Hc(t)}static increment(e){const t=function ZJ(n){return new fJ("increment",n)}(e);return t._methodName="FieldValue.increment",new Hc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const nee={Firestore:PB,GeoPoint:Fb,Timestamp:Rn,Blob:Qm,Transaction:kB,WriteBatch:OB,DocumentReference:Po,DocumentSnapshot:Xm,Query:Cr,QueryDocumentSnapshot:Jm,QuerySnapshot:jD,CollectionReference:Ih,FieldPath:zD,FieldValue:Hc,setLogLevel:function eee(n){!function $K(n){sl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function LB(n,e){return function oee(n,e=Bp){return new Ke(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}(n,e)}function $D(n,e){return LB(n,e).pipe(ve(t=>({payload:t,type:"query"})))}!function ree(n){(function iee(n,e){n.INTERNAL.registerComponent(new wN.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},nee)))})(n,(e,t)=>new PB(e,t,new JJ)),n.registerVersion("@firebase/firestore-compat","0.3.23")}(sa.Z);class VB{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:r,query:o}=zB(i,t);return new jB(r,o,this.afs)}snapshotChanges(){return function see(n,e){return LB(n,e).pipe(yc(void 0),Lx(),ve(t=>{const[i,r]=t;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Jr)}valueChanges(e={}){return this.snapshotChanges().pipe(ve(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return b(this.ref.get(e)).pipe(Jr)}}function Zb(n,e){return $D(n,e).pipe(yc(void 0),Lx(),ve(t=>{const[i,r]=t,o=r.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,l)=>{const c=o.find(p=>p.doc.ref.isEqual(a.ref)),h=i?.payload.docs.find(p=>p.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),s}))}function BB(n,e,t){return Zb(n,t).pipe(Ty((i,r)=>function aee(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function lee(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return HD(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return HD(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return HD(n,e.oldIndex,1)}return n}(n,i))}),n}(i,r.map(o=>o.payload),e),[]),Ge(),ve(i=>i.map(r=>({type:r.type,payload:r}))))}function HD(n,e,t,...i){const r=n.slice();return r.splice(e,t,...i),r}function UB(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class jB{ref;query;afs;constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=Zb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(ve(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(yc(void 0),Lx(),_i(([i,r])=>r.length>0||!i),ve(([,i])=>i),Jr)}auditTrail(e){return this.stateChanges(e).pipe(Ty((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=UB(e);return BB(this.query,t,this.afs.schedulers.outsideAngular).pipe(Jr)}valueChanges(e={}){return $D(this.query,this.afs.schedulers.outsideAngular).pipe(ve(t=>t.payload.docs.map(i=>e.idField?{...i.data(),[e.idField]:i.id}:i.data())),Jr)}get(e){return b(this.query.get(e)).pipe(Jr)}add(e){return this.ref.add(e)}doc(e){return new VB(this.ref.doc(e),this.afs)}}class cee{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Zb(this.query,this.afs.schedulers.outsideAngular).pipe(ve(t=>t.filter(i=>e.indexOf(i.type)>-1)),_i(t=>t.length>0),Jr):Zb(this.query,this.afs.schedulers.outsideAngular).pipe(Jr)}auditTrail(e){return this.stateChanges(e).pipe(Ty((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=UB(e);return BB(this.query,t,this.afs.schedulers.outsideAngular).pipe(Jr)}valueChanges(e={}){return $D(this.query,this.afs.schedulers.outsideAngular).pipe(ve(i=>i.payload.docs.map(r=>e.idField?{[e.idField]:r.id,...r.data()}:r.data())),Jr)}get(e){return b(this.query.get(e)).pipe(Jr)}}const uee=new re("angularfire2.enableFirestorePersistence"),dee=new re("angularfire2.firestore.persistenceSettings"),hee=new re("angularfire2.firestore.settings"),fee=new re("angularfire2.firestore.use-emulator");function zB(n,e=(t=>t)){return{query:e(n),ref:n}}let $B=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,i,r,o,s,a,l,c,h,p,g,_,E,x,T,V,k){this.schedulers=l;const j=Nx(t,a,i),ie=h;p&&LN(j,a,g,E,x,T,_,V),[this.firestore,this.persistenceEnabled$]=TN(`${j.name}.firestore`,"AngularFirestore",j.name,()=>{const _e=a.runOutsideAngular(()=>j.firestore());if(o&&_e.settings(o),ie&&_e.useEmulator(...ie),r&&!dy(s)){const Be=()=>{try{return b(_e.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(et){return typeof console<"u"&&console.warn(et),M(!1)}};return[_e,a.runOutsideAngular(Be)]}return[_e,M(!1)]},[o,ie,r])}collection(t,i){let r;r="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:s}=zB(r,i),a=this.schedulers.ngZone.run(()=>o);return new jB(a,s,this)}collectionGroup(t,i){const r=i||(s=>s),o=this.firestore.collectionGroup(t);return new cee(r(o),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const r=this.schedulers.ngZone.run(()=>i);return new VB(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||n)(F(yy),F(by,8),F(uee,8),F(hee,8),F(Io),F(it),F(vy),F(dee,8),F(fee,8),F(Iy,8),F(MN,8),F(PN,8),F(kN,8),F(ON,8),F(NN,8),F(FN,8),F(Ox,8))};static \u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();const{isArray:mee}=Array,{getPrototypeOf:gee,prototype:_ee,keys:vee}=Object;function HB(n){if(1===n.length){const e=n[0];if(mee(e))return{args:e,keys:null};if(function yee(n){return n&&"object"==typeof n&&gee(n)===_ee}(e)){const t=vee(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:bee}=Array;function qD(n){return ve(e=>function Eee(n,e){return bee(e)?n(...e):n(e)}(n,e))}function qB(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function Kb(...n){const e=Wr(n),t=fo(n),{args:i,keys:r}=HB(n);if(0===i.length)return b([],e);const o=new Ke(function wee(n,e,t=kn){return i=>{WB(e,()=>{const{length:r}=n,o=new Array(r);let s=r,a=r;for(let l=0;l<r;l++)WB(e,()=>{const c=b(n[l],e);let h=!1;c.subscribe(ye(i,p=>{o[l]=p,h||(h=!0,a--),a||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}(i,e,r?s=>qB(r,s):kn));return t?o.pipe(qD(t)):o}function WB(n,e,t){n?cr(t,n,e):e()}function Yb(n){return new Ke(e=>{Et(n()).subscribe(e)})}function eg(n,e){const t=C(n)?n:()=>n,i=r=>r.error(t());return new Ke(e?r=>e.schedule(i,0,r):i)}function WD(){return se((n,e)=>{let t=null;n._refCount++;const i=ye(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class GB extends Ke{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ae(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new yt;const t=this.getSubject();e.add(this.source.subscribe(ye(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=yt.EMPTY)}return e}refCount(){return WD()(this)}}function xh(n,e){return C(e)?Ut(n,e,1):Ut(n,1)}function qc(n){return se((e,t)=>{let o,i=null,r=!1;i=e.subscribe(ye(t,void 0,void 0,s=>{o=Et(n(s,qc(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function GD(n){return n<=0?()=>On:se((e,t)=>{let i=[];e.subscribe(ye(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function Ch(n){return se((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Qb(n){return se((e,t)=>{Et(n).subscribe(ye(t,()=>t.complete(),Oe)),!t.closed&&e.subscribe(t)})}const ut="primary",tg=Symbol("RouteTitle");class Cee{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Th(n){return new Cee(n)}function Tee(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let o=0;o<i.length;o++){const s=i[o],a=n[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Ds(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!ZB(n[r],e[r]))return!1;return!0}function ZB(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}return n===e}function KB(n){return n.length>0?n[n.length-1]:null}function Tl(n){return function pee(n){return!!n&&(n instanceof Ke||C(n.lift)&&C(n.subscribe))}(n)?n:bp(n)?b(Promise.resolve(n)):M(n)}const Aee={exact:function XB(n,e,t){if(!Wc(n.segments,e.segments)||!Xb(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!XB(n.children[i],e.children[i],t))return!1;return!0},subset:JB},YB={exact:function See(n,e){return Ds(n,e)},subset:function Ree(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ZB(n[t],e[t]))},ignored:()=>!0};function QB(n,e,t){return Aee[t.paths](n.root,e.root,t.matrixParams)&&YB[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function JB(n,e,t){return eU(n,e,e.segments,t)}function eU(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!Wc(r,t)||e.hasChildren()||!Xb(r,t,i))}if(n.segments.length===t.length){if(!Wc(n.segments,t)||!Xb(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!JB(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(Wc(n.segments,r)&&Xb(n.segments,r,i)&&n.children[ut])&&eU(n.children[ut],e,o,i)}}function Xb(n,e,t){return e.every((i,r)=>YB[t](n[r].parameters,i.parameters))}class Dh{constructor(e=new Xt([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Th(this.queryParams)),this._queryParamMap}toString(){return kee.serialize(this)}}class Xt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Jb(this)}}class ng{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Th(this.parameters)),this._parameterMap}toString(){return iU(this)}}function Wc(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let ig=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:function(){return new ZD},providedIn:"root"})}return n})();class ZD{parse(e){const t=new Hee(e);return new Dh(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${rg(e.root,!0)}`,i=function Fee(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${e0(t)}=${e0(r)}`).join("&"):`${e0(t)}=${e0(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),r="string"==typeof e.fragment?`#${function Oee(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${i}${r}`}}const kee=new ZD;function Jb(n){return n.segments.map(e=>iU(e)).join("/")}function rg(n,e){if(!n.hasChildren())return Jb(n);if(e){const t=n.children[ut]?rg(n.children[ut],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==ut&&i.push(`${r}:${rg(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function Pee(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===ut&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==ut&&(t=t.concat(e(r,i)))}),t}(n,(i,r)=>r===ut?[rg(n.children[ut],!1)]:[`${r}:${rg(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ut]?`${Jb(n)}/${t[0]}`:`${Jb(n)}/(${t.join("//")})`}}function tU(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function e0(n){return tU(n).replace(/%3B/gi,";")}function KD(n){return tU(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function t0(n){return decodeURIComponent(n)}function nU(n){return t0(n.replace(/\+/g,"%20"))}function iU(n){return`${KD(n.path)}${function Nee(n){return Object.keys(n).map(e=>`;${KD(e)}=${KD(n[e])}`).join("")}(n.parameters)}`}const Lee=/^[^\/()?;#]+/;function YD(n){const e=n.match(Lee);return e?e[0]:""}const Vee=/^[^\/()?;=#]+/,Uee=/^[^=?&#]+/,zee=/^[^&#]+/;class Hee{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xt([],{}):new Xt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[ut]=new Xt(e,t)),i}parseSegment(){const e=YD(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new B(4009,!1);return this.capture(e),new ng(t0(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Bee(n){const e=n.match(Vee);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=YD(this.remaining);r&&(i=r,this.capture(i))}e[t0(t)]=t0(i)}parseQueryParam(e){const t=function jee(n){const e=n.match(Uee);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const s=function $ee(n){const e=n.match(zee);return e?e[0]:""}(this.remaining);s&&(i=s,this.capture(i))}const r=nU(t),o=nU(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=YD(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new B(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ut);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[ut]:new Xt([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new B(4011,!1)}}function rU(n){return n.segments.length>0?new Xt([],{[ut]:n}):n}function oU(n){const e={};for(const i of Object.keys(n.children)){const o=oU(n.children[i]);if(i===ut&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}return function qee(n){if(1===n.numberOfChildren&&n.children[ut]){const e=n.children[ut];return new Xt(n.segments.concat(e.segments),e.children)}return n}(new Xt(n.segments,e))}function Gc(n){return n instanceof Dh}function sU(n){let e;const r=rU(function t(o){const s={};for(const l of o.children){const c=t(l);s[l.outlet]=c}const a=new Xt(o.url,s);return o===n&&(e=a),a}(n.root));return e??r}function aU(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(0===e.length)return QD(r,r,r,t,i);const o=function Gee(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new cU(!0,0,n);let e=0,t=!1;const i=n.reduce((r,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===s?(o.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,o]},[]);return new cU(t,e,i)}(e);if(o.toRoot())return QD(r,r,new Xt([],{}),t,i);const s=function Zee(n,e,t){if(n.isAbsolute)return new r0(e,!0,0);if(!t)return new r0(e,!1,NaN);if(null===t.parent)return new r0(t,!0,0);const i=n0(n.commands[0])?0:1;return function Kee(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new B(4005,!1);r=i.segments.length}return new r0(i,!1,r-o)}(t,t.segments.length-1+i,n.numberOfDoubleDots)}(o,r,n),a=s.processChildren?sg(s.segmentGroup,s.index,o.commands):uU(s.segmentGroup,s.index,o.commands);return QD(r,s.segmentGroup,a,t,i)}function n0(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function og(n){return"object"==typeof n&&null!=n&&n.outlets}function QD(n,e,t,i,r){let s,o={};i&&Object.entries(i).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(h=>`${h}`):`${c}`}),s=n===e?t:lU(n,e,t);const a=rU(oU(s));return new Dh(a,o,r)}function lU(n,e,t){const i={};return Object.entries(n.children).forEach(([r,o])=>{i[r]=o===e?t:lU(o,e,t)}),new Xt(n.segments,i)}class cU{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&n0(i[0]))throw new B(4003,!1);const r=i.find(og);if(r&&r!==KB(i))throw new B(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class r0{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function uU(n,e,t){if(n||(n=new Xt([],{})),0===n.segments.length&&n.hasChildren())return sg(n,e,t);const i=function Qee(n,e,t){let i=0,r=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;const s=n.segments[r],a=t[i];if(og(a))break;const l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!hU(l,c,s))return o;i+=2}else{if(!hU(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const o=new Xt(n.segments.slice(0,i.pathIndex),{});return o.children[ut]=new Xt(n.segments.slice(i.pathIndex),n.children),sg(o,0,r)}return i.match&&0===r.length?new Xt(n.segments,{}):i.match&&!n.hasChildren()?XD(n,e,t):i.match?sg(n,0,r):XD(n,e,t)}function sg(n,e,t){if(0===t.length)return new Xt(n.segments,{});{const i=function Yee(n){return og(n[0])?n[0].outlets:{[ut]:n}}(t),r={};if(Object.keys(i).some(o=>o!==ut)&&n.children[ut]&&1===n.numberOfChildren&&0===n.children[ut].segments.length){const o=sg(n.children[ut],e,t);return new Xt(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=uU(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{void 0===i[o]&&(r[o]=s)}),new Xt(n.segments,r)}}function XD(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const o=t[r];if(og(o)){const l=Xee(o.outlets);return new Xt(i,l)}if(0===r&&n0(t[0])){i.push(new ng(n.segments[e].path,dU(t[0]))),r++;continue}const s=og(o)?o.outlets[ut]:`${o}`,a=r<t.length-1?t[r+1]:null;s&&a&&n0(a)?(i.push(new ng(s,dU(a))),r+=2):(i.push(new ng(s,{})),r++)}return new Xt(i,{})}function Xee(n){const e={};return Object.entries(n).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(e[t]=XD(new Xt([],{}),0,i))}),e}function dU(n){const e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function hU(n,e,t){return n==t.path&&Ds(e,t.parameters)}const ag="imperative";class As{constructor(e,t){this.id=e,this.url=t}}class o0 extends As{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class _a extends As{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class lg extends As{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ah extends As{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}}class s0 extends As{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class fU extends As{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jee extends As{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ete extends As{constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class tte extends As{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nte extends As{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ite{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class rte{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ote{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ste{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ate{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lte{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pU{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class JD{}class eA{constructor(e){this.url=e}}class cte{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new cg,this.attachRef=null}}let cg=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new cte,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class mU{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=tA(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=tA(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=nA(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return nA(e,this._root).map(t=>t.value)}}function tA(n,e){if(n===e.value)return e;for(const t of e.children){const i=tA(n,t);if(i)return i}return null}function nA(n,e){if(n===e.value)return[e];for(const t of e.children){const i=nA(n,t);if(i.length)return i.unshift(e),i}return[]}class va{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Sh(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class gU extends mU{constructor(e,t){super(e),this.snapshot=t,iA(this,e)}toString(){return this.snapshot.toString()}}function _U(n,e){const t=function ute(n,e){const s=new a0([],{},{},"",{},ut,e,null,{});return new yU("",new va(s,[]))}(0,e),i=new y([new ng("",{})]),r=new y({}),o=new y({}),s=new y({}),a=new y(""),l=new Dl(i,r,s,a,o,ut,e,t.root);return l.snapshot=t.root,new gU(new va(l,[]),t)}class Dl{constructor(e,t,i,r,o,s,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ve(c=>c[tg]))??M(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ve(e=>Th(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ve(e=>Th(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function vU(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],o=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function dte(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class a0{get title(){return this.data?.[tg]}constructor(e,t,i,r,o,s,a,l,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Th(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Th(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class yU extends mU{constructor(e,t){super(t),this.url=e,iA(this,t)}toString(){return bU(this._root)}}function iA(n,e){e.value._routerState=n,e.children.forEach(t=>iA(n,t))}function bU(n){const e=n.children.length>0?` { ${n.children.map(bU).join(", ")} } `:"";return`${n.value}${e}`}function rA(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ds(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ds(e.params,t.params)||n.paramsSubject.next(t.params),function Dee(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ds(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Ds(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function oA(n,e){const t=Ds(n.params,e.params)&&function Mee(n,e){return Wc(n,e)&&n.every((t,i)=>Ds(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||oA(n.parent,e.parent))}let sA=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ut,this.activateEvents=new En,this.deactivateEvents=new En,this.attachEvents=new En,this.detachEvents=new En,this.parentContexts=xe(cg),this.location=xe(To),this.changeDetector=xe(Kv),this.environmentInjector=xe(Yr),this.inputBinder=xe(l0,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new B(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new B(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new B(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new B(4013,!1);this._activatedRoute=t;const r=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new hte(t,a,r.injector);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=qe({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Rr]})}return n})();class hte{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Dl?this.route:e===cg?this.childContexts:this.parent.get(e,t)}}const l0=new re("");let EU=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:i}=t,r=Kb([i.queryParams,i.params,i.data]).pipe(Ae(([o,s,a],l)=>(a={...o,...s,...a},0===l?M(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(t);const s=function F9(n){const e=wt(n);if(!e)return null;const t=new fp(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(i.component);if(s)for(const{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,r)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();function ug(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function pte(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return ug(n,i,r);return ug(n,i)})}(n,e,t);return new va(i,r)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ug(n,a)),s}}const i=function mte(n){return new Dl(new y(n.url),new y(n.params),new y(n.queryParams),new y(n.fragment),new y(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(o=>ug(n,o));return new va(i,r)}}const aA="ngNavigationCancelingError";function wU(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=Gc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=IU(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function IU(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[aA]=!0,i.cancellationCode=e,t&&(i.url=t),i}function xU(n){return n&&n[aA]}let CU=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=An({type:n,selectors:[["ng-component"]],standalone:!0,features:[sk],decls:1,vars:0,template:function(i,r){1&i&&$e(0,"router-outlet")},dependencies:[sA],encapsulation:2})}return n})();function lA(n){const e=n.children&&n.children.map(lA),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ut&&(t.component=CU),t}function Ko(n){return n.outlet||ut}function dg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Ite{constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),rA(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Sh(t);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){const r=e.value,o=t?t.value:null;if(r===o)if(r.component){const s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Sh(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);if(i&&i.outlet){const s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Sh(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){const r=Sh(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new lte(o.value.snapshot))}),e.children.length&&this.forwardEvent(new ste(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,o=t?t.value:null;if(rA(r),r===o)if(r.component){const s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),rA(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=dg(r.snapshot);s.attachRef=null,s.route=r,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,i)}}class TU{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class c0{constructor(e,t){this.component=e,this.route=t}}function xte(n,e,t){const i=n._root;return hg(i,e?e._root:null,t,[i.value])}function Rh(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function Qg(n){return null!==au(n)}(n)?e.get(n):n:i}function hg(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=Sh(e);return n.children.forEach(s=>{(function Tte(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function Dte(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Wc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Wc(n.url,e.url)||!Ds(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!oA(n,e)||!Ds(n.queryParams,e.queryParams);default:return!oA(n,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new TU(i)):(o.data=s.data,o._resolvedData=s._resolvedData),hg(n,e,o.component?a?a.children:null:t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new c0(a.outlet.component,s))}else s&&fg(e,a,r),r.canActivateChecks.push(new TU(i)),hg(n,null,o.component?a?a.children:null:t,i,r)})(s,o[s.value.outlet],t,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>fg(a,t.getContext(s),r)),r}function fg(n,e,t){const i=Sh(n),r=n.value;Object.entries(i).forEach(([o,s])=>{fg(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new c0(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function pg(n){return"function"==typeof n}function DU(n){return n instanceof Ey||"EmptyError"===n?.name}const u0=Symbol("INITIAL_VALUE");function Mh(){return Ae(n=>Kb(n.map(e=>e.pipe(Ro(1),yc(u0)))).pipe(ve(e=>{for(const t of e)if(!0!==t){if(t===u0)return u0;if(!1===t||t instanceof Dh)return t}return!0}),_i(e=>e!==u0),Ro(1)))}function AU(n){return function jr(...n){return zr(n)}(Bi(e=>{if(Gc(e))throw wU(0,e)}),ve(e=>!0===e))}class d0{constructor(e){this.segmentGroup=e||null}}class SU{constructor(e){this.urlTree=e}}function Ph(n){return eg(new d0(n))}function RU(n){return eg(new SU(n))}class Gte{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new B(4002,!1)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return M(i);if(r.numberOfChildren>1||!r.children[ut])return eg(new B(4e3,!1));r=r.children[ut]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const o=this.createSegmentGroup(e,t.root,i,r);return new Dh(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Object.entries(e).forEach(([r,o])=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);i[r]=t[a]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){const o=this.createSegments(e,t.segments,i,r);let s={};return Object.entries(t.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,i,r)}),new Xt(o,s)}createSegments(e,t,i,r){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new B(4001,!1);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}const cA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Zte(n,e,t,i,r){const o=uA(n,e,t);return o.matched?(i=function _te(n,e){return n.providers&&!n._injector&&(n._injector=TI(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,i),function Hte(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?M(r.map(s=>{const a=Rh(s,n);return Tl(function kte(n){return n&&pg(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Mh(),AU()):M(!0)}(i,e,t).pipe(ve(s=>!0===s?o:{...cA}))):M(o)}function uA(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...cA}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||Tee)(t,n,e);if(!r)return{...cA};const o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});const s=r.consumed.length>0?{...o,...r.consumed[r.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function MU(n,e,t,i){return t.length>0&&function Qte(n,e,t){return t.some(i=>h0(n,e,i)&&Ko(i)!==ut)}(n,t,i)?{segmentGroup:new Xt(e,Yte(i,new Xt(t,n.children))),slicedSegments:[]}:0===t.length&&function Xte(n,e,t){return t.some(i=>h0(n,e,i))}(n,t,i)?{segmentGroup:new Xt(n.segments,Kte(n,0,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Xt(n.segments,n.children),slicedSegments:t}}function Kte(n,e,t,i,r){const o={};for(const s of i)if(h0(n,t,s)&&!r[Ko(s)]){const a=new Xt([],{});o[Ko(s)]=a}return{...r,...o}}function Yte(n,e){const t={};t[ut]=e;for(const i of n)if(""===i.path&&Ko(i)!==ut){const r=new Xt([],{});t[Ko(i)]=r}return t}function h0(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class nne{constructor(e,t,i,r,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new Gte(this.urlSerializer,this.urlTree)}noMatchError(e){return new B(4002,!1)}recognize(){const e=MU(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,ut).pipe(qc(t=>{if(t instanceof SU)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof d0?this.noMatchError(t):t}),ve(t=>{const i=new a0([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ut,this.rootComponentType,null,{}),r=new va(i,t),o=new yU("",r),s=function Wee(n,e,t=null,i=null){return aU(sU(n),e,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,ut).pipe(qc(i=>{throw i instanceof d0?this.noMatchError(i):i}))}inheritParamsAndData(e){const t=e.value,i=vU(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r,!0)}processChildren(e,t,i){const r=[];for(const o of Object.keys(i.children))"primary"===o?r.unshift(o):r.push(o);return b(r).pipe(xh(o=>{const s=i.children[o],a=function Ete(n,e){const t=n.filter(i=>Ko(i)===e);return t.push(...n.filter(i=>Ko(i)!==e)),t}(t,o);return this.processSegmentGroup(e,a,s,o)}),Ty((o,s)=>(o.push(...s),o)),wy(null),function Iee(n,e){const t=arguments.length>=2;return i=>i.pipe(n?_i((r,o)=>n(r,o,i)):kn,GD(1),t?wy(e):SN(()=>new Ey))}(),Ut(o=>{if(null===o)return Ph(i);const s=PU(o);return function ine(n){n.sort((e,t)=>e.value.outlet===ut?-1:t.value.outlet===ut?1:e.value.outlet.localeCompare(t.value.outlet))}(s),M(s)}))}processSegment(e,t,i,r,o,s){return b(t).pipe(xh(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,i,r,o,s).pipe(qc(l=>{if(l instanceof d0)return M(null);throw l}))),nl(a=>!!a),qc(a=>{if(DU(a))return function ene(n,e,t){return 0===e.length&&!n.children[t]}(i,r,o)?M([]):Ph(i);throw a}))}processSegmentAgainstRoute(e,t,i,r,o,s,a){return function Jte(n,e,t,i){return!!(Ko(n)===i||i!==ut&&h0(e,t,n))&&("**"===n.path||uA(e,n,t).matched)}(i,r,o,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,r,i,o,s,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,s):Ph(r):Ph(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const o=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?RU(o):this.applyRedirects.lineralizeSegments(i,o).pipe(Ut(s=>{const a=new Xt(s,{});return this.processSegment(e,t,a,s,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:h}=uA(t,r,o);if(!a)return Ph(t);const p=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,h);return r.redirectTo.startsWith("/")?RU(p):this.applyRedirects.lineralizeSegments(r,p).pipe(Ut(g=>this.processSegment(e,i,t,g.concat(c),s,!1)))}matchSegmentAgainstRoute(e,t,i,r,o,s){let a;if("**"===i.path){const l=r.length>0?KB(r).parameters:{};a=M({snapshot:new a0(r,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,kU(i),Ko(i),i.component??i._loadedComponent??null,i,OU(i)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=Zte(t,i,r,e).pipe(ve(({matched:l,consumedSegments:c,remainingSegments:h,parameters:p})=>l?{snapshot:new a0(c,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,kU(i),Ko(i),i.component??i._loadedComponent??null,i,OU(i)),consumedSegments:c,remainingSegments:h}:null));return a.pipe(Ae(l=>null===l?Ph(t):this.getChildConfig(e=i._injector??e,i,r).pipe(Ae(({routes:c})=>{const h=i._loadedInjector??e,{snapshot:p,consumedSegments:g,remainingSegments:_}=l,{segmentGroup:E,slicedSegments:x}=MU(t,g,_,c);if(0===x.length&&E.hasChildren())return this.processChildren(h,c,E).pipe(ve(V=>null===V?null:[new va(p,V)]));if(0===c.length&&0===x.length)return M([new va(p,[])]);const T=Ko(i)===o;return this.processSegment(h,c,E,x,T?ut:o,!0).pipe(ve(V=>[new va(p,V)]))}))))}getChildConfig(e,t,i){return t.children?M({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?M({routes:t._loadedRoutes,injector:t._loadedInjector}):function $te(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?M(!0):M(r.map(s=>{const a=Rh(s,n);return Tl(function Ste(n){return n&&pg(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Mh(),AU())}(e,t,i).pipe(Ut(r=>r?this.configLoader.loadChildren(e,t).pipe(Bi(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function Wte(n){return eg(IU(!1,3))}())):M({routes:[],injector:e})}}function rne(n){const e=n.value.routeConfig;return e&&""===e.path}function PU(n){const e=[],t=new Set;for(const i of n){if(!rne(i)){e.push(i);continue}const r=e.find(o=>i.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=PU(i.children);e.push(new va(i.value,r))}return e.filter(i=>!t.has(i))}function kU(n){return n.data||{}}function OU(n){return n.resolve||{}}function NU(n){return"string"==typeof n.title||null===n.title}function dA(n){return Ae(e=>{const t=n(e);return t?b(t).pipe(ve(()=>e)):M(e)})}const kh=new re("ROUTES");let hA=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=xe(Xk)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return M(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=Tl(t.loadComponent()).pipe(ve(FU),Bi(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Ch(()=>{this.componentLoaders.delete(t)})),r=new GB(i,()=>new W).pipe(WD());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return M({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const o=function dne(n,e,t,i){return Tl(n.loadChildren()).pipe(ve(FU),Ut(r=>r instanceof rk||Array.isArray(r)?M(r):b(e.compileModuleAsync(r))),ve(r=>{i&&i(n);let o,s,a=!1;return Array.isArray(r)?(s=r,!0):(o=r.create(t).injector,s=o.get(kh,[],{optional:!0,self:!0}).flat()),{routes:s.map(lA),injector:o}}))}(i,this.compiler,t,this.onLoadEndListener).pipe(Ch(()=>{this.childrenLoaders.delete(i)})),s=new GB(o,()=>new W).pipe(WD());return this.childrenLoaders.set(i,s),s}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function FU(n){return function hne(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let f0=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new W,this.transitionAbortSubject=new W,this.configLoader=xe(hA),this.environmentInjector=xe(Yr),this.urlSerializer=xe(ig),this.rootContexts=xe(cg),this.inputBindingEnabled=null!==xe(l0,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>M(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new rte(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new ite(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t,i,r){return this.transitions=new y({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:t.urlHandlingStrategy.extract(i),urlAfterRedirects:t.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ag,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(_i(o=>0!==o.id),ve(o=>({...o,extractedUrl:t.urlHandlingStrategy.extract(o.rawUrl)})),Ae(o=>{this.currentTransition=o;let s=!1,a=!1;return M(o).pipe(Bi(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ae(l=>{const c=l.currentBrowserUrl.toString(),h=!t.navigated||l.extractedUrl.toString()!==c||c!==l.currentUrlTree.toString();if(!h&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const g="";return this.events.next(new Ah(l.id,this.urlSerializer.serialize(l.rawUrl),g,0)),l.resolve(null),On}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return M(l).pipe(Ae(g=>{const _=this.transitions?.getValue();return this.events.next(new o0(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),_!==this.transitions?.getValue()?On:Promise.resolve(g)}),function one(n,e,t,i,r,o){return Ut(s=>function tne(n,e,t,i,r,o,s="emptyOnly"){return new nne(n,e,t,i,r,s,o).recognize()}(n,e,t,i,s.extractedUrl,r,o).pipe(ve(({state:a,tree:l})=>({...s,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Bi(g=>{o.targetSnapshot=g.targetSnapshot,o.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:g.urlAfterRedirects};const _=new fU(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}));if(h&&t.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:g,extractedUrl:_,source:E,restoredState:x,extras:T}=l,V=new o0(g,this.urlSerializer.serialize(_),E,x);this.events.next(V);const k=_U(0,this.rootComponentType).snapshot;return this.currentTransition=o={...l,targetSnapshot:k,urlAfterRedirects:_,extras:{...T,skipLocationChange:!1,replaceUrl:!1}},M(o)}{const g="";return this.events.next(new Ah(l.id,this.urlSerializer.serialize(l.extractedUrl),g,1)),l.resolve(null),On}}),Bi(l=>{const c=new Jee(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),ve(l=>(this.currentTransition=o={...l,guards:xte(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},o)),function Nte(n,e){return Ut(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?M({...t,guardsResult:!0}):function Fte(n,e,t,i){return b(n).pipe(Ut(r=>function zte(n,e,t,i,r){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?M(o.map(a=>{const l=dg(e)??r,c=Rh(a,l);return Tl(function Pte(n){return n&&pg(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,i):l.runInContext(()=>c(n,e,t,i))).pipe(nl())})).pipe(Mh()):M(!0)}(r.component,r.route,t,e,i)),nl(r=>!0!==r,!0))}(s,i,r,n).pipe(Ut(a=>a&&function Ate(n){return"boolean"==typeof n}(a)?function Lte(n,e,t,i){return b(e).pipe(xh(r=>Cy(function Bte(n,e){return null!==n&&e&&e(new ote(n)),M(!0)}(r.route.parent,i),function Vte(n,e){return null!==n&&e&&e(new ate(n)),M(!0)}(r.route,i),function jte(n,e,t){const i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function Cte(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>Yb(()=>M(s.guards.map(l=>{const c=dg(s.node)??t,h=Rh(l,c);return Tl(function Mte(n){return n&&pg(n.canActivateChild)}(h)?h.canActivateChild(i,n):c.runInContext(()=>h(i,n))).pipe(nl())})).pipe(Mh())));return M(o).pipe(Mh())}(n,r.path,t),function Ute(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return M(!0);const r=i.map(o=>Yb(()=>{const s=dg(e)??t,a=Rh(o,s);return Tl(function Rte(n){return n&&pg(n.canActivate)}(a)?a.canActivate(e,n):s.runInContext(()=>a(e,n))).pipe(nl())}));return M(r).pipe(Mh())}(n,r.route,t))),nl(r=>!0!==r,!0))}(i,o,n,e):M(a)),ve(a=>({...t,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),Bi(l=>{if(o.guardsResult=l.guardsResult,Gc(l.guardsResult))throw wU(0,l.guardsResult);const c=new ete(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),_i(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",3),!1)),dA(l=>{if(l.guards.canActivateChecks.length)return M(l).pipe(Bi(c=>{const h=new tte(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}),Ae(c=>{let h=!1;return M(c).pipe(function sne(n,e){return Ut(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return M(t);let o=0;return b(r).pipe(xh(s=>function ane(n,e,t,i){const r=n.routeConfig,o=n._resolve;return void 0!==r?.title&&!NU(r)&&(o[tg]=r.title),function lne(n,e,t,i){const r=function cne(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return M({});const o={};return b(r).pipe(Ut(s=>function une(n,e,t,i){const r=dg(e)??i,o=Rh(n,r);return Tl(o.resolve?o.resolve(e,t):r.runInContext(()=>o(e,t)))}(n[s],e,t,i).pipe(nl(),Bi(a=>{o[s]=a}))),GD(1),function xee(n){return ve(()=>n)}(o),qc(s=>DU(s)?On:eg(s)))}(o,n,e,i).pipe(ve(s=>(n._resolvedData=s,n.data=vU(n,t).resolve,r&&NU(r)&&(n.data[tg]=r.title),null)))}(s.route,i,n,e)),Bi(()=>o++),GD(1),Ut(s=>o===r.length?M(t):On))})}(t.paramsInheritanceStrategy,this.environmentInjector),Bi({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(c,"",2)}}))}),Bi(c=>{const h=new nte(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}))}),dA(l=>{const c=h=>{const p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(Bi(g=>{h.component=g}),ve(()=>{})));for(const g of h.children)p.push(...c(g));return p};return Kb(c(l.targetSnapshot.root)).pipe(wy(),Ro(1))}),dA(()=>this.afterPreactivation()),ve(l=>{const c=function fte(n,e,t){const i=ug(n,e._root,t?t._root:void 0);return new gU(i,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o={...l,targetRouterState:c},o}),Bi(()=>{this.events.next(new JD)}),((n,e,t,i)=>ve(r=>(new Ite(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Ro(1),Bi({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new _a(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),Qb(this.transitionAbortSubject.pipe(Bi(l=>{throw l}))),Ch(()=>{s||a||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),qc(l=>{if(a=!0,xU(l))this.events.next(new lg(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),function gte(n){return xU(n)&&Gc(n.url)}(l)?this.events.next(new eA(l.url)):o.resolve(!1);else{this.events.next(new s0(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(t.errorHandler(l))}catch(c){o.reject(c)}}return On}))}))}cancelNavigationTransition(t,i,r){const o=new lg(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function LU(n){return n!==ag}let VU=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===ut);return i}getResolvedTitleForRoute(t){return t.data[tg]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:function(){return xe(fne)},providedIn:"root"})}return n})(),fne=(()=>{class n extends VU{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||n)(F(vN))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pne=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:function(){return xe(gne)},providedIn:"root"})}return n})();class mne{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let gne=(()=>{class n extends mne{static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=Jn(n)))(r||n)}}();static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const p0=new re("",{providedIn:"root",factory:()=>({})});let _ne=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:function(){return xe(vne)},providedIn:"root"})}return n})(),vne=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var mg=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(mg||{});function BU(n,e){n.events.pipe(_i(t=>t instanceof _a||t instanceof lg||t instanceof s0||t instanceof Ah),ve(t=>t instanceof _a||t instanceof Ah?mg.COMPLETE:t instanceof lg&&(0===t.code||1===t.code)?mg.REDIRECTING:mg.FAILED),_i(t=>t!==mg.REDIRECTING),Ro(1)).subscribe(()=>{e()})}function yne(n){throw n}function bne(n,e,t){return e.parse("/")}const Ene={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},wne={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Pi=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=xe(Qk),this.isNgZoneEnabled=!1,this._events=new W,this.options=xe(p0,{optional:!0})||{},this.pendingTasks=xe(qv),this.errorHandler=this.options.errorHandler||yne,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||bne,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=xe(_ne),this.routeReuseStrategy=xe(pne),this.titleStrategy=xe(VU),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=xe(kh,{optional:!0})?.flat()??[],this.navigationTransitions=xe(f0),this.urlSerializer=xe(ig),this.location=xe(kp),this.componentInputBindingEnabled=!!xe(l0,{optional:!0}),this.eventsSubscription=new yt,this.isNgZoneEnabled=xe(it)instanceof it&&it.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Dh,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=_U(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:r}=this.navigationTransitions;if(null===r)return void(UU(i)&&this._events.next(i));if(i instanceof o0)LU(r.source)&&(this.browserUrlTree=r.extractedUrl);else if(i instanceof Ah)this.rawUrlTree=r.rawUrl;else if(i instanceof fU){if("eager"===this.urlUpdateStrategy){if(!r.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl);this.setBrowserUrl(o,r)}this.browserUrlTree=r.urlAfterRedirects}}else if(i instanceof JD)this.currentUrlTree=r.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r),this.browserUrlTree=r.urlAfterRedirects);else if(i instanceof lg)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(r);else if(i instanceof eA){const o=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),s={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||LU(r.source)};this.scheduleNavigation(o,ag,null,s,{resolve:r.resolve,reject:r.reject,promise:r.promise})}i instanceof s0&&this.restoreHistory(r,!0),i instanceof _a&&(this.navigated=!0),UU(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ag,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(o.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(lA),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){const{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:s;let p,h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...o};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}null!==h&&(h=this.removeEmptyProps(h));try{p=sU(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),p=this.currentUrlTree.root}return aU(p,t,h,c??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Gc(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,ag,null,i)}navigate(t,i={skipLocationChange:!1}){return function Ine(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new B(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...Ene}:!1===i?{...wne}:i,Gc(t))return QB(this.currentUrlTree,t,r);const o=this.parseUrl(t);return QB(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const o=t[r];return null!=o&&(i[r]=o),i},{})}scheduleNavigation(t,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((p,g)=>{a=p,l=g});const h=this.pendingTasks.add();return BU(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(p=>Promise.reject(p))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",s)}else{const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",o)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function UU(n){return!(n instanceof JD||n instanceof eA)}let Ss=(()=>{class n{constructor(t,i,r,o,s,a){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new W,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=t.events.subscribe(c=>{c instanceof _a&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,i,r,o,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||i||r||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function aR(n,e,t){return function e3(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?sR:kr}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,i){const r=this.renderer,o=this.el.nativeElement;null!==i?r.setAttribute(o,t,i):r.removeAttribute(o,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(i){return new(i||n)(q(Pi),q(Dl),function K_(n){return function ze(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const o=t[r];if(_u(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(o===e)return t[r+1];r+=2}}}return null}(pi(),n)}("tabindex"),q(Js),q(ei),q(pc))};static#t=this.\u0275dir=qe({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){1&i&&Me("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&i&&Co("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",Rd],skipLocationChange:["skipLocationChange","skipLocationChange",Rd],replaceUrl:["replaceUrl","replaceUrl",Rd],routerLink:"routerLink"},standalone:!0,features:[vM,Rr]})}return n})();class jU{}let Tne=(()=>{class n{constructor(t,i,r,o,s){this.router=t,this.injector=r,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(_i(t=>t instanceof _a),xh(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const o of i){o.providers&&!o._injector&&(o._injector=TI(o.providers,t,`Route: ${o.path}`));const s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return b(r).pipe(ur())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):M(null);const o=r.pipe(Ut(s=>null===s?M(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return i.loadComponent&&!i._loadedComponent?b([o,this.loader.loadComponent(i)]).pipe(ur()):o})}static#e=this.\u0275fac=function(i){return new(i||n)(F(Pi),F(Xk),F(Yr),F(jU),F(hA))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const fA=new re("");let zU=(()=>{class n{constructor(t,i,r,o,s={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof o0?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof _a?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ah&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof pU&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new pU(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){Zw()};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();function ya(n,e){return{\u0275kind:n,\u0275providers:e}}function HU(){const n=xe(jn);return e=>{const t=n.get(Xa);if(e!==t.components[0])return;const i=n.get(Pi),r=n.get(qU);1===n.get(pA)&&i.initialNavigation(),n.get(WU,null,ft.Optional)?.setUpPreloading(),n.get(fA,null,ft.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const qU=new re("",{factory:()=>new W}),pA=new re("",{providedIn:"root",factory:()=>1}),WU=new re("");function Rne(n){return ya(0,[{provide:WU,useExisting:Tne},{provide:jU,useExisting:n}])}const GU=new re("ROUTER_FORROOT_GUARD"),Pne=[kp,{provide:ig,useClass:ZD},Pi,cg,{provide:Dl,useFactory:function $U(n){return n.routerState.root},deps:[Pi]},hA,[]];function kne(){return new oO("Router",Pi)}let ZU=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[Pne,[],{provide:kh,multi:!0,useValue:t},{provide:GU,useFactory:Lne,deps:[[Pi,new Kr,new X_]]},{provide:p0,useValue:i||{}},i?.useHash?{provide:pc,useClass:j9}:{provide:pc,useClass:NO},{provide:fA,useFactory:()=>{const n=xe(o7),e=xe(it),t=xe(p0),i=xe(f0),r=xe(ig);return t.scrollOffset&&n.setOffset(t.scrollOffset),new zU(r,i,n,e,t)}},i?.preloadingStrategy?Rne(i.preloadingStrategy).\u0275providers:[],{provide:oO,multi:!0,useFactory:kne},i?.initialNavigation?Vne(i):[],i?.bindToComponentInputs?ya(8,[EU,{provide:l0,useExisting:EU}]).\u0275providers:[],[{provide:KU,useFactory:HU},{provide:YI,multi:!0,useExisting:KU}]]}}static forChild(t){return{ngModule:n,providers:[{provide:kh,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(i){return new(i||n)(F(GU,8))};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({})}return n})();function Lne(n){return"guarded"}function Vne(n){return["disabled"===n.initialNavigation?ya(3,[{provide:zI,multi:!0,useFactory:()=>{const e=xe(Pi);return()=>{e.setUpLocationChangeListener()}}},{provide:pA,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ya(2,[{provide:pA,useValue:0},{provide:zI,multi:!0,deps:[jn],useFactory:e=>{const t=e.get(B9,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(Pi),o=e.get(qU);BU(r,()=>{i(!0)}),e.get(f0).afterPreactivation=()=>(i(!0),o.closed?M(void 0):o),r.initialNavigation()}))}}]).\u0275providers:[]]}const KU=new re("");let ba=(()=>{class n{getUserId(){return localStorage.getItem("uid")}constructor(t,i,r,o){this.afAuth=t,this.cookieService=i,this.firestore=r,this.router=o,this.isLoggedIn=!1,this.adminLog=!1,this.userData=t.authState,this.afAuth.setPersistence("local"),this.checkAuthState(),this.initializeTokenListener()}checkToken(){console.log("ngOnInit() start");const t=this.cookieService.get("token");if(!t)return void console.log("No token found");console.log("Token found");const i=this.cookieService.get("uid");i?(console.log("Uid found"),this.firestore.collection("users").doc(i).get().toPromise().then(r=>{if(r&&r.exists){console.log("Document data:",r.data());const o=r.data();o&&o.token===t&&(console.log("Token is valid"),this.isLoggedIn=!0)}}).catch(r=>{console.log("Error getting document:",r)})):console.log("No uid found")}initializeTokenListener(){console.log("initializeTokenListener() start"),this.afAuth.onIdTokenChanged(t=>{t&&t.getIdToken(!0).then(i=>{console.log(i),this.cookieService.get("rememberMe")&&(console.log("Storing new token in cookie"+i),this.cookieService.put("token",i),console.log("Storing new uid in cookie"+t.uid),this.cookieService.put("uid",t.uid))})})}googleSignIn(){const t=new mc.X;return(0,mc.c)((0,mc.o)(),t).then(i=>(console.log(i),this.isLoggedIn=!0,localStorage.setItem("uid",i.user?.uid),i.user?.getIdToken(!0).then(r=>{console.log("Storing new token in cookie"+r),this.cookieService.put("token",r),console.log("Storing new uid in cookie"+i.user?.uid),this.cookieService.put("uid",i.user?.uid)}),i)).catch(i=>(console.log(i),{}))}googleSignOut(){(0,mc.C)((0,mc.o)())}register(t,i,r,o){return this.afAuth.createUserWithEmailAndPassword(t,i).then(s=>(this.isLoggedIn=!0,s.user?.updateProfile({displayName:`${r} ${o}`})))}login(t,i,r){var o=this;return(0,ne.Z)(function*(){const s=yield o.afAuth.signInWithEmailAndPassword(t,i);if(!s.user)return;const a=s.user.uid;o.adminLog="Thlx1tYLcnfft6fey38i6KTD5bY2"===a,o.isLoggedIn=!0,s.user.getIdToken(!0).then(l=>{o.firestore.collection("users").doc(a).set({token:l},{merge:!0}),r?(o.cookieService.put("uid",a),o.cookieService.put("token",l)):(o.cookieService.remove("token"),o.cookieService.put("uid",a))}).catch(l=>{console.log(l)})})()}logout(){this.isLoggedIn=!1,this.adminLog=!1,this.router.navigateByUrl("/"),this.cookieService.remove("uid"),this.cookieService.remove("token"),this.afAuth.signOut().then(()=>{})}checkAuthState(){this.afAuth.authState.subscribe(t=>{this.isLoggedIn=!!t})}static#e=this.\u0275fac=function(i){return new(i||n)(F(Iy),F(vc),F($B),F(Pi))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Une(n,e){1&n&&(R(0,"li",13),$e(1,"img",14),G(2," Kon\u0161truktor testov "),S())}const jne=function(n){return{"rotate-180":n}},zne=function(n,e){return{block:n,hidden:e}},$ne=function(n){return{"border-0 hover:rounded-b-lg":n}};let Hne=(()=>{class n{constructor(t,i){this.router=t,this.authServ=i,this.displayed=!1,this.isDarkMode=!1}changeSubCat(){this.displayed=!this.displayed}addSubCat(t){console.log(t),this.router.navigate(["/official-categories/"+t])}static#e=this.\u0275fac=function(i){return new(i||n)(q(Pi),q(ba))};static#t=this.\u0275cmp=An({type:n,selectors:[["app-navbar"]],decls:25,vars:11,consts:[["id","nav_menu",1,"bg-ang-main_bg","border","border-ang-border_main","rounded-b-lg","border-t-0","w-[19.25rem]","sm:w-80","dark:text-ang-text_white"],["id","nav_menu_home","routerLink","/"],["src","assets/icons/home.png","alt","","width","28px","height","28px"],["id","nav_menu_tests",1,"expandable_ul",3,"click"],["src","assets/icons/tests.png","alt","","width","28px","height","28px"],[1,"material-symbols-outlined","transition-all",3,"ngClass"],[1,"transition-all",3,"ngClass"],[1,"text-sm","h-8",3,"click"],["id","nav_menu_scripts","routerLink","/education-materials"],["src","assets/icons/notes.png","alt","","width","28px","height","28px"],["id","nav_menu_savedtests","routerLink","/test-history",3,"ngClass"],["src","assets/icons/saved.png","alt","","width","28px","height","28px"],["class","border-0 hover:rounded-b-lg","routerLink","/official-test-constructor",4,"ngIf"],["routerLink","/official-test-constructor",1,"border-0","hover:rounded-b-lg"],["src","assets/icons/const.png","alt","","width","28px","height","28px"]],template:function(i,r){1&i&&(R(0,"nav",0)(1,"ul")(2,"li",1),$e(3,"img",2),G(4,"Domov "),S(),R(5,"ul",3),Me("click",function(){return r.changeSubCat()}),$e(6,"img",4),R(7,"p"),G(8,"Maturitn\xe9 testy"),S(),R(9,"span",5),G(10," keyboard_arrow_down "),S()(),R(11,"div",6)(12,"li",7),Me("click",function(){return r.addSubCat("sjl")}),G(13," Slovensk\xfd jazyk a literat\xfara "),S(),R(14,"li",7),Me("click",function(){return r.addSubCat("anj")}),G(15," Anglick\xfd jazyk "),S(),R(16,"li",7),Me("click",function(){return r.addSubCat("mat")}),G(17,"Matematika"),S()(),R(18,"li",8),$e(19,"img",9),G(20,"U\u010debn\xe9 materi\xe1ly "),S(),R(21,"li",10),$e(22,"img",11),G(23," Hist\xf3ria testov "),S(),ge(24,Une,3,0,"li",12),S()()),2&i&&(z(9),H("ngClass",$o(4,jne,r.displayed)),z(2),H("ngClass",Dp(6,zne,r.displayed,!r.displayed)),z(10),H("ngClass",$o(9,$ne,!r.authServ.adminLog)),z(3),H("ngIf",r.authServ.adminLog))},dependencies:[uy,So,Ss],styles:[".hidden[_ngcontent-%COMP%]{display:none}.displayed[_ngcontent-%COMP%]{display:block}"]})}return n})();function qne(n,e){1&n&&(R(0,"div",7)(1,"button",8)(2,"p",9),G(3,"\xda\u010det"),S()()())}function Wne(n,e){if(1&n){const t=zn();R(0,"div",10)(1,"p",11),$e(2,"img",12),S(),R(3,"p",13),Me("click",function(){return Gt(t),jt(be().onLogout())}),$e(4,"img",14),S()()}}let Gne=(()=>{class n{constructor(t,i,r){this.el=i,this.router=r,this.buttonExpanded=!1,this.timerIsOn=!1,this.timeLeft=0,this.authService=t,this.router.events.subscribe(o=>{o instanceof _a&&this.closeNavbar()})}closeNavbar(){document.getElementById("navbar").style.display="none",this.buttonExpanded=!1}onToggleNav(){const t=document.getElementById("navbar"),i=document.getElementById("main_header"),r=window.innerWidth;"flex"===t.style.display?(t.style.display="none",i.style.borderRadius="8px",this.buttonExpanded=!this.buttonExpanded):(t.style.display="flex",r<=320?(i.style.borderBottomLeftRadius="0",i.style.borderBottomRightRadius="0"):(i.style.borderRadius="8px",i.style.borderBottomLeftRadius="0"),this.buttonExpanded=!this.buttonExpanded)}onLogout(){this.authService.logout()}onDocumentClick(t){this.el.nativeElement.contains(t.target)||(document.getElementById("navbar").style.display="none",this.buttonExpanded=!1),this.buttonExpanded||(document.getElementById("main_header").style.borderBottomLeftRadius="10px")}static#e=this.\u0275fac=function(i){return new(i||n)(q(ba),q(ei),q(Pi))};static#t=this.\u0275cmp=An({type:n,selectors:[["app-header"]],hostBindings:function(i,r){1&i&&Me("click",function(s){return r.onDocumentClick(s)},0,Ww)},decls:8,vars:4,consts:[["id","main_header",1,"h-[5rem]","relative","flex","justify-between","px-4","items-center","border","border-ang-border_main","rounded-lg","bg-ang-main_bg"],[1,"w-20","hover:cursor-pointer","h-[4rem]","flex","items-center","justify-center",3,"click"],[1,"transition-all","ease-in-out","delay-[180ms]","before:delay-[260ms]","after:delay-100","bg-ang-main_btn","w-11","h-1.5","rounded-lg","hover:cursor-pointer","block","relative","after:transition-all","after:bg-ang-main_btn","after:w-11","after:h-1.5","after:block","after:absolute","after:content-['']","after:left-0","after:top-3.5","after:rounded-lg","before:transition-all","before:bg-ang-main_btn","before:w-11","before:h-1.5","before:block","before:absolute","before:content-['']","before:left-0","before:-top-3.5","before:rounded-lg"],["src","assets/logo.png","alt","","width","80px","height","80px"],["id","but",4,"ngIf"],["class","flex gap-6",4,"ngIf"],["id","navbar",1,"absolute"],["id","but"],["id","header_reg_button","routerLink","/login",1,"w-20","px-12","flex","justify-center","py-1.5","border-2","bg-ang-main_btn","border-ang-border_main","rounded-lg","hover:cursor-pointer","overflow-hidden","hover:opacity-90","transition","shadow-md"],[1,"text-ang-text_white","font-medium"],[1,"flex","gap-6"],["routerLink","/user-account",1,"hover:cursor-pointer","hover:scale-110","transition","duration-250"],["src","assets/header_icons/userprofile.png","alt","user_profile_icon","width","38px","height","38px"],[1,"hover:cursor-pointer","hover:scale-110","transition","duration-250",3,"click"],["src","assets/header_icons/logout.png","alt","logout_icon","width","38px","height","38px"]],template:function(i,r){1&i&&(R(0,"header",0)(1,"div",1),Me("click",function(){return r.onToggleNav()}),$e(2,"span",2),S(),R(3,"div"),$e(4,"img",3),S(),ge(5,qne,4,0,"div",4),ge(6,Wne,5,0,"div",5),S(),$e(7,"app-navbar",6)),2&i&&(z(1),uc("expanded",r.buttonExpanded),z(4),H("ngIf",!r.authService.isLoggedIn),z(1),H("ngIf",r.authService.isLoggedIn))},dependencies:[So,Ss,Hne],styles:[".expanded[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .expanded[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:before, .expanded[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:after{border-radius:5px;width:6px}.time-display[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:150px;position:absolute;margin-top:1rem}"]})}return n})();function Zne(n,e){if(1&n){const t=zn();R(0,"div",1)(1,"div",2)(2,"div")(3,"p",3),G(4," Na\u0161a webov\xe1 aplik\xe1cia vyu\u017e\xedva s\xfabory cookies, ktor\xe9 s\xfa k\u013e\xfa\u010dov\xe9 pre jej spr\xe1vne fungovanie a poskytuj\xfa nevyhnutn\xe9 funkcie. Tieto s\xfabory cookies nesl\xfa\u017eia na zbieranie va\u0161ich \xfadajov na \xfa\u010dely marketingu ani sledovania va\u0161ich aktiv\xedt. Pokra\u010dovan\xedm v pou\u017e\xedvan\xed na\u0161ej webovej aplik\xe1cie vyjadrujete s\xfahlas s pou\u017e\xedvan\xedm t\xfdchto nevyhnutn\xfdch s\xfaborov cookies. "),S(),R(5,"button",4),Me("click",function(){return Gt(t),jt(be().hideWindow())}),G(6," Prija\u0165 "),S()()()()}}let Kne=(()=>{class n{constructor(t){this.authService=t,this.windowShown=!0}ngOnInit(){sessionStorage.getItem("acceptedWindow")&&(this.windowShown=!1)}hideWindow(){sessionStorage.setItem("acceptedWindow","true"),this.windowShown=!1}static#e=this.\u0275fac=function(i){return new(i||n)(q(ba))};static#t=this.\u0275cmp=An({type:n,selectors:[["app-tos-page"]],decls:1,vars:1,consts:[["class","flex items-center justify-center",4,"ngIf"],[1,"flex","items-center","justify-center"],[1,"fixed","bottom-1","w-3/4","h-16","bg-ang-main_bg","border","border-ang-border_main","rounded-lg","overflow-y-scroll","md:overflow-y-hidden","p-1"],[1,"text-xs"],[1,"float-right","border","border-ang-border_main","rounded-lg","px-1","py-0.5","text-ang-text_main","text-sm","hover:bg-ang-border_main","hover:text-ang-text_white","transition-all",3,"click"]],template:function(i,r){1&i&&ge(0,Zne,7,0,"div",0),2&i&&H("ngIf",r.windowShown&&!r.authService.isLoggedIn)},dependencies:[So]})}return n})(),Yne=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){this.authService.checkToken()}title(t){throw new Error("Method not implemented.")}static#e=this.\u0275fac=function(i){return new(i||n)(q(ba))};static#t=this.\u0275cmp=An({type:n,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"flex","flex-col","gap-3","min-h-screen","p-1.5","sm:p-3"],[1,"sticky","w-full","top-0","z-50"],[1,"flex-1","bg-ang-main_bg","rounded-lg","basis-1"]],template:function(i,r){1&i&&(R(0,"div",0),$e(1,"app-header",1),R(2,"div",2),$e(3,"router-outlet")(4,"app-tos-page"),S()())},dependencies:[sA,Gne,Kne]})}return n})();function YU(...n){const e=fo(n),{args:t,keys:i}=HB(n),r=new Ke(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let l=s,c=s;for(let h=0;h<s;h++){let p=!1;Et(t[h]).subscribe(ye(o,g=>{p||(p=!0,c--),a[h]=g},()=>l--,void 0,()=>{(!l||!p)&&(c||o.next(i?qB(i,a):a),o.complete())}))}});return e?r.pipe(qD(e)):r}let QU=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(i){return new(i||n)(q(Js),q(ei))};static#t=this.\u0275dir=qe({type:n})}return n})(),Zc=(()=>{class n extends QU{static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=Jn(n)))(r||n)}}();static#t=this.\u0275dir=qe({type:n,features:[Vt]})}return n})();const Rs=new re("NgValueAccessor"),Qne={provide:Rs,useExisting:$(()=>mA),multi:!0};let mA=(()=>{class n extends Zc{writeValue(t){this.setProperty("checked",t)}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=Jn(n)))(r||n)}}();static#t=this.\u0275dir=qe({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){1&i&&Me("change",function(s){return r.onChange(s.target.checked)})("blur",function(){return r.onTouched()})},features:[Sn([Qne]),Vt]})}return n})();const Xne={provide:Rs,useExisting:$(()=>Ea),multi:!0},eie=new re("CompositionEventMode");let Ea=(()=>{class n extends QU{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Jne(){const n=Ja()?Ja().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(i){return new(i||n)(q(Js),q(ei),q(eie,8))};static#t=this.\u0275dir=qe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&Me("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[Sn([Xne]),Vt]})}return n})();function Al(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function XU(n){return null!=n&&"number"==typeof n.length}const nr=new re("NgValidators"),Sl=new re("NgAsyncValidators"),tie=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class qi{static min(e){return function JU(n){return e=>{if(Al(e.value)||Al(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function ej(n){return e=>{if(Al(e.value)||Al(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return tj(e)}static requiredTrue(e){return function nj(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function ij(n){return Al(n.value)||tie.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function rj(n){return e=>Al(e.value)||!XU(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function oj(n){return e=>XU(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function sj(n){if(!n)return m0;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Al(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return hj(e)}static composeAsync(e){return fj(e)}}function tj(n){return Al(n.value)?{required:!0}:null}function m0(n){return null}function aj(n){return null!=n}function lj(n){return bp(n)?b(n):n}function cj(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function uj(n,e){return e.map(t=>t(n))}function dj(n){return n.map(e=>function nie(n){return!n.validate}(e)?e:t=>e.validate(t))}function hj(n){if(!n)return null;const e=n.filter(aj);return 0==e.length?null:function(t){return cj(uj(t,e))}}function gA(n){return null!=n?hj(dj(n)):null}function fj(n){if(!n)return null;const e=n.filter(aj);return 0==e.length?null:function(t){return YU(uj(t,e).map(lj)).pipe(ve(cj))}}function _A(n){return null!=n?fj(dj(n)):null}function pj(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function mj(n){return n._rawValidators}function gj(n){return n._rawAsyncValidators}function vA(n){return n?Array.isArray(n)?n:[n]:[]}function g0(n,e){return Array.isArray(n)?n.includes(e):n===e}function _j(n,e){const t=vA(e);return vA(n).forEach(r=>{g0(t,r)||t.push(r)}),t}function vj(n,e){return vA(e).filter(t=>!g0(n,t))}class yj{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=gA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=_A(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Tr extends yj{get formDirective(){return null}get path(){return null}}class Rl extends yj{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class bj{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Kc=(()=>{class n extends bj{constructor(t){super(t)}static#e=this.\u0275fac=function(i){return new(i||n)(q(Rl,2))};static#t=this.\u0275dir=qe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&uc("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Vt]})}return n})(),yA=(()=>{class n extends bj{constructor(t){super(t)}static#e=this.\u0275fac=function(i){return new(i||n)(q(Tr,10))};static#t=this.\u0275dir=qe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){2&i&&uc("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Vt]})}return n})();const gg="VALID",v0="INVALID",Oh="PENDING",_g="DISABLED";function wA(n){return(y0(n)?n.validators:n)||null}function IA(n,e){return(y0(e)?e.asyncValidators:n)||null}function y0(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function wj(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new B(1e3,"");if(!i[t])throw new B(1001,"")}function Ij(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new B(1002,"")})}class b0{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===gg}get invalid(){return this.status===v0}get pending(){return this.status==Oh}get disabled(){return this.status===_g}get enabled(){return this.status!==_g}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(_j(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(_j(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(vj(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(vj(e,this._rawAsyncValidators))}hasValidator(e){return g0(this._rawValidators,e)}hasAsyncValidator(e){return g0(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Oh,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=_g,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=gg,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===gg||this.status===Oh)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?_g:gg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Oh,this._hasOwnPendingAsyncValidator=!0;const t=lj(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new En,this.statusChanges=new En}_calculateStatus(){return this._allControlsDisabled()?_g:this.errors?v0:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Oh)?Oh:this._anyControlsHaveStatus(v0)?v0:gg}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){y0(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function sie(n){return Array.isArray(n)?gA(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function aie(n){return Array.isArray(n)?_A(n):n||null}(this._rawAsyncValidators)}}class vg extends b0{constructor(e,t,i){super(wA(t),IA(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Ij(this,0,e),Object.keys(e).forEach(i=>{wj(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class xj extends vg{}const Yc=new re("CallSetDisabledState",{providedIn:"root",factory:()=>yg}),yg="always";function E0(n,e){return[...e.path,n]}function bg(n,e,t=yg){xA(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function cie(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Cj(n,e)})}(n,e),function die(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function uie(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Cj(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function lie(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function w0(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),x0(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function I0(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function xA(n,e){const t=mj(n);null!==e.validator?n.setValidators(pj(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=gj(n);null!==e.asyncValidator?n.setAsyncValidators(pj(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();I0(e._rawValidators,r),I0(e._rawAsyncValidators,r)}function x0(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=mj(n);if(Array.isArray(r)&&r.length>0){const o=r.filter(s=>s!==e.validator);o.length!==r.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const r=gj(n);if(Array.isArray(r)&&r.length>0){const o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(t=!0,n.setAsyncValidators(o))}}}const i=()=>{};return I0(e._rawValidators,i),I0(e._rawAsyncValidators,i),t}function Cj(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function TA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function DA(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(o=>{o.constructor===Ea?t=o:function pie(n){return Object.getPrototypeOf(n.constructor)===Zc}(o)?i=o:r=o}),r||i||t||null}function Aj(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Sj(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const wg=class extends b0{constructor(e=null,t,i){super(wA(t),IA(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),y0(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Sj(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Aj(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Aj(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Sj(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let Rj=(()=>{class n extends Tr{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return E0(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=Jn(n)))(r||n)}}();static#t=this.\u0275dir=qe({type:n,features:[Vt]})}return n})();const yie={provide:Rl,useExisting:$(()=>Nh)},Pj=(()=>Promise.resolve())();let Nh=(()=>{class n extends Rl{constructor(t,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new wg,this._registered=!1,this.name="",this.update=new En,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=DA(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),TA(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){bg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Pj.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&Rd(i);Pj.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?E0(t,this._parent):[t]}static#e=this.\u0275fac=function(i){return new(i||n)(q(Tr,9),q(nr,10),q(Sl,10),q(Rs,10),q(Kv,8),q(Yc,8))};static#t=this.\u0275dir=qe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Sn([yie]),Vt,Rr]})}return n})(),SA=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=qe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})();const Eie={provide:Rs,useExisting:$(()=>RA),multi:!0};let Oj=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({})}return n})(),wie=(()=>{class n{constructor(){this._accessors=[]}add(t,i){this._accessors.push([t,i])}remove(t){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===t)return void this._accessors.splice(i,1)}select(t){this._accessors.forEach(i=>{this._isSameGroup(i,t)&&i[1]!==t&&i[1].fireUncheck(t.value)})}_isSameGroup(t,i){return!!t[0].control&&t[0]._parent===i._control._parent&&t[1].name===i.name}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:Oj})}return n})(),RA=(()=>{class n extends Zc{constructor(t,i,r,o){super(t,i),this._registry=r,this._injector=o,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=xe(Yc,{optional:!0})??yg}ngOnInit(){this._control=this._injector.get(Rl),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}static#e=this.\u0275fac=function(i){return new(i||n)(q(Js),q(ei),q(wie),q(jn))};static#t=this.\u0275dir=qe({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(i,r){1&i&&Me("change",function(){return r.onChange()})("blur",function(){return r.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Sn([Eie]),Vt]})}return n})();const MA=new re("NgModelWithFormControlWarning"),Cie={provide:Tr,useExisting:$(()=>Ig)};let Ig=(()=>{class n extends Tr{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new En,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(x0(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return bg(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){w0(t.control||null,t,!1),function mie(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,function Dj(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(w0(i||null,t),(n=>n instanceof wg)(r)&&(bg(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);(function Tj(n,e){xA(n,e)})(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function hie(n,e){return x0(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){xA(this.form,this),this._oldForm&&x0(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(i){return new(i||n)(q(nr,10),q(Sl,10),q(Yc,8))};static#t=this.\u0275dir=qe({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){1&i&&Me("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Sn([Cie]),Vt,Rr]})}return n})();const Tie={provide:Tr,useExisting:$(()=>xg)};let xg=(()=>{class n extends Rj{constructor(t,i,r){super(),this.name=null,this._parent=t,this._setValidators(i),this._setAsyncValidators(r)}_checkParentType(){Lj(this._parent)}static#e=this.\u0275fac=function(i){return new(i||n)(q(Tr,13),q(nr,10),q(Sl,10))};static#t=this.\u0275dir=qe({type:n,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[Sn([Tie]),Vt]})}return n})();const Die={provide:Tr,useExisting:$(()=>Cg)};let Cg=(()=>{class n extends Tr{constructor(t,i,r){super(),this.name=null,this._parent=t,this._setValidators(i),this._setAsyncValidators(r)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return E0(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){Lj(this._parent)}static#e=this.\u0275fac=function(i){return new(i||n)(q(Tr,13),q(nr,10),q(Sl,10))};static#t=this.\u0275dir=qe({type:n,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[Sn([Die]),Vt]})}return n})();function Lj(n){return!(n instanceof xg||n instanceof Ig||n instanceof Cg)}const Aie={provide:Rl,useExisting:$(()=>C0)};let C0=(()=>{class n extends Rl{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,i,r,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new En,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=DA(0,o)}ngOnChanges(t){this._added||this._setUpControl(),TA(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return E0(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(i){return new(i||n)(q(Tr,13),q(nr,10),q(Sl,10),q(Rs,10),q(MA,8))};static#n=this.\u0275dir=qe({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Sn([Aie]),Vt,Rr]})}return n})();const Sie={provide:Rs,useExisting:$(()=>Tg),multi:!0};function Vj(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Tg=(()=>{class n extends Zc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const r=Vj(this._getOptionId(t),t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){const i=function Rie(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=Jn(n)))(r||n)}}();static#t=this.\u0275dir=qe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){1&i&&Me("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Sn([Sie]),Vt]})}return n})(),PA=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Vj(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(i){return new(i||n)(q(ei),q(Js),q(Tg,9))};static#t=this.\u0275dir=qe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})();const Mie={provide:Rs,useExisting:$(()=>kA),multi:!0};function Bj(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let kA=(()=>{class n extends Zc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let i;if(this.value=t,Array.isArray(t)){const r=t.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{const r=[],o=i.selectedOptions;if(void 0!==o){const s=o;for(let a=0;a<s.length;a++){const c=this._getOptionValue(s[a].value);r.push(c)}}else{const s=i.options;for(let a=0;a<s.length;a++){const l=s[a];if(l.selected){const c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,t(r)}}_registerOption(t){const i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){const i=function Pie(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=Jn(n)))(r||n)}}();static#t=this.\u0275dir=qe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){1&i&&Me("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Sn([Mie]),Vt]})}return n})(),OA=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Bj(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Bj(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(i){return new(i||n)(q(ei),q(Js),q(kA,9))};static#t=this.\u0275dir=qe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})(),Qc=(()=>{class n{constructor(){this._validator=m0}ngOnChanges(t){if(this.inputName in t){const i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):m0,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=qe({type:n,features:[Rr]})}return n})();const Nie={provide:nr,useExisting:$(()=>Dg),multi:!0};let Dg=(()=>{class n extends Qc{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Rd,this.createValidator=t=>tj}enabled(t){return t}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=Jn(n)))(r||n)}}();static#t=this.\u0275dir=qe({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){2&i&&Co("required",r._enabled?"":null)},inputs:{required:"required"},features:[Sn([Nie]),Vt]})}return n})(),Kj=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({imports:[Oj]})}return n})();class Yj extends b0{constructor(e,t,i){super(wA(t),IA(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Ij(this,0,e),e.forEach((i,r)=>{wj(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function Qj(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let Xj=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,i=null){const r=this._reduceControls(t);let o={};return Qj(i)?o=i:null!==i&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new vg(r,o)}record(t,i=null){const r=this._reduceControls(t);return new xj(r,i)}control(t,i,r){let o={};return this.useNonNullable?(Qj(i)?o=i:(o.validators=i,o.asyncValidators=r),new wg(t,{...o,nonNullable:!0})):new wg(t,i,r)}array(t,i,r){const o=t.map(s=>this._createControl(s));return new Yj(o,i,r)}_reduceControls(t){const i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){return t instanceof wg||t instanceof b0?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jie=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Yc,useValue:t.callSetDisabledState??yg}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({imports:[Kj]})}return n})(),zie=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:MA,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Yc,useValue:t.callSetDisabledState??yg}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({imports:[Kj]})}return n})(),T0=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=An({type:n,selectors:[["app-landing-page"]],decls:26,vars:0,consts:[["id","main_page_container",1,"outer_container"],["id","main_page_inner_container",1,"inner_container","items-center","justify-evenly","flex-col"],[1,"p-8","text-2xl","text-ang-text_main","lg:text-3xl"],[1,"flex","items-center","justify-evenly","w-full","flex-wrap","px-4"],["id","main_first_card",1,"main_card_containers","bg-first_landing_page_card","bg-cover"],["id","main_first_card_icon","src","assets/test_icon.png","alt","Test icon","height","50px","width","50px",1,"main_card_icon"],["id","main_first_card_textarea",1,"main_card_textareas"],["id","main_second_card",1,"main_card_containers","bg-second_landing_page_card","bg-cover"],["id","main_second_card_icon","src","assets/book_icon.png","alt","Test icon","height","50px","width","50px",1,"main_card_icon"],["id","main_second_card_textarea",1,"main_card_textareas"],["id","main_third_card",1,"main_card_containers","bg-third_landing_page_card","bg-cover"],["id","main_third_card_icon","src","assets/community_icon.png","alt","Test icon","height","50px","width","50px",1,"main_card_icon"],["id","main_third_card_textarea",1,"main_card_textareas"],["id","main_fourth_card",1,"main_card_containers","bg-fourth_landing_page_card","bg-cover"],["id","main_fourth_card_icon","src","assets/graduation_icon.png","alt","Test icon","height","50px","width","50px",1,"main_card_icon"],["id","main_fourth_card_textarea",1,"main_card_textareas"]],template:function(i,r){1&i&&(R(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),G(4," e-Maturity je inovat\xedvna a \u0161tudentom prisp\xf4soben\xe1 webov\xe1 aplik\xe1cia, ktor\xe1 pon\xfaka: "),S()(),R(5,"section",3)(6,"div",4),$e(7,"img",5),R(8,"div",6)(9,"p"),G(10," Otestovanie sa a rie\u0161enie maturitn\xfdch testov online formou! Modern\xe1 doba toti\u017e vy\u017eaduje modern\xe9 rie\u0161enia, u\u017e \u017eiadne pero a papier. "),S()()(),R(11,"div",7),$e(12,"img",8),R(13,"div",9)(14,"p"),G(15," R\xfdchly pr\xedstup k u\u010divu a preh\u013eadn\xe9 pozn\xe1mky s\xfa z\xe1rukou k \xfaspe\u0161nej maturite a pr\xe1ve o tieto pozn\xe1mky sa s vami podel\xedme. "),S()()(),R(16,"div",10),$e(17,"img",11),R(18,"div",12)(19,"p"),G(20," Spojte sa s ostatn\xfdmi maturantmi, zdie\u013eajte medzi sebou sk\xfasenosti, ra\u010fte sa a podporujte navz\xe1jom. "),S()()(),R(21,"div",13),$e(22,"img",14),R(23,"div",15)(24,"p"),G(25," Precvi\u010dujte sa s testami z minul\xfdch ro\u010dn\xedkov a pripravte sa na v\u0161etky aspekty maturity. Na\u0161e zdroje v\xe1m pom\xf4\u017eu zdokonali\u0165 va\u0161e vedomosti. "),S()()()()()())}})}return n})();const Jj=function(n){return{"border-red-700":n}},$ie=function(n,e){return{"text-red-600":n,"opacity-100":e}};let ez=(()=>{class n{constructor(t,i){this.router=t,this.service=i,this.submitted=!1,this.name="",this.password="",this.error=!1,this.rememberMe=!1,this.isDarkMode=!1,this.loggedIn=!1}submit(){this.submitted=!0}newInput(){this.error=!1}login(){this.service.login(this.name,this.password,this.rememberMe).then(()=>this.router.navigate([""])).catch(()=>this.error=!0)}signInWithGoogle(){this.service.googleSignIn().then(()=>this.router.navigate([""])).catch(()=>this.error=!0)}ngOnInit(){const t=localStorage.getItem("rememberMe");if(t){const i=JSON.parse(t);console.log(i),this.name=i.email,this.password=i.password}}static#e=this.\u0275fac=function(i){return new(i||n)(q(Pi),q(ba))};static#t=this.\u0275cmp=An({type:n,selectors:[["app-login-page"]],decls:29,vars:16,consts:[[1,"outer_container"],[1,"inner_container","justify-center","items-center"],[1,"flex","md:h-[32rem]","flex-col","items-center","justify-between","border","gap-4","border-ang-border_main","py-4","m-2","rounded-lg","max-w-[30rem]","w-full","bg-gradient-to-t","from-ang-gradient_from","to-ang-gradient_to"],[1,"flex","flex-col","text-center","md:items-center","gap-2","w-full","px-2"],["for","meno",1,"text-xl","font-semibold","text-ang-text_white"],["type","text","name","meno","id","meno","required","","placeholder","Zadaj svoj email",1,"py-1","px-2","rounded-md","border","border-ang-border_main","md:w-72",3,"ngModel","ngModelChange"],["for","heslo",1,"text-xl","font-semibold","text-ang-text_white"],["type","password","name","heslo","id","heslo","required","","placeholder","Zadaj svoje heslo",1,"py-1","px-2","rounded-md","border","border-ang-border_main","md:w-72",3,"ngModel","ngModelChange"],[1,"flex","text-sm","justify-evenly","items-start","w-full","md:px-16","text-ang-text_white","font-semibold"],["routerLink","/forgot-password"],[1,"flex","items-center","gap-1"],["for","rememberMe",1,"hover:opacity-95","hover:cursor-pointer"],["type","checkbox","name","rememberMe","id","rememberMe",1,"mt-1",3,"ngModel","ngModelChange"],[1,"opacity-0","font-semibold","text-xl"],[1,"flex","items-center","gap-2","mx-1","px-3","py-2","rounded-lg","bg-ang-text_white","hover:opacity-95","border","border-ang-text_white",3,"click"],["src","assets/googleicon.png","alt","googleicon","width","32px","height","32px"],[1,"flex","justify-evenly","items-center","w-full"],["type","submit",1,"border","border-ang-border_main","px-3","py-1","text-ang-text_main","font-semibold","hover:opacity-85","rounded-lg","bg-white",3,"click"],["routerLink","/register",1,"border","border-ang-border_main","px-3","py-1","text-ang-text_main","font-semibold","hover:opacity-85","rounded-lg","bg-white"]],template:function(i,r){1&i&&(R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),G(5,"Prihlasovaci email"),S(),R(6,"input",5),Me("ngModelChange",function(){return r.newInput()})("ngModelChange",function(s){return r.name=s}),S(),R(7,"label",6),G(8,"Heslo"),S(),R(9,"input",7),Me("ngModelChange",function(){return r.newInput()})("ngModelChange",function(s){return r.password=s}),S()(),R(10,"div",8)(11,"button",9),G(12,"Zabudnut\xe9 heslo"),S(),R(13,"div",10)(14,"label",11),G(15,"zapam\xe4taj si ma"),S(),R(16,"input",12),Me("ngModelChange",function(s){return r.rememberMe=s}),S()()(),R(17,"div",13)(18,"p"),G(19,"Nespr\xe1vne zadan\xe9 \xfadaje"),S()(),R(20,"div")(21,"button",14),Me("click",function(){return r.signInWithGoogle()}),$e(22,"img",15),G(23," Prihl\xe1si\u0165 sa cez google "),S()(),R(24,"div",16)(25,"button",17),Me("click",function(){return r.login()}),G(26," Prihl\xe1si\u0165 "),S(),R(27,"button",18),G(28," Registr\xe1cia "),S()()()()()),2&i&&(z(6),Fv($o(9,Jj,r.error)),H("ngModel",r.name),z(3),Fv($o(11,Jj,r.error)),H("ngModel",r.password),z(7),H("ngModel",r.rememberMe),z(1),Fv(Dp(13,$ie,r.error,r.error)))},dependencies:[Ea,mA,Kc,Dg,Nh,Ss]})}return n})();const NA=function(n){return{"border-red-600":n}},Hie=function(n,e){return{"text-red-600":n,"opacity-100":e}};let tz=(()=>{class n{constructor(t,i){this.router=t,this.service=i,this.errorMessage="",this.pswdError=!1,this.emailError=!1}isValidEmail(t){return/^[\w\-\.]+@([\w-]+\.)+[\w-]{2,}$/.test(t)}register(){if(this.email&&this.password&&this.passwordCheck&&this.fname&&this.lname){if(this.password.length<6)return this.errorMessage="Heslo mus\xed obsahova\u0165 aspo\u0148 6 znakov",this.pswdError=!0,void(this.emailError=!1);if(this.pswdError=!1,this.password!==this.passwordCheck)return this.errorMessage="Hesla sa nezhoduj\xfa",this.pswdError=!0,void(this.emailError=!1);if(this.pswdError=!1,!this.isValidEmail(this.email))return this.errorMessage="Neplatn\xe1 emailov\xe1 adresa",void(this.emailError=!0);this.emailError=!1,this.service.register(this.email,this.password,this.fname,this.lname).then(t=>{this.router.navigate([""])}).catch(t=>{"auth/email-already-in-use"===t.code&&(this.errorMessage="Tento email je u\u017e registrovan\xfd",this.emailError=!0)})}else this.errorMessage="Pros\xedm vypl\u0148 v\u0161etky pol\xed\u010dka"}static#e=this.\u0275fac=function(i){return new(i||n)(q(Pi),q(ba))};static#t=this.\u0275cmp=An({type:n,selectors:[["app-register-page"]],decls:33,vars:19,consts:[[1,"outer_container"],[1,"inner_container","items-center","justify-center"],[1,"bg-gradient-to-t","from-ang-gradient_from","to-ang-gradient_to","p-8","rounded-lg","text-white","font-semibold"],[1,"flex","py-2","gap-1"],[1,"flex","flex-col","w-full"],["for","krstne"],["type","text","name","krstne","id","krstne","required","","placeholder","J\xe1n",1,"w-full","p-1","border","border-ang-border_main","rounded-lg","text-black",3,"ngModel","ngModelChange"],["for","priezv"],["type","text","name","priezv","id","priezv","required","","placeholder","Nov\xe1k",1,"w-full","p-1","border","border-ang-border_main","rounded-lg","text-black",3,"ngModel","ngModelChange"],[1,"py-2"],["for","email"],["type","email","name","email","id","email","required","","placeholder","jan.novak@email.com",1,"w-full","p-1","border","border-ang-border_main","rounded-lg","text-black",3,"ngModel","ngClass","ngModelChange"],["for","heslo"],["type","password","name","heslo","id","heslo","required","","placeholder","Zadajte heslo",1,"w-full","border","border-ang-border_main","rounded-lg","p-1","text-black",3,"ngModel","ngClass","ngModelChange"],["for","hesloKontrola"],["type","password","name","hesloKontrola","id","hesloKontrola","required","","placeholder","Zopakujte heslo",1,"w-full","border","border-ang-border_main","rounded-lg","p-1","text-black",3,"ngModel","ngClass","ngModelChange"],[1,"opacity-0","font-semibold","text-xl","flex","items-center","justify-center","pt-4",3,"ngClass"],[1,"flex","justify-between","pt-10"],["id","register_log_button","routerLink","/login",1,"border","border-ang-border_main","px-3","py-1","text-ang-text_main","font-semibold","hover:opacity-85","rounded-lg","bg-white"],[1,"border","border-ang-border_main","px-3","py-1","text-ang-text_main","font-semibold","hover:opacity-85","rounded-lg","bg-white"],[3,"click"]],template:function(i,r){1&i&&(R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),G(6,"Meno"),S(),R(7,"input",6),Me("ngModelChange",function(s){return r.fname=s}),S()(),R(8,"div",4)(9,"label",7),G(10,"Priezvisko"),S(),R(11,"input",8),Me("ngModelChange",function(s){return r.lname=s}),S()()(),R(12,"div",9)(13,"label",10),G(14,"E-mail"),S(),R(15,"input",11),Me("ngModelChange",function(s){return r.email=s}),S()(),R(16,"div",9)(17,"label",12),G(18,"Heslo"),S(),R(19,"input",13),Me("ngModelChange",function(s){return r.password=s}),S()(),R(20,"div",9)(21,"label",14),G(22,"Kontrola hesla"),S(),R(23,"input",15),Me("ngModelChange",function(s){return r.passwordCheck=s}),S()(),R(24,"div",16),G(25),S(),R(26,"div",17)(27,"button",18)(28,"p"),G(29,"Sp\xe4\u0165 na prihl\xe1senie"),S()(),R(30,"button",19)(31,"p",20),Me("click",function(){return r.register()}),G(32,"Zalo\u017e \xfa\u010det"),S()()()()()()),2&i&&(z(7),H("ngModel",r.fname),z(4),H("ngModel",r.lname),z(4),H("ngModel",r.email)("ngClass",$o(10,NA,r.emailError)),z(4),H("ngModel",r.password)("ngClass",$o(12,NA,r.pswdError)),z(4),H("ngModel",r.passwordCheck)("ngClass",$o(14,NA,r.pswdError)),z(1),H("ngClass",Dp(16,Hie,!r.pswdError||!r.emailError,!r.pswdError||!r.emailError)),z(1),Yi(" ",r.errorMessage," "))},dependencies:[uy,Ea,Kc,Dg,Nh,Ss]})}return n})();class Ag{constructor(e){return e}}class nz{constructor(){return(0,Fr.getApps)()}}const FA=new re("angularfire2._apps"),Wie={provide:Ag,useFactory:function qie(n){return n&&1===n.length?n[0]:new Ag((0,Fr.getApp)())},deps:[[new Kr,FA]]},Gie={provide:nz,deps:[[new Kr,FA]]};function Zie(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new Ag(i)}}let Kie=(()=>{class n{constructor(t){(0,Fr.registerVersion)("angularfire",Pd.full,"core"),(0,Fr.registerVersion)("angularfire",Pd.full,"app"),(0,Fr.registerVersion)("angular",Vw.full,t.toString())}static \u0275fac=function(i){return new(i||n)(F(Io))};static \u0275mod=_t({type:n});static \u0275inj=Tt({providers:[Wie,Gie]})}return n})();function Yie(n,...e){return{ngModule:Kie,providers:[{provide:FA,useFactory:Zie(n),multi:!0,deps:[it,jn,vy,...e]}]}}class rz{constructor(){return kx("auth")}}class Fh{constructor(e){return e}}const oz="firestore",BA=new re("angularfire2.firestore-instances");function nre(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new Fh(i)}}const ire={provide:class ere{constructor(){return kx(oz)}},deps:[[new Kr,BA]]},rre={provide:Fh,useFactory:function tre(n,e){const t=function IN(n,e,t){if(e){if(1===e.length)return e[0];const o=e.filter(s=>s.app===t);if(1===o.length)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}(oz,n,e);return t&&new Fh(t)},deps:[[new Kr,BA],Ag]};let ore=(()=>{class n{constructor(){(0,Fr.registerVersion)("angularfire",Pd.full,"fst")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=_t({type:n});static \u0275inj=Tt({providers:[rre,ire]})}return n})();function sre(n,...e){return{ngModule:ore,providers:[{provide:BA,useFactory:nre(n),multi:!0,deps:[it,jn,vy,nz,[new Kr,rz],[new Kr,Ox],...e]}]}}const ri=_c(TD,!0),are=_c(xB,!0),ir=_c($m,!0),lre=_c(EB,!0),Lh=_c(wB,!0),cre=_c(XX,!0),Sg=_c(FD,!0);let Rg=(()=>{class n{constructor(t,i){this.firestore=t,this.cookieService=i}getTestsYears(t){const i=ri(this.firestore,"tests"),r=ir(i,"official_tests"),o=ri(r,t);return b(Lh(o)).pipe(ve(s=>{const a=[];return console.log(s),s.forEach(l=>{console.log(l.id),a.push(l.id)}),a}))}getTest(t,i,r){const o=ri(this.firestore,"tests"),s=ir(o,"official_tests"),a=ri(s,t),l=ir(a,i),c=ri(l,"sections");return b(Lh(c)).pipe(Ae(p=>YU(p.docs.map(_=>{const E=ri(_.ref,"questions");return b(Lh(E)).pipe(ve(x=>({questions:x.docs.map(V=>{const k=V.data();return r||delete k.answer,{id:V.id,text:k.text,imageUrl:k.imageUrl,answer:k.answer,questionType:k.questionType,options:k.options,options_2:k.options_2,userAnswer:"",userAnswer_2:""}}),articleUrl:_.data().article_url,audioUrl:_.data().audio_url})))}))),ve(p=>({sections:p,subCat:t,year:i})))}getTestResult(t){return new Ke(i=>{this.getTest(t.subCat,t.year,!0).subscribe(r=>{const s=r.sections;let a=0;for(let c=0;c<s.length;c++){const h=s[c],p=t.sections[c];for(let g=0;g<h.questions.length;g++){a++;const E=p.results[g];E.result=this.compareUserAndCorrectAnswer(h.questions[g],E),E.result&&t.score++}}t.percentageScore=Math.round(t.score/a*1e4)/100;const l=this.cookieService.get("uid");l?this.saveFinishedTest(l,t):console.error("User is not logged in"),i.next(t),i.complete()},r=>{i.error(r)})})}compareUserAndCorrectAnswer(t,i){return Array.isArray(t.answer)?t.answer.includes(i.userAnswer):t.answer===i.userAnswer}saveFinishedTest(t,i){const r=ri(this.firestore,"users"),o=ir(r,t),s=ri(o,"savedTests"),a=ir(s);Sg(a,i).then(l=>console.log(l)).catch(l=>console.log(l))}saveTestStatistics(t,i,r){const o=this.cookieService.get("uid"),s=ri(this.firestore,"users"),a=ir(s,o),l=ri(a,"userStatistics"),c=ir(l,"subjects"),h=ri(c,t),p=ir(h);Sg(p,{percentageScore:i,timeTaken:r}).then(_=>console.log(_)).catch(_=>console.log(_))}addOfficialTestToFirestore(t){var i=this;return(0,ne.Z)(function*(){const r=ri(i.firestore,"tests"),o=ir(r,"official_tests"),s=ri(o,t.subCat),a=ir(s,t.year);yield Sg(a,{});for(let l=0;l<t.sections.length;l++){const c=t.sections[l],h=ir(ri(a,"sections"),c.sectionId);yield Sg(h,{});for(let p=0;p<c.questions.length;p++){const g=c.questions[p];console.log(g);const _=ir(ri(h,"questions"),g.id);yield Sg(_,g)}}})()}static#e=this.\u0275fac=function(i){return new(i||n)(F(Fh),F(vc))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ure(n,e){1&n&&(R(0,"div")(1,"h1",5),G(2," Matematika "),S(),R(3,"ul")(4,"li"),G(5,"Test obsahuje 30 \xfaloh."),S(),R(6,"li"),G(7," Na vypracovanie testu m\xe1te 150 min\xfat. (\u010das sa spust\xed po kliknut\xed na test) "),S(),R(8,"li"),G(9," Pri rie\u0161enie \xfaloh za\u0161krtnete pol\xed\u010dko alebo nap\xed\u0161ete odpove\u010f. (popros\xedm p\xed\u0161te desatinn\xe9 \u010d\xedsla s \u010diarkou a z\xe1porne hodnoty spolu[4,5 ; -5]) "),S(),R(10,"li"),G(11," Zlomky s\xfa zap\xedsan\xe9 takto "),R(12,"sup"),G(13,"2+x"),S(),G(14,"/"),R(15,"sub"),G(16,"6"),S()(),R(17,"li"),G(18," Zru\u0161en\xe9 ot\xe1zky sa V\xe1m pripo\u010d\xedtavaj\xfa za bod automaticky "),S()()())}function dre(n,e){1&n&&(R(0,"div")(1,"h1",5),G(2," Slovensk\xfd jazyk a literat\xfara "),S(),R(3,"ul")(4,"li"),G(5,"Test obsahuje 64 \xfaloh."),S(),R(6,"li"),G(7," Na vypracovanie testu m\xe1te 100 min\xfat. (\u010das sa spust\xed po kliknut\xed na test) "),S(),R(8,"li"),G(9," Pri rie\u0161enie \xfaloh za\u0161krtnete pol\xed\u010dko alebo nap\xed\u0161ete odpove\u010f. (popros\xedm p\xed\u0161te s diakritikou) "),S(),R(10,"li"),G(11," Zru\u0161en\xe9 ot\xe1zky sa V\xe1m pripo\u010d\xedtavaj\xfa za bod automaticky "),S()()())}function hre(n,e){1&n&&(R(0,"div")(1,"h1",6),G(2," Anglick\xfd jazyk "),S(),R(3,"div",7)(4,"ul")(5,"p",8),G(6," B1 \xfarove\u0148 "),S(),R(7,"li"),G(8,"Testy z obsahuj\xfa 60 \xfaloh"),S(),R(9,"li"),G(10,"Na vypracovanie testu m\xe1te 100 min\xfat"),S()(),R(11,"ul")(12,"p",8),G(13," B2 \xfarove\u0148 "),S(),R(14,"li"),G(15,"Testy z obsahuj\xfa 80 \xfaloh"),S(),R(16,"li"),G(17,"Na vypracovanie testu m\xe1te 120 min\xfat"),S()()()())}const fre=function(n,e){return["/official-test",n,e]};function pre(n,e){if(1&n&&(R(0,"a",11),G(1),S()),2&n){const t=e.$implicit,i=be(2);H("routerLink",Dp(2,fre,i.subCat,t)),z(1),Yi(" ",t," ")}}function mre(n,e){if(1&n&&(R(0,"div",9),ge(1,pre,2,5,"a",10),S()),2&n){const t=be();z(1),H("ngForOf",t.years)}}function gre(n,e){1&n&&(R(0,"div")(1,"p"),G(2,"no years"),S()())}function _re(n,e){1&n&&(R(0,"div")(1,"p"),G(2,"loading"),S()())}let sz=(()=>{class n{constructor(t,i){this.route=t,this.testService=i,this.loading=!0,this.route.params.subscribe(r=>{r&&(this.subCat=r.subCat,this.fetchTestYears().subscribe(o=>{this.years=o,console.log(this.years),this.loading=!1},o=>{console.error("Error fetching tests:",o)}))})}fetchTestYears(){return this.subCat?this.testService.getTestsYears(this.subCat):new Ke(t=>{t.next([]),t.complete()})}static#e=this.\u0275fac=function(i){return new(i||n)(q(Dl),q(Rg))};static#t=this.\u0275cmp=An({type:n,selectors:[["app-official-categories-page"]],decls:9,vars:6,consts:[[1,"outer_container"],[1,"inner_container","flex-col","justify-evenly","items-center","py-4","text-ang-text_main"],[1,"text-center"],[4,"ngIf"],["class","flex gap-4 flex-wrap items-center justify-center px-2",4,"ngIf"],[1,"text-2xl","sm:text-3xl","font-bold","text-ang-text_main"],[1,"text-2xl","sm:text-3xl","font-bold","text-ang-text_main","mb-4"],[1,"flex","gap-6","flex-col","md:flex-row","md:gap-10"],[1,"text-center","font-bold","text-ang-text_main"],[1,"flex","gap-4","flex-wrap","items-center","justify-center","px-2"],["class","border border-ang-border_main py-2 px-8 rounded-lg bg-ang-main_btn text-ang-text_white hover:opacity-85 transition-all",3,"routerLink",4,"ngFor","ngForOf"],[1,"border","border-ang-border_main","py-2","px-8","rounded-lg","bg-ang-main_btn","text-ang-text_white","hover:opacity-85","transition-all",3,"routerLink"]],template:function(i,r){1&i&&(R(0,"div",0)(1,"div",1)(2,"div",2),ge(3,ure,19,0,"div",3),ge(4,dre,12,0,"div",3),ge(5,hre,18,0,"div",3),S(),ge(6,mre,2,1,"div",4),ge(7,gre,3,0,"div",3),ge(8,_re,3,0,"div",3),S()()),2&i&&(z(3),H("ngIf","mat"===r.subCat),z(1),H("ngIf","sjl"===r.subCat),z(1),H("ngIf","anj"===r.subCat),z(1),H("ngIf",r.years),z(1),H("ngIf",!(r.years&&0!=r.years.length||r.loading)),z(1),H("ngIf",r.loading))},dependencies:[el,So,Ss]})}return n})();function vre(n,e){if(1&n&&(R(0,"div",9),G(1),S()),2&n){const t=be(2);z(1),Yi(" ",t.display," ")}}function yre(n,e){if(1&n&&(R(0,"div"),$e(1,"img",19),S()),2&n){const t=e.$implicit;z(1),H("src",t,kr)}}const az=function(n){return[n]};function bre(n,e){if(1&n&&(R(0,"div"),ge(1,yre,2,1,"div",18),S()),2&n){const t=be(2).$implicit;z(1),H("ngForOf",$o(1,az,t.articleUrl))}}function Ere(n,e){if(1&n&&(R(0,"div"),$e(1,"img",19),S()),2&n){const t=e.$implicit;z(1),H("src",t,kr)}}function wre(n,e){if(1&n&&(R(0,"div"),ge(1,Ere,2,1,"div",18),S()),2&n){const t=be(2).$implicit;z(1),H("ngForOf",t.articleUrl)}}function Ire(n,e){if(1&n&&(R(0,"div",20)(1,"audio",21),$e(2,"source",22),G(3," Your browser does not support the audio element. "),S()()),2&n){const t=be(2).$implicit;z(2),H("src",t.audioUrl,kr)}}function xre(n,e){if(1&n&&(R(0,"div",15),ge(1,bre,2,3,"div",16),ge(2,wre,2,1,"div",16),ge(3,Ire,4,1,"div",17),S()),2&n){const t=be().$implicit,i=be(3);z(1),H("ngIf",i.isString(t.articleUrl)),z(1),H("ngIf",i.isArray(t.articleUrl)),z(1),H("ngIf",t.audioUrl)}}function Cre(n,e){1&n&&$e(0,"p",30),2&n&&H("innerHTML",be().$implicit.text,Vi)}function Tre(n,e){1&n&&$e(0,"img",19),2&n&&H("src",be().$implicit.imageUrl,kr)}function Dre(n,e){if(1&n){const t=zn();R(0,"div",32)(1,"input",33),Me("ngModelChange",function(r){return Gt(t),jt(be(2).$implicit.userAnswer=r)}),S(),$e(2,"label",34),S()}if(2&n){const t=e.$implicit,i=be(2).$implicit;z(1),H("name",i.id)("value",t)("id",t+i.id)("ngModel",i.userAnswer),z(1),H("for",t+i.id)("innerHTML",t,Vi)}}function Are(n,e){if(1&n&&(R(0,"div"),ge(1,Dre,3,6,"div",31),S()),2&n){const t=be().$implicit;z(1),H("ngForOf",t.options)}}function Sre(n,e){if(1&n){const t=zn();R(0,"div")(1,"input",35),Me("ngModelChange",function(r){return Gt(t),jt(be().$implicit.userAnswer=r)}),S()()}if(2&n){const t=be().$implicit;z(1),H("ngModel",t.userAnswer)}}function Rre(n,e){if(1&n){const t=zn();vp(0),R(1,"div")(2,"input",38),Me("ngModelChange",function(r){return Gt(t),jt(be(2).$implicit.userAnswer=r)}),S(),$e(3,"label",34),S(),yp()}if(2&n){const t=e.$implicit,i=be(2).$implicit;z(2),H("name",i.id+"option_1")("value",t)("id",t+i.id)("ngModel",i.userAnswer),z(1),H("for",t+i.id)("innerHTML",t,Vi)}}function Mre(n,e){if(1&n){const t=zn();vp(0),R(1,"div")(2,"input",38),Me("ngModelChange",function(r){return Gt(t),jt(be(2).$implicit.userAnswer_2=r)}),S(),$e(3,"label",34),S(),yp()}if(2&n){const t=e.$implicit,i=be(2).$implicit;z(2),H("name",i.id+"option_2")("value",t)("id",t+i.id)("ngModel",i.userAnswer_2),z(1),H("for",t+i.id)("innerHTML",t,Vi)}}function Pre(n,e){if(1&n&&(R(0,"div",36)(1,"div",37),ge(2,Rre,4,6,"ng-container",18),S(),R(3,"div",37),ge(4,Mre,4,6,"ng-container",18),S()()),2&n){const t=be().$implicit;z(2),H("ngForOf",t.options),z(2),H("ngForOf",t.options_2)}}function kre(n,e){if(1&n){const t=zn();R(0,"div",39)(1,"input",40),Me("ngModelChange",function(r){return Gt(t),jt(be().$implicit.userAnswer=r)}),S(),R(2,"input",41),Me("ngModelChange",function(r){return Gt(t),jt(be().$implicit.userAnswer_2=r)}),S()()}if(2&n){const t=be().$implicit;z(1),H("ngModel",t.userAnswer),z(1),H("ngModel",t.userAnswer_2)}}function Ore(n,e){1&n&&(R(0,"div")(1,"p"),G(2,"Question canceled by NUCEM"),S()())}function Nre(n,e){if(1&n&&(R(0,"div",23)(1,"div",24),$e(2,"p",25),ge(3,Cre,1,1,"p",26),ge(4,Tre,1,1,"img",27),S(),ge(5,Are,2,1,"div",16),ge(6,Sre,2,1,"div",16),ge(7,Pre,5,2,"div",28),ge(8,kre,3,2,"div",29),ge(9,Ore,3,0,"div",16),S()),2&n){const t=e.$implicit;z(2),H("innerHTML",t.id,Vi),z(1),H("ngIf",t.text),z(1),H("ngIf",t.imageUrl),z(1),H("ngIf","select"===t.questionType),z(1),H("ngIf","input"===t.questionType),z(1),H("ngIf","select_twice"===t.questionType),z(1),H("ngIf","input_twice"===t.questionType),z(1),H("ngIf","canceled"===t.questionType)}}function Fre(n,e){if(1&n&&(R(0,"div",12)(1,"div"),ge(2,xre,4,3,"div",13),ge(3,Nre,10,8,"div",14),S()()),2&n){const t=e.$implicit;z(2),H("ngIf",t.articleUrl),z(1),H("ngForOf",t.questions)}}function Lre(n,e){if(1&n&&(R(0,"div",10),ge(1,Fre,4,2,"div",11),S()),2&n){const t=be(2);z(1),H("ngForOf",t.test.sections)}}function Vre(n,e){if(1&n&&(R(0,"div"),$e(1,"img",42),S()),2&n){const t=e.$implicit;z(1),H("src",t,kr)}}function Bre(n,e){if(1&n&&(R(0,"div"),ge(1,Vre,2,1,"div",18),S()),2&n){const t=be(2).$implicit;z(1),H("ngForOf",$o(1,az,t.articleUrl))}}function Ure(n,e){if(1&n&&(R(0,"div",15),ge(1,Bre,2,3,"div",16),S()),2&n){const t=be().$implicit,i=be(3);z(1),H("ngIf",i.isString(t.articleUrl))}}function jre(n,e){1&n&&$e(0,"p",30),2&n&&H("innerHTML",be().$implicit.text,Vi)}function zre(n,e){1&n&&$e(0,"img",44),2&n&&H("src",be().$implicit.imageUrl,kr)}function $re(n,e){if(1&n){const t=zn();R(0,"div",32)(1,"input",33),Me("ngModelChange",function(r){return Gt(t),jt(be(2).$implicit.userAnswer=r)}),S(),$e(2,"label",34),S()}if(2&n){const t=e.$implicit,i=be(2).$implicit;z(1),H("name",i.id)("value",t)("id",t+i.id)("ngModel",i.userAnswer),z(1),H("for",t+i.id)("innerHTML",t,Vi)}}function Hre(n,e){if(1&n&&(R(0,"div"),ge(1,$re,3,6,"div",31),S()),2&n){const t=be().$implicit;z(1),H("ngForOf",t.options)}}function qre(n,e){if(1&n){const t=zn();R(0,"div")(1,"input",35),Me("ngModelChange",function(r){return Gt(t),jt(be().$implicit.userAnswer=r)}),S()()}if(2&n){const t=be().$implicit;z(1),H("ngModel",t.userAnswer)}}function Wre(n,e){1&n&&(R(0,"div")(1,"p"),G(2,"Question canceled by NUCEM"),S()())}function Gre(n,e){if(1&n&&(R(0,"div",23)(1,"div",24),$e(2,"p",25),ge(3,jre,1,1,"p",26),ge(4,zre,1,1,"img",43),S(),ge(5,Hre,2,1,"div",16),ge(6,qre,2,1,"div",16),ge(7,Wre,3,0,"div",16),S()),2&n){const t=e.$implicit;z(2),H("innerHTML",t.id,Vi),z(1),H("ngIf",t.text),z(1),H("ngIf",t.imageUrl),z(1),H("ngIf","select"===t.questionType),z(1),H("ngIf","input"===t.questionType),z(1),H("ngIf","canceled"===t.questionType)}}function Zre(n,e){if(1&n&&(R(0,"div",12)(1,"div"),ge(2,Ure,2,1,"div",13),ge(3,Gre,8,6,"div",14),S()()),2&n){const t=e.$implicit;z(2),H("ngIf",t.articleUrl),z(1),H("ngForOf",t.questions)}}function Kre(n,e){if(1&n&&(R(0,"div",10),ge(1,Zre,4,2,"div",11),S()),2&n){const t=be(2);z(1),H("ngForOf",t.test.sections)}}function Yre(n,e){1&n&&$e(0,"p",30),2&n&&H("innerHTML",be().$implicit.text,Vi)}function Qre(n,e){1&n&&$e(0,"img",50),2&n&&H("src",be().$implicit.imageUrl,kr)}function Xre(n,e){if(1&n){const t=zn();R(0,"div")(1,"input",35),Me("ngModelChange",function(r){return Gt(t),jt(be().$implicit.userAnswer=r)}),S()()}if(2&n){const t=be().$implicit;z(1),H("ngModel",t.userAnswer)}}function Jre(n,e){if(1&n){const t=zn();R(0,"div",32)(1,"input",33),Me("ngModelChange",function(r){return Gt(t),jt(be(2).$implicit.userAnswer=r)}),S(),$e(2,"label",34),S()}if(2&n){const t=e.$implicit,i=be(2).$implicit;z(1),H("name",i.id)("value",t)("id",t+i.id)("ngModel",i.userAnswer),z(1),H("for",t+i.id)("innerHTML",t,Vi)}}function eoe(n,e){if(1&n&&(R(0,"div"),ge(1,Jre,3,6,"div",31),S()),2&n){const t=be().$implicit;z(1),H("ngForOf",t.options)}}function toe(n,e){1&n&&(R(0,"div")(1,"p"),G(2,"Question canceled by NUCEM"),S()())}function noe(n,e){if(1&n&&(R(0,"div",46)(1,"div",47),$e(2,"p",48),ge(3,Yre,1,1,"p",26),S(),R(4,"div",20),ge(5,Qre,1,1,"img",49),S(),ge(6,Xre,2,1,"div",16),ge(7,eoe,2,1,"div",16),ge(8,toe,3,0,"div",16),S()),2&n){const t=e.$implicit;z(2),H("innerHTML",t.id,Vi),z(1),H("ngIf",t.text),z(2),H("ngIf",t.imageUrl),z(1),H("ngIf","input"===t.questionType),z(1),H("ngIf","select"===t.questionType),z(1),H("ngIf","canceled"===t.questionType)}}function ioe(n,e){if(1&n&&(R(0,"div",12)(1,"div"),ge(2,noe,9,6,"div",45),S()()),2&n){const t=e.$implicit;z(2),H("ngForOf",t.questions)}}function roe(n,e){if(1&n&&(R(0,"div",10),ge(1,ioe,3,1,"div",11),S()),2&n){const t=be(2);z(1),H("ngForOf",t.test.sections)}}function ooe(n,e){if(1&n&&(R(0,"div",51)(1,"div",52)(2,"div",53)(3,"h1"),G(4,"Vyhodnotenie"),S(),R(5,"p"),G(6,"V teste ste dosiahli:"),S(),$e(7,"p",54),S(),R(8,"div",55)(9,"button",56),G(10," Domovsk\xe1 str\xe1nka "),S(),R(11,"button",57),G(12," Detaily testu "),S()()()()),2&n){const t=be(2);z(7),H("innerText",t.testResults.percentageScore+"%")}}const soe=function(n){return{"rotate-180":n}};function aoe(n,e){if(1&n){const t=zn();R(0,"div",1)(1,"div",2),ge(2,vre,2,1,"div",3),R(3,"div",4)(4,"span",5),Me("click",function(){return Gt(t),jt(be().expandTimer())}),G(5," expand_more "),S()()(),ge(6,Lre,2,1,"div",6),ge(7,Kre,2,1,"div",6),ge(8,roe,2,1,"div",6),R(9,"button",7),Me("click",function(){return Gt(t),jt(be().submitTest())}),G(10," Vyhodnoti\u0165 test "),S(),ge(11,ooe,13,1,"div",8),S()}if(2&n){const t=be();z(2),H("ngIf",t.windowShown),z(2),H("ngClass",$o(6,soe,t.windowShown)),z(2),H("ngIf","anj"===t.subCat),z(1),H("ngIf","sjl"===t.subCat),z(1),H("ngIf","mat"===t.subCat),z(3),H("ngIf",t.testResults)}}let lz=(()=>{class n{expandTimer(){this.windowShown=!this.windowShown}isString(t){return"string"==typeof t}isArray(t){return Array.isArray(t)}constructor(t,i){this.route=t,this.testService=i,this.windowShown=!0,this.route.params.subscribe(r=>{r&&(this.subCat=r.subCat,this.year=r.year,this.fetchTest().subscribe(o=>{this.test=o,console.log(this.test)},o=>{console.error("Error fetching test:",o)}))}),this.timer()}fetchTest(){return this.subCat&&this.year?this.testService.getTest(this.subCat,this.year,!1):new Ke(t=>{t.next({}),t.complete()})}submitTest(){if(this.test){let t={subCat:this.subCat||"",year:this.year||"",finishedAt:(new Date).toISOString(),timeTaken:this.getRemainingTimeInSeconds(),score:0,percentageScore:0,sections:[]};for(const i of this.test.sections){const r=[];for(const s of i.questions)("select_twice"===s.questionType||"input_twice"===s.questionType)&&(void 0===s.userAnswer||void 0===s.userAnswer_2||""===s.userAnswer||""===s.userAnswer_2?s.userAnswer="Nevyplnen\xe9":"select_twice"===s.questionType?s.userAnswer=s.userAnswer+"-"+s.userAnswer_2:"input_twice"===s.questionType&&(s.userAnswer=s.userAnswer.trim()+", "+s.userAnswer_2.trim())),(void 0===s.userAnswer||""===s.userAnswer)&&(s.userAnswer="Nevyplnen\xe9"),r.push({id:s.id,userAnswer:s.userAnswer,result:!1});t.sections.push({results:r})}this.testService.getTestResult(t).subscribe(i=>{this.testResults=i,this.testService.saveTestStatistics(t.subCat,t.percentageScore,t.timeTaken)},i=>{console.error("Error updating test results:",i)})}}getTime(){switch(this.subCat){case"anj":{const t=this.year?.split("-")[1];return"B1"===t?100:"B2"===t?120:"C1"===t?150:(console.error("Unknown level"),0)}case"sjl":return 100;case"mat":return 150;default:return console.error("Unknown subCat"),0}}timer(t=this.getTime()){let i=60*t,r="0",o=60;const s=t<10?"0":"",a=setInterval(()=>{i--,0!=o?o--:o=59,r=o<10?"0"+o:o,this.display=`${s}${Math.floor(i/60)}:${r}`,0==i&&(this.submitTest(),clearInterval(a))},1e3)}getRemainingTimeInSeconds(){const t=this.display.split(":"),o=60*parseInt(t[0])+parseInt(t[1]);let a=60*this.getTime()-o;const l=Math.floor(a/60);return a%=60,l+":"+(a<10?"0"+a:a)}static#e=this.\u0275fac=function(i){return new(i||n)(q(Dl),q(Rg))};static#t=this.\u0275cmp=An({type:n,selectors:[["app-official-test-page"]],decls:1,vars:1,consts:[["class","flex flex-col items-center dark:text-ang-text_white relative",4,"ngIf"],[1,"flex","flex-col","items-center","dark:text-ang-text_white","relative"],[1,"sticky","top-[5rem]","z-40","flex","flex-col","justify-center","items-center"],["id","timer","class","bg-ang-main_btn text-white w-[4.5rem] h-8 flex items-center justify-center text-xl rounded-b-md",4,"ngIf"],[1,"flex","items-center","justify-center","text-white","rounded-b-md","bg-ang-main_btn","w-10","h-4","border","border-ang-border_main"],[1,"material-symbols-outlined","hover:cursor-pointer","transition-all",3,"ngClass","click"],["class","flex flex-col items-center",4,"ngIf"],[1,"border-2","border-ang-border_main","my-2","py-2","px-6","bg-ang-main_btn","text-ang-text_white","rounded-lg","hover:opacity-85","transition",3,"click"],["id","dialog","class","fixed left-0 top-0 w-screen h-screen bg-opacity-40 bg-black justify-center items-center flex",4,"ngIf"],["id","timer",1,"bg-ang-main_btn","text-white","w-[4.5rem]","h-8","flex","items-center","justify-center","text-xl","rounded-b-md"],[1,"flex","flex-col","items-center"],["class","flex flex-col items-center max-w-[720px] text-sm sm:text-base px-2 md:px-0 md:border-x-2 md:border-ang-border_main",4,"ngFor","ngForOf"],[1,"flex","flex-col","items-center","max-w-[720px]","text-sm","sm:text-base","px-2","md:px-0","md:border-x-2","md:border-ang-border_main"],["class","pb-4",4,"ngIf"],["class","py-4 px-4 border-b border-ang-border_main",4,"ngFor","ngForOf"],[1,"pb-4"],[4,"ngIf"],["class","flex items-center justify-center",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"w-[720px]","object-cover","h-full",3,"src"],[1,"flex","items-center","justify-center"],["controls","",1,"pt-4"],["type","audio/mpeg",3,"src"],[1,"py-4","px-4","border-b","border-ang-border_main"],[1,"flex","gap-3","items-center","pb-2"],[1,"bg-slate-400","px-2","py-0.5",3,"innerHTML"],[3,"innerHTML",4,"ngIf"],["class","w-[720px] object-cover h-full",3,"src",4,"ngIf"],["class","flex flex-col gap-2",4,"ngIf"],["class","flex gap-4 flex-wrap",4,"ngIf"],[3,"innerHTML"],["class","flex gap-2",4,"ngFor","ngForOf"],[1,"flex","gap-2"],["type","radio",3,"name","value","id","ngModel","ngModelChange"],[3,"for","innerHTML"],["type","text","placeholder","Sem nap\xed\u0161te svoju odpove\u010f",1,"py-0.5","px-2","rounded-md","border","border-ang-border_main","w-full",3,"ngModel","ngModelChange"],[1,"flex","flex-col","gap-2"],[1,"flex","items-center","justify-evenly"],["type","radio",1,"mr-2",3,"name","value","id","ngModel","ngModelChange"],[1,"flex","gap-4","flex-wrap"],["type","text","placeholder","Sem nap\xed\u0161te prv\xfa odpove\u010f",1,"py-0.5","px-2","rounded-md","border","border-ang-border_main","w-full","md:w-[48%]",3,"ngModel","ngModelChange"],["type","text","placeholder","Sem nap\xed\u0161te druh\xfa odpove\u010f",1,"py-0.5","px-2","rounded-md","border","border-ang-border_main","w-full","md:w-[49.5%]",3,"ngModel","ngModelChange"],[1,"w-[720px]","object-cover","h-full","dark:invert",3,"src"],[3,"src",4,"ngIf"],[3,"src"],["class","border-b border-ang-border_main p-4",4,"ngFor","ngForOf"],[1,"border-b","border-ang-border_main","p-4"],[1,"flex","gap-4","py-2"],[1,"bg-slate-400","px-2","py-0.5","h-fit",3,"innerHTML"],["class","py-2",3,"src",4,"ngIf"],[1,"py-2",3,"src"],["id","dialog",1,"fixed","left-0","top-0","w-screen","h-screen","bg-opacity-40","bg-black","justify-center","items-center","flex"],[1,"bg-ang-main_bg","border","border-ang-border_main","p-8","w-4/6","rounded-lg","max-w-[32rem]"],[1,"flex","justify-center","items-center","flex-col","gap-4","text-sm","md:text-base"],[3,"innerText"],[1,"flex","justify-around","text-xs","md:text-base","gap-2","pt-4"],["routerLink","/",1,"text-sm","border","border-ang-border_main","py-1","px-2","rounded-lg","bg-ang-main_btn","text-ang-text_white","hover:opacity-85"],["routerLink","/test-history",1,"border","border-ang-border_main","py-1","px-2","rounded-lg","bg-ang-main_btn","text-ang-text_white","hover:opacity-85"]],template:function(i,r){1&i&&ge(0,aoe,12,8,"div",0),2&i&&H("ngIf",r.test)},dependencies:[uy,el,So,Ea,RA,Kc,Nh,Ss]})}return n})();function loe(n,e){if(1&n&&(R(0,"div",8)(1,"p"),G(2),S()()),2&n){const t=be();z(2),ps(t.errorMessage)}}let cz=(()=>{class n{constructor(t){this.router=t,this.email="",this.isError=!1,this.errorMessage="Nespr\xe1vny form\xe1t emailu.",this.isDarkMode=!1}isValidEmail(){this.isError=!/^[\w\-\.]+@([\w-]+\.)+[\w-]{2,}$/.test(this.email)}sendPasswordResetEmail(){const t=(0,mc.o)();if(this.isValidEmail(),!this.isError)try{(0,mc.a5)(t,this.email),this.isError=!1,this.router.navigate([""])}catch(i){console.error(`Error sending password reset email: ${i.code} - ${i.message}`)}}static#e=this.\u0275fac=function(i){return new(i||n)(q(Pi))};static#t=this.\u0275cmp=An({type:n,selectors:[["app-forgot-password"]],decls:13,vars:2,consts:[[1,"outer_container"],[1,"inner_container","items-center","justify-center","p-2"],[1,"border","border-ang-border_main","rounded-lg","flex","flex-col","justify-around","h-2/3","px-2","md:px-4","bg-ang-border_main","text-ang-text_white"],[1,"text-xl","font-bold"],["class","text-center text-red-600 font-bold",4,"ngIf"],[1,"flex","flex-col","gap-4","justify-center","items-center"],["type","email","placeholder","Zadaj svoj email",1,"rounded-sm","w-3/4","py-1",3,"ngModel","ngModelChange"],[1,"border","border-ang-main_bg","px-4","py-1","rounded-lg","hover:opacity-85","mb-2","sm:mb-0","bg-ang-main_bg","text-ang-text_main",3,"click"],[1,"text-center","text-red-600","font-bold"]],template:function(i,r){1&i&&(R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h2",3),G(5,"Resetovanie zabudnut\xe9ho hesla"),S(),R(6,"p"),G(7,"zadaj svoj email a pr\xedde ti link na mail na resetovanie hesla"),S()(),ge(8,loe,3,1,"div",4),R(9,"div",5)(10,"input",6),Me("ngModelChange",function(s){return r.email=s}),S(),R(11,"button",7),Me("click",function(){return r.sendPasswordResetEmail()}),G(12," Odo\u0161li "),S()()()()()),2&i&&(z(8),H("ngIf",r.isError),z(2),H("ngModel",r.email))},dependencies:[So,Ea,Kc,Nh]})}return n})(),uz=(()=>{class n{constructor(t){this.firestore=t}getTestStatistics(t,i){return b(this.firestore.collection("users").doc(t).collection("userStatistics").doc("subjects").collection(i).get()).pipe(ve(c=>{const h=[];return c.forEach(_=>{const E=_.data();h.push({percentageScore:E.percentageScore,timeTaken:E.timeTaken})}),{averagePercentage:this.calculateAveragePercentage(h),averageTime:this.calculateAverageTime(h)}}))}calculateAveragePercentage(t){return 0===t.length?0:t.reduce((r,o)=>r+o.percentageScore,0)/t.length}calculateAverageTime(t){if(0===t.length)return"00:00:00";const r=t.reduce((o,s)=>o+this.timeStringToSeconds(s.timeTaken),0)/t.length;return this.secondsToTimeString(r)}timeStringToSeconds(t){const i=t.split(":");return 3600*+i[0]+60*+i[1]+ +i[2]}secondsToTimeString(t){return[Math.floor(t/3600),Math.floor(t%3600/60),Math.floor(t%60)].map(s=>s<10?"0"+s:s).join(":")}getTestCountBySubject(t,i){return b(this.firestore.collection("users").doc(t).collection("userStatistics").doc("subjects").collection(i).get()).pipe(ve(s=>s.size))}getAvailableIcons(){return["assets/user_icons/boy.png","assets/user_icons/girl.png","assets/user_icons/default.png"]}getSelectedIcon(){return this.selectedIcon||"assets/user_icons/default.png"}static#e=this.\u0275fac=function(i){return new(i||n)(F($B))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function coe(n,e){if(1&n){const t=zn();R(0,"div")(1,"img",5),Me("click",function(){const o=Gt(t).$implicit;return jt(be(2).selectIcon(o))}),S()()}if(2&n){const t=e.$implicit,i=be(2);z(1),uc("selected",t===i.userServ.selectedIcon),H("src",t,kr)}}function uoe(n,e){if(1&n&&(R(0,"div",3),ge(1,coe,2,3,"div",4),S()),2&n){const t=be();z(1),H("ngForOf",t.availableIcons)}}let UA=(()=>{class n{constructor(t,i){this.userServ=t,this.er=i,this.showIconSelection=!1}handleClick(t){this.er.nativeElement.contains(t.target)||(this.showIconSelection=!1)}ngOnInit(){this.defaultIcon="assets/user_icons/default.png",this.availableIcons=this.userServ.getAvailableIcons()}toggleIconSelection(){this.updateAvailableIcons(),this.showIconSelection=!this.showIconSelection}selectIcon(t){this.userServ.selectedIcon=t,this.showIconSelection=!1}getSelectedIcon(){return this.userServ.getSelectedIcon()}updateAvailableIcons(){this.availableIcons=this.userServ.getAvailableIcons().filter(t=>t!==this.userServ.selectedIcon),this.userServ.selectedIcon||(this.availableIcons=this.availableIcons.filter(t=>t!==this.defaultIcon))}static#e=this.\u0275fac=function(i){return new(i||n)(q(uz),q(ei))};static#t=this.\u0275cmp=An({type:n,selectors:[["app-icon-selector"]],hostBindings:function(i,r){1&i&&Me("click",function(s){return r.handleClick(s)},0,Ww)},decls:3,vars:2,consts:[[1,"relative","hover:cursor-pointer",3,"click"],["alt","Vyber ikonku",1,"w-20","h-20","hover:opacity-85",3,"src"],["class","icon_selection absolute bg-ang-main_bg border border-ang-border_main flex flex-wrap rounded-sm mt-4",4,"ngIf"],[1,"icon_selection","absolute","bg-ang-main_bg","border","border-ang-border_main","flex","flex-wrap","rounded-sm","mt-4"],[4,"ngFor","ngForOf"],["alt","Icon",1,"w-20","h-20","hover:opacity-85",3,"src","click"]],template:function(i,r){1&i&&(R(0,"div",0),Me("click",function(){return r.toggleIconSelection()}),$e(1,"img",1),ge(2,uoe,2,1,"div",2),S()),2&i&&(z(1),H("src",r.getSelectedIcon(),kr),z(1),H("ngIf",r.showIconSelection))},dependencies:[el,So]})}return n})(),dz=(()=>{class n{constructor(t,i,r){this.authService=t,this.userAccountService=i,this.cookieService=r,this.userName="",this.isDarkMode=!1,this.darkMode=!1,this.sjlTestCount=0,this.anjTestCount=0,this.matTestCount=0,this.sjlAveragePercentage=0,this.anjAveragePercentage=0,this.matAveragePercentage=0,this.sjlAverageTime="00:00:00",this.anjAverageTime="00:00:00",this.matAverageTime="00:00:00",this.darkToggle=document.querySelector(".toggle_dark")}ngOnInit(){this.authService.userData.subscribe(t=>{if(t){this.userName=t.displayName||"";const i=this.cookieService.get("uid");i&&(this.userAccountService.getTestCountBySubject(i,"sjl").subscribe(r=>this.sjlTestCount=r),this.userAccountService.getTestCountBySubject(i,"anj").subscribe(r=>this.anjTestCount=r),this.userAccountService.getTestCountBySubject(i,"mat").subscribe(r=>this.matTestCount=r),this.sjlStatistics$=this.userAccountService.getTestStatistics(i,"SJL"),this.anjStatistics$=this.userAccountService.getTestStatistics(i,"ANJ"),this.matStatistics$=this.userAccountService.getTestStatistics(i,"MAT"),this.sjlStatistics$.subscribe(r=>{this.sjlAveragePercentage=r.averagePercentage,this.sjlAverageTime=r.averageTime}),this.anjStatistics$.subscribe(r=>{this.anjAveragePercentage=r.averagePercentage,this.anjAverageTime=r.averageTime}),this.matStatistics$.subscribe(r=>{this.matAveragePercentage=r.averagePercentage,this.matAverageTime=r.averageTime}))}})}toggleDark(){this.darkMode=!this.darkMode,this.darkMode?document.documentElement.classList.toggle("dark"):document.documentElement.classList.remove("dark")}static#e=this.\u0275fac=function(i){return new(i||n)(q(ba),q(uz),q(vc))};static#t=this.\u0275cmp=An({type:n,selectors:[["app-user-account"]],decls:70,vars:10,consts:[[1,"outer_container"],[1,"inner_container","flex-col","p-2","text-ang-text_main"],[1,"flex","flex-col","items-center","gap-2","border-b","border-ang-border_main"],[1,"min-w-20","min-h-20"],[1,"flex","flex-col","text-center","pb-2"],[1,"font-bold"],[1,"border","border-ang-border_main","toggle_dark",3,"click"],[1,"text-center","flex","flex-col","gap-8","py-8","dark:text-ang-text_white"],[1,"text-3xl"],[1,""],[1,"flex","flex-col","lg:flex-row","items-center","justify-center","gap-1"],[1,"profileLeftCard"],[1,"text-xl"],[1,"text-lg"],[1,"profileMiddleCard"],[1,"profileRightCard"]],template:function(i,r){1&i&&(R(0,"div",0)(1,"div",1)(2,"div",2),$e(3,"app-icon-selector",3),R(4,"div",4)(5,"h1",5),G(6),S(),R(7,"button",6),Me("click",function(){return r.toggleDark()}),G(8," Dark mode "),S()()(),R(9,"div",7)(10,"h2",8),G(11,"Slovensk\xfd jazyk a literat\xfara"),S(),R(12,"div",9)(13,"dl",10)(14,"div",11)(15,"dt",12),G(16,"Spraven\xe9 testy"),S(),R(17,"dd",13),G(18),S()(),R(19,"div",14)(20,"dt",12),G(21,"Priemern\xe1 \xfaspe\u0161nos\u0165"),S(),R(22,"dd",13),G(23),S()(),R(24,"div",15)(25,"dt",12),G(26,"New users annually"),S(),R(27,"dd",13),G(28),S()()()()(),R(29,"div",7)(30,"h2",8),G(31,"Matematika"),S(),R(32,"div",9)(33,"dl",10)(34,"div",11)(35,"dt",12),G(36,"Spraven\xe9 testy"),S(),R(37,"dd",13),G(38),S()(),R(39,"div",14)(40,"dt",12),G(41,"Priemern\xe1 \xfaspe\u0161nos\u0165"),S(),R(42,"dd",13),G(43),S()(),R(44,"div",15)(45,"dt",12),G(46,"New users annually"),S(),R(47,"dd",13),G(48),S()()()()(),R(49,"div",7)(50,"h2",8),G(51,"Anglick\xfd jazyk"),S(),R(52,"div",9)(53,"dl",10)(54,"div",11)(55,"dt",12),G(56,"Spraven\xe9 testy"),S(),R(57,"dd",13),G(58),S()(),R(59,"div",14)(60,"dt",12),G(61,"Priemern\xe1 \xfaspe\u0161nos\u0165"),S(),R(62,"dd",13),G(63),S()(),R(64,"div",15)(65,"dt",12),G(66,"New users annually"),S(),R(67,"dd",13),G(68),S()()()()()()(),G(69,"\n+\n")),2&i&&(z(6),ps(r.userName),z(12),ps(r.sjlTestCount),z(5),Yi("",r.sjlAveragePercentage,"%"),z(5),ps(r.sjlAverageTime),z(10),ps(r.anjTestCount),z(5),Yi("",r.anjAveragePercentage,"%"),z(5),ps(r.anjAverageTime),z(10),ps(r.matTestCount),z(5),Yi("",r.matAveragePercentage,"%"),z(5),ps(r.matAverageTime))},dependencies:[UA]})}return n})(),doe=(()=>{class n{constructor(t){this.firestore=t}getFile(t){const i=ri(this.firestore,"edu_materials"),r=ir(i,"Subjects"),o=ri(r,t);return b(lre(r).then(s=>{if(s.exists())return s.id;throw new Error("Document not found")})),b(Lh(o).then(s=>s.docs.map(l=>({id:l.id,text:l.data().text,url:l.data().url})).sort((l,c)=>l.id.localeCompare(c.id))))}static#e=this.\u0275fac=function(i){return new(i||n)(F(Fh))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hoe(n,e){if(1&n&&(R(0,"div")(1,"a",7),$e(2,"img",8),R(3,"p",9),G(4),S()()()),2&n){const t=e.$implicit;z(1),H("href",t.url,kr),z(3),Yi(" ",t.text," ")}}function foe(n,e){if(1&n&&(R(0,"div",5),ge(1,hoe,5,2,"div",6),S()),2&n){const t=be();z(1),H("ngForOf",t.sjlMaterials)}}function poe(n,e){if(1&n&&(R(0,"div")(1,"a",7),$e(2,"img",8),R(3,"p",9),G(4),S()()()),2&n){const t=e.$implicit;z(1),H("href",t.url,kr),z(3),Yi(" ",t.text," ")}}function moe(n,e){if(1&n&&(R(0,"div",10),ge(1,poe,5,2,"div",6),S()),2&n){const t=be();z(1),H("ngForOf",t.anjMaterials)}}function goe(n,e){if(1&n&&(R(0,"div")(1,"a",7),$e(2,"img",8),R(3,"p",9),G(4),S()()()),2&n){const t=e.$implicit;z(1),H("href",t.url,kr),z(3),Yi(" ",t.text," ")}}function _oe(n,e){if(1&n&&(R(0,"div",10),ge(1,goe,5,2,"div",6),S()),2&n){const t=be();z(1),H("ngForOf",t.matMaterials)}}let hz=(()=>{class n{constructor(t){this.eduService=t,this.sjlMaterials=[],this.anjMaterials=[],this.matMaterials=[],this.showSjlNotes=!1,this.showAnjNotes=!1,this.showMatNotes=!1,this.isDarkMode=!1}ngOnInit(){this.eduService.getFile("SJL").subscribe(t=>{this.sjlMaterials=t}),this.eduService.getFile("ANJ").subscribe(t=>{this.anjMaterials=t}),this.eduService.getFile("MAT").subscribe(t=>{this.matMaterials=t})}toggleShowSjlNotes(){this.showSjlNotes=!this.showSjlNotes}toggleShowAnjNotes(){this.showAnjNotes=!this.showAnjNotes}toggleShowMatNotes(){this.showMatNotes=!this.showMatNotes}static#e=this.\u0275fac=function(i){return new(i||n)(q(doe))};static#t=this.\u0275cmp=An({type:n,selectors:[["app-education-materials"]],decls:14,vars:3,consts:[[1,"outer_container"],[1,"flex","flex-wrap","justify-around","sm:m-5","sm:p-4","sm:rounded-lg","sm:shadow-inner_sh","sm:w-full","gap-2"],[1,"border","border-ang-border_main","rounded-lg","mt-4","bg-ang-main_btn","text-ang-text_white","px-4","py-2","md:px-8","hover:opacity-85",3,"click"],["class","flex flex-col w-40",4,"ngIf"],["class","flex flex-col w-20",4,"ngIf"],[1,"flex","flex-col","w-40"],[4,"ngFor","ngForOf"],["target","_blank",1,"flex","items-center","text-xs","py-1","gap-2",3,"href"],["src","/assets/pdf_icon.png","alt","pdf_icon",1,"h-6","w-auto"],[1,"text-ang-text_main","font-semibold","hover:opacity-85"],[1,"flex","flex-col","w-20"]],template:function(i,r){1&i&&(R(0,"div",0)(1,"div",1)(2,"div")(3,"button",2),Me("click",function(){return r.toggleShowSjlNotes()}),G(4," Slovensk\xfd jazyk "),S(),ge(5,foe,2,1,"div",3),S(),R(6,"div")(7,"button",2),Me("click",function(){return r.toggleShowAnjNotes()}),G(8," Anglick\xfd jazyk "),S(),ge(9,moe,2,1,"div",4),S(),R(10,"div")(11,"button",2),Me("click",function(){return r.toggleShowMatNotes()}),G(12," Matematika "),S(),ge(13,_oe,2,1,"div",4),S()()()),2&i&&(z(5),H("ngIf",r.showSjlNotes),z(4),H("ngIf",r.showAnjNotes),z(4),H("ngIf",r.showMatNotes))},dependencies:[el,So]})}return n})();class fz{}class voe{}const wa="*";function jA(n,e){return{type:7,name:n,definitions:e,options:{}}}function Mg(n,e=null){return{type:4,styles:e,timings:n}}function mz(n,e=null){return{type:2,steps:n,options:e}}function Yo(n){return{type:6,styles:n,offset:null}}function Pg(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}class kg{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class vz{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const o=this.players.length;0==o?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}let yoe=(()=>{class n{constructor(t,i){this.firestore=t,this.testService=i}getSavedTests(t){const i=ri(this.firestore,"users"),r=ir(i,t),o=ri(r,"savedTests");return b(Lh(o)).pipe(ve(s=>{const a=[],l=[],c=[],h=[];s.forEach(g=>{const _=g.data(),E={subCat:_.subCat,year:_.year,finishedAt:this.formatDate(_.finishedAt),timeTaken:_.timeTaken,score:_.score,percentageScore:_.percentageScore,sections:_.sections.map(x=>({results:x.results.map(T=>({id:T.id,userAnswer:T.userAnswer,result:T.result}))}))};h.push(E),c.includes(E.subCat+"-"+E.year)||(c.push(E.subCat+"-"+E.year),this.testService.getTest(E.subCat,E.year,!0).subscribe(x=>{l.push(x)}))});const p=h.sort((g,_)=>{const E=new Date(g.finishedAt);return new Date(_.finishedAt).getTime()-E.getTime()});return a.push(p),a.push(l),a}))}formatDate(t){const i=new Date(t);return`${i.getFullYear()}-${("0"+(i.getMonth()+1)).slice(-2)}-${("0"+i.getDate()).slice(-2)} ${("0"+i.getHours()).slice(-2)}:${("0"+i.getMinutes()).slice(-2)}`}removeOldestTest(t){const i=new y(!0),r=ri(this.firestore,"users"),o=ir(r,t),s=ri(o,"savedTests"),a=[];return b(Lh(s)).pipe(Ch(()=>i.next(!1))).subscribe({next:l=>{l.forEach(h=>{a.push({id:h.id,data:h.data()})});const c=a.sort((h,p)=>{const g=new Date(h.data.finishedAt),_=new Date(p.data.finishedAt);return g.getTime()-_.getTime()});for(;c.length>10;){const h=c.shift();if(h){const g=ir(s,h.id);b(are(g)).subscribe({next:()=>console.log("Document successfully deleted!"),error:_=>console.error("Error deleting document: ",_)})}}},error:l=>{console.error("Error fetching saved tests:",l),i.next(!1)}}),i.asObservable()}static#e=this.\u0275fac=function(i){return new(i||n)(F(Fh),F(Rg))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function boe(n,e){1&n&&(R(0,"div",7),$e(1,"div")(2,"div")(3,"div")(4,"div"),S())}function Eoe(n,e){if(1&n&&(R(0,"div"),$e(1,"p",26),S()),2&n){const t=e.$implicit;z(1),H("innerHTML",t,Vi)}}function woe(n,e){1&n&&$e(0,"span",27),2&n&&H("innerHTML",be(2).$implicit.userAnswer,Vi)}function Ioe(n,e){1&n&&$e(0,"span",28),2&n&&H("innerHTML",be(2).$implicit.userAnswer,Vi)}function xoe(n,e){if(1&n&&(R(0,"div",20)(1,"div",21),$e(2,"p",22)(3,"p",23),S(),ge(4,Eoe,2,1,"div",18),R(5,"p"),G(6,"Va\u0161a odpove\u010f:"),S(),ge(7,woe,1,1,"span",24),ge(8,Ioe,1,1,"ng-template",null,25,Ok),S()),2&n){const t=function kM(n){return function Va(n,e){return n[e]}(function Lf(){return Ye.lFrame.contextLView}(),vt+n)}(9),i=be(),r=i.$implicit,o=i.index,s=be().index,a=be(4);z(2),H("innerHTML",r.id,Vi),z(1),H("innerHTML",a.selectedTest.sections[s].questions[o].text,Vi),z(1),H("ngForOf",a.selectedTest.sections[s].questions[o].options),z(3),H("ngIf",r.result)("ngIfElse",t)}}function Coe(n,e){if(1&n&&(R(0,"div"),ge(1,xoe,10,5,"div",19),S()),2&n){const t=e.$implicit;z(1),H("ngIf",t.userAnswer)}}function Toe(n,e){if(1&n&&(R(0,"div"),ge(1,Coe,2,1,"div",18),S()),2&n){const t=e.$implicit;z(1),H("ngForOf",t.results)}}function Doe(n,e){if(1&n&&(R(0,"div",17),ge(1,Toe,2,1,"div",18),S()),2&n){const t=be().$implicit;H("@fade",void 0),z(1),H("ngForOf",t.sections)}}function Aoe(n,e){1&n&&(R(0,"div",29),G(1," expand_more "),S())}function Soe(n,e){1&n&&(R(0,"div",30),G(1," expand_more "),S())}function Roe(n,e){if(1&n){const t=zn();R(0,"div",10)(1,"div",11)(2,"div",12)(3,"h2"),G(4),S(),R(5,"h3"),G(6),S()(),ge(7,Doe,2,2,"div",13),S(),R(8,"div",14),Me("click",function(){const o=Gt(t).$implicit,s=be(2);return jt((o.showResults=!o.showResults)&&s.selectTest(o))}),ge(9,Aoe,2,0,"div",15),ge(10,Soe,2,0,"div",16),S()()}if(2&n){const t=e.$implicit;z(4),Yi(" ","Test "+t.subCat.toUpperCase()+" "+t.year+" z "+t.finishedAt," "),z(2),Yi(" ","Vyhotoven\xfd za "+t.timeTaken+", s \xfaspe\u0161nos\u0165ou: "+t.percentageScore+"%"," "),z(1),H("ngIf",t.showResults),z(2),H("ngIf",!t.showResults),z(1),H("ngIf",t.showResults)}}function Moe(n,e){if(1&n&&(R(0,"div",8),ge(1,Roe,11,5,"div",9),S()),2&n){const t=be();z(1),H("ngForOf",t.savedTests)}}function Poe(n,e){1&n&&(R(0,"div",31)(1,"h1",32),G(2," Pre ukladanie testov je potrebn\xe9 sa prihl\xe1si\u0165. "),S()())}function koe(n,e){1&n&&(R(0,"div",31)(1,"h1",32),G(2," Pre zobrazenie testov je potrebn\xe9 vyplni\u0165 aspo\u0148 jeden test "),S()())}function Ooe(n,e){if(1&n){const t=zn();R(0,"span",33),Me("click",function(){return Gt(t),jt(be().scrollTop())}),G(1," arrow_upward "),S()}}let yz=(()=>{class n{constructor(t,i,r){this.testHistoryService=t,this.cookieService=i,this.authServ=r,this.isLoading=!1,this.isSavedTestsEmpty=!0,this.savedTests=[],this.originalTests=[],this.selectedTest={},this.topPosToStartShowing=100,this.savedTests.forEach(o=>{o.showResults=!1})}ngOnInit(){this.fetchTestsFromUserHistory()}scrollTop(){window.scroll({top:0,left:0,behavior:"smooth"})}checkScroll(){this.isShow=(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0)>=this.topPosToStartShowing}fetchTestsFromUserHistory(){try{const t=this.cookieService.get("uid");if(!t)return void console.error("Uid is not set. User is not logged in.");this.testHistoryService.removeOldestTest(t).pipe(Ae(()=>this.testHistoryService.getSavedTests(t))).subscribe({next:i=>{this.savedTests=i[0],this.originalTests=i[1],console.log("Tests:",i),this.savedTests.length>0&&(this.isSavedTestsEmpty=!1),console.log("Saved tests:",this.savedTests)},error:i=>{console.error("Error loading saved tests:",i)}})}catch(t){console.error("Error loading saved tests:",t)}}selectTest(t){console.log(this.originalTests),console.log("Test:",t);for(const i of this.originalTests)console.log("Original test:",i),i.subCat===t.subCat&&i.year===t.year&&(this.selectedTest=i,console.log("Selected test:",this.selectedTest))}static#e=this.\u0275fac=function(i){return new(i||n)(q(yoe),q(vc),q(ba))};static#t=this.\u0275cmp=An({type:n,selectors:[["app-test-history-page"]],hostBindings:function(i,r){1&i&&Me("scroll",function(){return r.checkScroll()},0,PR)},decls:8,vars:5,consts:[[1,"outer_container","justify-center","px-2"],[1,"md:inner_container","pt-6","justify-center","gap-4","dark:text-ang-text_white"],[1,"loading"],["class","lds-ellipsis",4,"ngIf"],["class","test-history-page-header",4,"ngIf"],["class","flex items-center justify-center w-full",4,"ngIf"],["class","hover:cursor-pointer material-symbols-outlined fixed bottom-10 right-14 border border-ang-border_main rounded-full p-1 text-ang-text_main",3,"click",4,"ngIf"],[1,"lds-ellipsis"],[1,"test-history-page-header"],["class","py-4",4,"ngFor","ngForOf"],[1,"py-4"],[1,"flex-col","gap-4","items-center","justify-center","border","border-ang-border_main","max-w-[720px]","rounded-md"],[1,"px-12","py-2","text-center","font-semibold","text-ang-text_main"],["class","px-2",4,"ngIf"],[1,"text-center",3,"click"],["class","material-symbols-outlined bg-ang-main_btn rounded-b-lg px-3 hover:cursor-pointer text-white",4,"ngIf"],["class","material-symbols-outlined rotate-180 bg-ang-main_btn rounded-t-lg hover:cursor-pointer px-3 text-white",4,"ngIf"],[1,"px-2"],[4,"ngFor","ngForOf"],["class","py-2 border-b border-ang-border_main",4,"ngIf"],[1,"py-2","border-b","border-ang-border_main"],[1,"flex","gap-4","py-2","items-center"],[1,"bg-slate-400","px-2","py-0.5","h-fit",3,"innerHTML"],[3,"innerHTML"],["class","text-green-500",3,"innerHTML",4,"ngIf","ngIfElse"],["wrongAnswer",""],[1,"py-0.5",3,"innerHTML"],[1,"text-green-500",3,"innerHTML"],[1,"text-red-600",3,"innerHTML"],[1,"material-symbols-outlined","bg-ang-main_btn","rounded-b-lg","px-3","hover:cursor-pointer","text-white"],[1,"material-symbols-outlined","rotate-180","bg-ang-main_btn","rounded-t-lg","hover:cursor-pointer","px-3","text-white"],[1,"flex","items-center","justify-center","w-full"],[1,"text-2xl","text-ang-text_main"],[1,"hover:cursor-pointer","material-symbols-outlined","fixed","bottom-10","right-14","border","border-ang-border_main","rounded-full","p-1","text-ang-text_main",3,"click"]],template:function(i,r){1&i&&(R(0,"div",0)(1,"div",1)(2,"div",2),ge(3,boe,5,0,"div",3),S(),ge(4,Moe,2,1,"div",4),ge(5,Poe,3,0,"div",5),ge(6,koe,3,0,"div",5),ge(7,Ooe,2,0,"span",6),S()()),2&i&&(z(3),H("ngIf",r.isLoading),z(1),H("ngIf",!r.isLoading&&r.authServ.isLoggedIn),z(1),H("ngIf",!r.isLoading&&!r.authServ.isLoggedIn),z(1),H("ngIf",r.isSavedTestsEmpty&&r.authServ.isLoggedIn),z(1),H("ngIf",r.isShow))},dependencies:[el,So],data:{animation:[jA("fade",[Pg(":enter",[Yo({opacity:0}),Mg("0.5s ease-out",Yo({opacity:1}))]),Pg(":leave",[Mg("0.2s ease-in",Yo({opacity:0}))])])]}})}return n})();function Noe(n,e){1&n&&(R(0,"select",14)(1,"option",15),G(2,"B1"),S(),R(3,"option",16),G(4,"B2"),S(),R(5,"option",17),G(6,"C1"),S()())}function Foe(n,e){1&n&&(R(0,"h2"),G(1,"Articles:"),S())}function Loe(n,e){if(1&n){const t=zn();R(0,"div",18),$e(1,"input",23)(2,"br"),R(3,"button",22),Me("click",function(){const o=Gt(t).index,s=be().index;return jt(be().removeArticleUrl(s,o))}),G(4,"Remove article"),S()()}if(2&n){const t=e.index;H("formGroupName",t),z(1),lc("placeholder"," Article: ",t+1,"")}}function Voe(n,e){1&n&&(R(0,"h2"),G(1,"Questions:"),S())}function Boe(n,e){if(1&n){const t=zn();R(0,"div",18),$e(1,"textarea",24)(2,"br"),R(3,"button",22),Me("click",function(){const o=Gt(t).index,s=be().index;return jt(be().removeQuestion(s,o))}),G(4,"Remove question"),S()()}if(2&n){const t=e.index;H("formGroupName",t),z(1),lc("placeholder"," Question: ",t+1,"")}}function Uoe(n,e){if(1&n){const t=zn();R(0,"div",18)(1,"h1"),G(2),S(),R(3,"div",19),ge(4,Foe,2,0,"h2",20),ge(5,Loe,5,2,"div",11),R(6,"button",12),Me("click",function(){const o=Gt(t).index;return jt(be().addArticleUrl(o))}),G(7,"Add article"),S()(),R(8,"div",21),ge(9,Voe,2,0,"h2",20),ge(10,Boe,5,2,"div",11),R(11,"button",12),Me("click",function(){const o=Gt(t).index;return jt(be().addQuestion(o))}),G(12,"Add question"),S()(),R(13,"button",22),Me("click",function(){const o=Gt(t).index;return jt(be().removeSection(o))}),G(14,"Remove section"),S()()}if(2&n){const t=e.index,i=be();H("formGroupName",t),z(2),Yi("Section: ",t+1,""),z(2),H("ngIf",i.getArticleUrls(t).length>0),z(1),H("ngForOf",i.getArticleUrls(t).controls),z(4),H("ngIf",i.getQuestions(t).length>0),z(1),H("ngForOf",i.getQuestions(t).controls)}}let bz=(()=>{class n{constructor(t,i){this.fb=t,this.testService=i,this.testForm=this.fb.group({year:["",qi.required],subCat:["",qi.required],level:["",qi.required],sections:this.fb.array([this.fb.group({sectionNumber:1,articleUrls:this.fb.array([this.fb.group({url:["",qi.required]})]),questions:this.fb.array([this.fb.group({questionJson:["",qi.required]})])})])})}ngOnInit(){}get sections(){return this.testForm.get("sections")}addSection(){this.sections.push(this.fb.group({sectionNumber:this.sections.length+1,articleUrls:this.fb.array([this.fb.group({url:["",qi.required]})]),questions:this.fb.array([this.fb.group({questionJson:["",qi.required]})])}))}removeSection(t){this.sections.removeAt(t)}getArticleUrls(t){return this.sections.at(t).get("articleUrls")}addArticleUrl(t){const i=this.fb.group({url:["",qi.required]});this.getArticleUrls(t).push(i)}removeArticleUrl(t,i){this.getArticleUrls(t).removeAt(i)}getQuestions(t){return this.sections.at(t).get("questions")}addQuestion(t){const i=this.fb.group({questionJson:["",qi.required]});this.getQuestions(t).push(i)}removeQuestion(t,i){this.getQuestions(t).removeAt(i)}onSubmit(){console.log(this.testForm.value),this.testFromIntoTestModel()}testFromIntoTestModel(){var t=this;return(0,ne.Z)(function*(){const i=t.testForm.get("sections"),r={sections:[],subCat:t.testForm.get("subCat").value,year:t.testForm.get("year").value};"anj"===r.subCat&&(r.year+="-"+t.testForm.get("level").value);for(let o=0;o<i.length;o++){const s=i.at(o),a=s.get("articleUrls"),l=s.get("questions"),c={sectionId:"{{i + 1}}",questions:[],articleUrl:[]};o+1<10&&(c.sectionId="0"+(o+1));for(let h=0;h<a.length;h++){const p=a.at(h);c.articleUrl.push(p.get("url").value)}for(let h=0;h<l.length;h++){const p=l.at(h);c.questions=t.parseJson(JSON.parse(p.get("questionJson").value))}r.sections.push(c)}console.log(r),yield t.testService.addOfficialTestToFirestore(r)})()}parseJson(t){const i=[];for(const r in t)if(t.hasOwnProperty(r)){const o=t[r],a=JSON.stringify({id:r,text:o.text||void 0,options:o.options||void 0,answer:o.answer||void 0,questionType:o.questionType,imageUrl:o.imageUrl||void 0,options_2:o.options_2||void 0,userAnswer:"",userAnswer_2:""},(c,h)=>void 0===h?void 0:h),l=JSON.parse(a);i.push(l)}return i}static#e=this.\u0275fac=function(i){return new(i||n)(q(Xj),q(Rg))};static#t=this.\u0275cmp=An({type:n,selectors:[["app-official-test-constructor-page"]],decls:24,vars:4,consts:[[3,"formGroup"],["id","subCat-window"],["for","subCat"],["id","subCat","formControlName","subCat"],["value","anj"],["value","mat"],["value","sjl"],["for","year"],["id","year","formControlName","year","placeholder"," Year"],["id","level","formControlName","level",4,"ngIf"],["formArrayName","sections"],[3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"addButton",3,"click"],["type","submit",3,"disabled","click"],["id","level","formControlName","level"],["value","B1"],["value","B2"],["value","C1"],[3,"formGroupName"],["formArrayName","articleUrls",1,"articleSection"],[4,"ngIf"],["formArrayName","questions",1,"questionSection"],["type","button",1,"removeButton",3,"click"],["type","text","formControlName","url",3,"placeholder"],["formControlName","questionJson",3,"placeholder"]],template:function(i,r){if(1&i&&(R(0,"div")(1,"div")(2,"form",0)(3,"div",1)(4,"label",2),G(5,"Kateg\xf3ria:"),S(),R(6,"select",3)(7,"option",4),G(8,"Angli\u010dtina"),S(),R(9,"option",5),G(10,"Matematika"),S(),R(11,"option",6),G(12,"Sloven\u010dina"),S()()(),R(13,"div")(14,"label",7),G(15,"Rok:"),S(),$e(16,"input",8),ge(17,Noe,7,0,"select",9),S(),R(18,"div",10),ge(19,Uoe,15,6,"div",11),S(),R(20,"button",12),Me("click",function(){return r.addSection()}),G(21,"Add section"),S()(),R(22,"button",13),Me("click",function(){return r.onSubmit()}),G(23,"Submit"),S()()()),2&i){let o;z(2),H("formGroup",r.testForm),z(15),H("ngIf","anj"===(null==(o=r.testForm.get("subCat"))?null:o.value)),z(2),H("ngForOf",r.sections.controls),z(3),H("disabled",r.testForm.invalid)}},dependencies:[el,So,SA,PA,OA,Ea,Tg,Kc,yA,Ig,C0,xg,Cg],styles:["input[_ngcontent-%COMP%]{width:50%;height:2rem;margin:10px;border:1px solid black}select[_ngcontent-%COMP%]{height:2rem;margin:10px;border:1px solid black}textarea[_ngcontent-%COMP%]{width:80%;height:15rem;margin:10px;border:1px solid black}h1[_ngcontent-%COMP%]{font-size:1.5rem;margin:10px}h2[_ngcontent-%COMP%]{font-size:1.2rem;margin:10px}label[_ngcontent-%COMP%]{margin:10px}button[_ngcontent-%COMP%]{margin:10px;padding:2px 4px;background-color:#06b7f9;color:#fff;border:none;border-radius:5px}.addButton[_ngcontent-%COMP%]{background-color:#61c430}.removeButton[_ngcontent-%COMP%]{background-color:#c23e3e}#subCat-window[_ngcontent-%COMP%]{margin-top:10px}.articleSection[_ngcontent-%COMP%], .questionSection[_ngcontent-%COMP%]{margin:20px 10px;border:#06b7f9 1px solid}"]})}return n})();function joe(n,e){1&n&&(R(0,"select",15)(1,"option",16),G(2,"B1"),S(),R(3,"option",17),G(4,"B2"),S(),R(5,"option",18),G(6,"C1"),S()())}function zoe(n,e){1&n&&(R(0,"h2"),G(1,"Articles:"),S())}function $oe(n,e){if(1&n){const t=zn();R(0,"div",19),$e(1,"input",24)(2,"br"),R(3,"button",23),Me("click",function(){const o=Gt(t).index,s=be().index;return jt(be().removeArticleUrl(s,o))}),G(4," Remove article "),S()()}if(2&n){const t=e.index;H("formGroupName",t),z(1),lc("placeholder"," Article: ",t+1,"")}}function Hoe(n,e){1&n&&(R(0,"h2"),G(1,"Questions:"),S())}function qoe(n,e){if(1&n){const t=zn();R(0,"div",19),$e(1,"textarea",25)(2,"br"),R(3,"button",23),Me("click",function(){const o=Gt(t).index,s=be().index;return jt(be().removeQuestion(s,o))}),G(4,"Remove question"),S()()}if(2&n){const t=e.index;H("formGroupName",t),z(1),lc("placeholder"," Question: ",t+1,"")}}function Woe(n,e){if(1&n){const t=zn();R(0,"div",19)(1,"h1"),G(2),S(),R(3,"div",20),ge(4,zoe,2,0,"h2",21),ge(5,$oe,5,2,"div",12),R(6,"button",13),Me("click",function(){const o=Gt(t).index;return jt(be().addArticleUrl(o))}),G(7," Add article "),S()(),R(8,"div",22),ge(9,Hoe,2,0,"h2",21),ge(10,qoe,5,2,"div",12),R(11,"button",13),Me("click",function(){const o=Gt(t).index;return jt(be().addQuestion(o))}),G(12," Add question "),S()(),R(13,"button",23),Me("click",function(){const o=Gt(t).index;return jt(be().removeSection(o))}),G(14," Remove section "),S()()}if(2&n){const t=e.index,i=be();H("formGroupName",t),z(2),Yi("Section: ",t+1,""),z(2),H("ngIf",i.getArticleUrls(t).length>0),z(1),H("ngForOf",i.getArticleUrls(t).controls),z(4),H("ngIf",i.getQuestions(t).length>0),z(1),H("ngForOf",i.getQuestions(t).controls)}}let Ez=(()=>{class n{constructor(t,i){this.fb=t,this.testService=i,this.testForm=this.fb.group({year:["",qi.required],subCat:["",qi.required],level:["",qi.required],sections:this.fb.array([this.fb.group({sectionNumber:1,articleUrls:this.fb.array([this.fb.group({url:["",qi.required]})]),questions:this.fb.array([this.fb.group({questionJson:["",qi.required]})])})])})}ngOnInit(){}get sections(){return this.testForm.get("sections")}addSection(){this.sections.push(this.fb.group({sectionNumber:this.sections.length+1,articleUrls:this.fb.array([this.fb.group({url:["",qi.required]})]),questions:this.fb.array([this.fb.group({questionJson:["",qi.required]})])}))}removeSection(t){this.sections.removeAt(t)}getArticleUrls(t){return this.sections.at(t).get("articleUrls")}addArticleUrl(t){const i=this.fb.group({url:["",qi.required]});this.getArticleUrls(t).push(i)}removeArticleUrl(t,i){this.getArticleUrls(t).removeAt(i)}getQuestions(t){return this.sections.at(t).get("questions")}addQuestion(t){const i=this.fb.group({});this.getQuestions(t).push(i)}removeQuestion(t,i){this.getQuestions(t).removeAt(i)}onSubmit(){console.log(this.testForm.value)}static#e=this.\u0275fac=function(i){return new(i||n)(q(Xj),q(Rg))};static#t=this.\u0275cmp=An({type:n,selectors:[["app-custom-test-constructor"]],decls:27,vars:4,consts:[[3,"formGroup"],["id","subCat-window"],["for","subCat"],["id","subCat","formControlName","subCat"],["value","anj"],["value","mat"],["value","sjl"],["vaue","custom"],["for","year"],["id","year","formControlName","year","placeholder"," Year"],["id","level","formControlName","level",4,"ngIf"],["formArrayName","sections"],[3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"addButton",3,"click"],["type","submit",3,"disabled","click"],["id","level","formControlName","level"],["value","B1"],["value","B2"],["value","C1"],[3,"formGroupName"],["formArrayName","articleUrls",1,"articleSection"],[4,"ngIf"],["formArrayName","questions",1,"questionSection"],["type","button",1,"removeButton",3,"click"],["type","text","formControlName","url",3,"placeholder"],["formControlName","questionJson",3,"placeholder"]],template:function(i,r){if(1&i&&(R(0,"div")(1,"div")(2,"form",0)(3,"div",1)(4,"label",2),G(5,"Kateg\xf3ria:"),S(),R(6,"select",3)(7,"option",4),G(8,"Angli\u010dtina"),S(),R(9,"option",5),G(10,"Matematika"),S(),R(11,"option",6),G(12,"Sloven\u010dina"),S(),R(13,"option",7),G(14,"Vlastn\xe1 kateg\xf3ria"),S()(),$e(15,"input"),S(),R(16,"div")(17,"label",8),G(18,"Rok:"),S(),$e(19,"input",9),ge(20,joe,7,0,"select",10),S(),R(21,"div",11),ge(22,Woe,15,6,"div",12),S(),R(23,"button",13),Me("click",function(){return r.addSection()}),G(24," Add section "),S()(),R(25,"button",14),Me("click",function(){return r.onSubmit()}),G(26," Submit "),S()()()),2&i){let o;z(2),H("formGroup",r.testForm),z(18),H("ngIf","anj"===(null==(o=r.testForm.get("subCat"))?null:o.value)),z(2),H("ngForOf",r.sections.controls),z(3),H("disabled",r.testForm.invalid)}},dependencies:[el,So,SA,PA,OA,Ea,Tg,Kc,yA,Ig,C0,xg,Cg]})}return n})(),wz=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=An({type:n,selectors:[["app-not-found-page"]],decls:8,vars:0,consts:[["id","main_page_container",1,"outer_container"],[1,"inner_container","items-center","justify-center","gap-10","flex-col"],[1,"text-6xl","font-bold","text-ang-text_main"],[1,"text-2xl","text-ang-text_main"],["routerLink","/",1,"w-fit","text-white","px-12","flex","justify-center","py-1.5","border-2","bg-ang-main_btn","border-ang-border_main","rounded-lg","hover:cursor-pointer","overflow-hidden","hover:opacity-90","transition","shadow-md"]],template:function(i,r){1&i&&(R(0,"div",0)(1,"div",1)(2,"h1",2),G(3,"404"),S(),R(4,"h2",3),G(5," Je n\xe1m \u013euto ale str\xe1nka sa nena\u0161la "),S(),R(6,"button",4),G(7," Domovsk\xe1 str\xe1nka "),S()()())},dependencies:[Ss]})}return n})();const Goe=[{path:"",component:T0},{path:"login",component:ez},{path:"register",component:tz},{path:"landing-page",component:T0},{path:"official-categories/:subCat",component:sz},{path:"official-test/:subCat/:year",component:lz},{path:"forgot-password",component:cz},{path:"user-account",component:dz},{path:"education-materials",component:hz},{path:"test-history",component:yz},{path:"official-test-constructor",component:bz},{path:"custom-test-constructor",component:Ez},{path:"icon-selector",component:UA},{path:"**",component:wz}];let Zoe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({imports:[ZU.forRoot(Goe),ZU]})}return n})();const Iz_firebase={apiKey:"AIzaSyDrXz37bgp6zYCw-X9eKtQlg2Q6j4tjDMI",authDomain:"maturity-project.firebaseapp.com",databaseURL:"https://maturity-project-default-rtdb.europe-west1.firebasedatabase.app",projectId:"maturity-project",storageBucket:"maturity-project.appspot.com",messagingSenderId:"759368949191",appId:"1:759368949191:web:a326a11500d8e4c152cde2",measurementId:"G-CJJD6MK3D8"};class D0{}class A0{}class Ms{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),o=r.toLowerCase(),s=t.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ms?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ms;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ms?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const o=e.value;if(o){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Koe{encodeKey(e){return xz(e)}encodeValue(e){return xz(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Qoe=/%(\d[a-f0-9])/gi,Xoe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function xz(n){return encodeURIComponent(n).replace(Qoe,(e,t)=>Xoe[t]??e)}function S0(n){return`${n}`}class Ml{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Koe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Yoe(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[s,a]=-1==o?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(S0):[S0(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ml({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(S0(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(S0(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Joe{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Cz(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Tz(n){return typeof Blob<"u"&&n instanceof Blob}function Dz(n){return typeof FormData<"u"&&n instanceof FormData}class Og{constructor(e,t,i,r){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function ese(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Ms),this.context||(this.context=new Joe),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new Ml,this.urlWithParams=t}serializeBody(){return null===this.body?null:Cz(this.body)||Tz(this.body)||Dz(this.body)||function tse(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ml?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Dz(this.body)?null:Tz(this.body)?this.body.type||null:Cz(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ml?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const h=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((p,g)=>p.set(g,e.setHeaders[g]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((p,g)=>p.set(g,e.setParams[g]),c)),new Og(t,i,o,{params:c,headers:l,context:h,reportProgress:a,responseType:r,withCredentials:s})}}var Vh=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Vh||{});class HA{constructor(e,t=200,i="OK"){this.headers=e.headers||new Ms,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class qA extends HA{constructor(e={}){super(e),this.type=Vh.ResponseHeader}clone(e={}){return new qA({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Bh extends HA{constructor(e={}){super(e),this.type=Vh.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Bh({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Az extends HA{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function WA(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let nse=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof Og)o=t;else{let l,c;l=r.headers instanceof Ms?r.headers:new Ms(r.headers),r.params&&(c=r.params instanceof Ml?r.params:new Ml({fromObject:r.params})),o=new Og(t,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const s=M(o).pipe(xh(l=>this.handler.handle(l)));if(t instanceof Og||"events"===r.observe)return s;const a=s.pipe(_i(l=>l instanceof Bh));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ve(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(ve(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(ve(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(ve(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Ml).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,WA(r,i))}post(t,i,r={}){return this.request("POST",t,WA(r,i))}put(t,i,r={}){return this.request("PUT",t,WA(r,i))}static#e=this.\u0275fac=function(i){return new(i||n)(F(D0))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();function Mz(n,e){return e(n)}function rse(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}const sse=new re(""),Ng=new re(""),Pz=new re("");function ase(){let n=null;return(e,t)=>{null===n&&(n=(xe(sse,{optional:!0})??[]).reduceRight(rse,Mz));const i=xe(qv),r=i.add();return n(e,t).pipe(Ch(()=>i.remove(r)))}}let kz=(()=>{class n extends D0{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=xe(qv)}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(Ng),...this.injector.get(Pz,[])]));this.chain=r.reduceRight((o,s)=>function ose(n,e,t){return(i,r)=>t.runInContext(()=>e(i,o=>n(o,r)))}(o,s,this.injector),Mz)}const i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(Ch(()=>this.pendingTasks.remove(i)))}static#e=this.\u0275fac=function(i){return new(i||n)(F(A0),F(Yr))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();const dse=/^\)\]\}',?\n/;let Nz=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new B(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?b(i.\u0275loadImpl()):M(null)).pipe(Ae(()=>new Ke(o=>{const s=i.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((x,T)=>s.setRequestHeader(x,T.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const x=t.detectContentTypeHeader();null!==x&&s.setRequestHeader("Content-Type",x)}if(t.responseType){const x=t.responseType.toLowerCase();s.responseType="json"!==x?x:"text"}const a=t.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const x=s.statusText||"OK",T=new Ms(s.getAllResponseHeaders()),V=function hse(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return l=new qA({headers:T,status:s.status,statusText:x,url:V}),l},h=()=>{let{headers:x,status:T,statusText:V,url:k}=c(),j=null;204!==T&&(j=typeof s.response>"u"?s.responseText:s.response),0===T&&(T=j?200:0);let ie=T>=200&&T<300;if("json"===t.responseType&&"string"==typeof j){const _e=j;j=j.replace(dse,"");try{j=""!==j?JSON.parse(j):null}catch(Be){j=_e,ie&&(ie=!1,j={error:Be,text:j})}}ie?(o.next(new Bh({body:j,headers:x,status:T,statusText:V,url:k||void 0})),o.complete()):o.error(new Az({error:j,headers:x,status:T,statusText:V,url:k||void 0}))},p=x=>{const{url:T}=c(),V=new Az({error:x,status:s.status||0,statusText:s.statusText||"Unknown Error",url:T||void 0});o.error(V)};let g=!1;const _=x=>{g||(o.next(c()),g=!0);let T={type:Vh.DownloadProgress,loaded:x.loaded};x.lengthComputable&&(T.total=x.total),"text"===t.responseType&&s.responseText&&(T.partialText=s.responseText),o.next(T)},E=x=>{let T={type:Vh.UploadProgress,loaded:x.loaded};x.lengthComputable&&(T.total=x.total),o.next(T)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",p),s.addEventListener("abort",p),t.reportProgress&&(s.addEventListener("progress",_),null!==a&&s.upload&&s.upload.addEventListener("progress",E)),s.send(a),o.next({type:Vh.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",p),t.reportProgress&&(s.removeEventListener("progress",_),null!==a&&s.upload&&s.upload.removeEventListener("progress",E)),s.readyState!==s.DONE&&s.abort()}})))}static#e=this.\u0275fac=function(i){return new(i||n)(F(eN))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();const GA=new re("XSRF_ENABLED"),Fz=new re("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Lz=new re("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Vz{}let mse=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=qO(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(i){return new(i||n)(F(Dt),F(Io),F(Fz))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();function gse(n,e){const t=n.url.toLowerCase();if(!xe(GA)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const i=xe(Vz).getToken(),r=xe(Lz);return null!=i&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var Pl=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Pl||{});function _se(...n){const e=[nse,Nz,kz,{provide:D0,useExisting:kz},{provide:A0,useExisting:Nz},{provide:Ng,useValue:gse,multi:!0},{provide:GA,useValue:!0},{provide:Vz,useClass:mse}];for(const t of n)e.push(...t.\u0275providers);return function bw(n){return{\u0275providers:n}}(e)}const Bz=new re("LEGACY_INTERCEPTOR_FN");function vse(){return function Xc(n,e){return{\u0275kind:n,\u0275providers:e}}(Pl.LegacyInterceptors,[{provide:Bz,useFactory:ase},{provide:Ng,useExisting:Bz,multi:!0}])}let yse=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({providers:[_se(vse())]})}return n})();function Uz(n){return new B(3e3,!1)}function kl(n){switch(n.length){case 0:return new kg;case 1:return n[0];default:return new vz(n)}}function jz(n,e,t=new Map,i=new Map){const r=[],o=[];let s=-1,a=null;if(e.forEach(l=>{const c=l.get("offset"),h=c==s,p=h&&a||new Map;l.forEach((g,_)=>{let E=_,x=g;if("offset"!==_)switch(E=n.normalizePropertyName(E,r),x){case"!":x=t.get(_);break;case wa:x=i.get(_);break;default:x=n.normalizeStyleValue(_,E,x,r)}p.set(E,x)}),h||o.push(p),a=p,s=c}),r.length)throw function Gse(n){return new B(3502,!1)}();return o}function ZA(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&KA(t,"start",n)));break;case"done":n.onDone(()=>i(t&&KA(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&KA(t,"destroy",n)))}}function KA(n,e,t){const o=YA(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),s=n._data;return null!=s&&(o._data=s),o}function YA(n,e,t,i,r="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function io(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function zz(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const oae=(()=>typeof document>"u"?null:document.documentElement)();function QA(n){const e=n.parentNode||n.host||null;return e===oae?null:e}let Jc=null,$z=!1;function Hz(n,e){for(;e;){if(e===n)return!0;e=QA(e)}return!1}function qz(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]}let Wz=(()=>{class n{validateStyleProperty(t){return function aae(n){Jc||(Jc=function lae(){return typeof document<"u"?document.body:null}()||{},$z=!!Jc.style&&"WebkitAppearance"in Jc.style);let e=!0;return Jc.style&&!function sae(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Jc.style,!e&&$z&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Jc.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return Hz(t,i)}getParentElement(t){return QA(t)}query(t,i,r){return qz(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,o,s,a=[],l){return new kg(r,o)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})(),XA=(()=>{class n{static#e=this.NOOP=new Wz}return n})();const cae=1e3,JA="ng-enter",M0="ng-leave",P0="ng-trigger",k0=".ng-trigger",Zz="ng-animating",eS=".ng-animating";function Ia(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:tS(parseFloat(e[1]),e[2])}function tS(n,e){return"s"===e?n*cae:n}function O0(n,e,t){return n.hasOwnProperty("duration")?n:function dae(n,e,t){let r,o=0,s="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(Uz()),{duration:0,delay:0,easing:""};r=tS(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(o=tS(parseFloat(l),a[4]));const c=a[5];c&&(s=c)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push(function Cse(){return new B(3100,!1)}()),a=!0),o<0&&(e.push(function Tse(){return new B(3101,!1)}()),a=!0),a&&e.splice(l,0,Uz())}return{duration:r,delay:o,easing:s}}(n,e,t)}function Fg(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Kz(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Ol(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function Ps(n,e,t){e.forEach((i,r)=>{const o=iS(r);t&&!t.has(r)&&t.set(r,n.style[o]),n.style[o]=i})}function eu(n,e){e.forEach((t,i)=>{const r=iS(i);n.style[r]=""})}function Lg(n){return Array.isArray(n)?1==n.length?n[0]:mz(n):n}const nS=new RegExp("{{\\s*(.+?)\\s*}}","g");function Qz(n){let e=[];if("string"==typeof n){let t;for(;t=nS.exec(n);)e.push(t[1]);nS.lastIndex=0}return e}function Vg(n,e,t){const i=n.toString(),r=i.replace(nS,(o,s)=>{let a=e[s];return null==a&&(t.push(function Ase(n){return new B(3003,!1)}()),a=""),a.toString()});return r==i?n:r}function N0(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const pae=/-+([a-z0-9])/g;function iS(n){return n.replace(pae,(...e)=>e[1].toUpperCase())}function ro(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Sse(n){return new B(3004,!1)}()}}function Xz(n,e){return window.getComputedStyle(n)[e]}const F0="*";function _ae(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function vae(n,e,t){if(":"==n[0]){const l=function yae(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function $se(n){return new B(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function zse(n){return new B(3015,!1)}()),e;const r=i[1],o=i[2],s=i[3];e.push(Jz(r,s));"<"==o[0]&&!(r==F0&&s==F0)&&e.push(Jz(s,r))}(i,t,e)):t.push(n),t}const L0=new Set(["true","1"]),V0=new Set(["false","0"]);function Jz(n,e){const t=L0.has(n)||V0.has(n),i=L0.has(e)||V0.has(e);return(r,o)=>{let s=n==F0||n==r,a=e==F0||e==o;return!s&&t&&"boolean"==typeof r&&(s=r?L0.has(n):V0.has(n)),!a&&i&&"boolean"==typeof o&&(a=o?L0.has(e):V0.has(e)),s&&a}}const bae=new RegExp("s*:selfs*,?","g");function rS(n,e,t,i){return new Eae(n).build(e,t,i)}class Eae{constructor(e){this._driver=e}build(e,t,i){const r=new xae(t);return this._resetContextStyleTimingState(r),ro(this,Lg(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const o=[],s=[];return"@"==e.name.charAt(0)&&t.errors.push(function Mse(){return new B(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(h=>{l.name=h,o.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,s.push(l)}else t.errors.push(function Pse(){return new B(3007,!1)}())}),{type:7,name:e.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const o=new Set,s=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{Qz(l).forEach(c=>{s.hasOwnProperty(c)||o.add(c)})})}),o.size&&(N0(o.values()),t.errors.push(function kse(n,e){return new B(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=ro(this,Lg(e.animation),t);return{type:1,matchers:_ae(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:tu(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>ro(this,i,t)),options:tu(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const o=e.steps.map(s=>{t.currentTime=i;const a=ro(this,s,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:o,options:tu(e.options)}}visitAnimate(e,t){const i=function Tae(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return oS(O0(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=oS(0,0,"");return o.dynamic=!0,o.strValue=t,o}const r=O0(t,e);return oS(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,o=e.styles?e.styles:Yo({});if(5==o.type)r=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;const c={};i.easing&&(c.easing=i.easing),s=Yo(c)}t.currentTime+=i.duration+i.delay;const l=this.visitStyle(s,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===wa?i.push(a):t.errors.push(new B(3002,!1)):i.push(Kz(a));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o))for(let l of a.values())if(l.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:i,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),h=c.get(l);let p=!0;h&&(o!=r&&o>=h.startTime&&r<=h.endTime&&(t.errors.push(function Nse(n,e,t,i,r){return new B(3010,!1)}()),p=!1),o=h.startTime),p&&c.set(l,{startTime:o,endTime:r}),t.options&&function fae(n,e,t){const i=e.params||{},r=Qz(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||t.push(function Dse(n){return new B(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Fse(){return new B(3011,!1)}()),i;let o=0;const s=[];let a=!1,l=!1,c=0;const h=e.steps.map(V=>{const k=this._makeStyleAst(V,t);let j=null!=k.offset?k.offset:function Cae(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(k.styles),ie=0;return null!=j&&(o++,ie=k.offset=j),l=l||ie<0||ie>1,a=a||ie<c,c=ie,s.push(ie),k});l&&t.errors.push(function Lse(){return new B(3012,!1)}()),a&&t.errors.push(function Vse(){return new B(3200,!1)}());const p=e.steps.length;let g=0;o>0&&o<p?t.errors.push(function Bse(){return new B(3202,!1)}()):0==o&&(g=1/(p-1));const _=p-1,E=t.currentTime,x=t.currentAnimateTimings,T=x.duration;return h.forEach((V,k)=>{const j=g>0?k==_?1:g*k:s[k],ie=j*T;t.currentTime=E+x.delay+ie,x.duration=ie,this._validateStyleAst(V,t),V.offset=j,i.styles.push(V)}),i}visitReference(e,t){return{type:8,animation:ro(this,Lg(e.animation),t),options:tu(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:tu(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:tu(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[o,s]=function wae(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(bae,"")),n=n.replace(/@\*/g,k0).replace(/@\w+/g,t=>k0+"-"+t.slice(1)).replace(/:animating/g,eS),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+o:o,io(t.collectedStyles,t.currentQuerySelector,new Map);const a=ro(this,Lg(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:tu(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Use(){return new B(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:O0(e.timings,t.errors,!0);return{type:12,animation:ro(this,Lg(e.animation),t),timings:i,options:null}}}class xae{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function tu(n){return n?(n=Fg(n)).params&&(n.params=function Iae(n){return n?Fg(n):null}(n.params)):n={},n}function oS(n,e,t){return{duration:n,delay:e,easing:t}}function sS(n,e,t,i,r,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}class B0{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Sae=new RegExp(":enter","g"),Mae=new RegExp(":leave","g");function aS(n,e,t,i,r,o=new Map,s=new Map,a,l,c=[]){return(new Pae).buildKeyframes(n,e,t,i,r,o,s,a,l,c)}class Pae{buildKeyframes(e,t,i,r,o,s,a,l,c,h=[]){c=c||new B0;const p=new lS(e,t,c,r,o,h,[]);p.options=l;const g=l.delay?Ia(l.delay):0;p.currentTimeline.delayNextStep(g),p.currentTimeline.setStyles([s],null,p.errors,l),ro(this,i,p);const _=p.timelines.filter(E=>E.containsAnimation());if(_.length&&a.size){let E;for(let x=_.length-1;x>=0;x--){const T=_[x];if(T.element===t){E=T;break}}E&&!E.allowOnlyTimelineStyles()&&E.setStyles([a],null,p.errors,l)}return _.length?_.map(E=>E.buildKeyframes()):[sS(t,[],[],[],0,g,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(const r of e){const o=r?.delay;if(o){const s="number"==typeof o?o:Ia(Vg(o,r?.params??{},t.errors));i.delayNextStep(s)}}}_visitSubInstructions(e,t,i){let o=t.currentTimeline.currentTime;const s=null!=i.duration?Ia(i.duration):null,a=null!=i.delay?Ia(i.delay):null;return 0!==s&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,s,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),ro(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const o=e.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=U0);const s=Ia(o.delay);r.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>ro(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?Ia(e.options.delay):0;e.steps.forEach(s=>{const a=t.createSubContext(e.options);o&&a.delayNextStep(o),ro(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return O0(t.params?Vg(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(i.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const o=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,o=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*o),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+o),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?Ia(r.delay):0;o&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=U0);let s=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,h)=>{t.currentQueryIndex=h;const p=t.createSubContext(e.options,c);o&&p.delayNextStep(o),c===t.element&&(l=p.currentTimeline),ro(this,e.animation,p),p.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,p.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1);let l=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const h=t.currentTimeline;l&&h.delayNextStep(l);const p=h.currentTime;ro(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-p+(r.startTime-i.currentTimeline.startTime)}}const U0={};class lS{constructor(e,t,i,r,o,s,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=U0,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new j0(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Ia(i.duration)),null!=i.delay&&(r.delay=Ia(i.delay));const o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=Vg(o[a],s,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,o=new lS(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=U0,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new kae(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,o,s){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(Sae,"."+this._enterClassName)).replace(Mae,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!o&&0==a.length&&s.push(function jse(n){return new B(3014,!1)}()),a}}class j0{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new j0(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||wa),this._currentKeyframe.set(t,wa);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const o=r&&r.params||{},s=function Oae(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let o of i)t.set(o,wa)}else Ol(r,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of s){const c=Vg(l,o,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??wa),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=Ol(a,new Map,this._backFill);c.forEach((h,p)=>{"!"===h?e.add(p):h===wa&&t.add(p)}),i||c.set("offset",l/this.duration),r.push(c)});const o=e.size?N0(e.values()):[],s=t.size?N0(t.values()):[];if(i){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return sS(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}}class kae extends j0{constructor(e,t,i,r,o,s,a=!1){super(e,t,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],s=i+t,a=t/s,l=Ol(e[0]);l.set("offset",0),o.push(l);const c=Ol(e[0]);c.set("offset",n4(a)),o.push(c);const h=e.length-1;for(let p=1;p<=h;p++){let g=Ol(e[p]);const _=g.get("offset");g.set("offset",n4((t+_*i)/s)),o.push(g)}i=s,t=0,r="",e=o}return sS(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function n4(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class cS{}const Nae=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Fae extends cS{normalizePropertyName(e,t){return iS(e)}normalizeStyleValue(e,t,i,r){let o="";const s=i.toString().trim();if(Nae.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)o="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function Rse(n,e){return new B(3005,!1)}())}return s+o}}function r4(n,e,t,i,r,o,s,a,l,c,h,p,g){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:h,totalTime:p,errors:g}}const uS={};class o4{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function Lae(n,e,t,i,r){return n.some(o=>o(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,o,s,a,l,c,h){const p=[],g=this.ast.options&&this.ast.options.params||uS,E=this.buildStyles(i,a&&a.params||uS,p),x=l&&l.params||uS,T=this.buildStyles(r,x,p),V=new Set,k=new Map,j=new Map,ie="void"===r,_e={params:Vae(x,g),delay:this.ast.options?.delay},Be=h?[]:aS(e,t,this.ast.animation,o,s,E,T,_e,c,p);let et=0;if(Be.forEach(Dr=>{et=Math.max(Dr.duration+Dr.delay,et)}),p.length)return r4(t,this._triggerName,i,r,ie,E,T,[],[],k,j,et,p);Be.forEach(Dr=>{const Ur=Dr.element,tE=io(k,Ur,new Set);Dr.preStyleProps.forEach(ou=>tE.add(ou));const Wg=io(j,Ur,new Set);Dr.postStyleProps.forEach(ou=>Wg.add(ou)),Ur!==t&&V.add(Ur)});const Zt=N0(V.values());return r4(t,this._triggerName,i,r,ie,E,T,Be,Zt,k,j,et)}}function Vae(n,e){const t=Fg(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class Bae{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=Fg(this.defaultParams);return Object.keys(e).forEach(o=>{const s=e[o];null!==s&&(r[o]=s)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((s,a)=>{s&&(s=Vg(s,r,t));const l=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,l,s,t),i.set(a,s)})}),i}}class jae{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new Bae(r.style,r.options&&r.options.params||{},i))}),s4(this.states,"true","1"),s4(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new o4(e,r,this.states))}),this.fallbackTransition=function zae(n,e,t){return new o4(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(s=>s.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function s4(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const $ae=new B0;class Hae{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],o=rS(this._driver,t,i,[]);if(i.length)throw function Zse(n){return new B(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,i){const r=e.element,o=jz(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],o=this._animations.get(e);let s;const a=new Map;if(o?(s=aS(this._driver,t,o,JA,M0,new Map,new Map,i,$ae,r),s.forEach(h=>{const p=io(a,h.element,new Map);h.postStyleProps.forEach(g=>p.set(g,null))})):(r.push(function Kse(){return new B(3300,!1)}()),s=[]),r.length)throw function Yse(n){return new B(3504,!1)}();a.forEach((h,p)=>{h.forEach((g,_)=>{h.set(_,this._driver.computeStyle(p,_,wa))})});const c=kl(s.map(h=>{const p=a.get(h.element);return this._buildPlayer(h,new Map,p)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Qse(n){return new B(3301,!1)}();return t}listen(e,t,i,r){const o=YA(t,"","","");return ZA(this._getPlayer(e),i,o,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const a4="ng-animate-queued",dS="ng-animate-disabled",Kae=[],l4={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Yae={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Qo="__ng_removed";class hS{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function ele(n){return n??null}(i?e.value:e),i){const o=Fg(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const Bg="void",fS=new hS(Bg);class Qae{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ko(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function Xse(n,e){return new B(3302,!1)}();if(null==i||0==i.length)throw function Jse(n){return new B(3303,!1)}();if(!function tle(n){return"start"==n||"done"==n}(i))throw function eae(n,e){return new B(3400,!1)}();const o=io(this._elementListeners,e,[]),s={name:t,phase:i,callback:r};o.push(s);const a=io(this._engine.statesByElement,e,new Map);return a.has(t)||(ko(e,P0),ko(e,P0+"-"+t),a.set(t,fS)),()=>{this._engine.afterFlush(()=>{const l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function tae(n){return new B(3401,!1)}();return t}trigger(e,t,i,r=!0){const o=this._getTrigger(t),s=new pS(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(ko(e,P0),ko(e,P0+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new hS(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=fS),c.value!==Bg&&l.value===c.value){if(!function rle(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const o=t[r];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(l.params,c.params)){const x=[],T=o.matchStyles(l.value,l.params,x),V=o.matchStyles(c.value,c.params,x);x.length?this._engine.reportError(x):this._engine.afterFlush(()=>{eu(e,T),Ps(e,V)})}return}const g=io(this._engine.playersByElement,e,[]);g.forEach(x=>{x.namespaceId==this.id&&x.triggerName==t&&x.queued&&x.destroy()});let _=o.matchTransition(l.value,c.value,e,c.params),E=!1;if(!_){if(!r)return;_=o.fallbackTransition,E=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:_,fromState:l,toState:c,player:s,isFallbackTransition:E}),E||(ko(e,a4),s.onStart(()=>{Uh(e,a4)})),s.onDone(()=>{let x=this.players.indexOf(s);x>=0&&this.players.splice(x,1);const T=this._engine.playersByElement.get(e);if(T){let V=T.indexOf(s);V>=0&&T.splice(V,1)}}),this.players.push(s),g.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,k0,!0);i.forEach(r=>{if(r[Qo])return;const o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const o=this._engine.statesByElement.get(e),s=new Map;if(o){const a=[];if(o.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){const h=this.trigger(e,c,Bg,r);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),i&&kl(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(o=>{const s=o.name;if(r.has(s))return;r.add(s);const l=this._triggers.get(s).fallbackTransition,c=i.get(s)||fS,h=new hS(Bg),p=new pS(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:l,fromState:c,toState:h,player:p,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let s=e;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const o=e[Qo];(!o||o===l4)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){ko(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){const l=YA(o,i.triggerName,i.fromState.value,i.toState.value);l._data=e,ZA(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const o=i.transition.ast.depCount,s=r.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class Xae{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new Qae(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){const l=r.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}return t}trigger(e,t,i,r){if(z0(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!z0(t))return;const o=t[Qo];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){const s=this._fetchNamespace(e);s&&s.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ko(e,dS)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Uh(e,dS))}removeNode(e,t,i){if(z0(t)){const r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,o){this.collectedLeaveElements.push(t),t[Qo]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,i,r,o){return z0(t)?this._fetchNamespace(e).listen(t,i,r,o):()=>{}}_buildInstruction(e,t,i,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,k0,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,eS,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return kl(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Qo];if(t&&t.setForRemoval){if(e[Qo]=l4,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(dS)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)ko(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?kl(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function nae(n){return new B(3402,!1)}()}_flushAnimations(e,t){const i=new B0,r=[],o=new Map,s=[],a=new Map,l=new Map,c=new Map,h=new Set;this.disabledNodes.forEach(Fe=>{h.add(Fe);const We=this.driver.query(Fe,".ng-animate-queued",!0);for(let Qe=0;Qe<We.length;Qe++)h.add(We[Qe])});const p=this.bodyNode,g=Array.from(this.statesByElement.keys()),_=d4(g,this.collectedEnterElements),E=new Map;let x=0;_.forEach((Fe,We)=>{const Qe=JA+x++;E.set(We,Qe),Fe.forEach(Bt=>ko(Bt,Qe))});const T=[],V=new Set,k=new Set;for(let Fe=0;Fe<this.collectedLeaveElements.length;Fe++){const We=this.collectedLeaveElements[Fe],Qe=We[Qo];Qe&&Qe.setForRemoval&&(T.push(We),V.add(We),Qe.hasAnimation?this.driver.query(We,".ng-star-inserted",!0).forEach(Bt=>V.add(Bt)):k.add(We))}const j=new Map,ie=d4(g,Array.from(V));ie.forEach((Fe,We)=>{const Qe=M0+x++;j.set(We,Qe),Fe.forEach(Bt=>ko(Bt,Qe))}),e.push(()=>{_.forEach((Fe,We)=>{const Qe=E.get(We);Fe.forEach(Bt=>Uh(Bt,Qe))}),ie.forEach((Fe,We)=>{const Qe=j.get(We);Fe.forEach(Bt=>Uh(Bt,Qe))}),T.forEach(Fe=>{this.processLeaveNode(Fe)})});const _e=[],Be=[];for(let Fe=this._namespaceList.length-1;Fe>=0;Fe--)this._namespaceList[Fe].drainQueuedTransitions(t).forEach(Qe=>{const Bt=Qe.player,ki=Qe.element;if(_e.push(Bt),this.collectedEnterElements.length){const rr=ki[Qo];if(rr&&rr.setForMove){if(rr.previousTriggersValues&&rr.previousTriggersValues.has(Qe.triggerName)){const su=rr.previousTriggersValues.get(Qe.triggerName),Oo=this.statesByElement.get(Qe.element);if(Oo&&Oo.has(Qe.triggerName)){const nE=Oo.get(Qe.triggerName);nE.value=su,Oo.set(Qe.triggerName,nE)}}return void Bt.destroy()}}const Ns=!p||!this.driver.containsElement(p,ki),oo=j.get(ki),Fl=E.get(ki),Ln=this._buildInstruction(Qe,i,Fl,oo,Ns);if(Ln.errors&&Ln.errors.length)return void Be.push(Ln);if(Ns)return Bt.onStart(()=>eu(ki,Ln.fromStyles)),Bt.onDestroy(()=>Ps(ki,Ln.toStyles)),void r.push(Bt);if(Qe.isFallbackTransition)return Bt.onStart(()=>eu(ki,Ln.fromStyles)),Bt.onDestroy(()=>Ps(ki,Ln.toStyles)),void r.push(Bt);const b$=[];Ln.timelines.forEach(rr=>{rr.stretchStartingKeyframe=!0,this.disabledNodes.has(rr.element)||b$.push(rr)}),Ln.timelines=b$,i.append(ki,Ln.timelines),s.push({instruction:Ln,player:Bt,element:ki}),Ln.queriedElements.forEach(rr=>io(a,rr,[]).push(Bt)),Ln.preStyleProps.forEach((rr,su)=>{if(rr.size){let Oo=l.get(su);Oo||l.set(su,Oo=new Set),rr.forEach((nE,FS)=>Oo.add(FS))}}),Ln.postStyleProps.forEach((rr,su)=>{let Oo=c.get(su);Oo||c.set(su,Oo=new Set),rr.forEach((nE,FS)=>Oo.add(FS))})});if(Be.length){const Fe=[];Be.forEach(We=>{Fe.push(function iae(n,e){return new B(3505,!1)}())}),_e.forEach(We=>We.destroy()),this.reportError(Fe)}const et=new Map,Zt=new Map;s.forEach(Fe=>{const We=Fe.element;i.has(We)&&(Zt.set(We,We),this._beforeAnimationBuild(Fe.player.namespaceId,Fe.instruction,et))}),r.forEach(Fe=>{const We=Fe.element;this._getPreviousPlayers(We,!1,Fe.namespaceId,Fe.triggerName,null).forEach(Bt=>{io(et,We,[]).push(Bt),Bt.destroy()})});const Dr=T.filter(Fe=>f4(Fe,l,c)),Ur=new Map;u4(Ur,this.driver,k,c,wa).forEach(Fe=>{f4(Fe,l,c)&&Dr.push(Fe)});const Wg=new Map;_.forEach((Fe,We)=>{u4(Wg,this.driver,new Set(Fe),l,"!")}),Dr.forEach(Fe=>{const We=Ur.get(Fe),Qe=Wg.get(Fe);Ur.set(Fe,new Map([...We?.entries()??[],...Qe?.entries()??[]]))});const ou=[],v$=[],y$={};s.forEach(Fe=>{const{element:We,player:Qe,instruction:Bt}=Fe;if(i.has(We)){if(h.has(We))return Qe.onDestroy(()=>Ps(We,Bt.toStyles)),Qe.disabled=!0,Qe.overrideTotalTime(Bt.totalTime),void r.push(Qe);let ki=y$;if(Zt.size>1){let oo=We;const Fl=[];for(;oo=oo.parentNode;){const Ln=Zt.get(oo);if(Ln){ki=Ln;break}Fl.push(oo)}Fl.forEach(Ln=>Zt.set(Ln,ki))}const Ns=this._buildAnimation(Qe.namespaceId,Bt,et,o,Wg,Ur);if(Qe.setRealPlayer(Ns),ki===y$)ou.push(Qe);else{const oo=this.playersByElement.get(ki);oo&&oo.length&&(Qe.parentPlayer=kl(oo)),r.push(Qe)}}else eu(We,Bt.fromStyles),Qe.onDestroy(()=>Ps(We,Bt.toStyles)),v$.push(Qe),h.has(We)&&r.push(Qe)}),v$.forEach(Fe=>{const We=o.get(Fe.element);if(We&&We.length){const Qe=kl(We);Fe.setRealPlayer(Qe)}}),r.forEach(Fe=>{Fe.parentPlayer?Fe.syncPlayerEvents(Fe.parentPlayer):Fe.destroy()});for(let Fe=0;Fe<T.length;Fe++){const We=T[Fe],Qe=We[Qo];if(Uh(We,M0),Qe&&Qe.hasAnimation)continue;let Bt=[];if(a.size){let Ns=a.get(We);Ns&&Ns.length&&Bt.push(...Ns);let oo=this.driver.query(We,eS,!0);for(let Fl=0;Fl<oo.length;Fl++){let Ln=a.get(oo[Fl]);Ln&&Ln.length&&Bt.push(...Ln)}}const ki=Bt.filter(Ns=>!Ns.destroyed);ki.length?nle(this,We,ki):this.processLeaveNode(We)}return T.length=0,ou.forEach(Fe=>{this.players.push(Fe),Fe.onDone(()=>{Fe.destroy();const We=this.players.indexOf(Fe);this.players.splice(We,1)}),Fe.play()}),ou}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,o){let s=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(s=a)}else{const a=this.playersByElement.get(e);if(a){const l=!o||o==Bg;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||s.push(c)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(e,t,i){const o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,h=c!==o,p=io(i,c,[]);this._getPreviousPlayers(c,h,s,a,t.toState).forEach(_=>{const E=_.getRealPlayer();E.beforeDestroy&&E.beforeDestroy(),_.destroy(),p.push(_)})}eu(o,t.fromStyles)}_buildAnimation(e,t,i,r,o,s){const a=t.triggerName,l=t.element,c=[],h=new Set,p=new Set,g=t.timelines.map(E=>{const x=E.element;h.add(x);const T=x[Qo];if(T&&T.removedBeforeQueried)return new kg(E.duration,E.delay);const V=x!==l,k=function ile(n){const e=[];return h4(n,e),e}((i.get(x)||Kae).map(et=>et.getRealPlayer())).filter(et=>!!et.element&&et.element===x),j=o.get(x),ie=s.get(x),_e=jz(this._normalizer,E.keyframes,j,ie),Be=this._buildPlayer(E,_e,k);if(E.subTimeline&&r&&p.add(x),V){const et=new pS(e,a,x);et.setRealPlayer(Be),c.push(et)}return Be});c.forEach(E=>{io(this.playersByQueriedElement,E.element,[]).push(E),E.onDone(()=>function Jae(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,E.element,E))}),h.forEach(E=>ko(E,Zz));const _=kl(g);return _.onDestroy(()=>{h.forEach(E=>Uh(E,Zz)),Ps(l,t.toStyles)}),p.forEach(E=>{io(r,E,[]).push(_)}),_}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new kg(e.duration,e.delay)}}class pS{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new kg,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>ZA(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){io(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function z0(n){return n&&1===n.nodeType}function c4(n,e){const t=n.style.display;return n.style.display=e??"none",t}function u4(n,e,t,i,r){const o=[];t.forEach(l=>o.push(c4(l)));const s=[];i.forEach((l,c)=>{const h=new Map;l.forEach(p=>{const g=e.computeStyle(c,p,r);h.set(p,g),(!g||0==g.length)&&(c[Qo]=Yae,s.push(c))}),n.set(c,h)});let a=0;return t.forEach(l=>c4(l,o[a++])),s}function d4(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),o=new Map;function s(a){if(!a)return 1;let l=o.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?1:s(c),o.set(a,l),l}return e.forEach(a=>{const l=s(a);1!==l&&t.get(l).push(a)}),t}function ko(n,e){n.classList?.add(e)}function Uh(n,e){n.classList?.remove(e)}function nle(n,e,t){kl(t).onDone(()=>n.processLeaveNode(e))}function h4(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof vz?h4(i.players,e):e.push(i)}}function f4(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(o=>r.add(o)):e.set(n,i),t.delete(n),!0}class $0{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new Xae(e,t,i),this._timelineEngine=new Hae(e,t,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,t,i,r,o){const s=e+"-"+r;let a=this._triggerCache[s];if(!a){const l=[],h=rS(this._driver,o,l,[]);if(l.length)throw function Wse(n,e){return new B(3404,!1)}();a=function Uae(n,e,t){return new jae(n,e,t)}(r,h,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[o,s]=zz(i);this._timelineEngine.command(o,t,s,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,o){if("@"==i.charAt(0)){const[s,a]=zz(i);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,i,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let sle=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Ps(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ps(this._element,this._initialStyles),this._endStyles&&(Ps(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(eu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(eu(this._element,this._endStyles),this._endStyles=null),Ps(this._element,this._initialStyles),this._state=3)}}return n})();function mS(n){let e=null;return n.forEach((t,i)=>{(function ale(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class p4{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:Xz(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class lle{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return Hz(e,t)}getParentElement(e){return QA(e)}query(e,t,i){return qz(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,o,s=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};o&&(l.easing=o);const c=new Map,h=s.filter(_=>_ instanceof p4);(function mae(n,e){return 0===n||0===e})(i,r)&&h.forEach(_=>{_.currentSnapshot.forEach((E,x)=>c.set(x,E))});let p=function hae(n){return n.length?n[0]instanceof Map?n:n.map(e=>Kz(e)):[]}(t).map(_=>Ol(_));p=function gae(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<e.length;o++){let s=e[o];r.forEach(a=>s.set(a,Xz(n,a)))}}return e}(e,p,c);const g=function ole(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=mS(e[0]),e.length>1&&(i=mS(e[e.length-1]))):e instanceof Map&&(t=mS(e)),t||i?new sle(n,t,i):null}(e,p);return new p4(e,p,l,g)}}let cle=(()=>{class n extends fz{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:Ar.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?mz(t):t;return m4(this._renderer,null,i,"register",[r]),new ule(i,this._renderer)}static#e=this.\u0275fac=function(i){return new(i||n)(F(lp),F(Dt))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();class ule extends voe{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new dle(this._id,e,t||{},this._renderer)}}class dle{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return m4(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function m4(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const g4="@.disabled";let hle=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,i.onRemovalComplete=(o,s)=>{const a=s?.parentNode(o);a&&s.removeChild(a,o)}}createRenderer(t,i){const o=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let h=this._rendererCache.get(o);return h||(h=new _4("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,h)),h}const s=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=h=>{Array.isArray(h)?h.forEach(l):this.engine.registerTrigger(s,a,t,h.name,h)};return i.data.animation.forEach(l),new fle(this,a,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(i){return new(i||n)(F(lp),F($0),F(it))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();class _4{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==g4?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class fle extends _4{constructor(e,t,i,r,o){super(t,i,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==g4?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function ple(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),s="";return"@"!=o.charAt(0)&&([o,s]=function mle(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,r,o,s,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}let gle=(()=>{class n extends $0{constructor(t,i,r,o){super(t.body,i,r)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(i){return new(i||n)(F(Dt),F(XA),F(cS),F(Xa))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();const v4=[{provide:fz,useClass:cle},{provide:cS,useFactory:function _le(){return new Fae}},{provide:$0,useClass:gle},{provide:lp,useFactory:function vle(n,e,t){return new hle(n,e,t)},deps:[Ax,$0,it]}],gS=[{provide:XA,useFactory:()=>new lle},{provide:op,useValue:"BrowserAnimations"},...v4],y4=[{provide:XA,useClass:Wz},{provide:op,useValue:"NoopAnimations"},...v4];let yle=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?y4:gS}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({providers:gS,imports:[_N]})}return n})();function b4(n,e=0){return function ble(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function q0(n){return Array.isArray(n)?n:[n]}function li(n){return null==n?"":"string"==typeof n?n:`${n}px`}function jh(n){return n instanceof ei?n.nativeElement:n}const Ele=["addListener","removeListener"],wle=["addEventListener","removeEventListener"],Ile=["on","off"];function _S(n,e,t,i){if(C(t)&&(i=t,t=void 0),i)return _S(n,e,t).pipe(qD(i));const[r,o]=function Tle(n){return C(n.addEventListener)&&C(n.removeEventListener)}(n)?wle.map(s=>a=>n[s](e,a,t)):function xle(n){return C(n.addListener)&&C(n.removeListener)}(n)?Ele.map(E4(n,e)):function Cle(n){return C(n.on)&&C(n.off)}(n)?Ile.map(E4(n,e)):[];if(!r&&Ct(n))return Ut(s=>_S(s,e,t))(Et(n));if(!r)throw new TypeError("Invalid event target");return new Ke(s=>{const a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function E4(n,e){return t=>i=>n[t](e,i)}const Ug={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=Ug;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(o=>{t=void 0,n(o)});return new yt(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=Ug;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Ug;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class Ale extends _y{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class Dle extends gy{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=Ug.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:o}=e;null!=t&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==t&&(Ug.cancelAnimationFrame(t),e._scheduled=void 0)}});let vS,Rle=1;const W0={};function w4(n){return n in W0&&(delete W0[n],!0)}const Mle={setImmediate(n){const e=Rle++;return W0[e]=!0,vS||(vS=Promise.resolve()),vS.then(()=>w4(e)&&n()),e},clearImmediate(n){w4(n)}},{setImmediate:Ple,clearImmediate:kle}=Mle,G0={setImmediate(...n){const{delegate:e}=G0;return(e?.setImmediate||Ple)(...n)},clearImmediate(n){const{delegate:e}=G0;return(e?.clearImmediate||kle)(n)},delegate:void 0};new class Nle extends _y{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class Ole extends gy{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=G0.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:o}=e;null!=t&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==t&&(G0.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}});function I4(n,e=Bp){return function Lle(n){return se((e,t)=>{let i=!1,r=null,o=null,s=!1;const a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;const c=r;r=null,t.next(c)}s&&t.complete()},l=()=>{o=null,s&&t.complete()};e.subscribe(ye(t,c=>{i=!0,r=c,o||Et(n(c)).subscribe(o=ye(t,a,l))},()=>{s=!0,(!i||!o||o.closed)&&t.complete()}))})}(()=>function Ble(n=0,e,t=uZ){let i=-1;return null!=e&&(Dn(e)?t=e:i=e),new Ke(r=>{let o=function Vle(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}(n,e))}let yS;try{yS=typeof Intl<"u"&&Intl.v8BreakIterator}catch{yS=!1}let jg,nu,bS,ks=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function r7(n){return n===JO}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!yS)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(i){return new(i||n)(F(Io))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zg(n){return function Ule(){if(null==jg&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>jg=!0}))}finally{jg=jg||!1}return jg}()?n:!!n.capture}function jle(){if(null==nu){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return nu=!1,nu;if("scrollBehavior"in document.documentElement.style)nu=!0;else{const n=Element.prototype.scrollTo;nu=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return nu}function ES(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Nl(n){return n.composedPath?n.composedPath()[0]:n.target}function wS(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const Hle=new re("cdk-dir-doc",{providedIn:"root",factory:function qle(){return xe(Dt)}}),Wle=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let IS=(()=>{class n{constructor(t){this.value="ltr",this.change=new En,t&&(this.value=function Gle(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?Wle.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(i){return new(i||n)(F(Hle,8))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$g=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({})}return n})(),Kle=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new W,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Ke(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(I4(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):M()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(_i(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,t)&&i.push(o)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=jh(i),o=t.getElementRef().nativeElement;do{if(r==o)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>_S(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(i){return new(i||n)(F(it),F(ks),F(Dt,8))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),C4=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new W,this._changeListener=o=>{this._change.next(o)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,o=r.getBoundingClientRect();return{top:-o.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-o.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(I4(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(i){return new(i||n)(F(ks),F(it),F(Dt,8))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),T4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({})}return n})(),D4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({imports:[$g,T4,$g,T4]})}return n})();class xS{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class CS extends xS{constructor(e,t,i,r,o){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}}class A4 extends xS{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class Qle extends xS{constructor(e){super(),this.element=e instanceof ei?e.nativeElement:e}}class TS{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof CS?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof A4?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof Qle?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Xle extends TS{constructor(e,t,i,r,o){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=s=>{const a=s.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=o}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||jn.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let DS=(()=>{class n extends TS{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new En,this.attachDomPortal=o=>{const s=o.element,a=this._document.createComment("dom-portal");o.setAttachedHost(this),s.parentNode.insertBefore(a,s),this._getRootNode().appendChild(s),this._attachedPortal=o,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(s,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),s=i.createComponent(o,i.length,t.injector||i.injector,t.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(s.hostView.rootNodes[0]),super.setDisposeFn(()=>s.destroy()),this._attachedPortal=t,this._attachedRef=s,this.attached.emit(s),s}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static#e=this.\u0275fac=function(i){return new(i||n)(q(dd),q(To),q(Dt))};static#t=this.\u0275dir=qe({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Vt]})}return n})(),K0=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({})}return n})();const S4=jle();class Jle{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=li(-this._previousScrollPosition.left),e.style.top=li(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),S4&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),S4&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class ece{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(_i(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class R4{enable(){}disable(){}attach(){}}function AS(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function M4(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class tce{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();AS(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let nce=(()=>{class n{constructor(t,i,r,o){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new R4,this.close=s=>new ece(this._scrollDispatcher,this._ngZone,this._viewportRuler,s),this.block=()=>new Jle(this._viewportRuler,this._document),this.reposition=s=>new tce(this._scrollDispatcher,this._viewportRuler,this._ngZone,s),this._document=o}static#e=this.\u0275fac=function(i){return new(i||n)(F(Kle),F(C4),F(it),F(Dt))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class P4{constructor(e){if(this.scrollStrategy=new R4,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class ice{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let k4=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(i){return new(i||n)(F(Dt))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rce=(()=>{class n extends k4{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const o=this._attachedOverlays;for(let s=o.length-1;s>-1;s--)if(o[s]._keydownEvents.observers.length>0){const a=o[s]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(i){return new(i||n)(F(Dt),F(it,8))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oce=(()=>{class n extends k4{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=Nl(o)},this._clickListener=o=>{const s=Nl(o),a="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const h=l[c];if(h._outsidePointerEvents.observers.length<1||!h.hasAttached())continue;if(h.overlayElement.contains(s)||h.overlayElement.contains(a))break;const p=h._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>p.next(o)):p.next(o)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(i){return new(i||n)(F(Dt),F(ks),F(it,8))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Y0=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||wS()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}const i=this._document.createElement("div");i.classList.add(t),wS()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static#e=this.\u0275fac=function(i){return new(i||n)(F(Dt),F(ks))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Hg{constructor(e,t,i,r,o,s,a,l,c,h=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=h,this._backdropElement=null,this._backdropClick=new W,this._attachments=new W,this._detachments=new W,this._locationChanges=yt.EMPTY,this._backdropClickHandler=p=>this._backdropClick.next(p),this._backdropTransitionendHandler=p=>{this._disposeBackdrop(p.target)},this._keydownEvents=new W,this._outsidePointerEvents=new W,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Ro(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=li(this._config.width),e.height=li(this._config.height),e.minWidth=li(this._config.minWidth),e.minHeight=li(this._config.minHeight),e.maxWidth=li(this._config.maxWidth),e.maxHeight=li(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=q0(t||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Qb(I(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const O4="cdk-overlay-connected-position-bounding-box",sce=/([A-Za-z%]+)$/;class ace{get positions(){return this._preferredPositions}constructor(e,t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new W,this._resizeSubscription=yt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(O4),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[];let s;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),c=this._getOverlayPoint(l,t,a),h=this._getOverlayFit(c,t,i,a);if(h.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(h,c,i)?o.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!s||s.overlayFit.visibleArea<h.visibleArea)&&(s={overlayFit:h,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(o.length){let a=null,l=-1;for(const c of o){const h=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);h>l&&(l=h,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&iu(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(O4),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,o;if("center"==i.originX)r=e.left+e.width/2;else{const s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?s:a}return t.left<0&&(r-=t.left),o="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(o-=t.top),{x:r,y:o}}_getOverlayPoint(e,t,i){let r,o;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,o="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,t,i,r){const o=F4(t);let{x:s,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(s+=l),c&&(a+=c);let g=0-a,_=a+o.height-i.height,E=this._subtractOverflows(o.width,0-s,s+o.width-i.width),x=this._subtractOverflows(o.height,g,_),T=E*x;return{visibleArea:T,isCompletelyWithinViewport:o.width*o.height===T,fitsInViewportVertically:x===o.height,fitsInViewportHorizontally:E==o.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,o=i.right-t.x,s=N4(this._overlayRef.getConfig().minHeight),a=N4(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=s&&s<=r)&&(e.fitsInViewportHorizontally||null!=a&&a<=o)}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=F4(t),o=this._viewportRect,s=Math.max(e.x+r.width-o.width,0),a=Math.max(e.y+r.height-o.height,0),l=Math.max(o.top-i.top-e.y,0),c=Math.max(o.left-i.left-e.x,0);let h=0,p=0;return h=r.width<=o.width?c||-s:e.x<this._viewportMargin?o.left-i.left-e.x:0,p=r.height<=o.height?l||-a:e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:h,y:p},{x:e.x+h,y:e.y+p}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new ice(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let o,s,a,h,p,g;if("top"===t.overlayY)s=e.y,o=i.height-s+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,o=i.height-a+this._viewportMargin;else{const _=Math.min(i.bottom-e.y+i.top,e.y),E=this._lastBoundingBoxSize.height;o=2*_,s=e.y-_,o>E&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-E/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)g=i.width-e.x+this._viewportMargin,h=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)p=e.x,h=i.right-e.x;else{const _=Math.min(i.right-e.x+i.left,e.x),E=this._lastBoundingBoxSize.width;h=2*_,p=e.x-_,h>E&&!this._isInitialRender&&!this._growAfterOpen&&(p=e.x-E/2)}return{top:s,left:p,bottom:a,right:g,width:h,height:o}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=li(i.height),r.top=li(i.top),r.bottom=li(i.bottom),r.width=li(i.width),r.left=li(i.left),r.right=li(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",o&&(r.maxHeight=li(o)),s&&(r.maxWidth=li(s))}this._lastBoundingBoxSize=i,iu(this._boundingBox.style,r)}_resetBoundingBoxStyles(){iu(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){iu(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){const h=this._viewportRuler.getViewportScrollPosition();iu(i,this._getExactOverlayY(t,e,h)),iu(i,this._getExactOverlayX(t,e,h))}else i.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=li(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=li(s.maxWidth):o&&(i.maxWidth="")),iu(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":r.top=li(o.y),r}_getExactOverlayX(e,t,i){let s,r={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),s=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===s?r.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":r.left=li(o.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:M4(e,i),isOriginOutsideView:AS(e,i),isOverlayClipped:M4(t,i),isOverlayOutsideView:AS(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&q0(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof ei)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function iu(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function N4(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(sce);return t&&"px"!==t?null:parseFloat(e)}return n||null}function F4(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const L4="cdk-global-overlay-wrapper";class lce{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(L4),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,l=!("100%"!==r&&"100vw"!==r||s&&"100%"!==s&&"100vw"!==s),c=!("100%"!==o&&"100vh"!==o||a&&"100%"!==a&&"100vh"!==a),h=this._xPosition,p=this._xOffset,g="rtl"===this._overlayRef.getConfig().direction;let _="",E="",x="";l?x="flex-start":"center"===h?(x="center",g?E=p:_=p):g?"left"===h||"end"===h?(x="flex-end",_=p):("right"===h||"start"===h)&&(x="flex-start",E=p):"left"===h||"start"===h?(x="flex-start",_=p):("right"===h||"end"===h)&&(x="flex-end",E=p),e.position=this._cssPosition,e.marginLeft=l?"0":_,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":E,t.justifyContent=x,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(L4),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let cce=(()=>{class n{constructor(t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o}global(){return new lce}flexibleConnectedTo(t){return new ace(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(i){return new(i||n)(F(C4),F(Dt),F(ks),F(Y0))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),uce=0,$h=(()=>{class n{constructor(t,i,r,o,s,a,l,c,h,p,g,_){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=o,this._keyboardDispatcher=s,this._injector=a,this._ngZone=l,this._document=c,this._directionality=h,this._location=p,this._outsideClickDispatcher=g,this._animationsModuleType=_}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),o=this._createPortalOutlet(r),s=new P4(t);return s.direction=s.direction||this._directionality.value,new Hg(o,i,r,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+uce++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Xa)),new Xle(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(i){return new(i||n)(F(nce),F(Y0),F(dd),F(cce),F(rce),F(jn),F(it),F(Dt),F(IS),F(kp),F(oce),F(op,8))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const fce={provide:new re("cdk-connected-overlay-scroll-strategy"),deps:[$h],useFactory:function hce(n){return()=>n.scrollStrategies.reposition()}};let V4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({providers:[$h,fce],imports:[$g,K0,D4,D4]})}return n})();function U4(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function j4(n){return _i((e,t)=>n<=t)}let yce=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),z4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({providers:[yce]})}return n})();const $4=new Set;let ru,Ece=(()=>{class n{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Ice}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function wce(n,e){if(!$4.has(n))try{ru||(ru=document.createElement("style"),e&&(ru.nonce=e),ru.setAttribute("type","text/css"),document.head.appendChild(ru)),ru.sheet&&(ru.sheet.insertRule(`@media ${n} {body{ }}`,0),$4.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(i){return new(i||n)(F(ks),F(Dw,8))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ice(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let xce=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new W}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return H4(q0(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let o=Kb(H4(q0(t)).map(s=>this._registerQuery(s).observable));return o=Cy(o.pipe(Ro(1)),o.pipe(j4(1),function bce(n,e=Bp){return se((t,i)=>{let r=null,o=null,s=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=o;o=null,i.next(c)}};function l(){const c=s+n,h=e.now();if(h<c)return r=this.schedule(void 0,c-h),void i.add(r);a()}t.subscribe(ye(i,c=>{o=c,s=e.now(),r||(r=e.schedule(l,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}(0))),o.pipe(ve(s=>{const a={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),o={observable:new Ke(s=>{const a=l=>this._zone.run(()=>s.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(yc(i),ve(({matches:s})=>({query:t,matches:s})),Qb(this._destroySubject)),mql:i};return this._queries.set(t,o),o}static#e=this.\u0275fac=function(i){return new(i||n)(F(Ece),F(it))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function H4(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}let Q0=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function Ace(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function Dce(n){try{return n.frameElement}catch{return null}}(function Fce(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===Z4(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),o=Z4(t);return t.hasAttribute("contenteditable")?-1!==o:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function Oce(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==o:"video"===r?-1!==o&&(null!==o||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function Nce(n){return!function Rce(n){return function Pce(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function Sce(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function Mce(n){return function kce(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||G4(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}static#e=this.\u0275fac=function(i){return new(i||n)(F(ks))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function G4(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function Z4(n){if(!G4(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class Lce{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,i,r,o=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Ro(1)).subscribe(e)}}let SS=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new Lce(t,this._checker,this._ngZone,this._document,i)}static#e=this.\u0275fac=function(i){return new(i||n)(F(Q0),F(it),F(Dt))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function K4(n){return 0===n.buttons||0===n.detail}function Y4(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const Vce=new re("cdk-input-modality-detector-options"),Bce={ignoreKeys:[18,17,224,91,16]},Hh=zg({passive:!0,capture:!0});let Uce=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,i,r,o){this._platform=t,this._mostRecentTarget=null,this._modality=new y(null),this._lastTouchMs=0,this._onKeydown=s=>{this._options?.ignoreKeys?.some(a=>a===s.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Nl(s))},this._onMousedown=s=>{Date.now()-this._lastTouchMs<650||(this._modality.next(K4(s)?"keyboard":"mouse"),this._mostRecentTarget=Nl(s))},this._onTouchstart=s=>{Y4(s)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Nl(s))},this._options={...Bce,...o},this.modalityDetected=this._modality.pipe(j4(1)),this.modalityChanged=this.modalityDetected.pipe(Ge()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Hh),r.addEventListener("mousedown",this._onMousedown,Hh),r.addEventListener("touchstart",this._onTouchstart,Hh)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Hh),document.removeEventListener("mousedown",this._onMousedown,Hh),document.removeEventListener("touchstart",this._onTouchstart,Hh))}static#e=this.\u0275fac=function(i){return new(i||n)(F(ks),F(it),F(Dt),F(Vce,8))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const zce=new re("cdk-focus-monitor-default-options"),X0=zg({passive:!0,capture:!0});let RS=(()=>{class n{constructor(t,i,r,o,s){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new W,this._rootNodeFocusAndBlurListener=a=>{for(let c=Nl(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=o,this._detectionMode=s?.detectionMode||0}monitor(t,i=!1){const r=jh(t);if(!this._platform.isBrowser||1!==r.nodeType)return M();const o=function $le(n){if(function zle(){if(null==bS){const n=typeof document<"u"?document.head:null;bS=!(!n||!n.createShadowRoot&&!n.attachShadow)}return bS}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),s=this._elementInfo.get(r);if(s)return i&&(s.checkChildren=!0),s.subject;const a={checkChildren:i,subject:new W,rootNode:o};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=jh(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const o=jh(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof o.focus&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),o=Nl(t);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,X0),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,X0)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Qb(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,X0),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,X0),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,o)=>{(o===t||r.checkChildren&&o.contains(t))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const o=t.labels;if(o)for(let s=0;s<o.length;s++)if(o[s].contains(i))return!0;return!1}static#e=this.\u0275fac=function(i){return new(i||n)(F(it),F(ks),F(Uce),F(Dt,8),F(zce,8))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const X4="cdk-high-contrast-black-on-white",J4="cdk-high-contrast-white-on-black",MS="cdk-high-contrast-active";let e$=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=xe(xce).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(MS,X4,J4),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(MS,X4):2===i&&t.add(MS,J4)}}static#e=this.\u0275fac=function(i){return new(i||n)(F(ks),F(Dt))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$ce=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}static#e=this.\u0275fac=function(i){return new(i||n)(F(e$))};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({imports:[z4]})}return n})();function Hce(n,e){}class J0{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let t$=(()=>{class n extends TS{constructor(t,i,r,o,s,a,l,c){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=o,this._interactivityChecker=s,this._ngZone=a,this._overlayRef=l,this._focusMonitor=c,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this.attachDomPortal=h=>{this._portalOutlet.hasAttached();const p=this._portalOutlet.attachDomPortal(h);return this._contentAttached(),p},this._document=r,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let i=null;if("string"==typeof t?i=this._document.querySelector(t):"boolean"==typeof t?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=ES(),o=this._elementRef.nativeElement;(!r||r===this._document.body||r===o||o.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=ES();return t===i||t.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=ES())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static#e=this.\u0275fac=function(i){return new(i||n)(q(ei),q(SS),q(Dt,8),q(J0),q(Q0),q(it),q(Hg),q(RS))};static#t=this.\u0275cmp=An({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(1&i&&Sk(DS,7),2&i){let o;NI(o=function FI(){return function s8(n,e){return n[Sr].queries[e].queryList}(le(),F_())}())&&(r._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){2&i&&Co("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[Vt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){1&i&&ge(0,Hce,0,0,"ng-template",0)},dependencies:[DS],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return n})();class PS{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new W,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!U4(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==t.closeOnOverlayDetachments&&this.close()})}close(e,t){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const n$=new re("DialogScrollStrategy"),qce=new re("DialogData"),Wce=new re("DefaultDialogConfig"),Zce={provide:n$,deps:[$h],useFactory:function Gce(n){return()=>n.scrollStrategies.block()}};let Kce=0,i$=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(t,i,r,o,s,a){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=o,this._overlayContainer=s,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new W,this._afterOpenedAtThisLevel=new W,this._ariaHiddenElements=new Map,this.afterAllClosed=Yb(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(yc(void 0))),this._scrollStrategy=a}open(t,i){(i={...this._defaultOptions||new J0,...i}).id=i.id||"cdk-dialog-"+Kce++,i.id&&this.getDialogById(i.id);const o=this._getOverlayConfig(i),s=this._overlay.create(o),a=new PS(s,i),l=this._attachContainer(s,a,i);return a.containerInstance=l,this._attachDialogContent(t,a,l,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){kS(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){kS(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),kS(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const i=new P4({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){const o=r.injector||r.viewContainerRef?.injector,s=[{provide:J0,useValue:r},{provide:PS,useValue:i},{provide:Hg,useValue:t}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,s.push(...r.container.providers(r))):a=t$;const l=new CS(a,r.viewContainerRef,jn.create({parent:o||this._injector,providers:s}),r.componentFactoryResolver);return t.attach(l).instance}_attachDialogContent(t,i,r,o){if(t instanceof ms){const s=this._createInjector(o,i,r,void 0);let a={$implicit:o.data,dialogRef:i};o.templateContext&&(a={...a,..."function"==typeof o.templateContext?o.templateContext():o.templateContext}),r.attachTemplatePortal(new A4(t,null,a,s))}else{const s=this._createInjector(o,i,r,this._injector),a=r.attachComponentPortal(new CS(t,o.viewContainerRef,s,o.componentFactoryResolver));i.componentRef=a,i.componentInstance=a.instance}}_createInjector(t,i,r,o){const s=t.injector||t.viewContainerRef?.injector,a=[{provide:qce,useValue:t.data},{provide:PS,useValue:i}];return t.providers&&("function"==typeof t.providers?a.push(...t.providers(i,t,r)):a.push(...t.providers)),t.direction&&(!s||!s.get(IS,null,{optional:!0}))&&a.push({provide:IS,useValue:{value:t.direction,change:M()}}),jn.create({parent:s||o,providers:a})}_removeOpenDialog(t,i){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,s)=>{o?s.setAttribute("aria-hidden",o):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){const o=i[r];o!==t&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static#e=this.\u0275fac=function(i){return new(i||n)(F($h),F(jn),F(Wce,8),F(n,12),F(Y0),F(n$))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})();function kS(n,e){let t=n.length;for(;t--;)e(n[t])}let Yce=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({providers:[i$,Zce],imports:[V4,K0,$ce,K0]})}return n})();const Xce=new re("mat-sanity-checks",{providedIn:"root",factory:function Qce(){return!0}});let Os=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!wS()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(i){return new(i||n)(F(e$),F(Xce,8),F(Dt))};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({imports:[$g,$g]})}return n})();const s$=zg({passive:!0,capture:!0});class tue{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=Nl(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,t,i,r){const o=this._events.get(t);if(o){const s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,s$)})}removeHandler(e,t,i){const r=this._events.get(e);if(!r)return;const o=r.get(t);o&&(o.delete(i),0===o.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,s$)))}}class OS{static#e=this._eventManager=new tue;constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=jh(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...a$,...i.animation},s=i.radius||function iue(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,l=t-r.top,c=o.enterDuration,h=document.createElement("div");h.classList.add("mat-ripple-element"),h.style.left=a-s+"px",h.style.top=l-s+"px",h.style.height=2*s+"px",h.style.width=2*s+"px",null!=i.color&&(h.style.backgroundColor=i.color),h.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(h);const p=window.getComputedStyle(h),_=p.transitionDuration,E="none"===p.transitionProperty||"0s"===_||"0s, 0s"===_||0===r.width&&0===r.height,x=new eue(this,h,i,E);h.style.transform="scale3d(1, 1, 1)",x.state=0,i.persistent||(this._mostRecentTransientRipple=x);return!E&&(c||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const V=()=>this._finishRippleTransition(x),k=()=>this._destroyRipple(x);h.addEventListener("transitionend",V),h.addEventListener("transitioncancel",k)}),this._activeRipples.set(x,null),(E||!c)&&this._finishRippleTransition(x),x}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...a$,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=jh(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,c$.forEach(i=>{OS._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{u$.forEach(t=>{this._triggerElement.addEventListener(t,this,l$)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=K4(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Y4(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(c$.forEach(t=>OS._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&u$.forEach(t=>e.removeEventListener(t,this,l$)))}}let rue=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({imports:[Os,Os]})}return n})();function oue(n,e){}class eE{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const NS="mdc-dialog--open",d$="mdc-dialog--opening",h$="mdc-dialog--closing";let lue=(()=>{class n extends t${constructor(t,i,r,o,s,a,l,c){super(t,i,r,o,s,a,l,c),this._animationStateChanged=new En}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}static#e=this.\u0275fac=function(i){return new(i||n)(q(ei),q(SS),q(Dt,8),q(eE),q(Q0),q(it),q(Hg),q(RS))};static#t=this.\u0275cmp=An({type:n,selectors:[["ng-component"]],features:[Vt],decls:0,vars:0,template:function(i,r){},encapsulation:2})}return n})();const f$="--mat-dialog-transition-duration";function p$(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?b4(n.substring(0,n.length-2)):n.endsWith("s")?1e3*b4(n.substring(0,n.length-1)):"0"===n?0:null}let cue=(()=>{class n extends lue{constructor(t,i,r,o,s,a,l,c,h){super(t,i,r,o,s,a,l,h),this._animationMode=c,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?p$(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?p$(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(f$,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(d$,NS)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(NS),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(NS),this._animationsEnabled?(this._hostElement.style.setProperty(f$,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(h$)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(d$,h$)}_waitForAnimationToComplete(t,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(t):t()})}static#e=this.\u0275fac=function(i){return new(i||n)(q(ei),q(SS),q(Dt,8),q(eE),q(Q0),q(it),q(Hg),q(op,8),q(RS))};static#t=this.\u0275cmp=An({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(i,r){2&i&&(_I("id",r._config.id),Co("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),uc("_mat-animation-noopable",!r._animationsEnabled))},features:[Vt],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){1&i&&(R(0,"div",0)(1,"div",1),ge(2,oue,0,0,"ng-template",2),S()())},dependencies:[DS],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{--mdc-dialog-container-elevation-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12);--mdc-dialog-container-shadow-color:#000;--mdc-dialog-container-shape:4px;--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2})}return n})();class uue{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new W,this._beforeClosed=new W,this._state=0,this.disableClose=t.disableClose,this.id=e.id,i._animationStateChanged.pipe(_i(r=>"opened"===r.state),Ro(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(_i(r=>"closed"===r.state),Ro(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),I(this.backdropClick(),this.keydownEvents().pipe(_i(r=>27===r.keyCode&&!this.disableClose&&!U4(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function due(n,e,t){n._closeInteractionType=e,n.close(t)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(_i(t=>"closing"===t.state),Ro(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const hue=new re("MatMdcDialogData"),fue=new re("mat-mdc-dialog-default-options"),m$=new re("mat-mdc-dialog-scroll-strategy"),mue={provide:m$,deps:[$h],useFactory:function pue(n){return()=>n.scrollStrategies.block()}};let gue=0,_ue=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(t,i,r,o,s,a,l,c,h,p){this._overlay=t,this._defaultOptions=r,this._parentDialog=o,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=h,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new W,this._afterOpenedAtThisLevel=new W,this._idPrefix="mat-dialog-",this.dialogConfigClass=eE,this.afterAllClosed=Yb(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(yc(void 0))),this._scrollStrategy=a,this._dialog=i.get(i$)}open(t,i){let r;(i={...this._defaultOptions||new eE,...i}).id=i.id||`${this._idPrefix}${gue++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const o=this._dialog.open(t,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:J0,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(s,a,l)=>(r=new this._dialogRefConstructor(s,i,l),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentRef=o.componentRef,r.componentInstance=o.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const s=this.openDialogs.indexOf(r);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}static#e=this.\u0275fac=function(i){Zw()};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})(),vue=(()=>{class n extends _ue{constructor(t,i,r,o,s,a,l,c){super(t,i,o,a,l,s,uue,cue,hue,c),this._idPrefix="mat-mdc-dialog-"}static#e=this.\u0275fac=function(i){return new(i||n)(F($h),F(jn),F(kp,8),F(fue,8),F(m$),F(n,12),F(Y0),F(op,8))};static#t=this.\u0275prov=me({token:n,factory:n.\u0275fac})}return n})(),yue=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({providers:[vue,mue],imports:[Yce,V4,K0,Os,Os]})}return n})(),bue=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({})}return n})(),_$=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({imports:[Os,XO,z4,Os]})}return n})(),Due=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({imports:[Os,_$,_$,bue,Os]})}return n})(),Rue=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n});static#n=this.\u0275inj=Tt({imports:[Os,rue,Os]})}return n})();var Mue=sa.Z.initializeApp;let Pue=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=_t({type:n,bootstrap:[Yne]});static#n=this.\u0275inj=Tt({providers:[ba,vc,{provide:xy,useValue:{}}],imports:[_N,jie,Yie(()=>Mue(Iz_firebase)),sre(()=>cre()),IZ.initializeApp(Iz_firebase),SZ,Zoe,yse,yle,yue,Due,Rue,OZ.forRoot(),zie]})}return n})();Y7().bootstrapModule(Pue).catch(n=>console.error(n))},106:(so,Gn,He)=>{He.d(Gn,{Z:()=>Zn});var C=He(58),ee=He(537),L=He(534),Ne=He(879);class yt{constructor(Xe,Je){this._delegate=Xe,this.firebase=Je,(0,L._addComponent)(Xe,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=Xe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Xe){this._delegate.automaticDataCollectionEnabled=Xe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Xe=>{this._delegate.checkDestroyed(),Xe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(Xe,Je=L._DEFAULT_ENTRY_NAME){var Kn;this._delegate.checkDestroyed();const pn=this._delegate.container.getProvider(Xe);return!pn.isInitialized()&&"EXPLICIT"===(null===(Kn=pn.getComponent())||void 0===Kn?void 0:Kn.instantiationMode)&&pn.initialize(),pn.getImmediate({identifier:Je})}_removeServiceInstance(Xe,Je=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Xe).clearInstance(Je)}_addComponent(Xe){(0,L._addComponent)(this._delegate,Xe)}_addOrOverwriteComponent(Xe){(0,L._addOrOverwriteComponent)(this._delegate,Xe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Pn=new C.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),oe=function St(){const bt=function Jt(bt){const Xe={},Je={__esModule:!0,initializeApp:function mt(lt,he={}){const xt=L.initializeApp(lt,he);if((0,C.r3)(Xe,xt.name))return Xe[xt.name];const rn=new bt(xt,Je);return Xe[xt.name]=rn,rn},app:pn,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function or(lt){const he=lt.name,xt=he.replace("-compat","");if(L._registerComponent(lt)&&"PUBLIC"===lt.type){const rn=(Tn=pn())=>{if("function"!=typeof Tn[xt])throw Pn.create("invalid-app-argument",{appName:he});return Tn[xt]()};void 0!==lt.serviceProps&&(0,C.ZB)(rn,lt.serviceProps),Je[xt]=rn,bt.prototype[xt]=function(...Tn){return this._getService.bind(this,he).apply(this,lt.multipleInstances?Tn:[])}}return"PUBLIC"===lt.type?Je[xt]:null},removeApp:function Kn(lt){delete Xe[lt]},useAsService:function Vn(lt,he){return"serverAuth"===he?null:he},modularAPIs:L}};function pn(lt){if(!(0,C.r3)(Xe,lt=lt||L._DEFAULT_ENTRY_NAME))throw Pn.create("no-app",{appName:lt});return Xe[lt]}return Je.default=Je,Object.defineProperty(Je,"apps",{get:function zt(){return Object.keys(Xe).map(lt=>Xe[lt])}}),pn.App=bt,Je}(yt);return bt.INTERNAL=Object.assign(Object.assign({},bt.INTERNAL),{createFirebaseNamespace:St,extendNamespace:function Xe(Je){(0,C.ZB)(bt,Je)},createSubscribe:C.ne,ErrorFactory:C.LL,deepExtend:C.ZB}),bt}(),pe=new Ne.Yd("@firebase/app-compat");if((0,C.jU)()&&void 0!==self.firebase){pe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const bt=self.firebase.SDK_VERSION;bt&&bt.indexOf("LITE")>=0&&pe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Zn=oe;!function kt(bt){(0,L.registerVersion)("@firebase/app-compat","0.2.25",bt)}()},534:(so,Gn,He)=>{He.r(Gn),He.d(Gn,{FirebaseError:()=>Ne.ZR,SDK_VERSION:()=>ho,_DEFAULT_ENTRY_NAME:()=>Hr,_addComponent:()=>lr,_addOrOverwriteComponent:()=>cr,_apps:()=>bi,_clearComponents:()=>On,_components:()=>ar,_getProvider:()=>Ut,_registerComponent:()=>ui,_removeServiceInstance:()=>ur,deleteApp:()=>Bn,getApp:()=>Wr,getApps:()=>Xn,initializeApp:()=>fo,onLog:()=>xa,registerVersion:()=>dr,setLogLevel:()=>Xo});var C=He(861),ee=He(537),L=He(879),Ne=He(58);const yt=($,O)=>O.some(de=>$ instanceof de);let fn,Pn;const oe=new WeakMap,pe=new WeakMap,Oe=new WeakMap,ot=new WeakMap,kt=new WeakMap;let Xe={get($,O,de){if($ instanceof IDBTransaction){if("done"===O)return pe.get($);if("objectStoreNames"===O)return $.objectStoreNames||Oe.get($);if("store"===O)return de.objectStoreNames[1]?void 0:de.objectStore(de.objectStoreNames[0])}return mt($[O])},set:($,O,de)=>($[O]=de,!0),has:($,O)=>$ instanceof IDBTransaction&&("done"===O||"store"===O)||O in $};function pn($){return"function"==typeof $?function Kn($){return $!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function St(){return Pn||(Pn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes($)?function(...O){return $.apply(zt(this),O),mt(oe.get(this))}:function(...O){return mt($.apply(zt(this),O))}:function(O,...de){const De=$.call(zt(this),O,...de);return Oe.set(De,O.sort?O.sort():[O]),mt(De)}}($):($ instanceof IDBTransaction&&function bt($){if(pe.has($))return;const O=new Promise((de,De)=>{const dt=()=>{$.removeEventListener("complete",gt),$.removeEventListener("error",B),$.removeEventListener("abort",B)},gt=()=>{de(),dt()},B=()=>{De($.error||new DOMException("AbortError","AbortError")),dt()};$.addEventListener("complete",gt),$.addEventListener("error",B),$.addEventListener("abort",B)});pe.set($,O)}($),yt($,function Jt(){return fn||(fn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy($,Xe):$)}function mt($){if($ instanceof IDBRequest)return function Zn($){const O=new Promise((de,De)=>{const dt=()=>{$.removeEventListener("success",gt),$.removeEventListener("error",B)},gt=()=>{de(mt($.result)),dt()},B=()=>{De($.error),dt()};$.addEventListener("success",gt),$.addEventListener("error",B)});return O.then(de=>{de instanceof IDBCursor&&oe.set(de,$)}).catch(()=>{}),kt.set(O,$),O}($);if(ot.has($))return ot.get($);const O=pn($);return O!==$&&(ot.set($,O),kt.set(O,$)),O}const zt=$=>kt.get($),lt=["get","getKey","getAll","getAllKeys","count"],he=["put","add","delete","clear"],xt=new Map;function rn($,O){if(!($ instanceof IDBDatabase)||O in $||"string"!=typeof O)return;if(xt.get(O))return xt.get(O);const de=O.replace(/FromIndex$/,""),De=O!==de,dt=he.includes(de);if(!(de in(De?IDBIndex:IDBObjectStore).prototype)||!dt&&!lt.includes(de))return;const gt=function(){var B=(0,C.Z)(function*(_n,...ke){const ht=this.transaction(_n,dt?"readwrite":"readonly");let Vl=ht.store;return De&&(Vl=Vl.index(ke.shift())),(yield Promise.all([Vl[de](...ke),dt&&ht.done]))[0]});return function(ke){return B.apply(this,arguments)}}();return xt.set(O,gt),gt}!function Je($){Xe=$(Xe)}($=>({...$,get:(O,de,De)=>rn(O,de)||$.get(O,de,De),has:(O,de)=>!!rn(O,de)||$.has(O,de)}));class Tn{constructor(O){this.container=O}getPlatformInfoString(){return this.container.getProviders().map(de=>{if(function kn($){const O=$.getComponent();return"VERSION"===O?.type}(de)){const De=de.getImmediate();return`${De.library}/${De.version}`}return null}).filter(de=>de).join(" ")}}const jr="@firebase/app",Ke=new L.Yd("@firebase/app"),Hr="[DEFAULT]",qr={[jr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},bi=new Map,ar=new Map;function lr($,O){try{$.container.addComponent(O)}catch(de){Ke.debug(`Component ${O.name} failed to register with FirebaseApp ${$.name}`,de)}}function cr($,O){$.container.addOrOverwriteComponent(O)}function ui($){const O=$.name;if(ar.has(O))return Ke.debug(`There were multiple attempts to register component ${O}.`),!1;ar.set(O,$);for(const de of bi.values())lr(de,$);return!0}function Ut($,O){const de=$.container.getProvider("heartbeat").getImmediate({optional:!0});return de&&de.triggerHeartbeat(),$.container.getProvider(O)}function ur($,O,de=Hr){Ut($,O).clearInstance(de)}function On(){ar.clear()}const gn=new Ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Dn{constructor(O,de,De){this._isDeleted=!1,this._options=Object.assign({},O),this._config=Object.assign({},de),this._name=de.name,this._automaticDataCollectionEnabled=de.automaticDataCollectionEnabled,this._container=De,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(O){this.checkDestroyed(),this._automaticDataCollectionEnabled=O}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(O){this._isDeleted=O}checkDestroyed(){if(this.isDeleted)throw gn.create("app-deleted",{appName:this._name})}}const ho="10.7.1";function fo($,O={}){let de=$;"object"!=typeof O&&(O={name:O});const De=Object.assign({name:Hr,automaticDataCollectionEnabled:!1},O),dt=De.name;if("string"!=typeof dt||!dt)throw gn.create("bad-app-name",{appName:String(dt)});if(de||(de=(0,Ne.aH)()),!de)throw gn.create("no-options");const gt=bi.get(dt);if(gt){if((0,Ne.vZ)(de,gt.options)&&(0,Ne.vZ)(De,gt.config))return gt;throw gn.create("duplicate-app",{appName:dt})}const B=new ee.H0(dt);for(const ke of ar.values())B.addComponent(ke);const _n=new Dn(de,De,B);return bi.set(dt,_n),_n}function Wr($=Hr){const O=bi.get($);if(!O&&$===Hr&&(0,Ne.aH)())return fo();if(!O)throw gn.create("no-app",{appName:$});return O}function Xn(){return Array.from(bi.values())}function Bn($){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,C.Z)(function*($){const O=$.name;bi.has(O)&&(bi.delete(O),yield Promise.all($.container.getProviders().map(de=>de.delete())),$.isDeleted=!0)})).apply(this,arguments)}function dr($,O,de){var De;let dt=null!==(De=qr[$])&&void 0!==De?De:$;de&&(dt+=`-${de}`);const gt=dt.match(/\s|\//),B=O.match(/\s|\//);if(gt||B){const _n=[`Unable to register library "${dt}" with version "${O}":`];return gt&&_n.push(`library name "${dt}" contains illegal characters (whitespace or "/")`),gt&&B&&_n.push("and"),B&&_n.push(`version name "${O}" contains illegal characters (whitespace or "/")`),void Ke.warn(_n.join(" "))}ui(new ee.wA(`${dt}-version`,()=>({library:dt,version:O}),"VERSION"))}function xa($,O){if(null!==$&&"function"!=typeof $)throw gn.create("invalid-log-argument");(0,L.Am)($,O)}function Xo($){(0,L.Ub)($)}const Fs="firebase-heartbeat-database",po=1,P="firebase-heartbeat-store";let D=null;function b(){return D||(D=function or($,O,{blocked:de,upgrade:De,blocking:dt,terminated:gt}={}){const B=indexedDB.open($,O),_n=mt(B);return De&&B.addEventListener("upgradeneeded",ke=>{De(mt(B.result),ke.oldVersion,ke.newVersion,mt(B.transaction),ke)}),de&&B.addEventListener("blocked",ke=>de(ke.oldVersion,ke.newVersion,ke)),_n.then(ke=>{gt&&ke.addEventListener("close",()=>gt()),dt&&ke.addEventListener("versionchange",ht=>dt(ht.oldVersion,ht.newVersion,ht))}).catch(()=>{}),_n}(Fs,po,{upgrade:($,O)=>{0===O&&$.createObjectStore(P)}}).catch($=>{throw gn.create("idb-open",{originalErrorMessage:$.message})})),D}function y(){return(y=(0,C.Z)(function*($){try{return yield(yield b()).transaction(P).objectStore(P).get(Re($))}catch(O){if(O instanceof Ne.ZR)Ke.warn(O.message);else{const de=gn.create("idb-get",{originalErrorMessage:O?.message});Ke.warn(de.message)}}})).apply(this,arguments)}function M($,O){return te.apply(this,arguments)}function te(){return(te=(0,C.Z)(function*($,O){try{const De=(yield b()).transaction(P,"readwrite");yield De.objectStore(P).put(O,Re($)),yield De.done}catch(de){if(de instanceof Ne.ZR)Ke.warn(de.message);else{const De=gn.create("idb-set",{originalErrorMessage:de?.message});Ke.warn(De.message)}}})).apply(this,arguments)}function Re($){return`${$.name}!${$.options.appId}`}class Rt{constructor(O){this.container=O,this._heartbeatsCache=null;const de=this.container.getProvider("app").getImmediate();this._storage=new Le(de),this._heartbeatsCachePromise=this._storage.read().then(De=>(this._heartbeatsCache=De,De))}triggerHeartbeat(){var O=this;return(0,C.Z)(function*(){var de,De;const gt=O.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),B=Ie();if((null!=(null===(de=O._heartbeatsCache)||void 0===de?void 0:de.heartbeats)||(O._heartbeatsCache=yield O._heartbeatsCachePromise,null!=(null===(De=O._heartbeatsCache)||void 0===De?void 0:De.heartbeats)))&&O._heartbeatsCache.lastSentHeartbeatDate!==B&&!O._heartbeatsCache.heartbeats.some(_n=>_n.date===B))return O._heartbeatsCache.heartbeats.push({date:B,agent:gt}),O._heartbeatsCache.heartbeats=O._heartbeatsCache.heartbeats.filter(_n=>{const ke=new Date(_n.date).valueOf();return Date.now()-ke<=2592e6}),O._storage.overwrite(O._heartbeatsCache)})()}getHeartbeatsHeader(){var O=this;return(0,C.Z)(function*(){var de;if(null===O._heartbeatsCache&&(yield O._heartbeatsCachePromise),null==(null===(de=O._heartbeatsCache)||void 0===de?void 0:de.heartbeats)||0===O._heartbeatsCache.heartbeats.length)return"";const De=Ie(),{heartbeatsToSend:dt,unsentEntries:gt}=function qt($,O=1024){const de=[];let De=$.slice();for(const dt of $){const gt=de.find(B=>B.agent===dt.agent);if(gt){if(gt.dates.push(dt.date),oi(de)>O){gt.dates.pop();break}}else if(de.push({agent:dt.agent,dates:[dt.date]}),oi(de)>O){de.pop();break}De=De.slice(1)}return{heartbeatsToSend:de,unsentEntries:De}}(O._heartbeatsCache.heartbeats),B=(0,Ne.L)(JSON.stringify({version:2,heartbeats:dt}));return O._heartbeatsCache.lastSentHeartbeatDate=De,gt.length>0?(O._heartbeatsCache.heartbeats=gt,yield O._storage.overwrite(O._heartbeatsCache)):(O._heartbeatsCache.heartbeats=[],O._storage.overwrite(O._heartbeatsCache)),B})()}}function Ie(){return(new Date).toISOString().substring(0,10)}class Le{constructor(O){this.app=O,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,C.Z)(function*(){return!!(0,Ne.hl)()&&(0,Ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var O=this;return(0,C.Z)(function*(){if(yield O._canUseIndexedDBPromise){const De=yield function I($){return y.apply(this,arguments)}(O.app);return De?.heartbeats?De:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(O){var de=this;return(0,C.Z)(function*(){var De;if(yield de._canUseIndexedDBPromise){const gt=yield de.read();return M(de.app,{lastSentHeartbeatDate:null!==(De=O.lastSentHeartbeatDate)&&void 0!==De?De:gt.lastSentHeartbeatDate,heartbeats:O.heartbeats})}})()}add(O){var de=this;return(0,C.Z)(function*(){var De;if(yield de._canUseIndexedDBPromise){const gt=yield de.read();return M(de.app,{lastSentHeartbeatDate:null!==(De=O.lastSentHeartbeatDate)&&void 0!==De?De:gt.lastSentHeartbeatDate,heartbeats:[...gt.heartbeats,...O.heartbeats]})}})()}}function oi($){return(0,Ne.L)(JSON.stringify({version:2,heartbeats:$})).length}!function Ls($){ui(new ee.wA("platform-logger",O=>new Tn(O),"PRIVATE")),ui(new ee.wA("heartbeat",O=>new Rt(O),"PRIVATE")),dr(jr,"0.9.25",$),dr(jr,"0.9.25","esm2017"),dr("fire-js","")}("")},537:(so,Gn,He)=>{He.d(Gn,{H0:()=>Jt,wA:()=>L});var C=He(861),ee=He(58);class L{constructor(oe,pe,Oe){this.name=oe,this.instanceFactory=pe,this.type=Oe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(oe){return this.instantiationMode=oe,this}setMultipleInstances(oe){return this.multipleInstances=oe,this}setServiceProps(oe){return this.serviceProps=oe,this}setInstanceCreatedCallback(oe){return this.onInstanceCreated=oe,this}}const Ne="[DEFAULT]";class yt{constructor(oe,pe){this.name=oe,this.container=pe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(oe){const pe=this.normalizeInstanceIdentifier(oe);if(!this.instancesDeferred.has(pe)){const Oe=new ee.BH;if(this.instancesDeferred.set(pe,Oe),this.isInitialized(pe)||this.shouldAutoInitialize())try{const ot=this.getOrInitializeService({instanceIdentifier:pe});ot&&Oe.resolve(ot)}catch{}}return this.instancesDeferred.get(pe).promise}getImmediate(oe){var pe;const Oe=this.normalizeInstanceIdentifier(oe?.identifier),ot=null!==(pe=oe?.optional)&&void 0!==pe&&pe;if(!this.isInitialized(Oe)&&!this.shouldAutoInitialize()){if(ot)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Oe})}catch(kt){if(ot)return null;throw kt}}getComponent(){return this.component}setComponent(oe){if(oe.name!==this.name)throw Error(`Mismatching Component ${oe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=oe,this.shouldAutoInitialize()){if(function Pn(St){return"EAGER"===St.instantiationMode}(oe))try{this.getOrInitializeService({instanceIdentifier:Ne})}catch{}for(const[pe,Oe]of this.instancesDeferred.entries()){const ot=this.normalizeInstanceIdentifier(pe);try{const kt=this.getOrInitializeService({instanceIdentifier:ot});Oe.resolve(kt)}catch{}}}}clearInstance(oe=Ne){this.instancesDeferred.delete(oe),this.instancesOptions.delete(oe),this.instances.delete(oe)}delete(){var oe=this;return(0,C.Z)(function*(){const pe=Array.from(oe.instances.values());yield Promise.all([...pe.filter(Oe=>"INTERNAL"in Oe).map(Oe=>Oe.INTERNAL.delete()),...pe.filter(Oe=>"_delete"in Oe).map(Oe=>Oe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(oe=Ne){return this.instances.has(oe)}getOptions(oe=Ne){return this.instancesOptions.get(oe)||{}}initialize(oe={}){const{options:pe={}}=oe,Oe=this.normalizeInstanceIdentifier(oe.instanceIdentifier);if(this.isInitialized(Oe))throw Error(`${this.name}(${Oe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ot=this.getOrInitializeService({instanceIdentifier:Oe,options:pe});for(const[kt,Zn]of this.instancesDeferred.entries())Oe===this.normalizeInstanceIdentifier(kt)&&Zn.resolve(ot);return ot}onInit(oe,pe){var Oe;const ot=this.normalizeInstanceIdentifier(pe),kt=null!==(Oe=this.onInitCallbacks.get(ot))&&void 0!==Oe?Oe:new Set;kt.add(oe),this.onInitCallbacks.set(ot,kt);const Zn=this.instances.get(ot);return Zn&&oe(Zn,ot),()=>{kt.delete(oe)}}invokeOnInitCallbacks(oe,pe){const Oe=this.onInitCallbacks.get(pe);if(Oe)for(const ot of Oe)try{ot(oe,pe)}catch{}}getOrInitializeService({instanceIdentifier:oe,options:pe={}}){let Oe=this.instances.get(oe);if(!Oe&&this.component&&(Oe=this.component.instanceFactory(this.container,{instanceIdentifier:(St=oe,St===Ne?void 0:St),options:pe}),this.instances.set(oe,Oe),this.instancesOptions.set(oe,pe),this.invokeOnInitCallbacks(Oe,oe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,oe,Oe)}catch{}var St;return Oe||null}normalizeInstanceIdentifier(oe=Ne){return this.component?this.component.multipleInstances?oe:Ne:oe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Jt{constructor(oe){this.name=oe,this.providers=new Map}addComponent(oe){const pe=this.getProvider(oe.name);if(pe.isComponentSet())throw new Error(`Component ${oe.name} has already been registered with ${this.name}`);pe.setComponent(oe)}addOrOverwriteComponent(oe){this.getProvider(oe.name).isComponentSet()&&this.providers.delete(oe.name),this.addComponent(oe)}getProvider(oe){if(this.providers.has(oe))return this.providers.get(oe);const pe=new yt(oe,this);return this.providers.set(oe,pe),pe}getProviders(){return Array.from(this.providers.values())}}},879:(so,Gn,He)=>{He.d(Gn,{Am:()=>St,Ub:()=>Jt,Yd:()=>Pn,in:()=>ee});const C=[];var ee=function(oe){return oe[oe.DEBUG=0]="DEBUG",oe[oe.VERBOSE=1]="VERBOSE",oe[oe.INFO=2]="INFO",oe[oe.WARN=3]="WARN",oe[oe.ERROR=4]="ERROR",oe[oe.SILENT=5]="SILENT",oe}(ee||{});const L={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},Ne=ee.INFO,yt={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},fn=(oe,pe,...Oe)=>{if(pe<oe.logLevel)return;const ot=(new Date).toISOString(),kt=yt[pe];if(!kt)throw new Error(`Attempted to log a message with an invalid logType (value: ${pe})`);console[kt](`[${ot}]  ${oe.name}:`,...Oe)};class Pn{constructor(pe){this.name=pe,this._logLevel=Ne,this._logHandler=fn,this._userLogHandler=null,C.push(this)}get logLevel(){return this._logLevel}set logLevel(pe){if(!(pe in ee))throw new TypeError(`Invalid value "${pe}" assigned to \`logLevel\``);this._logLevel=pe}setLogLevel(pe){this._logLevel="string"==typeof pe?L[pe]:pe}get logHandler(){return this._logHandler}set logHandler(pe){if("function"!=typeof pe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=pe}get userLogHandler(){return this._userLogHandler}set userLogHandler(pe){this._userLogHandler=pe}debug(...pe){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...pe),this._logHandler(this,ee.DEBUG,...pe)}log(...pe){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...pe),this._logHandler(this,ee.VERBOSE,...pe)}info(...pe){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...pe),this._logHandler(this,ee.INFO,...pe)}warn(...pe){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...pe),this._logHandler(this,ee.WARN,...pe)}error(...pe){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...pe),this._logHandler(this,ee.ERROR,...pe)}}function Jt(oe){C.forEach(pe=>{pe.setLogLevel(oe)})}function St(oe,pe){for(const Oe of C){let ot=null;pe&&pe.level&&(ot=L[pe.level]),Oe.userLogHandler=null===oe?null:(kt,Zn,...bt)=>{const Xe=bt.map(Je=>{if(null==Je)return null;if("string"==typeof Je)return Je;if("number"==typeof Je||"boolean"==typeof Je)return Je.toString();if(Je instanceof Error)return Je.message;try{return JSON.stringify(Je)}catch{return null}}).filter(Je=>Je).join(" ");Zn>=(ot??kt.logLevel)&&oe({level:ee[Zn].toLowerCase(),message:Xe,args:bt,type:kt.name})}}}},365:(so,Gn,He)=>{He.r(Gn);var C=He(861),ee=He(106),L=He(217),Ne=He(58),Pn=(He(534),He(879),He(537));function Jt(){return window}function pe(){return pe=(0,C.Z)(function*(b,I,y){var M;const{BuildInfo:te}=Jt();(0,L.au)(I.sessionId,"AuthEvent did not contain a session ID");const Re=yield function Je(b){return Kn.apply(this,arguments)}(I.sessionId),Ae={};return(0,L.av)()?Ae.ibi=te.packageName:(0,L.aw)()?Ae.apn=te.packageName:(0,L.ax)(b,"operation-not-supported-in-this-environment"),te.displayName&&(Ae.appDisplayName=te.displayName),Ae.sessionId=Re,(0,L.ay)(b,y,I.type,void 0,null!==(M=I.eventId)&&void 0!==M?M:void 0,Ae)}),pe.apply(this,arguments)}function ot(){return(ot=(0,C.Z)(function*(b){const{BuildInfo:I}=Jt(),y={};(0,L.av)()?y.iosBundleId=I.packageName:(0,L.aw)()?y.androidPackageName=I.packageName:(0,L.ax)(b,"operation-not-supported-in-this-environment"),yield(0,L.az)(b,y)})).apply(this,arguments)}function bt(){return(bt=(0,C.Z)(function*(b,I,y){const{cordova:M}=Jt();let te=()=>{};try{yield new Promise((Re,Ae)=>{let Ge=null;function Rt(){var Le;Re();const oi=null===(Le=M.plugins.browsertab)||void 0===Le?void 0:Le.close;"function"==typeof oi&&oi(),"function"==typeof y?.close&&y.close()}function Ie(){Ge||(Ge=window.setTimeout(()=>{Ae((0,L.aB)(b,"redirect-cancelled-by-user"))},2e3))}function qt(){"visible"===document?.visibilityState&&Ie()}I.addPassiveListener(Rt),document.addEventListener("resume",Ie,!1),(0,L.aw)()&&document.addEventListener("visibilitychange",qt,!1),te=()=>{I.removePassiveListener(Rt),document.removeEventListener("resume",Ie,!1),document.removeEventListener("visibilitychange",qt,!1),Ge&&window.clearTimeout(Ge)}})}finally{te()}})).apply(this,arguments)}function Kn(){return(Kn=(0,C.Z)(function*(b){const I=function pn(b){if((0,L.au)(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(b);const I=new ArrayBuffer(b.length),y=new Uint8Array(I);for(let M=0;M<b.length;M++)y[M]=b.charCodeAt(M);return y}(b),y=yield crypto.subtle.digest("SHA-256",I);return Array.from(new Uint8Array(y)).map(te=>te.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class zt extends L.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(I=>{this.resolveInialized=I})}addPassiveListener(I){this.passiveListeners.add(I)}removePassiveListener(I){this.passiveListeners.delete(I)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(I){return this.resolveInialized(),this.passiveListeners.forEach(y=>y(I)),super.onEvent(I)}initialized(){var I=this;return(0,C.Z)(function*(){yield I.initPromise})()}}function lt(b){return he.apply(this,arguments)}function he(){return(he=(0,C.Z)(function*(b){const I=yield Tn()._get(kn(b));return I&&(yield Tn()._remove(kn(b))),I})).apply(this,arguments)}function rn(){const b=[];for(let y=0;y<20;y++){const M=Math.floor(62*Math.random());b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(M))}return b.join("")}function Tn(){return(0,L.aE)(L.b)}function kn(b){return(0,L.aF)("authEvent",b.config.apiKey,b.name)}function Ke(b){if(!b?.includes("?"))return{};const[I,...y]=b.split("?");return(0,Ne.zd)(y.join("?"))}const Q=class ao{constructor(){this._redirectPersistence=L.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=L.aG,this._overrideRedirectResult=L.aH}_initialize(I){var y=this;return(0,C.Z)(function*(){const M=I._key();let te=y.eventManagers.get(M);return te||(te=new zt(I),y.eventManagers.set(M,te),y.attachCallbackListeners(I,te)),te})()}_openPopup(I){(0,L.ax)(I,"operation-not-supported-in-this-environment")}_openRedirect(I,y,M,te){var Re=this;return(0,C.Z)(function*(){!function Xe(b){var I,y,M,te,Re,Ae,Ge,Rt,Ie,qt;const Le=Jt();(0,L.aC)("function"==typeof(null===(I=Le?.universalLinks)||void 0===I?void 0:I.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,L.aC)(typeof(null===(y=Le?.BuildInfo)||void 0===y?void 0:y.packageName)<"u",b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,L.aC)("function"==typeof(null===(Re=null===(te=null===(M=Le?.cordova)||void 0===M?void 0:M.plugins)||void 0===te?void 0:te.browsertab)||void 0===Re?void 0:Re.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.aC)("function"==typeof(null===(Rt=null===(Ge=null===(Ae=Le?.cordova)||void 0===Ae?void 0:Ae.plugins)||void 0===Ge?void 0:Ge.browsertab)||void 0===Rt?void 0:Rt.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.aC)("function"==typeof(null===(qt=null===(Ie=Le?.cordova)||void 0===Ie?void 0:Ie.InAppBrowser)||void 0===qt?void 0:qt.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(I);const Ae=yield Re._initialize(I);yield Ae.initialized(),Ae.resetRedirect(),(0,L.aI)(),yield Re._originValidation(I);const Ge=function or(b,I,y=null){return{type:I,eventId:y,urlResponse:null,sessionId:rn(),postBody:null,tenantId:b.tenantId,error:(0,L.aB)(b,"no-auth-event")}}(I,M,te);yield function Vn(b,I){return Tn()._set(kn(b),I)}(I,Ge);const Rt=yield function oe(b,I,y){return pe.apply(this,arguments)}(I,Ge,y),Ie=yield function kt(b){const{cordova:I}=Jt();return new Promise(y=>{I.plugins.browsertab.isAvailable(M=>{let te=null;M?I.plugins.browsertab.openUrl(b):te=I.InAppBrowser.open(b,(0,L.aA)()?"_blank":"_system","location=yes"),y(te)})})}(Rt);return function Zn(b,I,y){return bt.apply(this,arguments)}(I,Ae,Ie)})()}_isIframeWebStorageSupported(I,y){throw new Error("Method not implemented.")}_originValidation(I){const y=I._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Oe(b){return ot.apply(this,arguments)}(I)),this.originValidationPromises[y]}attachCallbackListeners(I,y){const{universalLinks:M,handleOpenURL:te,BuildInfo:Re}=Jt(),Ae=setTimeout((0,C.Z)(function*(){yield lt(I),y.onEvent(J())}),500),Ge=function(){var qt=(0,C.Z)(function*(Le){clearTimeout(Ae);const oi=yield lt(I);let Ls=null;oi&&Le?.url&&(Ls=function xt(b,I){var y,M;const te=function zr(b){const I=Ke(b),y=I.link?decodeURIComponent(I.link):void 0,M=Ke(y).link,te=I.deep_link_id?decodeURIComponent(I.deep_link_id):void 0;return Ke(te).link||te||M||y||b}(I);if(te.includes("/__/auth/callback")){const Re=Ke(te),Ae=Re.firebaseError?function jr(b){try{return JSON.parse(b)}catch{return null}}(decodeURIComponent(Re.firebaseError)):null,Ge=null===(M=null===(y=Ae?.code)||void 0===y?void 0:y.split("auth/"))||void 0===M?void 0:M[1],Rt=Ge?(0,L.aB)(Ge):null;return Rt?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:Rt,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:te,postBody:null}}return null}(oi,Le.url)),y.onEvent(Ls||J())});return function(oi){return qt.apply(this,arguments)}}();typeof M<"u"&&"function"==typeof M.subscribe&&M.subscribe(null,Ge);const Rt=te,Ie=`${Re.packageName.toLowerCase()}://`;Jt().handleOpenURL=function(){var qt=(0,C.Z)(function*(Le){if(Le.toLowerCase().startsWith(Ie)&&Ge({url:Le}),"function"==typeof Rt)try{Rt(Le)}catch(oi){console.error(oi)}});return function(Le){return qt.apply(this,arguments)}}()}};function J(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,L.aB)("no-auth-event")}}function ye(){var b;return(null===(b=self?.location)||void 0===b?void 0:b.protocol)||null}function ve(b=(0,Ne.z$)()){return!("file:"!==ye()&&"ionic:"!==ye()&&"capacitor:"!==ye()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function mn(){try{const b=self.localStorage,I=L.aN();if(b)return b.setItem(I,"1"),b.removeItem(I),!function Kt(b=(0,Ne.z$)()){return function Ct(){return(0,Ne.w1)()&&11===document?.documentMode}()||function sn(b=(0,Ne.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,Ne.hl)()}catch{return Yn()&&(0,Ne.hl)()}return!1}function Yn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Qn(){return(function pt(){return"http:"===ye()||"https:"===ye()}()||(0,Ne.ru)()||ve())&&!function je(){return(0,Ne.b$)()||(0,Ne.UG)()}()&&mn()&&!Yn()}function ci(){return ve()&&typeof document<"u"}function $r(){return($r=(0,C.Z)(function*(){return!!ci()&&new Promise(b=>{const I=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(I),b(!0)})})})).apply(this,arguments)}const Et={LOCAL:"local",NONE:"none",SESSION:"session"},co=L.aC,uo="persistence";function qr(b){return bi.apply(this,arguments)}function bi(){return(bi=(0,C.Z)(function*(b){yield b._initializationPromise;const I=lr(),y=L.aF(uo,b.config.apiKey,b.name);I&&I.setItem(y,b._getPersistence())})).apply(this,arguments)}function lr(){var b;try{return(null===(b=function lo(){return typeof window<"u"?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch{return null}}const cr=L.aC;class ui{constructor(){this.browserResolver=L.aE(L.k),this.cordovaResolver=L.aE(Q),this.underlyingResolver=null,this._redirectPersistence=L.a,this._completeRedirectFn=L.aG,this._overrideRedirectResult=L.aH}_initialize(I){var y=this;return(0,C.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._initialize(I)})()}_openPopup(I,y,M,te){var Re=this;return(0,C.Z)(function*(){return yield Re.selectUnderlyingResolver(),Re.assertedUnderlyingResolver._openPopup(I,y,M,te)})()}_openRedirect(I,y,M,te){var Re=this;return(0,C.Z)(function*(){return yield Re.selectUnderlyingResolver(),Re.assertedUnderlyingResolver._openRedirect(I,y,M,te)})()}_isIframeWebStorageSupported(I,y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(I,y)}_originValidation(I){return this.assertedUnderlyingResolver._originValidation(I)}get _shouldInitProactively(){return ci()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return cr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var I=this;return(0,C.Z)(function*(){if(I.underlyingResolver)return;const y=yield function Wi(){return $r.apply(this,arguments)}();I.underlyingResolver=y?I.cordovaResolver:I.browserResolver})()}}function Ut(b){return b.unwrap()}function On(b){return gn(b)}function gn(b){const{_tokenResponse:I}=b instanceof Ne.ZR?b.customData:b;if(!I)return null;if(!(b instanceof Ne.ZR)&&"temporaryProof"in I&&"phoneNumber"in I)return L.P.credentialFromResult(b);const y=I.providerId;if(!y||y===L.p.PASSWORD)return null;let M;switch(y){case L.p.GOOGLE:M=L.X;break;case L.p.FACEBOOK:M=L.W;break;case L.p.GITHUB:M=L.Y;break;case L.p.TWITTER:M=L.$;break;default:const{oauthIdToken:te,oauthAccessToken:Re,oauthTokenSecret:Ae,pendingToken:Ge,nonce:Rt}=I;return Re||Ae||te||Ge?Ge?y.startsWith("saml.")?L.aQ._create(y,Ge):L.N._fromParams({providerId:y,signInMethod:y,pendingToken:Ge,idToken:te,accessToken:Re}):new L.Z(y).credential({idToken:te,accessToken:Re,rawNonce:Rt}):null}return b instanceof Ne.ZR?M.credentialFromError(b):M.credentialFromResult(b)}function Dn(b,I){return I.catch(y=>{throw y instanceof Ne.ZR&&function Ll(b,I){var y;const M=null===(y=I.customData)||void 0===y?void 0:y._tokenResponse;if("auth/multi-factor-auth-required"===I?.code)I.resolver=new Wr(b,L.as(b,I));else if(M){const te=gn(I),Re=I;te&&(Re.credential=te,Re.tenantId=M.tenantId||void 0,Re.email=M.email||void 0,Re.phoneNumber=M.phoneNumber||void 0)}}(b,y),y}).then(y=>{const te=y.user;return{operationType:y.operationType,credential:On(y),additionalUserInfo:L.aq(y),user:Xn.getOrCreate(te)}})}function ho(b,I){return fo.apply(this,arguments)}function fo(){return(fo=(0,C.Z)(function*(b,I){const y=yield I;return{verificationId:y.verificationId,confirm:M=>Dn(b,y.confirm(M))}})).apply(this,arguments)}class Wr{constructor(I,y){this.resolver=y,this.auth=function ur(b){return b.wrapped()}(I)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(I){return Dn(Ut(this.auth),this.resolver.resolveSignIn(I))}}class Xn{constructor(I){this._delegate=I,this.multiFactor=L.at(I)}static getOrCreate(I){return Xn.USER_MAP.has(I)||Xn.USER_MAP.set(I,new Xn(I)),Xn.USER_MAP.get(I)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(I){return this._delegate.getIdTokenResult(I)}getIdToken(I){return this._delegate.getIdToken(I)}linkAndRetrieveDataWithCredential(I){return this.linkWithCredential(I)}linkWithCredential(I){var y=this;return(0,C.Z)(function*(){return Dn(y.auth,L.a2(y._delegate,I))})()}linkWithPhoneNumber(I,y){var M=this;return(0,C.Z)(function*(){return ho(M.auth,L.l(M._delegate,I,y))})()}linkWithPopup(I){var y=this;return(0,C.Z)(function*(){return Dn(y.auth,L.d(y._delegate,I,ui))})()}linkWithRedirect(I){var y=this;return(0,C.Z)(function*(){return yield qr(L.aJ(y.auth)),L.g(y._delegate,I,ui)})()}reauthenticateAndRetrieveDataWithCredential(I){return this.reauthenticateWithCredential(I)}reauthenticateWithCredential(I){var y=this;return(0,C.Z)(function*(){return Dn(y.auth,L.a3(y._delegate,I))})()}reauthenticateWithPhoneNumber(I,y){return ho(this.auth,L.r(this._delegate,I,y))}reauthenticateWithPopup(I){return Dn(this.auth,L.e(this._delegate,I,ui))}reauthenticateWithRedirect(I){var y=this;return(0,C.Z)(function*(){return yield qr(L.aJ(y.auth)),L.h(y._delegate,I,ui)})()}sendEmailVerification(I){return L.ag(this._delegate,I)}unlink(I){var y=this;return(0,C.Z)(function*(){return yield L.ap(y._delegate,I),y})()}updateEmail(I){return L.al(this._delegate,I)}updatePassword(I){return L.am(this._delegate,I)}updatePhoneNumber(I){return L.u(this._delegate,I)}updateProfile(I){return L.ak(this._delegate,I)}verifyBeforeUpdateEmail(I,y){return L.ah(this._delegate,I,y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Xn.USER_MAP=new WeakMap;const Bn=L.aC;let Ei=(()=>{class b{constructor(y,M){if(this.app=y,M.isInitialized())return this._delegate=M.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:te}=y.options;Bn(te,"invalid-api-key",{appName:y.name}),Bn(te,"invalid-api-key",{appName:y.name});const Re=typeof window<"u"?ui:void 0;this._delegate=M.initialize({options:{persistence:xa(te,y.name),popupRedirectResolver:Re}}),this._delegate._updateErrorMap(L.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Xn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(y){this._delegate.languageCode=y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(y){this._delegate.tenantId=y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(y,M){L.K(this._delegate,y,M)}applyActionCode(y){return L.a7(this._delegate,y)}checkActionCode(y){return L.a8(this._delegate,y)}confirmPasswordReset(y,M){return L.a6(this._delegate,y,M)}createUserWithEmailAndPassword(y,M){var te=this;return(0,C.Z)(function*(){return Dn(te._delegate,L.aa(te._delegate,y,M))})()}fetchProvidersForEmail(y){return this.fetchSignInMethodsForEmail(y)}fetchSignInMethodsForEmail(y){return L.af(this._delegate,y)}isSignInWithEmailLink(y){return L.ad(this._delegate,y)}getRedirectResult(){var y=this;return(0,C.Z)(function*(){Bn(Qn(),y._delegate,"operation-not-supported-in-this-environment");const M=yield L.j(y._delegate,ui);return M?Dn(y._delegate,Promise.resolve(M)):{credential:null,user:null}})()}addFrameworkForLogging(y){!function W(b,I){(0,L.aJ)(b)._logFramework(I)}(this._delegate,y)}onAuthStateChanged(y,M,te){const{next:Re,error:Ae,complete:Ge}=dr(y,M,te);return this._delegate.onAuthStateChanged(Re,Ae,Ge)}onIdTokenChanged(y,M,te){const{next:Re,error:Ae,complete:Ge}=dr(y,M,te);return this._delegate.onIdTokenChanged(Re,Ae,Ge)}sendSignInLinkToEmail(y,M){return L.ac(this._delegate,y,M)}sendPasswordResetEmail(y,M){return L.a5(this._delegate,y,M||void 0)}setPersistence(y){var M=this;return(0,C.Z)(function*(){let te;switch(function Hr(b,I){co(Object.values(Et).includes(I),b,"invalid-persistence-type"),(0,Ne.b$)()?co(I!==Et.SESSION,b,"unsupported-persistence-type"):(0,Ne.UG)()?co(I===Et.NONE,b,"unsupported-persistence-type"):Yn()?co(I===Et.NONE||I===Et.LOCAL&&(0,Ne.hl)(),b,"unsupported-persistence-type"):co(I===Et.NONE||mn(),b,"unsupported-persistence-type")}(M._delegate,y),y){case Et.SESSION:te=L.a;break;case Et.LOCAL:te=(yield L.aE(L.i)._isAvailable())?L.i:L.b;break;case Et.NONE:te=L.U;break;default:return L.ax("argument-error",{appName:M._delegate.name})}return M._delegate.setPersistence(te)})()}signInAndRetrieveDataWithCredential(y){return this.signInWithCredential(y)}signInAnonymously(){return Dn(this._delegate,L.a0(this._delegate))}signInWithCredential(y){return Dn(this._delegate,L.a1(this._delegate,y))}signInWithCustomToken(y){return Dn(this._delegate,L.a4(this._delegate,y))}signInWithEmailAndPassword(y,M){return Dn(this._delegate,L.ab(this._delegate,y,M))}signInWithEmailLink(y,M){return Dn(this._delegate,L.ae(this._delegate,y,M))}signInWithPhoneNumber(y,M){return ho(this._delegate,L.s(this._delegate,y,M))}signInWithPopup(y){var M=this;return(0,C.Z)(function*(){return Bn(Qn(),M._delegate,"operation-not-supported-in-this-environment"),Dn(M._delegate,L.c(M._delegate,y,ui))})()}signInWithRedirect(y){var M=this;return(0,C.Z)(function*(){return Bn(Qn(),M._delegate,"operation-not-supported-in-this-environment"),yield qr(M._delegate),L.f(M._delegate,y,ui)})()}updateCurrentUser(y){return this._delegate.updateCurrentUser(y)}verifyPasswordResetCode(y){return L.a9(this._delegate,y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=Et,b})();function dr(b,I,y){let M=b;"function"!=typeof b&&({next:M,error:I,complete:y}=b);const te=M;return{next:Ae=>te(Ae&&Xn.getOrCreate(Ae)),error:I,complete:y}}function xa(b,I){const y=function ar(b,I){const y=lr();if(!y)return[];const M=L.aF(uo,b,I);switch(y.getItem(M)){case Et.NONE:return[L.U];case Et.LOCAL:return[L.i,L.a];case Et.SESSION:return[L.a];default:return[]}}(b,I);if(typeof self<"u"&&!y.includes(L.i)&&y.push(L.i),typeof window<"u")for(const M of[L.b,L.a])y.includes(M)||y.push(M);return y.includes(L.U)||y.push(L.U),y}class Xo{constructor(){this.providerId="phone",this._delegate=new L.P(Ut(ee.Z.auth()))}static credential(I,y){return L.P.credential(I,y)}verifyPhoneNumber(I,y){return this._delegate.verifyPhoneNumber(I,y)}unwrap(){return this._delegate}}Xo.PHONE_SIGN_IN_METHOD=L.P.PHONE_SIGN_IN_METHOD,Xo.PROVIDER_ID=L.P.PROVIDER_ID;const Fs=L.aC;class po{constructor(I,y,M=ee.Z.app()){var te;Fs(null===(te=M.options)||void 0===te?void 0:te.apiKey,"invalid-api-key",{appName:M.name}),this._delegate=new L.R(M.auth(),I,y),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function D(b){b.INTERNAL.registerComponent(new Pn.wA("auth-compat",I=>{const y=I.getProvider("app-compat").getImmediate(),M=I.getProvider("auth");return new Ei(y,M)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:L.A.EMAIL_SIGNIN,PASSWORD_RESET:L.A.PASSWORD_RESET,RECOVER_EMAIL:L.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:L.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:L.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:L.A.VERIFY_EMAIL}},EmailAuthProvider:L.V,FacebookAuthProvider:L.W,GithubAuthProvider:L.Y,GoogleAuthProvider:L.X,OAuthProvider:L.Z,SAMLAuthProvider:L._,PhoneAuthProvider:Xo,PhoneMultiFactorGenerator:L.m,RecaptchaVerifier:po,TwitterAuthProvider:L.$,Auth:Ei,AuthCredential:L.L,Error:Ne.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.5.1")}(ee.Z)},861:(so,Gn,He)=>{function C(L,Ne,yt,fn,Pn,Jt,St){try{var oe=L[Jt](St),pe=oe.value}catch(Oe){return void yt(Oe)}oe.done?Ne(pe):Promise.resolve(pe).then(fn,Pn)}function ee(L){return function(){var Ne=this,yt=arguments;return new Promise(function(fn,Pn){var Jt=L.apply(Ne,yt);function St(pe){C(Jt,fn,Pn,St,oe,"next",pe)}function oe(pe){C(Jt,fn,Pn,St,oe,"throw",pe)}St(void 0)})}}He.d(Gn,{Z:()=>ee})},582:(so,Gn,He)=>{function Ne(Q,J){var W={};for(var K in Q)Object.prototype.hasOwnProperty.call(Q,K)&&J.indexOf(K)<0&&(W[K]=Q[K]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var ae=0;for(K=Object.getOwnPropertySymbols(Q);ae<K.length;ae++)J.indexOf(K[ae])<0&&Object.prototype.propertyIsEnumerable.call(Q,K[ae])&&(W[K[ae]]=Q[K[ae]])}return W}function Oe(Q,J,W,K){return new(W||(W=Promise))(function(se,ye){function pt(Ct){try{je(K.next(Ct))}catch(sn){ye(sn)}}function ve(Ct){try{je(K.throw(Ct))}catch(sn){ye(sn)}}function je(Ct){Ct.done?se(Ct.value):function ae(se){return se instanceof W?se:new W(function(ye){ye(se)})}(Ct.value).then(pt,ve)}je((K=K.apply(Q,J||[])).next())})}function mt(Q){return this instanceof mt?(this.v=Q,this):new mt(Q)}function zt(Q,J,W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ae,K=W.apply(Q,J||[]),se=[];return ae={},ye("next"),ye("throw"),ye("return"),ae[Symbol.asyncIterator]=function(){return this},ae;function ye(Kt){K[Kt]&&(ae[Kt]=function(mn){return new Promise(function(Yn,Qn){se.push([Kt,mn,Yn,Qn])>1||pt(Kt,mn)})})}function pt(Kt,mn){try{!function ve(Kt){Kt.value instanceof mt?Promise.resolve(Kt.value.v).then(je,Ct):sn(se[0][2],Kt)}(K[Kt](mn))}catch(Yn){sn(se[0][3],Yn)}}function je(Kt){pt("next",Kt)}function Ct(Kt){pt("throw",Kt)}function sn(Kt,mn){Kt(mn),se.shift(),se.length&&pt(se[0][0],se[0][1])}}function Vn(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var W,J=Q[Symbol.asyncIterator];return J?J.call(Q):(Q=function bt(Q){var J="function"==typeof Symbol&&Symbol.iterator,W=J&&Q[J],K=0;if(W)return W.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&K>=Q.length&&(Q=void 0),{value:Q&&Q[K++],done:!Q}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),W={},K("next"),K("throw"),K("return"),W[Symbol.asyncIterator]=function(){return this},W);function K(se){W[se]=Q[se]&&function(ye){return new Promise(function(pt,ve){!function ae(se,ye,pt,ve){Promise.resolve(ve).then(function(je){se({value:je,done:pt})},ye)}(pt,ve,(ye=Q[se](ye)).done,ye.value)})}}}He.d(Gn,{FC:()=>zt,KL:()=>Vn,_T:()=>Ne,mG:()=>Oe,qq:()=>mt}),"function"==typeof SuppressedError&&SuppressedError}},so=>{so(so.s=401)}]);